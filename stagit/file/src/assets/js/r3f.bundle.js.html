<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>r3f.bundle.js - bitbyte-blog - Unnamed repository; edit this file &#39;description&#39; to name the repository.
</title>
<link rel="icon" type="image/png" href="../../../../favicon.png" />
<link rel="alternate" type="application/atom+xml" title="bitbyte-blog Atom Feed" href="../../../../atom.xml" />
<link rel="alternate" type="application/atom+xml" title="bitbyte-blog Atom Feed (tags)" href="../../../../tags.xml" />
<link rel="stylesheet" type="text/css" href="../../../../style.css" />
</head>
<body>
<table><tr><td><a href="../../../../../"><img src="../../../../logo.png" alt="" width="32" height="32" /></a></td><td><h1>bitbyte-blog</h1><span class="desc">Unnamed repository; edit this file &#39;description&#39; to name the repository.
</span></td></tr><tr><td></td><td>
<a href="../../../../log.html">Log</a> | <a href="../../../../files.html">Files</a> | <a href="../../../../refs.html">Refs</a> | <a href="../../../../file/LICENSE.html">LICENSE</a></td></tr></table>
<hr/>
<div id="content">
<p> r3f.bundle.js (1044523B)</p><hr/><pre id="blob">
<a href="#l1" class="line" id="l1">      1</a> (()=&gt;{var v4=Object.create;var uM=Object.defineProperty;var y4=Object.getOwnPropertyDescriptor;var _4=Object.getOwnPropertyNames;var x4=Object.getPrototypeOf,S4=Object.prototype.hasOwnProperty;var In=(n,t)=&gt;()=&gt;(t||n((t={exports:{}}).exports,t),t.exports),M4=(n,t)=&gt;{for(var e in t)uM(n,e,{get:t[e],enumerable:!0})},E4=(n,t,e,i)=&gt;{if(t&amp;&amp;typeof t==&quot;object&quot;||typeof t==&quot;function&quot;)for(let a of _4(t))!S4.call(n,a)&amp;&amp;a!==e&amp;&amp;uM(n,a,{get:()=&gt;t[a],enumerable:!(i=y4(t,a))||i.enumerable});return n};var Ti=(n,t,e)=&gt;(e=n!=null?v4(x4(n)):{},E4(t||!n||!n.__esModule?uM(e,&quot;default&quot;,{value:n,enumerable:!0}):e,n));var KR=In(Se=&gt;{&quot;use strict&quot;;var fM=Symbol.for(&quot;react.transitional.element&quot;),b4=Symbol.for(&quot;react.portal&quot;),T4=Symbol.for(&quot;react.fragment&quot;),A4=Symbol.for(&quot;react.strict_mode&quot;),R4=Symbol.for(&quot;react.profiler&quot;),C4=Symbol.for(&quot;react.consumer&quot;),w4=Symbol.for(&quot;react.context&quot;),D4=Symbol.for(&quot;react.forward_ref&quot;),U4=Symbol.for(&quot;react.suspense&quot;),N4=Symbol.for(&quot;react.memo&quot;),YR=Symbol.for(&quot;react.lazy&quot;),FR=Symbol.iterator;function O4(n){return n===null||typeof n!=&quot;object&quot;?null:(n=FR&amp;&amp;n[FR]||n[&quot;@@iterator&quot;],typeof n==&quot;function&quot;?n:null)}var WR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kR=Object.assign,ZR={};function Sc(n,t,e){this.props=n,this.context=t,this.refs=ZR,this.updater=e||WR}Sc.prototype.isReactComponent={};Sc.prototype.setState=function(n,t){if(typeof n!=&quot;object&quot;&amp;&amp;typeof n!=&quot;function&quot;&amp;&amp;n!=null)throw Error(&quot;takes an object of state variables to update or a function which returns an object of state variables.&quot;);this.updater.enqueueSetState(this,n,t,&quot;setState&quot;)};Sc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,&quot;forceUpdate&quot;)};function jR(){}jR.prototype=Sc.prototype;function hM(n,t,e){this.props=n,this.context=t,this.refs=ZR,this.updater=e||WR}var dM=hM.prototype=new jR;dM.constructor=hM;kR(dM,Sc.prototype);dM.isPureReactComponent=!0;var VR=Array.isArray,mn={H:null,A:null,T:null,S:null,V:null},QR=Object.prototype.hasOwnProperty;function pM(n,t,e,i,a,s){return e=s.ref,{$$typeof:fM,type:n,key:t,ref:e!==void 0?e:null,props:s}}function L4(n,t){return pM(n.type,t,void 0,void 0,void 0,n.props)}function mM(n){return typeof n==&quot;object&quot;&amp;&amp;n!==null&amp;&amp;n.$$typeof===fM}function z4(n){var t={&quot;=&quot;:&quot;=0&quot;,&quot;:&quot;:&quot;=2&quot;};return&quot;$&quot;+n.replace(/[=:]/g,function(e){return t[e]})}var GR=/\/+/g;function cM(n,t){return typeof n==&quot;object&quot;&amp;&amp;n!==null&amp;&amp;n.key!=null?z4(&quot;&quot;+n.key):t.toString(36)}function XR(){}function B4(n){switch(n.status){case&quot;fulfilled&quot;:return n.value;case&quot;rejected&quot;:throw n.reason;default:switch(typeof n.status==&quot;string&quot;?n.then(XR,XR):(n.status=&quot;pending&quot;,n.then(function(t){n.status===&quot;pending&quot;&amp;&amp;(n.status=&quot;fulfilled&quot;,n.value=t)},function(t){n.status===&quot;pending&quot;&amp;&amp;(n.status=&quot;rejected&quot;,n.reason=t)})),n.status){case&quot;fulfilled&quot;:return n.value;case&quot;rejected&quot;:throw n.reason}}throw n}function xc(n,t,e,i,a){var s=typeof n;(s===&quot;undefined&quot;||s===&quot;boolean&quot;)&amp;&amp;(n=null);var o=!1;if(n===null)o=!0;else switch(s){case&quot;bigint&quot;:case&quot;string&quot;:case&quot;number&quot;:o=!0;break;case&quot;object&quot;:switch(n.$$typeof){case fM:case b4:o=!0;break;case YR:return o=n._init,xc(o(n._payload),t,e,i,a)}}if(o)return a=a(n),o=i===&quot;&quot;?&quot;.&quot;+cM(n,0):i,VR(a)?(e=&quot;&quot;,o!=null&amp;&amp;(e=o.replace(GR,&quot;$&amp;/&quot;)+&quot;/&quot;),xc(a,t,e,&quot;&quot;,function(h){return h})):a!=null&amp;&amp;(mM(a)&amp;&amp;(a=L4(a,e+(a.key==null||n&amp;&amp;n.key===a.key?&quot;&quot;:(&quot;&quot;+a.key).replace(GR,&quot;$&amp;/&quot;)+&quot;/&quot;)+o)),t.push(a)),1;o=0;var u=i===&quot;&quot;?&quot;.&quot;:i+&quot;:&quot;;if(VR(n))for(var c=0;c&lt;n.length;c++)i=n[c],s=u+cM(i,c),o+=xc(i,t,e,s,a);else if(c=O4(n),typeof c==&quot;function&quot;)for(n=c.call(n),c=0;!(i=n.next()).done;)i=i.value,s=u+cM(i,c++),o+=xc(i,t,e,s,a);else if(s===&quot;object&quot;){if(typeof n.then==&quot;function&quot;)return xc(B4(n),t,e,i,a);throw t=String(n),Error(&quot;Objects are not valid as a React child (found: &quot;+(t===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(n).join(&quot;, &quot;)+&quot;}&quot;:t)+&quot;). If you meant to render a collection of children, use an array instead.&quot;)}return o}function w0(n,t,e){if(n==null)return n;var i=[],a=0;return xc(n,i,&quot;&quot;,&quot;&quot;,function(s){return t.call(e,s,a++)}),i}function P4(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&amp;&amp;(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&amp;&amp;(n._status=2,n._result=e)}),n._status===-1&amp;&amp;(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var qR=typeof reportError==&quot;function&quot;?reportError:function(n){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var t=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof n==&quot;object&quot;&amp;&amp;n!==null&amp;&amp;typeof n.message==&quot;string&quot;?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,n);return}console.error(n)};function I4(){}Se.Children={map:w0,forEach:function(n,t,e){w0(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return w0(n,function(){t++}),t},toArray:function(n){return w0(n,function(t){return t})||[]},only:function(n){if(!mM(n))throw Error(&quot;React.Children.only expected to receive a single React element child.&quot;);return n}};Se.Component=Sc;Se.Fragment=T4;Se.Profiler=R4;Se.PureComponent=hM;Se.StrictMode=A4;Se.Suspense=U4;Se.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mn;Se.__COMPILER_RUNTIME={__proto__:null,c:function(n){return mn.H.useMemoCache(n)}};Se.cache=function(n){return function(){return n.apply(null,arguments)}};Se.cloneElement=function(n,t,e){if(n==null)throw Error(&quot;The argument must be a React element, but you passed &quot;+n+&quot;.&quot;);var i=kR({},n.props),a=n.key,s=void 0;if(t!=null)for(o in t.ref!==void 0&amp;&amp;(s=void 0),t.key!==void 0&amp;&amp;(a=&quot;&quot;+t.key),t)!QR.call(t,o)||o===&quot;key&quot;||o===&quot;__self&quot;||o===&quot;__source&quot;||o===&quot;ref&quot;&amp;&amp;t.ref===void 0||(i[o]=t[o]);var o=arguments.length-2;if(o===1)i.children=e;else if(1&lt;o){for(var u=Array(o),c=0;c&lt;o;c++)u[c]=arguments[c+2];i.children=u}return pM(n.type,a,void 0,void 0,s,i)};Se.createContext=function(n){return n={$$typeof:w4,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:C4,_context:n},n};Se.createElement=function(n,t,e){var i,a={},s=null;if(t!=null)for(i in t.key!==void 0&amp;&amp;(s=&quot;&quot;+t.key),t)QR.call(t,i)&amp;&amp;i!==&quot;key&quot;&amp;&amp;i!==&quot;__self&quot;&amp;&amp;i!==&quot;__source&quot;&amp;&amp;(a[i]=t[i]);var o=arguments.length-2;if(o===1)a.children=e;else if(1&lt;o){for(var u=Array(o),c=0;c&lt;o;c++)u[c]=arguments[c+2];a.children=u}if(n&amp;&amp;n.defaultProps)for(i in o=n.defaultProps,o)a[i]===void 0&amp;&amp;(a[i]=o[i]);return pM(n,s,void 0,void 0,null,a)};Se.createRef=function(){return{current:null}};Se.forwardRef=function(n){return{$$typeof:D4,render:n}};Se.isValidElement=mM;Se.lazy=function(n){return{$$typeof:YR,_payload:{_status:-1,_result:n},_init:P4}};Se.memo=function(n,t){return{$$typeof:N4,type:n,compare:t===void 0?null:t}};Se.startTransition=function(n){var t=mn.T,e={};mn.T=e;try{var i=n(),a=mn.S;a!==null&amp;&amp;a(e,i),typeof i==&quot;object&quot;&amp;&amp;i!==null&amp;&amp;typeof i.then==&quot;function&quot;&amp;&amp;i.then(I4,qR)}catch(s){qR(s)}finally{mn.T=t}};Se.unstable_useCacheRefresh=function(){return mn.H.useCacheRefresh()};Se.use=function(n){return mn.H.use(n)};Se.useActionState=function(n,t,e){return mn.H.useActionState(n,t,e)};Se.useCallback=function(n,t){return mn.H.useCallback(n,t)};Se.useContext=function(n){return mn.H.useContext(n)};Se.useDebugValue=function(){};Se.useDeferredValue=function(n,t){return mn.H.useDeferredValue(n,t)};Se.useEffect=function(n,t,e){var i=mn.H;if(typeof e==&quot;function&quot;)throw Error(&quot;useEffect CRUD overload is not enabled in this build of React.&quot;);return i.useEffect(n,t)};Se.useId=function(){return mn.H.useId()};Se.useImperativeHandle=function(n,t,e){return mn.H.useImperativeHandle(n,t,e)};Se.useInsertionEffect=function(n,t){return mn.H.useInsertionEffect(n,t)};Se.useLayoutEffect=function(n,t){return mn.H.useLayoutEffect(n,t)};Se.useMemo=function(n,t){return mn.H.useMemo(n,t)};Se.useOptimistic=function(n,t){return mn.H.useOptimistic(n,t)};Se.useReducer=function(n,t,e){return mn.H.useReducer(n,t,e)};Se.useRef=function(n){return mn.H.useRef(n)};Se.useState=function(n){return mn.H.useState(n)};Se.useSyncExternalStore=function(n,t,e){return mn.H.useSyncExternalStore(n,t,e)};Se.useTransition=function(){return mn.H.useTransition()};Se.version=&quot;19.1.1&quot;});var ja=In((F7,JR)=&gt;{&quot;use strict&quot;;JR.exports=KR()});var lC=In(gn=&gt;{&quot;use strict&quot;;function _M(n,t){var e=n.length;n.push(t);t:for(;0&lt;e;){var i=e-1&gt;&gt;&gt;1,a=n[i];if(0&lt;D0(a,t))n[i]=t,n[e]=a,e=i;else break t}}function Gs(n){return n.length===0?null:n[0]}function N0(n){if(n.length===0)return null;var t=n[0],e=n.pop();if(e!==t){n[0]=e;t:for(var i=0,a=n.length,s=a&gt;&gt;&gt;1;i&lt;s;){var o=2*(i+1)-1,u=n[o],c=o+1,h=n[c];if(0&gt;D0(u,e))c&lt;a&amp;&amp;0&gt;D0(h,u)?(n[i]=h,n[c]=e,i=c):(n[i]=u,n[o]=e,i=o);else if(c&lt;a&amp;&amp;0&gt;D0(h,e))n[i]=h,n[c]=e,i=c;else break t}}return t}function D0(n,t){var e=n.sortIndex-t.sortIndex;return e!==0?e:n.id-t.id}gn.unstable_now=void 0;typeof performance==&quot;object&quot;&amp;&amp;typeof performance.now==&quot;function&quot;?($R=performance,gn.unstable_now=function(){return $R.now()}):(gM=Date,tC=gM.now(),gn.unstable_now=function(){return gM.now()-tC});var $R,gM,tC,Mr=[],xo=[],H4=1,Qa=null,Ai=3,xM=!1,fd=!1,hd=!1,SM=!1,iC=typeof setTimeout==&quot;function&quot;?setTimeout:null,aC=typeof clearTimeout==&quot;function&quot;?clearTimeout:null,eC=typeof setImmediate&lt;&quot;u&quot;?setImmediate:null;function U0(n){for(var t=Gs(xo);t!==null;){if(t.callback===null)N0(xo);else if(t.startTime&lt;=n)N0(xo),t.sortIndex=t.expirationTime,_M(Mr,t);else break;t=Gs(xo)}}function MM(n){if(hd=!1,U0(n),!fd)if(Gs(Mr)!==null)fd=!0,Ec||(Ec=!0,Mc());else{var t=Gs(xo);t!==null&amp;&amp;EM(MM,t.startTime-n)}}var Ec=!1,dd=-1,sC=5,rC=-1;function oC(){return SM?!0:!(gn.unstable_now()-rC&lt;sC)}function vM(){if(SM=!1,Ec){var n=gn.unstable_now();rC=n;var t=!0;try{t:{fd=!1,hd&amp;&amp;(hd=!1,aC(dd),dd=-1),xM=!0;var e=Ai;try{e:{for(U0(n),Qa=Gs(Mr);Qa!==null&amp;&amp;!(Qa.expirationTime&gt;n&amp;&amp;oC());){var i=Qa.callback;if(typeof i==&quot;function&quot;){Qa.callback=null,Ai=Qa.priorityLevel;var a=i(Qa.expirationTime&lt;=n);if(n=gn.unstable_now(),typeof a==&quot;function&quot;){Qa.callback=a,U0(n),t=!0;break e}Qa===Gs(Mr)&amp;&amp;N0(Mr),U0(n)}else N0(Mr);Qa=Gs(Mr)}if(Qa!==null)t=!0;else{var s=Gs(xo);s!==null&amp;&amp;EM(MM,s.startTime-n),t=!1}}break t}finally{Qa=null,Ai=e,xM=!1}t=void 0}}finally{t?Mc():Ec=!1}}}var Mc;typeof eC==&quot;function&quot;?Mc=function(){eC(vM)}:typeof MessageChannel&lt;&quot;u&quot;?(yM=new MessageChannel,nC=yM.port2,yM.port1.onmessage=vM,Mc=function(){nC.postMessage(null)}):Mc=function(){iC(vM,0)};var yM,nC;function EM(n,t){dd=iC(function(){n(gn.unstable_now())},t)}gn.unstable_IdlePriority=5;gn.unstable_ImmediatePriority=1;gn.unstable_LowPriority=4;gn.unstable_NormalPriority=3;gn.unstable_Profiling=null;gn.unstable_UserBlockingPriority=2;gn.unstable_cancelCallback=function(n){n.callback=null};gn.unstable_forceFrameRate=function(n){0&gt;n||125&lt;n?console.error(&quot;forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported&quot;):sC=0&lt;n?Math.floor(1e3/n):5};gn.unstable_getCurrentPriorityLevel=function(){return Ai};gn.unstable_next=function(n){switch(Ai){case 1:case 2:case 3:var t=3;break;default:t=Ai}var e=Ai;Ai=t;try{return n()}finally{Ai=e}};gn.unstable_requestPaint=function(){SM=!0};gn.unstable_runWithPriority=function(n,t){switch(n){case 1:case 2:case 3:case 4:case 5:break;default:n=3}var e=Ai;Ai=n;try{return t()}finally{Ai=e}};gn.unstable_scheduleCallback=function(n,t,e){var i=gn.unstable_now();switch(typeof e==&quot;object&quot;&amp;&amp;e!==null?(e=e.delay,e=typeof e==&quot;number&quot;&amp;&amp;0&lt;e?i+e:i):e=i,n){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return a=e+a,n={id:H4++,callback:t,priorityLevel:n,startTime:e,expirationTime:a,sortIndex:-1},e&gt;i?(n.sortIndex=e,_M(xo,n),Gs(Mr)===null&amp;&amp;n===Gs(xo)&amp;&amp;(hd?(aC(dd),dd=-1):hd=!0,EM(MM,e-i))):(n.sortIndex=a,_M(Mr,n),fd||xM||(fd=!0,Ec||(Ec=!0,Mc()))),n};gn.unstable_shouldYield=oC;gn.unstable_wrapCallback=function(n){var t=Ai;return function(){var e=Ai;Ai=t;try{return n.apply(this,arguments)}finally{Ai=e}}}});var cC=In((G7,uC)=&gt;{&quot;use strict&quot;;uC.exports=lC()});var hC=In(Fi=&gt;{&quot;use strict&quot;;var F4=ja();function fC(n){var t=&quot;https://react.dev/errors/&quot;+n;if(1&lt;arguments.length){t+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var e=2;e&lt;arguments.length;e++)t+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[e])}return&quot;Minified React error #&quot;+n+&quot;; visit &quot;+t+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function So(){}var Hi={d:{f:So,r:function(){throw Error(fC(522))},D:So,C:So,L:So,m:So,X:So,S:So,M:So},p:0,findDOMNode:null},V4=Symbol.for(&quot;react.portal&quot;);function G4(n,t,e){var i=3&lt;arguments.length&amp;&amp;arguments[3]!==void 0?arguments[3]:null;return{$$typeof:V4,key:i==null?null:&quot;&quot;+i,children:n,containerInfo:t,implementation:e}}var pd=F4.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function O0(n,t){if(n===&quot;font&quot;)return&quot;&quot;;if(typeof t==&quot;string&quot;)return t===&quot;use-credentials&quot;?t:&quot;&quot;}Fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Hi;Fi.createPortal=function(n,t){var e=2&lt;arguments.length&amp;&amp;arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&amp;&amp;t.nodeType!==9&amp;&amp;t.nodeType!==11)throw Error(fC(299));return G4(n,t,null,e)};Fi.flushSync=function(n){var t=pd.T,e=Hi.p;try{if(pd.T=null,Hi.p=2,n)return n()}finally{pd.T=t,Hi.p=e,Hi.d.f()}};Fi.preconnect=function(n,t){typeof n==&quot;string&quot;&amp;&amp;(t?(t=t.crossOrigin,t=typeof t==&quot;string&quot;?t===&quot;use-credentials&quot;?t:&quot;&quot;:void 0):t=null,Hi.d.C(n,t))};Fi.prefetchDNS=function(n){typeof n==&quot;string&quot;&amp;&amp;Hi.d.D(n)};Fi.preinit=function(n,t){if(typeof n==&quot;string&quot;&amp;&amp;t&amp;&amp;typeof t.as==&quot;string&quot;){var e=t.as,i=O0(e,t.crossOrigin),a=typeof t.integrity==&quot;string&quot;?t.integrity:void 0,s=typeof t.fetchPriority==&quot;string&quot;?t.fetchPriority:void 0;e===&quot;style&quot;?Hi.d.S(n,typeof t.precedence==&quot;string&quot;?t.precedence:void 0,{crossOrigin:i,integrity:a,fetchPriority:s}):e===&quot;script&quot;&amp;&amp;Hi.d.X(n,{crossOrigin:i,integrity:a,fetchPriority:s,nonce:typeof t.nonce==&quot;string&quot;?t.nonce:void 0})}};Fi.preinitModule=function(n,t){if(typeof n==&quot;string&quot;)if(typeof t==&quot;object&quot;&amp;&amp;t!==null){if(t.as==null||t.as===&quot;script&quot;){var e=O0(t.as,t.crossOrigin);Hi.d.M(n,{crossOrigin:e,integrity:typeof t.integrity==&quot;string&quot;?t.integrity:void 0,nonce:typeof t.nonce==&quot;string&quot;?t.nonce:void 0})}}else t==null&amp;&amp;Hi.d.M(n)};Fi.preload=function(n,t){if(typeof n==&quot;string&quot;&amp;&amp;typeof t==&quot;object&quot;&amp;&amp;t!==null&amp;&amp;typeof t.as==&quot;string&quot;){var e=t.as,i=O0(e,t.crossOrigin);Hi.d.L(n,e,{crossOrigin:i,integrity:typeof t.integrity==&quot;string&quot;?t.integrity:void 0,nonce:typeof t.nonce==&quot;string&quot;?t.nonce:void 0,type:typeof t.type==&quot;string&quot;?t.type:void 0,fetchPriority:typeof t.fetchPriority==&quot;string&quot;?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy==&quot;string&quot;?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet==&quot;string&quot;?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes==&quot;string&quot;?t.imageSizes:void 0,media:typeof t.media==&quot;string&quot;?t.media:void 0})}};Fi.preloadModule=function(n,t){if(typeof n==&quot;string&quot;)if(t){var e=O0(t.as,t.crossOrigin);Hi.d.m(n,{as:typeof t.as==&quot;string&quot;&amp;&amp;t.as!==&quot;script&quot;?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity==&quot;string&quot;?t.integrity:void 0})}else Hi.d.m(n)};Fi.requestFormReset=function(n){Hi.d.r(n)};Fi.unstable_batchedUpdates=function(n,t){return n(t)};Fi.useFormState=function(n,t,e){return pd.H.useFormState(n,t,e)};Fi.useFormStatus=function(){return pd.H.useHostTransitionStatus()};Fi.version=&quot;19.1.1&quot;});var mC=In((q7,pC)=&gt;{&quot;use strict&quot;;function dC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=&quot;function&quot;))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dC)}catch(n){console.error(n)}}dC(),pC.exports=hC()});var vU=In(ey=&gt;{&quot;use strict&quot;;var kn=cC(),Pw=ja(),X4=mC();function ft(n){var t=&quot;https://react.dev/errors/&quot;+n;if(1&lt;arguments.length){t+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var e=2;e&lt;arguments.length;e++)t+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[e])}return&quot;Minified React error #&quot;+n+&quot;; visit &quot;+t+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function Iw(n){return!(!n||n.nodeType!==1&amp;&amp;n.nodeType!==9&amp;&amp;n.nodeType!==11)}function ep(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,(t.flags&amp;4098)!==0&amp;&amp;(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function Hw(n){if(n.tag===13){var t=n.memoizedState;if(t===null&amp;&amp;(n=n.alternate,n!==null&amp;&amp;(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function gC(n){if(ep(n)!==n)throw Error(ft(188))}function q4(n){var t=n.alternate;if(!t){if(t=ep(n),t===null)throw Error(ft(188));return t!==n?null:n}for(var e=n,i=t;;){var a=e.return;if(a===null)break;var s=a.alternate;if(s===null){if(i=a.return,i!==null){e=i;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===e)return gC(a),n;if(s===i)return gC(a),t;s=s.sibling}throw Error(ft(188))}if(e.return!==i.return)e=a,i=s;else{for(var o=!1,u=a.child;u;){if(u===e){o=!0,e=a,i=s;break}if(u===i){o=!0,i=a,e=s;break}u=u.sibling}if(!o){for(u=s.child;u;){if(u===e){o=!0,e=s,i=a;break}if(u===i){o=!0,i=s,e=a;break}u=u.sibling}if(!o)throw Error(ft(189))}}if(e.alternate!==i)throw Error(ft(190))}if(e.tag!==3)throw Error(ft(188));return e.stateNode.current===e?n:t}function Fw(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n;for(n=n.child;n!==null;){if(t=Fw(n),t!==null)return t;n=n.sibling}return null}var pn=Object.assign,Y4=Symbol.for(&quot;react.element&quot;),L0=Symbol.for(&quot;react.transitional.element&quot;),Ed=Symbol.for(&quot;react.portal&quot;),Dc=Symbol.for(&quot;react.fragment&quot;),Vw=Symbol.for(&quot;react.strict_mode&quot;),e1=Symbol.for(&quot;react.profiler&quot;),W4=Symbol.for(&quot;react.provider&quot;),Gw=Symbol.for(&quot;react.consumer&quot;),Rr=Symbol.for(&quot;react.context&quot;),Q1=Symbol.for(&quot;react.forward_ref&quot;),n1=Symbol.for(&quot;react.suspense&quot;),i1=Symbol.for(&quot;react.suspense_list&quot;),K1=Symbol.for(&quot;react.memo&quot;),bo=Symbol.for(&quot;react.lazy&quot;);Symbol.for(&quot;react.scope&quot;);var a1=Symbol.for(&quot;react.activity&quot;);Symbol.for(&quot;react.legacy_hidden&quot;);Symbol.for(&quot;react.tracing_marker&quot;);var k4=Symbol.for(&quot;react.memo_cache_sentinel&quot;);Symbol.for(&quot;react.view_transition&quot;);var vC=Symbol.iterator;function md(n){return n===null||typeof n!=&quot;object&quot;?null:(n=vC&amp;&amp;n[vC]||n[&quot;@@iterator&quot;],typeof n==&quot;function&quot;?n:null)}var Z4=Symbol.for(&quot;react.client.reference&quot;);function s1(n){if(n==null)return null;if(typeof n==&quot;function&quot;)return n.$$typeof===Z4?null:n.displayName||n.name||null;if(typeof n==&quot;string&quot;)return n;switch(n){case Dc:return&quot;Fragment&quot;;case e1:return&quot;Profiler&quot;;case Vw:return&quot;StrictMode&quot;;case n1:return&quot;Suspense&quot;;case i1:return&quot;SuspenseList&quot;;case a1:return&quot;Activity&quot;}if(typeof n==&quot;object&quot;)switch(n.$$typeof){case Ed:return&quot;Portal&quot;;case Rr:return(n.displayName||&quot;Context&quot;)+&quot;.Provider&quot;;case Gw:return(n._context.displayName||&quot;Context&quot;)+&quot;.Consumer&quot;;case Q1:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||&quot;&quot;,n=n!==&quot;&quot;?&quot;ForwardRef(&quot;+n+&quot;)&quot;:&quot;ForwardRef&quot;),n;case K1:return t=n.displayName||null,t!==null?t:s1(n.type)||&quot;Memo&quot;;case bo:t=n._payload,n=n._init;try{return s1(n(t))}catch{}}return null}var bd=Array.isArray,ce=Pw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge=X4.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Vl={pending:!1,data:null,method:null,action:null},r1=[],Uc=-1;function js(n){return{current:n}}function ai(n){0&gt;Uc||(n.current=r1[Uc],r1[Uc]=null,Uc--)}function yn(n,t){Uc++,r1[Uc]=n.current,n.current=t}var Ws=js(null),Vd=js(null),Lo=js(null),cv=js(null);function fv(n,t){switch(yn(Lo,t),yn(Vd,n),yn(Ws,null),t.nodeType){case 9:case 11:n=(n=t.documentElement)&amp;&amp;(n=n.namespaceURI)?Ew(n):0;break;default:if(n=t.tagName,t=t.namespaceURI)t=Ew(t),n=sU(t,n);else switch(n){case&quot;svg&quot;:n=1;break;case&quot;math&quot;:n=2;break;default:n=0}}ai(Ws),yn(Ws,n)}function Qc(){ai(Ws),ai(Vd),ai(Lo)}function o1(n){n.memoizedState!==null&amp;&amp;yn(cv,n);var t=Ws.current,e=sU(t,n.type);t!==e&amp;&amp;(yn(Vd,n),yn(Ws,e))}function hv(n){Vd.current===n&amp;&amp;(ai(Ws),ai(Vd)),cv.current===n&amp;&amp;(ai(cv),Kd._currentValue=Vl)}var l1=Object.prototype.hasOwnProperty,J1=kn.unstable_scheduleCallback,bM=kn.unstable_cancelCallback,j4=kn.unstable_shouldYield,Q4=kn.unstable_requestPaint,ks=kn.unstable_now,K4=kn.unstable_getCurrentPriorityLevel,Xw=kn.unstable_ImmediatePriority,qw=kn.unstable_UserBlockingPriority,dv=kn.unstable_NormalPriority,J4=kn.unstable_LowPriority,Yw=kn.unstable_IdlePriority,$4=kn.log,tP=kn.unstable_setDisableYieldValue,np=null,ba=null;function Do(n){if(typeof $4==&quot;function&quot;&amp;&amp;tP(n),ba&amp;&amp;typeof ba.setStrictMode==&quot;function&quot;)try{ba.setStrictMode(np,n)}catch{}}var Ta=Math.clz32?Math.clz32:iP,eP=Math.log,nP=Math.LN2;function iP(n){return n&gt;&gt;&gt;=0,n===0?32:31-(eP(n)/nP|0)|0}var z0=256,B0=4194304;function Il(n){var t=n&amp;42;if(t!==0)return t;switch(n&amp;-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&amp;4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&amp;62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Fv(n,t,e){var i=n.pendingLanes;if(i===0)return 0;var a=0,s=n.suspendedLanes,o=n.pingedLanes;n=n.warmLanes;var u=i&amp;134217727;return u!==0?(i=u&amp;~s,i!==0?a=Il(i):(o&amp;=u,o!==0?a=Il(o):e||(e=u&amp;~n,e!==0&amp;&amp;(a=Il(e))))):(u=i&amp;~s,u!==0?a=Il(u):o!==0?a=Il(o):e||(e=i&amp;~n,e!==0&amp;&amp;(a=Il(e)))),a===0?0:t!==0&amp;&amp;t!==a&amp;&amp;(t&amp;s)===0&amp;&amp;(s=a&amp;-a,e=t&amp;-t,s&gt;=e||s===32&amp;&amp;(e&amp;4194048)!==0)?t:a}function ip(n,t){return(n.pendingLanes&amp;~(n.suspendedLanes&amp;~n.pingedLanes)&amp;t)===0}function aP(n,t){switch(n){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ww(){var n=z0;return z0&lt;&lt;=1,(z0&amp;4194048)===0&amp;&amp;(z0=256),n}function kw(){var n=B0;return B0&lt;&lt;=1,(B0&amp;62914560)===0&amp;&amp;(B0=4194304),n}function TM(n){for(var t=[],e=0;31&gt;e;e++)t.push(n);return t}function ap(n,t){n.pendingLanes|=t,t!==268435456&amp;&amp;(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function sP(n,t,e,i,a,s){var o=n.pendingLanes;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&amp;=e,n.entangledLanes&amp;=e,n.errorRecoveryDisabledLanes&amp;=e,n.shellSuspendCounter=0;var u=n.entanglements,c=n.expirationTimes,h=n.hiddenUpdates;for(e=o&amp;~e;0&lt;e;){var d=31-Ta(e),m=1&lt;&lt;d;u[d]=0,c[d]=-1;var g=h[d];if(g!==null)for(h[d]=null,d=0;d&lt;g.length;d++){var y=g[d];y!==null&amp;&amp;(y.lane&amp;=-536870913)}e&amp;=~m}i!==0&amp;&amp;Zw(n,i,0),s!==0&amp;&amp;a===0&amp;&amp;n.tag!==0&amp;&amp;(n.suspendedLanes|=s&amp;~(o&amp;~t))}function Zw(n,t,e){n.pendingLanes|=t,n.suspendedLanes&amp;=~t;var i=31-Ta(t);n.entangledLanes|=t,n.entanglements[i]=n.entanglements[i]|1073741824|e&amp;4194090}function jw(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-Ta(e),a=1&lt;&lt;i;a&amp;t|n[i]&amp;t&amp;&amp;(n[i]|=t),e&amp;=~a}}function $1(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function tE(n){return n&amp;=-n,2&lt;n?8&lt;n?(n&amp;134217727)!==0?32:268435456:8:2}function Qw(){var n=Ge.p;return n!==0?n:(n=window.event,n===void 0?32:mU(n.type))}function rP(n,t){var e=Ge.p;try{return Ge.p=n,t()}finally{Ge.p=e}}var Yo=Math.random().toString(36).slice(2),Ri=&quot;__reactFiber$&quot;+Yo,ta=&quot;__reactProps$&quot;+Yo,lf=&quot;__reactContainer$&quot;+Yo,u1=&quot;__reactEvents$&quot;+Yo,oP=&quot;__reactListeners$&quot;+Yo,lP=&quot;__reactHandles$&quot;+Yo,yC=&quot;__reactResources$&quot;+Yo,sp=&quot;__reactMarker$&quot;+Yo;function eE(n){delete n[Ri],delete n[ta],delete n[u1],delete n[oP],delete n[lP]}function Nc(n){var t=n[Ri];if(t)return t;for(var e=n.parentNode;e;){if(t=e[lf]||e[Ri]){if(e=t.alternate,t.child!==null||e!==null&amp;&amp;e.child!==null)for(n=Aw(n);n!==null;){if(e=n[Ri])return e;n=Aw(n)}return t}n=e,e=n.parentNode}return null}function uf(n){if(n=n[Ri]||n[lf]){var t=n.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return n}return null}function Td(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n.stateNode;throw Error(ft(33))}function Gc(n){var t=n[yC];return t||(t=n[yC]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ni(n){n[sp]=!0}var Kw=new Set,Jw={};function Jl(n,t){Kc(n,t),Kc(n+&quot;Capture&quot;,t)}function Kc(n,t){for(Jw[n]=t,n=0;n&lt;t.length;n++)Kw.add(t[n])}var uP=RegExp(&quot;^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$&quot;),_C={},xC={};function cP(n){return l1.call(xC,n)?!0:l1.call(_C,n)?!1:uP.test(n)?xC[n]=!0:(_C[n]=!0,!1)}function K0(n,t,e){if(cP(t))if(e===null)n.removeAttribute(t);else{switch(typeof e){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:n.removeAttribute(t);return;case&quot;boolean&quot;:var i=t.toLowerCase().slice(0,5);if(i!==&quot;data-&quot;&amp;&amp;i!==&quot;aria-&quot;){n.removeAttribute(t);return}}n.setAttribute(t,&quot;&quot;+e)}}function P0(n,t,e){if(e===null)n.removeAttribute(t);else{switch(typeof e){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:case&quot;boolean&quot;:n.removeAttribute(t);return}n.setAttribute(t,&quot;&quot;+e)}}function Er(n,t,e,i){if(i===null)n.removeAttribute(e);else{switch(typeof i){case&quot;undefined&quot;:case&quot;function&quot;:case&quot;symbol&quot;:case&quot;boolean&quot;:n.removeAttribute(e);return}n.setAttributeNS(t,e,&quot;&quot;+i)}}var AM,SC;function Rc(n){if(AM===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);AM=t&amp;&amp;t[1]||&quot;&quot;,SC=-1&lt;e.stack.indexOf(`
<a href="#l2" class="line" id="l2">      2</a>     at`)?&quot; (&lt;anonymous&gt;)&quot;:-1&lt;e.stack.indexOf(&quot;@&quot;)?&quot;@unknown:0:0&quot;:&quot;&quot;}return`
<a href="#l3" class="line" id="l3">      3</a> `+AM+n+SC}var RM=!1;function CM(n,t){if(!n||RM)return&quot;&quot;;RM=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,&quot;props&quot;,{set:function(){throw Error()}}),typeof Reflect==&quot;object&quot;&amp;&amp;Reflect.construct){try{Reflect.construct(m,[])}catch(y){var g=y}Reflect.construct(n,[],m)}else{try{m.call()}catch(y){g=y}n.call(m.prototype)}}else{try{throw Error()}catch(y){g=y}(m=n())&amp;&amp;typeof m.catch==&quot;function&quot;&amp;&amp;m.catch(function(){})}}catch(y){if(y&amp;&amp;g&amp;&amp;typeof y.stack==&quot;string&quot;)return[y.stack,g.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName=&quot;DetermineComponentFrameRoot&quot;;var a=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,&quot;name&quot;);a&amp;&amp;a.configurable&amp;&amp;Object.defineProperty(i.DetermineComponentFrameRoot,&quot;name&quot;,{value:&quot;DetermineComponentFrameRoot&quot;});var s=i.DetermineComponentFrameRoot(),o=s[0],u=s[1];if(o&amp;&amp;u){var c=o.split(`
<a href="#l4" class="line" id="l4">      4</a> `),h=u.split(`
<a href="#l5" class="line" id="l5">      5</a> `);for(a=i=0;i&lt;c.length&amp;&amp;!c[i].includes(&quot;DetermineComponentFrameRoot&quot;);)i++;for(;a&lt;h.length&amp;&amp;!h[a].includes(&quot;DetermineComponentFrameRoot&quot;);)a++;if(i===c.length||a===h.length)for(i=c.length-1,a=h.length-1;1&lt;=i&amp;&amp;0&lt;=a&amp;&amp;c[i]!==h[a];)a--;for(;1&lt;=i&amp;&amp;0&lt;=a;i--,a--)if(c[i]!==h[a]){if(i!==1||a!==1)do if(i--,a--,0&gt;a||c[i]!==h[a]){var d=`
<a href="#l6" class="line" id="l6">      6</a> `+c[i].replace(&quot; at new &quot;,&quot; at &quot;);return n.displayName&amp;&amp;d.includes(&quot;&lt;anonymous&gt;&quot;)&amp;&amp;(d=d.replace(&quot;&lt;anonymous&gt;&quot;,n.displayName)),d}while(1&lt;=i&amp;&amp;0&lt;=a);break}}}finally{RM=!1,Error.prepareStackTrace=e}return(e=n?n.displayName||n.name:&quot;&quot;)?Rc(e):&quot;&quot;}function fP(n){switch(n.tag){case 26:case 27:case 5:return Rc(n.type);case 16:return Rc(&quot;Lazy&quot;);case 13:return Rc(&quot;Suspense&quot;);case 19:return Rc(&quot;SuspenseList&quot;);case 0:case 15:return CM(n.type,!1);case 11:return CM(n.type.render,!1);case 1:return CM(n.type,!0);case 31:return Rc(&quot;Activity&quot;);default:return&quot;&quot;}}function MC(n){try{var t=&quot;&quot;;do t+=fP(n),n=n.return;while(n);return t}catch(e){return`
<a href="#l7" class="line" id="l7">      7</a> Error generating stack: `+e.message+`
<a href="#l8" class="line" id="l8">      8</a> `+e.stack}}function Ja(n){switch(typeof n){case&quot;bigint&quot;:case&quot;boolean&quot;:case&quot;number&quot;:case&quot;string&quot;:case&quot;undefined&quot;:return n;case&quot;object&quot;:return n;default:return&quot;&quot;}}function $w(n){var t=n.type;return(n=n.nodeName)&amp;&amp;n.toLowerCase()===&quot;input&quot;&amp;&amp;(t===&quot;checkbox&quot;||t===&quot;radio&quot;)}function hP(n){var t=$w(n)?&quot;checked&quot;:&quot;value&quot;,e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=&quot;&quot;+n[t];if(!n.hasOwnProperty(t)&amp;&amp;typeof e&lt;&quot;u&quot;&amp;&amp;typeof e.get==&quot;function&quot;&amp;&amp;typeof e.set==&quot;function&quot;){var a=e.get,s=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){i=&quot;&quot;+o,s.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(o){i=&quot;&quot;+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function pv(n){n._valueTracker||(n._valueTracker=hP(n))}function t3(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i=&quot;&quot;;return n&amp;&amp;(i=$w(n)?n.checked?&quot;true&quot;:&quot;false&quot;:n.value),n=i,n!==e?(t.setValue(n),!0):!1}function mv(n){if(n=n||(typeof document&lt;&quot;u&quot;?document:void 0),typeof n&gt;&quot;u&quot;)return null;try{return n.activeElement||n.body}catch{return n.body}}var dP=/[\n&quot;\\]/g;function es(n){return n.replace(dP,function(t){return&quot;\\&quot;+t.charCodeAt(0).toString(16)+&quot; &quot;})}function c1(n,t,e,i,a,s,o,u){n.name=&quot;&quot;,o!=null&amp;&amp;typeof o!=&quot;function&quot;&amp;&amp;typeof o!=&quot;symbol&quot;&amp;&amp;typeof o!=&quot;boolean&quot;?n.type=o:n.removeAttribute(&quot;type&quot;),t!=null?o===&quot;number&quot;?(t===0&amp;&amp;n.value===&quot;&quot;||n.value!=t)&amp;&amp;(n.value=&quot;&quot;+Ja(t)):n.value!==&quot;&quot;+Ja(t)&amp;&amp;(n.value=&quot;&quot;+Ja(t)):o!==&quot;submit&quot;&amp;&amp;o!==&quot;reset&quot;||n.removeAttribute(&quot;value&quot;),t!=null?f1(n,o,Ja(t)):e!=null?f1(n,o,Ja(e)):i!=null&amp;&amp;n.removeAttribute(&quot;value&quot;),a==null&amp;&amp;s!=null&amp;&amp;(n.defaultChecked=!!s),a!=null&amp;&amp;(n.checked=a&amp;&amp;typeof a!=&quot;function&quot;&amp;&amp;typeof a!=&quot;symbol&quot;),u!=null&amp;&amp;typeof u!=&quot;function&quot;&amp;&amp;typeof u!=&quot;symbol&quot;&amp;&amp;typeof u!=&quot;boolean&quot;?n.name=&quot;&quot;+Ja(u):n.removeAttribute(&quot;name&quot;)}function e3(n,t,e,i,a,s,o,u){if(s!=null&amp;&amp;typeof s!=&quot;function&quot;&amp;&amp;typeof s!=&quot;symbol&quot;&amp;&amp;typeof s!=&quot;boolean&quot;&amp;&amp;(n.type=s),t!=null||e!=null){if(!(s!==&quot;submit&quot;&amp;&amp;s!==&quot;reset&quot;||t!=null))return;e=e!=null?&quot;&quot;+Ja(e):&quot;&quot;,t=t!=null?&quot;&quot;+Ja(t):e,u||t===n.value||(n.value=t),n.defaultValue=t}i=i??a,i=typeof i!=&quot;function&quot;&amp;&amp;typeof i!=&quot;symbol&quot;&amp;&amp;!!i,n.checked=u?n.checked:!!i,n.defaultChecked=!!i,o!=null&amp;&amp;typeof o!=&quot;function&quot;&amp;&amp;typeof o!=&quot;symbol&quot;&amp;&amp;typeof o!=&quot;boolean&quot;&amp;&amp;(n.name=o)}function f1(n,t,e){t===&quot;number&quot;&amp;&amp;mv(n.ownerDocument)===n||n.defaultValue===&quot;&quot;+e||(n.defaultValue=&quot;&quot;+e)}function Xc(n,t,e,i){if(n=n.options,t){t={};for(var a=0;a&lt;e.length;a++)t[&quot;$&quot;+e[a]]=!0;for(e=0;e&lt;n.length;e++)a=t.hasOwnProperty(&quot;$&quot;+n[e].value),n[e].selected!==a&amp;&amp;(n[e].selected=a),a&amp;&amp;i&amp;&amp;(n[e].defaultSelected=!0)}else{for(e=&quot;&quot;+Ja(e),t=null,a=0;a&lt;n.length;a++){if(n[a].value===e){n[a].selected=!0,i&amp;&amp;(n[a].defaultSelected=!0);return}t!==null||n[a].disabled||(t=n[a])}t!==null&amp;&amp;(t.selected=!0)}}function n3(n,t,e){if(t!=null&amp;&amp;(t=&quot;&quot;+Ja(t),t!==n.value&amp;&amp;(n.value=t),e==null)){n.defaultValue!==t&amp;&amp;(n.defaultValue=t);return}n.defaultValue=e!=null?&quot;&quot;+Ja(e):&quot;&quot;}function i3(n,t,e,i){if(t==null){if(i!=null){if(e!=null)throw Error(ft(92));if(bd(i)){if(1&lt;i.length)throw Error(ft(93));i=i[0]}e=i}e==null&amp;&amp;(e=&quot;&quot;),t=e}e=Ja(t),n.defaultValue=e,i=n.textContent,i===e&amp;&amp;i!==&quot;&quot;&amp;&amp;i!==null&amp;&amp;(n.value=i)}function Jc(n,t){if(t){var e=n.firstChild;if(e&amp;&amp;e===n.lastChild&amp;&amp;e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var pP=new Set(&quot;animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp&quot;.split(&quot; &quot;));function EC(n,t,e){var i=t.indexOf(&quot;--&quot;)===0;e==null||typeof e==&quot;boolean&quot;||e===&quot;&quot;?i?n.setProperty(t,&quot;&quot;):t===&quot;float&quot;?n.cssFloat=&quot;&quot;:n[t]=&quot;&quot;:i?n.setProperty(t,e):typeof e!=&quot;number&quot;||e===0||pP.has(t)?t===&quot;float&quot;?n.cssFloat=e:n[t]=(&quot;&quot;+e).trim():n[t]=e+&quot;px&quot;}function a3(n,t,e){if(t!=null&amp;&amp;typeof t!=&quot;object&quot;)throw Error(ft(62));if(n=n.style,e!=null){for(var i in e)!e.hasOwnProperty(i)||t!=null&amp;&amp;t.hasOwnProperty(i)||(i.indexOf(&quot;--&quot;)===0?n.setProperty(i,&quot;&quot;):i===&quot;float&quot;?n.cssFloat=&quot;&quot;:n[i]=&quot;&quot;);for(var a in t)i=t[a],t.hasOwnProperty(a)&amp;&amp;e[a]!==i&amp;&amp;EC(n,a,i)}else for(var s in t)t.hasOwnProperty(s)&amp;&amp;EC(n,s,t[s])}function nE(n){if(n.indexOf(&quot;-&quot;)===-1)return!1;switch(n){case&quot;annotation-xml&quot;:case&quot;color-profile&quot;:case&quot;font-face&quot;:case&quot;font-face-src&quot;:case&quot;font-face-uri&quot;:case&quot;font-face-format&quot;:case&quot;font-face-name&quot;:case&quot;missing-glyph&quot;:return!1;default:return!0}}var mP=new Map([[&quot;acceptCharset&quot;,&quot;accept-charset&quot;],[&quot;htmlFor&quot;,&quot;for&quot;],[&quot;httpEquiv&quot;,&quot;http-equiv&quot;],[&quot;crossOrigin&quot;,&quot;crossorigin&quot;],[&quot;accentHeight&quot;,&quot;accent-height&quot;],[&quot;alignmentBaseline&quot;,&quot;alignment-baseline&quot;],[&quot;arabicForm&quot;,&quot;arabic-form&quot;],[&quot;baselineShift&quot;,&quot;baseline-shift&quot;],[&quot;capHeight&quot;,&quot;cap-height&quot;],[&quot;clipPath&quot;,&quot;clip-path&quot;],[&quot;clipRule&quot;,&quot;clip-rule&quot;],[&quot;colorInterpolation&quot;,&quot;color-interpolation&quot;],[&quot;colorInterpolationFilters&quot;,&quot;color-interpolation-filters&quot;],[&quot;colorProfile&quot;,&quot;color-profile&quot;],[&quot;colorRendering&quot;,&quot;color-rendering&quot;],[&quot;dominantBaseline&quot;,&quot;dominant-baseline&quot;],[&quot;enableBackground&quot;,&quot;enable-background&quot;],[&quot;fillOpacity&quot;,&quot;fill-opacity&quot;],[&quot;fillRule&quot;,&quot;fill-rule&quot;],[&quot;floodColor&quot;,&quot;flood-color&quot;],[&quot;floodOpacity&quot;,&quot;flood-opacity&quot;],[&quot;fontFamily&quot;,&quot;font-family&quot;],[&quot;fontSize&quot;,&quot;font-size&quot;],[&quot;fontSizeAdjust&quot;,&quot;font-size-adjust&quot;],[&quot;fontStretch&quot;,&quot;font-stretch&quot;],[&quot;fontStyle&quot;,&quot;font-style&quot;],[&quot;fontVariant&quot;,&quot;font-variant&quot;],[&quot;fontWeight&quot;,&quot;font-weight&quot;],[&quot;glyphName&quot;,&quot;glyph-name&quot;],[&quot;glyphOrientationHorizontal&quot;,&quot;glyph-orientation-horizontal&quot;],[&quot;glyphOrientationVertical&quot;,&quot;glyph-orientation-vertical&quot;],[&quot;horizAdvX&quot;,&quot;horiz-adv-x&quot;],[&quot;horizOriginX&quot;,&quot;horiz-origin-x&quot;],[&quot;imageRendering&quot;,&quot;image-rendering&quot;],[&quot;letterSpacing&quot;,&quot;letter-spacing&quot;],[&quot;lightingColor&quot;,&quot;lighting-color&quot;],[&quot;markerEnd&quot;,&quot;marker-end&quot;],[&quot;markerMid&quot;,&quot;marker-mid&quot;],[&quot;markerStart&quot;,&quot;marker-start&quot;],[&quot;overlinePosition&quot;,&quot;overline-position&quot;],[&quot;overlineThickness&quot;,&quot;overline-thickness&quot;],[&quot;paintOrder&quot;,&quot;paint-order&quot;],[&quot;panose-1&quot;,&quot;panose-1&quot;],[&quot;pointerEvents&quot;,&quot;pointer-events&quot;],[&quot;renderingIntent&quot;,&quot;rendering-intent&quot;],[&quot;shapeRendering&quot;,&quot;shape-rendering&quot;],[&quot;stopColor&quot;,&quot;stop-color&quot;],[&quot;stopOpacity&quot;,&quot;stop-opacity&quot;],[&quot;strikethroughPosition&quot;,&quot;strikethrough-position&quot;],[&quot;strikethroughThickness&quot;,&quot;strikethrough-thickness&quot;],[&quot;strokeDasharray&quot;,&quot;stroke-dasharray&quot;],[&quot;strokeDashoffset&quot;,&quot;stroke-dashoffset&quot;],[&quot;strokeLinecap&quot;,&quot;stroke-linecap&quot;],[&quot;strokeLinejoin&quot;,&quot;stroke-linejoin&quot;],[&quot;strokeMiterlimit&quot;,&quot;stroke-miterlimit&quot;],[&quot;strokeOpacity&quot;,&quot;stroke-opacity&quot;],[&quot;strokeWidth&quot;,&quot;stroke-width&quot;],[&quot;textAnchor&quot;,&quot;text-anchor&quot;],[&quot;textDecoration&quot;,&quot;text-decoration&quot;],[&quot;textRendering&quot;,&quot;text-rendering&quot;],[&quot;transformOrigin&quot;,&quot;transform-origin&quot;],[&quot;underlinePosition&quot;,&quot;underline-position&quot;],[&quot;underlineThickness&quot;,&quot;underline-thickness&quot;],[&quot;unicodeBidi&quot;,&quot;unicode-bidi&quot;],[&quot;unicodeRange&quot;,&quot;unicode-range&quot;],[&quot;unitsPerEm&quot;,&quot;units-per-em&quot;],[&quot;vAlphabetic&quot;,&quot;v-alphabetic&quot;],[&quot;vHanging&quot;,&quot;v-hanging&quot;],[&quot;vIdeographic&quot;,&quot;v-ideographic&quot;],[&quot;vMathematical&quot;,&quot;v-mathematical&quot;],[&quot;vectorEffect&quot;,&quot;vector-effect&quot;],[&quot;vertAdvY&quot;,&quot;vert-adv-y&quot;],[&quot;vertOriginX&quot;,&quot;vert-origin-x&quot;],[&quot;vertOriginY&quot;,&quot;vert-origin-y&quot;],[&quot;wordSpacing&quot;,&quot;word-spacing&quot;],[&quot;writingMode&quot;,&quot;writing-mode&quot;],[&quot;xmlnsXlink&quot;,&quot;xmlns:xlink&quot;],[&quot;xHeight&quot;,&quot;x-height&quot;]]),gP=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function J0(n){return gP.test(&quot;&quot;+n)?&quot;javascript:throw new Error(&#39;React has blocked a javascript: URL as a security precaution.&#39;)&quot;:n}var h1=null;function iE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&amp;&amp;(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Oc=null,qc=null;function bC(n){var t=uf(n);if(t&amp;&amp;(n=t.stateNode)){var e=n[ta]||null;t:switch(n=t.stateNode,t.type){case&quot;input&quot;:if(c1(n,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type===&quot;radio&quot;&amp;&amp;t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll(&#39;input[name=&quot;&#39;+es(&quot;&quot;+t)+&#39;&quot;][type=&quot;radio&quot;]&#39;),t=0;t&lt;e.length;t++){var i=e[t];if(i!==n&amp;&amp;i.form===n.form){var a=i[ta]||null;if(!a)throw Error(ft(90));c1(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t&lt;e.length;t++)i=e[t],i.form===n.form&amp;&amp;t3(i)}break t;case&quot;textarea&quot;:n3(n,e.value,e.defaultValue);break t;case&quot;select&quot;:t=e.value,t!=null&amp;&amp;Xc(n,!!e.multiple,t,!1)}}}var wM=!1;function s3(n,t,e){if(wM)return n(t,e);wM=!0;try{var i=n(t);return i}finally{if(wM=!1,(Oc!==null||qc!==null)&amp;&amp;(Qv(),Oc&amp;&amp;(t=Oc,n=qc,qc=Oc=null,bC(t),n)))for(t=0;t&lt;n.length;t++)bC(n[t])}}function Gd(n,t){var e=n.stateNode;if(e===null)return null;var i=e[ta]||null;if(i===null)return null;e=i[t];t:switch(t){case&quot;onClick&quot;:case&quot;onClickCapture&quot;:case&quot;onDoubleClick&quot;:case&quot;onDoubleClickCapture&quot;:case&quot;onMouseDown&quot;:case&quot;onMouseDownCapture&quot;:case&quot;onMouseMove&quot;:case&quot;onMouseMoveCapture&quot;:case&quot;onMouseUp&quot;:case&quot;onMouseUpCapture&quot;:case&quot;onMouseEnter&quot;:(i=!i.disabled)||(n=n.type,i=!(n===&quot;button&quot;||n===&quot;input&quot;||n===&quot;select&quot;||n===&quot;textarea&quot;)),n=!i;break t;default:n=!1}if(n)return null;if(e&amp;&amp;typeof e!=&quot;function&quot;)throw Error(ft(231,t,typeof e));return e}var Lr=!(typeof window&gt;&quot;u&quot;||typeof window.document&gt;&quot;u&quot;||typeof window.document.createElement&gt;&quot;u&quot;),d1=!1;if(Lr)try{bc={},Object.defineProperty(bc,&quot;passive&quot;,{get:function(){d1=!0}}),window.addEventListener(&quot;test&quot;,bc,bc),window.removeEventListener(&quot;test&quot;,bc,bc)}catch{d1=!1}var bc,Uo=null,aE=null,$0=null;function r3(){if($0)return $0;var n,t=aE,e=t.length,i,a=&quot;value&quot;in Uo?Uo.value:Uo.textContent,s=a.length;for(n=0;n&lt;e&amp;&amp;t[n]===a[n];n++);var o=e-n;for(i=1;i&lt;=o&amp;&amp;t[e-i]===a[s-i];i++);return $0=a.slice(n,1&lt;i?1-i:void 0)}function tv(n){var t=n.keyCode;return&quot;charCode&quot;in n?(n=n.charCode,n===0&amp;&amp;t===13&amp;&amp;(n=13)):n=t,n===10&amp;&amp;(n=13),32&lt;=n||n===13?n:0}function I0(){return!0}function TC(){return!1}function ea(n){function t(e,i,a,s,o){this._reactName=e,this._targetInst=a,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var u in n)n.hasOwnProperty(u)&amp;&amp;(e=n[u],this[u]=e?e(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?I0:TC,this.isPropagationStopped=TC,this}return pn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&amp;&amp;(e.preventDefault?e.preventDefault():typeof e.returnValue!=&quot;unknown&quot;&amp;&amp;(e.returnValue=!1),this.isDefaultPrevented=I0)},stopPropagation:function(){var e=this.nativeEvent;e&amp;&amp;(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!=&quot;unknown&quot;&amp;&amp;(e.cancelBubble=!0),this.isPropagationStopped=I0)},persist:function(){},isPersistent:I0}),t}var $l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vv=ea($l),rp=pn({},$l,{view:0,detail:0}),vP=ea(rp),DM,UM,gd,Gv=pn({},rp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return&quot;movementX&quot;in n?n.movementX:(n!==gd&amp;&amp;(gd&amp;&amp;n.type===&quot;mousemove&quot;?(DM=n.screenX-gd.screenX,UM=n.screenY-gd.screenY):UM=DM=0,gd=n),DM)},movementY:function(n){return&quot;movementY&quot;in n?n.movementY:UM}}),AC=ea(Gv),yP=pn({},Gv,{dataTransfer:0}),_P=ea(yP),xP=pn({},rp,{relatedTarget:0}),NM=ea(xP),SP=pn({},$l,{animationName:0,elapsedTime:0,pseudoElement:0}),MP=ea(SP),EP=pn({},$l,{clipboardData:function(n){return&quot;clipboardData&quot;in n?n.clipboardData:window.clipboardData}}),bP=ea(EP),TP=pn({},$l,{data:0}),RC=ea(TP),AP={Esc:&quot;Escape&quot;,Spacebar:&quot; &quot;,Left:&quot;ArrowLeft&quot;,Up:&quot;ArrowUp&quot;,Right:&quot;ArrowRight&quot;,Down:&quot;ArrowDown&quot;,Del:&quot;Delete&quot;,Win:&quot;OS&quot;,Menu:&quot;ContextMenu&quot;,Apps:&quot;ContextMenu&quot;,Scroll:&quot;ScrollLock&quot;,MozPrintableKey:&quot;Unidentified&quot;},RP={8:&quot;Backspace&quot;,9:&quot;Tab&quot;,12:&quot;Clear&quot;,13:&quot;Enter&quot;,16:&quot;Shift&quot;,17:&quot;Control&quot;,18:&quot;Alt&quot;,19:&quot;Pause&quot;,20:&quot;CapsLock&quot;,27:&quot;Escape&quot;,32:&quot; &quot;,33:&quot;PageUp&quot;,34:&quot;PageDown&quot;,35:&quot;End&quot;,36:&quot;Home&quot;,37:&quot;ArrowLeft&quot;,38:&quot;ArrowUp&quot;,39:&quot;ArrowRight&quot;,40:&quot;ArrowDown&quot;,45:&quot;Insert&quot;,46:&quot;Delete&quot;,112:&quot;F1&quot;,113:&quot;F2&quot;,114:&quot;F3&quot;,115:&quot;F4&quot;,116:&quot;F5&quot;,117:&quot;F6&quot;,118:&quot;F7&quot;,119:&quot;F8&quot;,120:&quot;F9&quot;,121:&quot;F10&quot;,122:&quot;F11&quot;,123:&quot;F12&quot;,144:&quot;NumLock&quot;,145:&quot;ScrollLock&quot;,224:&quot;Meta&quot;},CP={Alt:&quot;altKey&quot;,Control:&quot;ctrlKey&quot;,Meta:&quot;metaKey&quot;,Shift:&quot;shiftKey&quot;};function wP(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=CP[n])?!!t[n]:!1}function sE(){return wP}var DP=pn({},rp,{key:function(n){if(n.key){var t=AP[n.key]||n.key;if(t!==&quot;Unidentified&quot;)return t}return n.type===&quot;keypress&quot;?(n=tv(n),n===13?&quot;Enter&quot;:String.fromCharCode(n)):n.type===&quot;keydown&quot;||n.type===&quot;keyup&quot;?RP[n.keyCode]||&quot;Unidentified&quot;:&quot;&quot;},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sE,charCode:function(n){return n.type===&quot;keypress&quot;?tv(n):0},keyCode:function(n){return n.type===&quot;keydown&quot;||n.type===&quot;keyup&quot;?n.keyCode:0},which:function(n){return n.type===&quot;keypress&quot;?tv(n):n.type===&quot;keydown&quot;||n.type===&quot;keyup&quot;?n.keyCode:0}}),UP=ea(DP),NP=pn({},Gv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),CC=ea(NP),OP=pn({},rp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sE}),LP=ea(OP),zP=pn({},$l,{propertyName:0,elapsedTime:0,pseudoElement:0}),BP=ea(zP),PP=pn({},Gv,{deltaX:function(n){return&quot;deltaX&quot;in n?n.deltaX:&quot;wheelDeltaX&quot;in n?-n.wheelDeltaX:0},deltaY:function(n){return&quot;deltaY&quot;in n?n.deltaY:&quot;wheelDeltaY&quot;in n?-n.wheelDeltaY:&quot;wheelDelta&quot;in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),IP=ea(PP),HP=pn({},$l,{newState:0,oldState:0}),FP=ea(HP),VP=[9,13,27,32],rE=Lr&amp;&amp;&quot;CompositionEvent&quot;in window,Rd=null;Lr&amp;&amp;&quot;documentMode&quot;in document&amp;&amp;(Rd=document.documentMode);var GP=Lr&amp;&amp;&quot;TextEvent&quot;in window&amp;&amp;!Rd,o3=Lr&amp;&amp;(!rE||Rd&amp;&amp;8&lt;Rd&amp;&amp;11&gt;=Rd),wC=&quot; &quot;,DC=!1;function l3(n,t){switch(n){case&quot;keyup&quot;:return VP.indexOf(t.keyCode)!==-1;case&quot;keydown&quot;:return t.keyCode!==229;case&quot;keypress&quot;:case&quot;mousedown&quot;:case&quot;focusout&quot;:return!0;default:return!1}}function u3(n){return n=n.detail,typeof n==&quot;object&quot;&amp;&amp;&quot;data&quot;in n?n.data:null}var Lc=!1;function XP(n,t){switch(n){case&quot;compositionend&quot;:return u3(t);case&quot;keypress&quot;:return t.which!==32?null:(DC=!0,wC);case&quot;textInput&quot;:return n=t.data,n===wC&amp;&amp;DC?null:n;default:return null}}function qP(n,t){if(Lc)return n===&quot;compositionend&quot;||!rE&amp;&amp;l3(n,t)?(n=r3(),$0=aE=Uo=null,Lc=!1,n):null;switch(n){case&quot;paste&quot;:return null;case&quot;keypress&quot;:if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&amp;&amp;t.altKey){if(t.char&amp;&amp;1&lt;t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case&quot;compositionend&quot;:return o3&amp;&amp;t.locale!==&quot;ko&quot;?null:t.data;default:return null}}var YP={color:!0,date:!0,datetime:!0,&quot;datetime-local&quot;:!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function UC(n){var t=n&amp;&amp;n.nodeName&amp;&amp;n.nodeName.toLowerCase();return t===&quot;input&quot;?!!YP[n.type]:t===&quot;textarea&quot;}function c3(n,t,e,i){Oc?qc?qc.push(i):qc=[i]:Oc=i,t=Ov(t,&quot;onChange&quot;),0&lt;t.length&amp;&amp;(e=new Vv(&quot;onChange&quot;,&quot;change&quot;,null,e,i),n.push({event:e,listeners:t}))}var Cd=null,Xd=null;function WP(n){nU(n,0)}function Xv(n){var t=Td(n);if(t3(t))return n}function NC(n,t){if(n===&quot;change&quot;)return t}var f3=!1;Lr&amp;&amp;(Lr?(F0=&quot;oninput&quot;in document,F0||(OM=document.createElement(&quot;div&quot;),OM.setAttribute(&quot;oninput&quot;,&quot;return;&quot;),F0=typeof OM.oninput==&quot;function&quot;),H0=F0):H0=!1,f3=H0&amp;&amp;(!document.documentMode||9&lt;document.documentMode));var H0,F0,OM;function OC(){Cd&amp;&amp;(Cd.detachEvent(&quot;onpropertychange&quot;,h3),Xd=Cd=null)}function h3(n){if(n.propertyName===&quot;value&quot;&amp;&amp;Xv(Xd)){var t=[];c3(t,Xd,n,iE(n)),s3(WP,t)}}function kP(n,t,e){n===&quot;focusin&quot;?(OC(),Cd=t,Xd=e,Cd.attachEvent(&quot;onpropertychange&quot;,h3)):n===&quot;focusout&quot;&amp;&amp;OC()}function ZP(n){if(n===&quot;selectionchange&quot;||n===&quot;keyup&quot;||n===&quot;keydown&quot;)return Xv(Xd)}function jP(n,t){if(n===&quot;click&quot;)return Xv(t)}function QP(n,t){if(n===&quot;input&quot;||n===&quot;change&quot;)return Xv(t)}function KP(n,t){return n===t&amp;&amp;(n!==0||1/n===1/t)||n!==n&amp;&amp;t!==t}var Ca=typeof Object.is==&quot;function&quot;?Object.is:KP;function qd(n,t){if(Ca(n,t))return!0;if(typeof n!=&quot;object&quot;||n===null||typeof t!=&quot;object&quot;||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i&lt;e.length;i++){var a=e[i];if(!l1.call(t,a)||!Ca(n[a],t[a]))return!1}return!0}function LC(n){for(;n&amp;&amp;n.firstChild;)n=n.firstChild;return n}function zC(n,t){var e=LC(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n&lt;=t&amp;&amp;i&gt;=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=LC(e)}}function d3(n,t){return n&amp;&amp;t?n===t?!0:n&amp;&amp;n.nodeType===3?!1:t&amp;&amp;t.nodeType===3?d3(n,t.parentNode):&quot;contains&quot;in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&amp;16):!1:!1}function p3(n){n=n!=null&amp;&amp;n.ownerDocument!=null&amp;&amp;n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var t=mv(n.document);t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href==&quot;string&quot;}catch{e=!1}if(e)n=t.contentWindow;else break;t=mv(n.document)}return t}function oE(n){var t=n&amp;&amp;n.nodeName&amp;&amp;n.nodeName.toLowerCase();return t&amp;&amp;(t===&quot;input&quot;&amp;&amp;(n.type===&quot;text&quot;||n.type===&quot;search&quot;||n.type===&quot;tel&quot;||n.type===&quot;url&quot;||n.type===&quot;password&quot;)||t===&quot;textarea&quot;||n.contentEditable===&quot;true&quot;)}var JP=Lr&amp;&amp;&quot;documentMode&quot;in document&amp;&amp;11&gt;=document.documentMode,zc=null,p1=null,wd=null,m1=!1;function BC(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;m1||zc==null||zc!==mv(i)||(i=zc,&quot;selectionStart&quot;in i&amp;&amp;oE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&amp;&amp;i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),wd&amp;&amp;qd(wd,i)||(wd=i,i=Ov(p1,&quot;onSelect&quot;),0&lt;i.length&amp;&amp;(t=new Vv(&quot;onSelect&quot;,&quot;select&quot;,null,t,e),n.push({event:t,listeners:i}),t.target=zc)))}function Pl(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e[&quot;Webkit&quot;+n]=&quot;webkit&quot;+t,e[&quot;Moz&quot;+n]=&quot;moz&quot;+t,e}var Bc={animationend:Pl(&quot;Animation&quot;,&quot;AnimationEnd&quot;),animationiteration:Pl(&quot;Animation&quot;,&quot;AnimationIteration&quot;),animationstart:Pl(&quot;Animation&quot;,&quot;AnimationStart&quot;),transitionrun:Pl(&quot;Transition&quot;,&quot;TransitionRun&quot;),transitionstart:Pl(&quot;Transition&quot;,&quot;TransitionStart&quot;),transitioncancel:Pl(&quot;Transition&quot;,&quot;TransitionCancel&quot;),transitionend:Pl(&quot;Transition&quot;,&quot;TransitionEnd&quot;)},LM={},m3={};Lr&amp;&amp;(m3=document.createElement(&quot;div&quot;).style,&quot;AnimationEvent&quot;in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),&quot;TransitionEvent&quot;in window||delete Bc.transitionend.transition);function tu(n){if(LM[n])return LM[n];if(!Bc[n])return n;var t=Bc[n],e;for(e in t)if(t.hasOwnProperty(e)&amp;&amp;e in m3)return LM[n]=t[e];return n}var g3=tu(&quot;animationend&quot;),v3=tu(&quot;animationiteration&quot;),y3=tu(&quot;animationstart&quot;),$P=tu(&quot;transitionrun&quot;),tI=tu(&quot;transitionstart&quot;),eI=tu(&quot;transitioncancel&quot;),_3=tu(&quot;transitionend&quot;),x3=new Map,g1=&quot;abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel&quot;.split(&quot; &quot;);g1.push(&quot;scrollEnd&quot;);function _s(n,t){x3.set(n,t),Jl(t,[n])}var PC=new WeakMap;function ns(n,t){if(typeof n==&quot;object&quot;&amp;&amp;n!==null){var e=PC.get(n);return e!==void 0?e:(t={value:n,source:t,stack:MC(t)},PC.set(n,t),t)}return{value:n,source:t,stack:MC(t)}}var Ka=[],Pc=0,lE=0;function qv(){for(var n=Pc,t=lE=Pc=0;t&lt;n;){var e=Ka[t];Ka[t++]=null;var i=Ka[t];Ka[t++]=null;var a=Ka[t];Ka[t++]=null;var s=Ka[t];if(Ka[t++]=null,i!==null&amp;&amp;a!==null){var o=i.pending;o===null?a.next=a:(a.next=o.next,o.next=a),i.pending=a}s!==0&amp;&amp;S3(e,a,s)}}function Yv(n,t,e,i){Ka[Pc++]=n,Ka[Pc++]=t,Ka[Pc++]=e,Ka[Pc++]=i,lE|=i,n.lanes|=i,n=n.alternate,n!==null&amp;&amp;(n.lanes|=i)}function uE(n,t,e,i){return Yv(n,t,e,i),gv(n)}function cf(n,t){return Yv(n,null,null,t),gv(n)}function S3(n,t,e){n.lanes|=e;var i=n.alternate;i!==null&amp;&amp;(i.lanes|=e);for(var a=!1,s=n.return;s!==null;)s.childLanes|=e,i=s.alternate,i!==null&amp;&amp;(i.childLanes|=e),s.tag===22&amp;&amp;(n=s.stateNode,n===null||n._visibility&amp;1||(a=!0)),n=s,s=s.return;return n.tag===3?(s=n.stateNode,a&amp;&amp;t!==null&amp;&amp;(a=31-Ta(e),n=s.hiddenUpdates,i=n[a],i===null?n[a]=[t]:i.push(t),t.lane=e|536870912),s):null}function gv(n){if(50&lt;Hd)throw Hd=0,P1=null,Error(ft(185));for(var t=n.return;t!==null;)n=t,t=n.return;return n.tag===3?n.stateNode:null}var Ic={};function nI(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(n,t,e,i){return new nI(n,t,e,i)}function cE(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Nr(n,t){var e=n.alternate;return e===null?(e=Ea(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&amp;65011712,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e.refCleanup=n.refCleanup,e}function M3(n,t){n.flags&amp;=65011714;var e=n.alternate;return e===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.type=e.type,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n}function ev(n,t,e,i,a,s){var o=0;if(i=n,typeof n==&quot;function&quot;)cE(n)&amp;&amp;(o=1);else if(typeof n==&quot;string&quot;)o=nH(n,e,Ws.current)?26:n===&quot;html&quot;||n===&quot;head&quot;||n===&quot;body&quot;?27:5;else t:switch(n){case a1:return n=Ea(31,e,t,a),n.elementType=a1,n.lanes=s,n;case Dc:return Gl(e.children,a,s,t);case Vw:o=8,a|=24;break;case e1:return n=Ea(12,e,t,a|2),n.elementType=e1,n.lanes=s,n;case n1:return n=Ea(13,e,t,a),n.elementType=n1,n.lanes=s,n;case i1:return n=Ea(19,e,t,a),n.elementType=i1,n.lanes=s,n;default:if(typeof n==&quot;object&quot;&amp;&amp;n!==null)switch(n.$$typeof){case W4:case Rr:o=10;break t;case Gw:o=9;break t;case Q1:o=11;break t;case K1:o=14;break t;case bo:o=16,i=null;break t}o=29,e=Error(ft(130,n===null?&quot;null&quot;:typeof n,&quot;&quot;)),i=null}return t=Ea(o,e,t,a),t.elementType=n,t.type=i,t.lanes=s,t}function Gl(n,t,e,i){return n=Ea(7,n,i,t),n.lanes=e,n}function zM(n,t,e){return n=Ea(6,n,null,t),n.lanes=e,n}function BM(n,t,e){return t=Ea(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}var Hc=[],Fc=0,vv=null,yv=0,$a=[],ts=0,Xl=null,Cr=1,wr=&quot;&quot;;function Hl(n,t){Hc[Fc++]=yv,Hc[Fc++]=vv,vv=n,yv=t}function E3(n,t,e){$a[ts++]=Cr,$a[ts++]=wr,$a[ts++]=Xl,Xl=n;var i=Cr;n=wr;var a=32-Ta(i)-1;i&amp;=~(1&lt;&lt;a),e+=1;var s=32-Ta(t)+a;if(30&lt;s){var o=a-a%5;s=(i&amp;(1&lt;&lt;o)-1).toString(32),i&gt;&gt;=o,a-=o,Cr=1&lt;&lt;32-Ta(t)+a|e&lt;&lt;a|i,wr=s+n}else Cr=1&lt;&lt;s|e&lt;&lt;a|i,wr=n}function fE(n){n.return!==null&amp;&amp;(Hl(n,1),E3(n,1,0))}function hE(n){for(;n===vv;)vv=Hc[--Fc],Hc[Fc]=null,yv=Hc[--Fc],Hc[Fc]=null;for(;n===Xl;)Xl=$a[--ts],$a[ts]=null,wr=$a[--ts],$a[ts]=null,Cr=$a[--ts],$a[ts]=null}var Vi=null,Cn=null,Ve=!1,ql=null,qs=!1,v1=Error(ft(519));function Zl(n){var t=Error(ft(418,&quot;&quot;));throw Yd(ns(t,n)),v1}function IC(n){var t=n.stateNode,e=n.type,i=n.memoizedProps;switch(t[Ri]=n,t[ta]=i,e){case&quot;dialog&quot;:Re(&quot;cancel&quot;,t),Re(&quot;close&quot;,t);break;case&quot;iframe&quot;:case&quot;object&quot;:case&quot;embed&quot;:Re(&quot;load&quot;,t);break;case&quot;video&quot;:case&quot;audio&quot;:for(e=0;e&lt;Zd.length;e++)Re(Zd[e],t);break;case&quot;source&quot;:Re(&quot;error&quot;,t);break;case&quot;img&quot;:case&quot;image&quot;:case&quot;link&quot;:Re(&quot;error&quot;,t),Re(&quot;load&quot;,t);break;case&quot;details&quot;:Re(&quot;toggle&quot;,t);break;case&quot;input&quot;:Re(&quot;invalid&quot;,t),e3(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),pv(t);break;case&quot;select&quot;:Re(&quot;invalid&quot;,t);break;case&quot;textarea&quot;:Re(&quot;invalid&quot;,t),i3(t,i.value,i.defaultValue,i.children),pv(t)}e=i.children,typeof e!=&quot;string&quot;&amp;&amp;typeof e!=&quot;number&quot;&amp;&amp;typeof e!=&quot;bigint&quot;||t.textContent===&quot;&quot;+e||i.suppressHydrationWarning===!0||aU(t.textContent,e)?(i.popover!=null&amp;&amp;(Re(&quot;beforetoggle&quot;,t),Re(&quot;toggle&quot;,t)),i.onScroll!=null&amp;&amp;Re(&quot;scroll&quot;,t),i.onScrollEnd!=null&amp;&amp;Re(&quot;scrollend&quot;,t),i.onClick!=null&amp;&amp;(t.onclick=$v),t=!0):t=!1,t||Zl(n)}function HC(n){for(Vi=n.return;Vi;)switch(Vi.tag){case 5:case 13:qs=!1;return;case 27:case 3:qs=!0;return;default:Vi=Vi.return}}function vd(n){if(n!==Vi)return!1;if(!Ve)return HC(n),Ve=!0,!1;var t=n.tag,e;if((e=t!==3&amp;&amp;t!==27)&amp;&amp;((e=t===5)&amp;&amp;(e=n.type,e=!(e!==&quot;form&quot;&amp;&amp;e!==&quot;button&quot;)||X1(n.type,n.memoizedProps)),e=!e),e&amp;&amp;Cn&amp;&amp;Zl(n),HC(n),t===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ft(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8)if(e=n.data,e===&quot;/$&quot;){if(t===0){Cn=ys(n.nextSibling);break t}t--}else e!==&quot;$&quot;&amp;&amp;e!==&quot;$!&quot;&amp;&amp;e!==&quot;$?&quot;||t++;n=n.nextSibling}Cn=null}}else t===27?(t=Cn,Wo(n.type)?(n=W1,W1=null,Cn=n):Cn=t):Cn=Vi?ys(n.stateNode.nextSibling):null;return!0}function op(){Cn=Vi=null,Ve=!1}function FC(){var n=ql;return n!==null&amp;&amp;($i===null?$i=n:$i.push.apply($i,n),ql=null),n}function Yd(n){ql===null?ql=[n]:ql.push(n)}var y1=js(null),eu=null,Dr=null;function Ao(n,t,e){yn(y1,t._currentValue),t._currentValue=e}function Or(n){n._currentValue=y1.current,ai(y1)}function _1(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&amp;t)!==t?(n.childLanes|=t,i!==null&amp;&amp;(i.childLanes|=t)):i!==null&amp;&amp;(i.childLanes&amp;t)!==t&amp;&amp;(i.childLanes|=t),n===e)break;n=n.return}}function x1(n,t,e,i){var a=n.child;for(a!==null&amp;&amp;(a.return=n);a!==null;){var s=a.dependencies;if(s!==null){var o=a.child;s=s.firstContext;t:for(;s!==null;){var u=s;s=a;for(var c=0;c&lt;t.length;c++)if(u.context===t[c]){s.lanes|=e,u=s.alternate,u!==null&amp;&amp;(u.lanes|=e),_1(s.return,e,n),i||(o=null);break t}s=u.next}}else if(a.tag===18){if(o=a.return,o===null)throw Error(ft(341));o.lanes|=e,s=o.alternate,s!==null&amp;&amp;(s.lanes|=e),_1(o,e,n),o=null}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===n){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}}function lp(n,t,e,i){n=null;for(var a=t,s=!1;a!==null;){if(!s){if((a.flags&amp;524288)!==0)s=!0;else if((a.flags&amp;262144)!==0)break}if(a.tag===10){var o=a.alternate;if(o===null)throw Error(ft(387));if(o=o.memoizedProps,o!==null){var u=a.type;Ca(a.pendingProps.value,o.value)||(n!==null?n.push(u):n=[u])}}else if(a===cv.current){if(o=a.alternate,o===null)throw Error(ft(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&amp;&amp;(n!==null?n.push(Kd):n=[Kd])}a=a.return}n!==null&amp;&amp;x1(t,n,e,i),t.flags|=262144}function _v(n){for(n=n.firstContext;n!==null;){if(!Ca(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function jl(n){eu=n,Dr=null,n=n.dependencies,n!==null&amp;&amp;(n.firstContext=null)}function Ci(n){return b3(eu,n)}function V0(n,t){return eu===null&amp;&amp;jl(n),b3(n,t)}function b3(n,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},Dr===null){if(n===null)throw Error(ft(308));Dr=t,n.dependencies={lanes:0,firstContext:t},n.flags|=524288}else Dr=Dr.next=t;return e}var iI=typeof AbortController&lt;&quot;u&quot;?AbortController:function(){var n=[],t=this.signal={aborted:!1,addEventListener:function(e,i){n.push(i)}};this.abort=function(){t.aborted=!0,n.forEach(function(e){return e()})}},aI=kn.unstable_scheduleCallback,sI=kn.unstable_NormalPriority,Yn={$$typeof:Rr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dE(){return{controller:new iI,data:new Map,refCount:0}}function up(n){n.refCount--,n.refCount===0&amp;&amp;aI(sI,function(){n.controller.abort()})}var Dd=null,S1=0,$c=0,Yc=null;function rI(n,t){if(Dd===null){var e=Dd=[];S1=0,$c=BE(),Yc={status:&quot;pending&quot;,value:void 0,then:function(i){e.push(i)}}}return S1++,t.then(VC,VC),t}function VC(){if(--S1===0&amp;&amp;Dd!==null){Yc!==null&amp;&amp;(Yc.status=&quot;fulfilled&quot;);var n=Dd;Dd=null,$c=0,Yc=null;for(var t=0;t&lt;n.length;t++)(0,n[t])()}}function oI(n,t){var e=[],i={status:&quot;pending&quot;,value:null,reason:null,then:function(a){e.push(a)}};return n.then(function(){i.status=&quot;fulfilled&quot;,i.value=t;for(var a=0;a&lt;e.length;a++)(0,e[a])(t)},function(a){for(i.status=&quot;rejected&quot;,i.reason=a,a=0;a&lt;e.length;a++)(0,e[a])(void 0)}),i}var GC=ce.S;ce.S=function(n,t){typeof t==&quot;object&quot;&amp;&amp;t!==null&amp;&amp;typeof t.then==&quot;function&quot;&amp;&amp;rI(n,t),GC!==null&amp;&amp;GC(n,t)};var Yl=js(null);function pE(){var n=Yl.current;return n!==null?n:fn.pooledCache}function nv(n,t){t===null?yn(Yl,Yl.current):yn(Yl,t.pool)}function T3(){var n=pE();return n===null?null:{parent:Yn._currentValue,pool:n}}var cp=Error(ft(460)),A3=Error(ft(474)),Wv=Error(ft(542)),M1={then:function(){}};function XC(n){return n=n.status,n===&quot;fulfilled&quot;||n===&quot;rejected&quot;}function G0(){}function R3(n,t,e){switch(e=n[e],e===void 0?n.push(t):e!==t&amp;&amp;(t.then(G0,G0),t=e),t.status){case&quot;fulfilled&quot;:return t.value;case&quot;rejected&quot;:throw n=t.reason,YC(n),n;default:if(typeof t.status==&quot;string&quot;)t.then(G0,G0);else{if(n=fn,n!==null&amp;&amp;100&lt;n.shellSuspendCounter)throw Error(ft(482));n=t,n.status=&quot;pending&quot;,n.then(function(i){if(t.status===&quot;pending&quot;){var a=t;a.status=&quot;fulfilled&quot;,a.value=i}},function(i){if(t.status===&quot;pending&quot;){var a=t;a.status=&quot;rejected&quot;,a.reason=i}})}switch(t.status){case&quot;fulfilled&quot;:return t.value;case&quot;rejected&quot;:throw n=t.reason,YC(n),n}throw Ud=t,cp}}var Ud=null;function qC(){if(Ud===null)throw Error(ft(459));var n=Ud;return Ud=null,n}function YC(n){if(n===cp||n===Wv)throw Error(ft(483))}var To=!1;function mE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function E1(n,t){n=n.updateQueue,t.updateQueue===n&amp;&amp;(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zo(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Bo(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,(Ke&amp;2)!==0){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,t=gv(n),S3(n,null,e),t}return Yv(n,i,t,e),gv(n)}function Nd(n,t,e){if(t=t.updateQueue,t!==null&amp;&amp;(t=t.shared,(e&amp;4194048)!==0)){var i=t.lanes;i&amp;=n.pendingLanes,e|=i,t.lanes=e,jw(n,e)}}function PM(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&amp;&amp;(i=i.updateQueue,e===i)){var a=null,s=null;if(e=e.firstBaseUpdate,e!==null){do{var o={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};s===null?a=s=o:s=s.next=o,e=e.next}while(e!==null);s===null?a=s=t:s=s.next=t}else a=s=t;e={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:i.shared,callbacks:i.callbacks},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}var b1=!1;function Od(){if(b1){var n=Yc;if(n!==null)throw n}}function Ld(n,t,e,i){b1=!1;var a=n.updateQueue;To=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var c=u,h=c.next;c.next=null,o===null?s=h:o.next=h,o=c;var d=n.alternate;d!==null&amp;&amp;(d=d.updateQueue,u=d.lastBaseUpdate,u!==o&amp;&amp;(u===null?d.firstBaseUpdate=h:u.next=h,d.lastBaseUpdate=c))}if(s!==null){var m=a.baseState;o=0,d=h=c=null,u=s;do{var g=u.lane&amp;-536870913,y=g!==u.lane;if(y?(Ne&amp;g)===g:(i&amp;g)===g){g!==0&amp;&amp;g===$c&amp;&amp;(b1=!0),d!==null&amp;&amp;(d=d.next={lane:0,tag:u.tag,payload:u.payload,callback:null,next:null});t:{var x=n,b=u;g=t;var M=e;switch(b.tag){case 1:if(x=b.payload,typeof x==&quot;function&quot;){m=x.call(M,m,g);break t}m=x;break t;case 3:x.flags=x.flags&amp;-65537|128;case 0:if(x=b.payload,g=typeof x==&quot;function&quot;?x.call(M,m,g):x,g==null)break t;m=pn({},m,g);break t;case 2:To=!0}}g=u.callback,g!==null&amp;&amp;(n.flags|=64,y&amp;&amp;(n.flags|=8192),y=a.callbacks,y===null?a.callbacks=[g]:y.push(g))}else y={lane:g,tag:u.tag,payload:u.payload,callback:u.callback,next:null},d===null?(h=d=y,c=m):d=d.next=y,o|=g;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;y=u,u=y.next,y.next=null,a.lastBaseUpdate=y,a.shared.pending=null}}while(!0);d===null&amp;&amp;(c=m),a.baseState=c,a.firstBaseUpdate=h,a.lastBaseUpdate=d,s===null&amp;&amp;(a.shared.lanes=0),qo|=o,n.lanes=o,n.memoizedState=m}}function C3(n,t){if(typeof n!=&quot;function&quot;)throw Error(ft(191,n));n.call(t)}function w3(n,t){var e=n.callbacks;if(e!==null)for(n.callbacks=null,n=0;n&lt;e.length;n++)C3(e[n],t)}var tf=js(null),xv=js(0);function WC(n,t){n=Pr,yn(xv,n),yn(tf,t),Pr=n|t.baseLanes}function T1(){yn(xv,Pr),yn(tf,tf.current)}function gE(){Pr=xv.current,ai(tf),ai(xv)}var Go=0,be=null,en=null,Hn=null,Sv=!1,Wc=!1,Ql=!1,Mv=0,Wd=0,kc=null,lI=0;function Nn(){throw Error(ft(321))}function vE(n,t){if(t===null)return!1;for(var e=0;e&lt;t.length&amp;&amp;e&lt;n.length;e++)if(!Ca(n[e],t[e]))return!1;return!0}function yE(n,t,e,i,a,s){return Go=s,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ce.H=n===null||n.memoizedState===null?rD:oD,Ql=!1,s=e(i,a),Ql=!1,Wc&amp;&amp;(s=U3(t,e,i,a)),D3(n),s}function D3(n){ce.H=Ev;var t=en!==null&amp;&amp;en.next!==null;if(Go=0,Hn=en=be=null,Sv=!1,Wd=0,kc=null,t)throw Error(ft(300));n===null||ii||(n=n.dependencies,n!==null&amp;&amp;_v(n)&amp;&amp;(ii=!0))}function U3(n,t,e,i){be=n;var a=0;do{if(Wc&amp;&amp;(kc=null),Wd=0,Wc=!1,25&lt;=a)throw Error(ft(301));if(a+=1,Hn=en=null,n.updateQueue!=null){var s=n.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&amp;&amp;(s.memoCache.index=0)}ce.H=mI,s=t(e,i)}while(Wc);return s}function uI(){var n=ce.H,t=n.useState()[0];return t=typeof t.then==&quot;function&quot;?fp(t):t,n=n.useState()[0],(en!==null?en.memoizedState:null)!==n&amp;&amp;(be.flags|=1024),t}function _E(){var n=Mv!==0;return Mv=0,n}function xE(n,t,e){t.updateQueue=n.updateQueue,t.flags&amp;=-2053,n.lanes&amp;=~e}function SE(n){if(Sv){for(n=n.memoizedState;n!==null;){var t=n.queue;t!==null&amp;&amp;(t.pending=null),n=n.next}Sv=!1}Go=0,Hn=en=be=null,Wc=!1,Wd=Mv=0,kc=null}function Ki(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?be.memoizedState=Hn=n:Hn=Hn.next=n,Hn}function Fn(){if(en===null){var n=be.alternate;n=n!==null?n.memoizedState:null}else n=en.next;var t=Hn===null?be.memoizedState:Hn.next;if(t!==null)Hn=t,en=n;else{if(n===null)throw be.alternate===null?Error(ft(467)):Error(ft(310));en=n,n={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},Hn===null?be.memoizedState=Hn=n:Hn=Hn.next=n}return Hn}function ME(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fp(n){var t=Wd;return Wd+=1,kc===null&amp;&amp;(kc=[]),n=R3(kc,n,t),t=be,(Hn===null?t.memoizedState:Hn.next)===null&amp;&amp;(t=t.alternate,ce.H=t===null||t.memoizedState===null?rD:oD),n}function kv(n){if(n!==null&amp;&amp;typeof n==&quot;object&quot;){if(typeof n.then==&quot;function&quot;)return fp(n);if(n.$$typeof===Rr)return Ci(n)}throw Error(ft(438,String(n)))}function EE(n){var t=null,e=be.updateQueue;if(e!==null&amp;&amp;(t=e.memoCache),t==null){var i=be.alternate;i!==null&amp;&amp;(i=i.updateQueue,i!==null&amp;&amp;(i=i.memoCache,i!=null&amp;&amp;(t={data:i.data.map(function(a){return a.slice()}),index:0})))}if(t==null&amp;&amp;(t={data:[],index:0}),e===null&amp;&amp;(e=ME(),be.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(n),i=0;i&lt;n;i++)e[i]=k4;return t.index++,e}function zr(n,t){return typeof t==&quot;function&quot;?t(n):t}function iv(n){var t=Fn();return bE(t,en,n)}function bE(n,t,e){var i=n.queue;if(i===null)throw Error(ft(311));i.lastRenderedReducer=e;var a=n.baseQueue,s=i.pending;if(s!==null){if(a!==null){var o=a.next;a.next=s.next,s.next=o}t.baseQueue=a=s,i.pending=null}if(s=n.baseState,a===null)n.memoizedState=s;else{t=a.next;var u=o=null,c=null,h=t,d=!1;do{var m=h.lane&amp;-536870913;if(m!==h.lane?(Ne&amp;m)===m:(Go&amp;m)===m){var g=h.revertLane;if(g===0)c!==null&amp;&amp;(c=c.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),m===$c&amp;&amp;(d=!0);else if((Go&amp;g)===g){h=h.next,g===$c&amp;&amp;(d=!0);continue}else m={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},c===null?(u=c=m,o=s):c=c.next=m,be.lanes|=g,qo|=g;m=h.action,Ql&amp;&amp;e(s,m),s=h.hasEagerState?h.eagerState:e(s,m)}else g={lane:m,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},c===null?(u=c=g,o=s):c=c.next=g,be.lanes|=m,qo|=m;h=h.next}while(h!==null&amp;&amp;h!==t);if(c===null?o=s:c.next=u,!Ca(s,n.memoizedState)&amp;&amp;(ii=!0,d&amp;&amp;(e=Yc,e!==null)))throw e;n.memoizedState=s,n.baseState=o,n.baseQueue=c,i.lastRenderedState=s}return a===null&amp;&amp;(i.lanes=0),[n.memoizedState,i.dispatch]}function IM(n){var t=Fn(),e=t.queue;if(e===null)throw Error(ft(311));e.lastRenderedReducer=n;var i=e.dispatch,a=e.pending,s=t.memoizedState;if(a!==null){e.pending=null;var o=a=a.next;do s=n(s,o.action),o=o.next;while(o!==a);Ca(s,t.memoizedState)||(ii=!0),t.memoizedState=s,t.baseQueue===null&amp;&amp;(t.baseState=s),e.lastRenderedState=s}return[s,i]}function N3(n,t,e){var i=be,a=Fn(),s=Ve;if(s){if(e===void 0)throw Error(ft(407));e=e()}else e=t();var o=!Ca((en||a).memoizedState,e);o&amp;&amp;(a.memoizedState=e,ii=!0),a=a.queue;var u=z3.bind(null,i,a,n);if(hp(2048,8,u,[n]),a.getSnapshot!==t||o||Hn!==null&amp;&amp;Hn.memoizedState.tag&amp;1){if(i.flags|=2048,ef(9,Zv(),L3.bind(null,i,a,e,t),null),fn===null)throw Error(ft(349));s||(Go&amp;124)!==0||O3(i,t,e)}return e}function O3(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=be.updateQueue,t===null?(t=ME(),be.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function L3(n,t,e,i){t.value=e,t.getSnapshot=i,B3(t)&amp;&amp;P3(n)}function z3(n,t,e){return e(function(){B3(t)&amp;&amp;P3(n)})}function B3(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Ca(n,e)}catch{return!0}}function P3(n){var t=cf(n,2);t!==null&amp;&amp;Ra(t,n,2)}function A1(n){var t=Ki();if(typeof n==&quot;function&quot;){var e=n;if(n=e(),Ql){Do(!0);try{e()}finally{Do(!1)}}}return t.memoizedState=t.baseState=n,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:n},t}function I3(n,t,e,i){return n.baseState=e,bE(n,en,typeof i==&quot;function&quot;?i:zr)}function cI(n,t,e,i,a){if(jv(n))throw Error(ft(485));if(n=t.action,n!==null){var s={payload:a,action:n,next:null,isTransition:!0,status:&quot;pending&quot;,value:null,reason:null,listeners:[],then:function(o){s.listeners.push(o)}};ce.T!==null?e(!0):s.isTransition=!1,i(s),e=t.pending,e===null?(s.next=t.pending=s,H3(t,s)):(s.next=e.next,t.pending=e.next=s)}}function H3(n,t){var e=t.action,i=t.payload,a=n.state;if(t.isTransition){var s=ce.T,o={};ce.T=o;try{var u=e(a,i),c=ce.S;c!==null&amp;&amp;c(o,u),kC(n,t,u)}catch(h){R1(n,t,h)}finally{ce.T=s}}else try{s=e(a,i),kC(n,t,s)}catch(h){R1(n,t,h)}}function kC(n,t,e){e!==null&amp;&amp;typeof e==&quot;object&quot;&amp;&amp;typeof e.then==&quot;function&quot;?e.then(function(i){ZC(n,t,i)},function(i){return R1(n,t,i)}):ZC(n,t,e)}function ZC(n,t,e){t.status=&quot;fulfilled&quot;,t.value=e,F3(t),n.state=e,t=n.pending,t!==null&amp;&amp;(e=t.next,e===t?n.pending=null:(e=e.next,t.next=e,H3(n,e)))}function R1(n,t,e){var i=n.pending;if(n.pending=null,i!==null){i=i.next;do t.status=&quot;rejected&quot;,t.reason=e,F3(t),t=t.next;while(t!==i)}n.action=null}function F3(n){n=n.listeners;for(var t=0;t&lt;n.length;t++)(0,n[t])()}function V3(n,t){return t}function jC(n,t){if(Ve){var e=fn.formState;if(e!==null){t:{var i=be;if(Ve){if(Cn){e:{for(var a=Cn,s=qs;a.nodeType!==8;){if(!s){a=null;break e}if(a=ys(a.nextSibling),a===null){a=null;break e}}s=a.data,a=s===&quot;F!&quot;||s===&quot;F&quot;?a:null}if(a){Cn=ys(a.nextSibling),i=a.data===&quot;F!&quot;;break t}}Zl(i)}i=!1}i&amp;&amp;(t=e[0])}}return e=Ki(),e.memoizedState=e.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:V3,lastRenderedState:t},e.queue=i,e=iD.bind(null,be,i),i.dispatch=e,i=A1(!1),s=CE.bind(null,be,!1,i.queue),i=Ki(),a={state:t,dispatch:null,action:n,pending:null},i.queue=a,e=cI.bind(null,be,a,s,e),a.dispatch=e,i.memoizedState=n,[t,e,!1]}function QC(n){var t=Fn();return G3(t,en,n)}function G3(n,t,e){if(t=bE(n,t,V3)[0],n=iv(zr)[0],typeof t==&quot;object&quot;&amp;&amp;t!==null&amp;&amp;typeof t.then==&quot;function&quot;)try{var i=fp(t)}catch(o){throw o===cp?Wv:o}else i=t;t=Fn();var a=t.queue,s=a.dispatch;return e!==t.memoizedState&amp;&amp;(be.flags|=2048,ef(9,Zv(),fI.bind(null,a,e),null)),[i,s,n]}function fI(n,t){n.action=t}function KC(n){var t=Fn(),e=en;if(e!==null)return G3(t,e,n);Fn(),t=t.memoizedState,e=Fn();var i=e.queue.dispatch;return e.memoizedState=n,[t,i,!1]}function ef(n,t,e,i){return n={tag:n,create:e,deps:i,inst:t,next:null},t=be.updateQueue,t===null&amp;&amp;(t=ME(),be.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n),n}function Zv(){return{destroy:void 0,resource:void 0}}function X3(){return Fn().memoizedState}function av(n,t,e,i){var a=Ki();i=i===void 0?null:i,be.flags|=n,a.memoizedState=ef(1|t,Zv(),e,i)}function hp(n,t,e,i){var a=Fn();i=i===void 0?null:i;var s=a.memoizedState.inst;en!==null&amp;&amp;i!==null&amp;&amp;vE(i,en.memoizedState.deps)?a.memoizedState=ef(t,s,e,i):(be.flags|=n,a.memoizedState=ef(1|t,s,e,i))}function JC(n,t){av(8390656,8,n,t)}function q3(n,t){hp(2048,8,n,t)}function Y3(n,t){return hp(4,2,n,t)}function W3(n,t){return hp(4,4,n,t)}function k3(n,t){if(typeof t==&quot;function&quot;){n=n();var e=t(n);return function(){typeof e==&quot;function&quot;?e():t(null)}}if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function Z3(n,t,e){e=e!=null?e.concat([n]):null,hp(4,4,k3.bind(null,t,n),e)}function TE(){}function j3(n,t){var e=Fn();t=t===void 0?null:t;var i=e.memoizedState;return t!==null&amp;&amp;vE(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function Q3(n,t){var e=Fn();t=t===void 0?null:t;var i=e.memoizedState;if(t!==null&amp;&amp;vE(t,i[1]))return i[0];if(i=n(),Ql){Do(!0);try{n()}finally{Do(!1)}}return e.memoizedState=[i,t],i}function AE(n,t,e){return e===void 0||(Go&amp;1073741824)!==0?n.memoizedState=t:(n.memoizedState=e,n=FD(),be.lanes|=n,qo|=n,e)}function K3(n,t,e,i){return Ca(e,t)?e:tf.current!==null?(n=AE(n,e,i),Ca(n,t)||(ii=!0),n):(Go&amp;42)===0?(ii=!0,n.memoizedState=e):(n=FD(),be.lanes|=n,qo|=n,t)}function J3(n,t,e,i,a){var s=Ge.p;Ge.p=s!==0&amp;&amp;8&gt;s?s:8;var o=ce.T,u={};ce.T=u,CE(n,!1,t,e);try{var c=a(),h=ce.S;if(h!==null&amp;&amp;h(u,c),c!==null&amp;&amp;typeof c==&quot;object&quot;&amp;&amp;typeof c.then==&quot;function&quot;){var d=oI(c,i);zd(n,t,d,Aa(n))}else zd(n,t,i,Aa(n))}catch(m){zd(n,t,{then:function(){},status:&quot;rejected&quot;,reason:m},Aa())}finally{Ge.p=s,ce.T=o}}function hI(){}function C1(n,t,e,i){if(n.tag!==5)throw Error(ft(476));var a=$3(n).queue;J3(n,a,t,Vl,e===null?hI:function(){return tD(n),e(i)})}function $3(n){var t=n.memoizedState;if(t!==null)return t;t={memoizedState:Vl,baseState:Vl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:Vl},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zr,lastRenderedState:e},next:null},n.memoizedState=t,n=n.alternate,n!==null&amp;&amp;(n.memoizedState=t),t}function tD(n){var t=$3(n).next.queue;zd(n,t,{},Aa())}function RE(){return Ci(Kd)}function eD(){return Fn().memoizedState}function nD(){return Fn().memoizedState}function dI(n){for(var t=n.return;t!==null;){switch(t.tag){case 24:case 3:var e=Aa();n=zo(e);var i=Bo(t,n,e);i!==null&amp;&amp;(Ra(i,t,e),Nd(i,t,e)),t={cache:dE()},n.payload=t;return}t=t.return}}function pI(n,t,e){var i=Aa();e={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null},jv(n)?aD(t,e):(e=uE(n,t,e,i),e!==null&amp;&amp;(Ra(e,n,i),sD(e,t,i)))}function iD(n,t,e){var i=Aa();zd(n,t,e,i)}function zd(n,t,e,i){var a={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null};if(jv(n))aD(t,a);else{var s=n.alternate;if(n.lanes===0&amp;&amp;(s===null||s.lanes===0)&amp;&amp;(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,u=s(o,e);if(a.hasEagerState=!0,a.eagerState=u,Ca(u,o))return Yv(n,t,a,0),fn===null&amp;&amp;qv(),!1}catch{}finally{}if(e=uE(n,t,a,i),e!==null)return Ra(e,n,i),sD(e,t,i),!0}return!1}function CE(n,t,e,i){if(i={lane:2,revertLane:BE(),action:i,hasEagerState:!1,eagerState:null,next:null},jv(n)){if(t)throw Error(ft(479))}else t=uE(n,e,i,2),t!==null&amp;&amp;Ra(t,n,2)}function jv(n){var t=n.alternate;return n===be||t!==null&amp;&amp;t===be}function aD(n,t){Wc=Sv=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function sD(n,t,e){if((e&amp;4194048)!==0){var i=t.lanes;i&amp;=n.pendingLanes,e|=i,t.lanes=e,jw(n,e)}}var Ev={readContext:Ci,use:kv,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useLayoutEffect:Nn,useInsertionEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useSyncExternalStore:Nn,useId:Nn,useHostTransitionStatus:Nn,useFormState:Nn,useActionState:Nn,useOptimistic:Nn,useMemoCache:Nn,useCacheRefresh:Nn},rD={readContext:Ci,use:kv,useCallback:function(n,t){return Ki().memoizedState=[n,t===void 0?null:t],n},useContext:Ci,useEffect:JC,useImperativeHandle:function(n,t,e){e=e!=null?e.concat([n]):null,av(4194308,4,k3.bind(null,t,n),e)},useLayoutEffect:function(n,t){return av(4194308,4,n,t)},useInsertionEffect:function(n,t){av(4,2,n,t)},useMemo:function(n,t){var e=Ki();t=t===void 0?null:t;var i=n();if(Ql){Do(!0);try{n()}finally{Do(!1)}}return e.memoizedState=[i,t],i},useReducer:function(n,t,e){var i=Ki();if(e!==void 0){var a=e(t);if(Ql){Do(!0);try{e(t)}finally{Do(!1)}}}else a=t;return i.memoizedState=i.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:a},i.queue=n,n=n.dispatch=pI.bind(null,be,n),[i.memoizedState,n]},useRef:function(n){var t=Ki();return n={current:n},t.memoizedState=n},useState:function(n){n=A1(n);var t=n.queue,e=iD.bind(null,be,t);return t.dispatch=e,[n.memoizedState,e]},useDebugValue:TE,useDeferredValue:function(n,t){var e=Ki();return AE(e,n,t)},useTransition:function(){var n=A1(!1);return n=J3.bind(null,be,n.queue,!0,!1),Ki().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,t,e){var i=be,a=Ki();if(Ve){if(e===void 0)throw Error(ft(407));e=e()}else{if(e=t(),fn===null)throw Error(ft(349));(Ne&amp;124)!==0||O3(i,t,e)}a.memoizedState=e;var s={value:e,getSnapshot:t};return a.queue=s,JC(z3.bind(null,i,s,n),[n]),i.flags|=2048,ef(9,Zv(),L3.bind(null,i,s,e,t),null),e},useId:function(){var n=Ki(),t=fn.identifierPrefix;if(Ve){var e=wr,i=Cr;e=(i&amp;~(1&lt;&lt;32-Ta(i)-1)).toString(32)+e,t=&quot;\xAB&quot;+t+&quot;R&quot;+e,e=Mv++,0&lt;e&amp;&amp;(t+=&quot;H&quot;+e.toString(32)),t+=&quot;\xBB&quot;}else e=lI++,t=&quot;\xAB&quot;+t+&quot;r&quot;+e.toString(32)+&quot;\xBB&quot;;return n.memoizedState=t},useHostTransitionStatus:RE,useFormState:jC,useActionState:jC,useOptimistic:function(n){var t=Ki();t.memoizedState=t.baseState=n;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=CE.bind(null,be,!0,e),e.dispatch=t,[n,t]},useMemoCache:EE,useCacheRefresh:function(){return Ki().memoizedState=dI.bind(null,be)}},oD={readContext:Ci,use:kv,useCallback:j3,useContext:Ci,useEffect:q3,useImperativeHandle:Z3,useInsertionEffect:Y3,useLayoutEffect:W3,useMemo:Q3,useReducer:iv,useRef:X3,useState:function(){return iv(zr)},useDebugValue:TE,useDeferredValue:function(n,t){var e=Fn();return K3(e,en.memoizedState,n,t)},useTransition:function(){var n=iv(zr)[0],t=Fn().memoizedState;return[typeof n==&quot;boolean&quot;?n:fp(n),t]},useSyncExternalStore:N3,useId:eD,useHostTransitionStatus:RE,useFormState:QC,useActionState:QC,useOptimistic:function(n,t){var e=Fn();return I3(e,en,n,t)},useMemoCache:EE,useCacheRefresh:nD},mI={readContext:Ci,use:kv,useCallback:j3,useContext:Ci,useEffect:q3,useImperativeHandle:Z3,useInsertionEffect:Y3,useLayoutEffect:W3,useMemo:Q3,useReducer:IM,useRef:X3,useState:function(){return IM(zr)},useDebugValue:TE,useDeferredValue:function(n,t){var e=Fn();return en===null?AE(e,n,t):K3(e,en.memoizedState,n,t)},useTransition:function(){var n=IM(zr)[0],t=Fn().memoizedState;return[typeof n==&quot;boolean&quot;?n:fp(n),t]},useSyncExternalStore:N3,useId:eD,useHostTransitionStatus:RE,useFormState:KC,useActionState:KC,useOptimistic:function(n,t){var e=Fn();return en!==null?I3(e,en,n,t):(e.baseState=n,[n,e.queue.dispatch])},useMemoCache:EE,useCacheRefresh:nD},Zc=null,kd=0;function X0(n){var t=kd;return kd+=1,Zc===null&amp;&amp;(Zc=[]),R3(Zc,n,t)}function yd(n,t){t=t.props.ref,n.ref=t!==void 0?t:null}function q0(n,t){throw t.$$typeof===Y4?Error(ft(525)):(n=Object.prototype.toString.call(t),Error(ft(31,n===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(t).join(&quot;, &quot;)+&quot;}&quot;:n)))}function $C(n){var t=n._init;return t(n._payload)}function lD(n){function t(v,S){if(n){var E=v.deletions;E===null?(v.deletions=[S],v.flags|=16):E.push(S)}}function e(v,S){if(!n)return null;for(;S!==null;)t(v,S),S=S.sibling;return null}function i(v){for(var S=new Map;v!==null;)v.key!==null?S.set(v.key,v):S.set(v.index,v),v=v.sibling;return S}function a(v,S){return v=Nr(v,S),v.index=0,v.sibling=null,v}function s(v,S,E){return v.index=E,n?(E=v.alternate,E!==null?(E=E.index,E&lt;S?(v.flags|=67108866,S):E):(v.flags|=67108866,S)):(v.flags|=1048576,S)}function o(v){return n&amp;&amp;v.alternate===null&amp;&amp;(v.flags|=67108866),v}function u(v,S,E,T){return S===null||S.tag!==6?(S=zM(E,v.mode,T),S.return=v,S):(S=a(S,E),S.return=v,S)}function c(v,S,E,T){var w=E.type;return w===Dc?d(v,S,E.props.children,T,E.key):S!==null&amp;&amp;(S.elementType===w||typeof w==&quot;object&quot;&amp;&amp;w!==null&amp;&amp;w.$$typeof===bo&amp;&amp;$C(w)===S.type)?(S=a(S,E.props),yd(S,E),S.return=v,S):(S=ev(E.type,E.key,E.props,null,v.mode,T),yd(S,E),S.return=v,S)}function h(v,S,E,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=BM(E,v.mode,T),S.return=v,S):(S=a(S,E.children||[]),S.return=v,S)}function d(v,S,E,T,w){return S===null||S.tag!==7?(S=Gl(E,v.mode,T,w),S.return=v,S):(S=a(S,E),S.return=v,S)}function m(v,S,E){if(typeof S==&quot;string&quot;&amp;&amp;S!==&quot;&quot;||typeof S==&quot;number&quot;||typeof S==&quot;bigint&quot;)return S=zM(&quot;&quot;+S,v.mode,E),S.return=v,S;if(typeof S==&quot;object&quot;&amp;&amp;S!==null){switch(S.$$typeof){case L0:return E=ev(S.type,S.key,S.props,null,v.mode,E),yd(E,S),E.return=v,E;case Ed:return S=BM(S,v.mode,E),S.return=v,S;case bo:var T=S._init;return S=T(S._payload),m(v,S,E)}if(bd(S)||md(S))return S=Gl(S,v.mode,E,null),S.return=v,S;if(typeof S.then==&quot;function&quot;)return m(v,X0(S),E);if(S.$$typeof===Rr)return m(v,V0(v,S),E);q0(v,S)}return null}function g(v,S,E,T){var w=S!==null?S.key:null;if(typeof E==&quot;string&quot;&amp;&amp;E!==&quot;&quot;||typeof E==&quot;number&quot;||typeof E==&quot;bigint&quot;)return w!==null?null:u(v,S,&quot;&quot;+E,T);if(typeof E==&quot;object&quot;&amp;&amp;E!==null){switch(E.$$typeof){case L0:return E.key===w?c(v,S,E,T):null;case Ed:return E.key===w?h(v,S,E,T):null;case bo:return w=E._init,E=w(E._payload),g(v,S,E,T)}if(bd(E)||md(E))return w!==null?null:d(v,S,E,T,null);if(typeof E.then==&quot;function&quot;)return g(v,S,X0(E),T);if(E.$$typeof===Rr)return g(v,S,V0(v,E),T);q0(v,E)}return null}function y(v,S,E,T,w){if(typeof T==&quot;string&quot;&amp;&amp;T!==&quot;&quot;||typeof T==&quot;number&quot;||typeof T==&quot;bigint&quot;)return v=v.get(E)||null,u(S,v,&quot;&quot;+T,w);if(typeof T==&quot;object&quot;&amp;&amp;T!==null){switch(T.$$typeof){case L0:return v=v.get(T.key===null?E:T.key)||null,c(S,v,T,w);case Ed:return v=v.get(T.key===null?E:T.key)||null,h(S,v,T,w);case bo:var U=T._init;return T=U(T._payload),y(v,S,E,T,w)}if(bd(T)||md(T))return v=v.get(E)||null,d(S,v,T,w,null);if(typeof T.then==&quot;function&quot;)return y(v,S,E,X0(T),w);if(T.$$typeof===Rr)return y(v,S,E,V0(S,T),w);q0(S,T)}return null}function x(v,S,E,T){for(var w=null,U=null,O=S,z=S=0,C=null;O!==null&amp;&amp;z&lt;E.length;z++){O.index&gt;z?(C=O,O=null):C=O.sibling;var R=g(v,O,E[z],T);if(R===null){O===null&amp;&amp;(O=C);break}n&amp;&amp;O&amp;&amp;R.alternate===null&amp;&amp;t(v,O),S=s(R,S,z),U===null?w=R:U.sibling=R,U=R,O=C}if(z===E.length)return e(v,O),Ve&amp;&amp;Hl(v,z),w;if(O===null){for(;z&lt;E.length;z++)O=m(v,E[z],T),O!==null&amp;&amp;(S=s(O,S,z),U===null?w=O:U.sibling=O,U=O);return Ve&amp;&amp;Hl(v,z),w}for(O=i(O);z&lt;E.length;z++)C=y(O,v,z,E[z],T),C!==null&amp;&amp;(n&amp;&amp;C.alternate!==null&amp;&amp;O.delete(C.key===null?z:C.key),S=s(C,S,z),U===null?w=C:U.sibling=C,U=C);return n&amp;&amp;O.forEach(function(P){return t(v,P)}),Ve&amp;&amp;Hl(v,z),w}function b(v,S,E,T){if(E==null)throw Error(ft(151));for(var w=null,U=null,O=S,z=S=0,C=null,R=E.next();O!==null&amp;&amp;!R.done;z++,R=E.next()){O.index&gt;z?(C=O,O=null):C=O.sibling;var P=g(v,O,R.value,T);if(P===null){O===null&amp;&amp;(O=C);break}n&amp;&amp;O&amp;&amp;P.alternate===null&amp;&amp;t(v,O),S=s(P,S,z),U===null?w=P:U.sibling=P,U=P,O=C}if(R.done)return e(v,O),Ve&amp;&amp;Hl(v,z),w;if(O===null){for(;!R.done;z++,R=E.next())R=m(v,R.value,T),R!==null&amp;&amp;(S=s(R,S,z),U===null?w=R:U.sibling=R,U=R);return Ve&amp;&amp;Hl(v,z),w}for(O=i(O);!R.done;z++,R=E.next())R=y(O,v,z,R.value,T),R!==null&amp;&amp;(n&amp;&amp;R.alternate!==null&amp;&amp;O.delete(R.key===null?z:R.key),S=s(R,S,z),U===null?w=R:U.sibling=R,U=R);return n&amp;&amp;O.forEach(function(j){return t(v,j)}),Ve&amp;&amp;Hl(v,z),w}function M(v,S,E,T){if(typeof E==&quot;object&quot;&amp;&amp;E!==null&amp;&amp;E.type===Dc&amp;&amp;E.key===null&amp;&amp;(E=E.props.children),typeof E==&quot;object&quot;&amp;&amp;E!==null){switch(E.$$typeof){case L0:t:{for(var w=E.key;S!==null;){if(S.key===w){if(w=E.type,w===Dc){if(S.tag===7){e(v,S.sibling),T=a(S,E.props.children),T.return=v,v=T;break t}}else if(S.elementType===w||typeof w==&quot;object&quot;&amp;&amp;w!==null&amp;&amp;w.$$typeof===bo&amp;&amp;$C(w)===S.type){e(v,S.sibling),T=a(S,E.props),yd(T,E),T.return=v,v=T;break t}e(v,S);break}else t(v,S);S=S.sibling}E.type===Dc?(T=Gl(E.props.children,v.mode,T,E.key),T.return=v,v=T):(T=ev(E.type,E.key,E.props,null,v.mode,T),yd(T,E),T.return=v,v=T)}return o(v);case Ed:t:{for(w=E.key;S!==null;){if(S.key===w)if(S.tag===4&amp;&amp;S.stateNode.containerInfo===E.containerInfo&amp;&amp;S.stateNode.implementation===E.implementation){e(v,S.sibling),T=a(S,E.children||[]),T.return=v,v=T;break t}else{e(v,S);break}else t(v,S);S=S.sibling}T=BM(E,v.mode,T),T.return=v,v=T}return o(v);case bo:return w=E._init,E=w(E._payload),M(v,S,E,T)}if(bd(E))return x(v,S,E,T);if(md(E)){if(w=md(E),typeof w!=&quot;function&quot;)throw Error(ft(150));return E=w.call(E),b(v,S,E,T)}if(typeof E.then==&quot;function&quot;)return M(v,S,X0(E),T);if(E.$$typeof===Rr)return M(v,S,V0(v,E),T);q0(v,E)}return typeof E==&quot;string&quot;&amp;&amp;E!==&quot;&quot;||typeof E==&quot;number&quot;||typeof E==&quot;bigint&quot;?(E=&quot;&quot;+E,S!==null&amp;&amp;S.tag===6?(e(v,S.sibling),T=a(S,E),T.return=v,v=T):(e(v,S),T=zM(E,v.mode,T),T.return=v,v=T),o(v)):e(v,S)}return function(v,S,E,T){try{kd=0;var w=M(v,S,E,T);return Zc=null,w}catch(O){if(O===cp||O===Wv)throw O;var U=Ea(29,O,null,v.mode);return U.lanes=T,U.return=v,U}finally{}}}var nf=lD(!0),uD=lD(!1),as=js(null),Zs=null;function Ro(n){var t=n.alternate;yn(Wn,Wn.current&amp;1),yn(as,n),Zs===null&amp;&amp;(t===null||tf.current!==null||t.memoizedState!==null)&amp;&amp;(Zs=n)}function cD(n){if(n.tag===22){if(yn(Wn,Wn.current),yn(as,n),Zs===null){var t=n.alternate;t!==null&amp;&amp;t.memoizedState!==null&amp;&amp;(Zs=n)}}else Co(n)}function Co(){yn(Wn,Wn.current),yn(as,as.current)}function Ur(n){ai(as),Zs===n&amp;&amp;(Zs=null),ai(Wn)}var Wn=js(0);function bv(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&amp;&amp;(e=e.dehydrated,e===null||e.data===&quot;$?&quot;||Y1(e)))return t}else if(t.tag===19&amp;&amp;t.memoizedProps.revealOrder!==void 0){if((t.flags&amp;128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function HM(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:pn({},t,e),n.memoizedState=e,n.lanes===0&amp;&amp;(n.updateQueue.baseState=e)}var w1={enqueueSetState:function(n,t,e){n=n._reactInternals;var i=Aa(),a=zo(i);a.payload=t,e!=null&amp;&amp;(a.callback=e),t=Bo(n,a,i),t!==null&amp;&amp;(Ra(t,n,i),Nd(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=Aa(),a=zo(i);a.tag=1,a.payload=t,e!=null&amp;&amp;(a.callback=e),t=Bo(n,a,i),t!==null&amp;&amp;(Ra(t,n,i),Nd(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Aa(),i=zo(e);i.tag=2,t!=null&amp;&amp;(i.callback=t),t=Bo(n,i,e),t!==null&amp;&amp;(Ra(t,n,e),Nd(t,n,e))}};function tw(n,t,e,i,a,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate==&quot;function&quot;?n.shouldComponentUpdate(i,s,o):t.prototype&amp;&amp;t.prototype.isPureReactComponent?!qd(e,i)||!qd(a,s):!0}function ew(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps==&quot;function&quot;&amp;&amp;t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps==&quot;function&quot;&amp;&amp;t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&amp;&amp;w1.enqueueReplaceState(t,t.state,null)}function Kl(n,t){var e=t;if(&quot;ref&quot;in t){e={};for(var i in t)i!==&quot;ref&quot;&amp;&amp;(e[i]=t[i])}if(n=n.defaultProps){e===t&amp;&amp;(e=pn({},e));for(var a in n)e[a]===void 0&amp;&amp;(e[a]=n[a])}return e}var Tv=typeof reportError==&quot;function&quot;?reportError:function(n){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var t=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof n==&quot;object&quot;&amp;&amp;n!==null&amp;&amp;typeof n.message==&quot;string&quot;?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,n);return}console.error(n)};function fD(n){Tv(n)}function hD(n){console.error(n)}function dD(n){Tv(n)}function Av(n,t){try{var e=n.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function nw(n,t,e){try{var i=n.onCaughtError;i(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(a){setTimeout(function(){throw a})}}function D1(n,t,e){return e=zo(e),e.tag=3,e.payload={element:null},e.callback=function(){Av(n,t)},e}function pD(n){return n=zo(n),n.tag=3,n}function mD(n,t,e,i){var a=e.type.getDerivedStateFromError;if(typeof a==&quot;function&quot;){var s=i.value;n.payload=function(){return a(s)},n.callback=function(){nw(t,e,i)}}var o=e.stateNode;o!==null&amp;&amp;typeof o.componentDidCatch==&quot;function&quot;&amp;&amp;(n.callback=function(){nw(t,e,i),typeof a!=&quot;function&quot;&amp;&amp;(Po===null?Po=new Set([this]):Po.add(this));var u=i.stack;this.componentDidCatch(i.value,{componentStack:u!==null?u:&quot;&quot;})})}function gI(n,t,e,i,a){if(e.flags|=32768,i!==null&amp;&amp;typeof i==&quot;object&quot;&amp;&amp;typeof i.then==&quot;function&quot;){if(t=e.alternate,t!==null&amp;&amp;lp(t,e,a,!0),e=as.current,e!==null){switch(e.tag){case 13:return Zs===null?I1():e.alternate===null&amp;&amp;wn===0&amp;&amp;(wn=3),e.flags&amp;=-257,e.flags|=65536,e.lanes=a,i===M1?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([i]):t.add(i),QM(n,i,a)),!1;case 22:return e.flags|=65536,i===M1?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([i]):e.add(i)),QM(n,i,a)),!1}throw Error(ft(435,e.tag))}return QM(n,i,a),I1(),!1}if(Ve)return t=as.current,t!==null?((t.flags&amp;65536)===0&amp;&amp;(t.flags|=256),t.flags|=65536,t.lanes=a,i!==v1&amp;&amp;(n=Error(ft(422),{cause:i}),Yd(ns(n,e)))):(i!==v1&amp;&amp;(t=Error(ft(423),{cause:i}),Yd(ns(t,e))),n=n.current.alternate,n.flags|=65536,a&amp;=-a,n.lanes|=a,i=ns(i,e),a=D1(n.stateNode,i,a),PM(n,a),wn!==4&amp;&amp;(wn=2)),!1;var s=Error(ft(520),{cause:i});if(s=ns(s,e),Id===null?Id=[s]:Id.push(s),wn!==4&amp;&amp;(wn=2),t===null)return!0;i=ns(i,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,n=a&amp;-a,e.lanes|=n,n=D1(e.stateNode,i,n),PM(e,n),!1;case 1:if(t=e.type,s=e.stateNode,(e.flags&amp;128)===0&amp;&amp;(typeof t.getDerivedStateFromError==&quot;function&quot;||s!==null&amp;&amp;typeof s.componentDidCatch==&quot;function&quot;&amp;&amp;(Po===null||!Po.has(s))))return e.flags|=65536,a&amp;=-a,e.lanes|=a,a=pD(a),mD(a,n,e,i),PM(e,a),!1}e=e.return}while(e!==null);return!1}var gD=Error(ft(461)),ii=!1;function pi(n,t,e,i){t.child=n===null?uD(t,null,e,i):nf(t,n.child,e,i)}function iw(n,t,e,i,a){e=e.render;var s=t.ref;if(&quot;ref&quot;in i){var o={};for(var u in i)u!==&quot;ref&quot;&amp;&amp;(o[u]=i[u])}else o=i;return jl(t),i=yE(n,t,e,o,s,a),u=_E(),n!==null&amp;&amp;!ii?(xE(n,t,a),Br(n,t,a)):(Ve&amp;&amp;u&amp;&amp;fE(t),t.flags|=1,pi(n,t,i,a),t.child)}function aw(n,t,e,i,a){if(n===null){var s=e.type;return typeof s==&quot;function&quot;&amp;&amp;!cE(s)&amp;&amp;s.defaultProps===void 0&amp;&amp;e.compare===null?(t.tag=15,t.type=s,vD(n,t,s,i,a)):(n=ev(e.type,null,i,t,t.mode,a),n.ref=t.ref,n.return=t,t.child=n)}if(s=n.child,!wE(n,a)){var o=s.memoizedProps;if(e=e.compare,e=e!==null?e:qd,e(o,i)&amp;&amp;n.ref===t.ref)return Br(n,t,a)}return t.flags|=1,n=Nr(s,i),n.ref=t.ref,n.return=t,t.child=n}function vD(n,t,e,i,a){if(n!==null){var s=n.memoizedProps;if(qd(s,i)&amp;&amp;n.ref===t.ref)if(ii=!1,t.pendingProps=i=s,wE(n,a))(n.flags&amp;131072)!==0&amp;&amp;(ii=!0);else return t.lanes=n.lanes,Br(n,t,a)}return U1(n,t,e,i,a)}function yD(n,t,e){var i=t.pendingProps,a=i.children,s=n!==null?n.memoizedState:null;if(i.mode===&quot;hidden&quot;){if((t.flags&amp;128)!==0){if(i=s!==null?s.baseLanes|e:e,n!==null){for(a=t.child=n.child,s=0;a!==null;)s=s|a.lanes|a.childLanes,a=a.sibling;t.childLanes=s&amp;~i}else t.childLanes=0,t.child=null;return sw(n,t,i,e)}if((e&amp;536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},n!==null&amp;&amp;nv(t,s!==null?s.cachePool:null),s!==null?WC(t,s):T1(),cD(t);else return t.lanes=t.childLanes=536870912,sw(n,t,s!==null?s.baseLanes|e:e,e)}else s!==null?(nv(t,s.cachePool),WC(t,s),Co(t),t.memoizedState=null):(n!==null&amp;&amp;nv(t,null),T1(),Co(t));return pi(n,t,a,e),t.child}function sw(n,t,e,i){var a=pE();return a=a===null?null:{parent:Yn._currentValue,pool:a},t.memoizedState={baseLanes:e,cachePool:a},n!==null&amp;&amp;nv(t,null),T1(),cD(t),n!==null&amp;&amp;lp(n,t,i,!0),null}function sv(n,t){var e=t.ref;if(e===null)n!==null&amp;&amp;n.ref!==null&amp;&amp;(t.flags|=4194816);else{if(typeof e!=&quot;function&quot;&amp;&amp;typeof e!=&quot;object&quot;)throw Error(ft(284));(n===null||n.ref!==e)&amp;&amp;(t.flags|=4194816)}}function U1(n,t,e,i,a){return jl(t),e=yE(n,t,e,i,void 0,a),i=_E(),n!==null&amp;&amp;!ii?(xE(n,t,a),Br(n,t,a)):(Ve&amp;&amp;i&amp;&amp;fE(t),t.flags|=1,pi(n,t,e,a),t.child)}function rw(n,t,e,i,a,s){return jl(t),t.updateQueue=null,e=U3(t,i,e,a),D3(n),i=_E(),n!==null&amp;&amp;!ii?(xE(n,t,s),Br(n,t,s)):(Ve&amp;&amp;i&amp;&amp;fE(t),t.flags|=1,pi(n,t,e,s),t.child)}function ow(n,t,e,i,a){if(jl(t),t.stateNode===null){var s=Ic,o=e.contextType;typeof o==&quot;object&quot;&amp;&amp;o!==null&amp;&amp;(s=Ci(o)),s=new e(i,s),t.memoizedState=s.state!==null&amp;&amp;s.state!==void 0?s.state:null,s.updater=w1,t.stateNode=s,s._reactInternals=t,s=t.stateNode,s.props=i,s.state=t.memoizedState,s.refs={},mE(t),o=e.contextType,s.context=typeof o==&quot;object&quot;&amp;&amp;o!==null?Ci(o):Ic,s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o==&quot;function&quot;&amp;&amp;(HM(t,e,o,i),s.state=t.memoizedState),typeof e.getDerivedStateFromProps==&quot;function&quot;||typeof s.getSnapshotBeforeUpdate==&quot;function&quot;||typeof s.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof s.componentWillMount!=&quot;function&quot;||(o=s.state,typeof s.componentWillMount==&quot;function&quot;&amp;&amp;s.componentWillMount(),typeof s.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;s.UNSAFE_componentWillMount(),o!==s.state&amp;&amp;w1.enqueueReplaceState(s,s.state,null),Ld(t,i,s,a),Od(),s.state=t.memoizedState),typeof s.componentDidMount==&quot;function&quot;&amp;&amp;(t.flags|=4194308),i=!0}else if(n===null){s=t.stateNode;var u=t.memoizedProps,c=Kl(e,u);s.props=c;var h=s.context,d=e.contextType;o=Ic,typeof d==&quot;object&quot;&amp;&amp;d!==null&amp;&amp;(o=Ci(d));var m=e.getDerivedStateFromProps;d=typeof m==&quot;function&quot;||typeof s.getSnapshotBeforeUpdate==&quot;function&quot;,u=t.pendingProps!==u,d||typeof s.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof s.componentWillReceiveProps!=&quot;function&quot;||(u||h!==o)&amp;&amp;ew(t,s,i,o),To=!1;var g=t.memoizedState;s.state=g,Ld(t,i,s,a),Od(),h=t.memoizedState,u||g!==h||To?(typeof m==&quot;function&quot;&amp;&amp;(HM(t,e,m,i),h=t.memoizedState),(c=To||tw(t,e,c,i,g,h,o))?(d||typeof s.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof s.componentWillMount!=&quot;function&quot;||(typeof s.componentWillMount==&quot;function&quot;&amp;&amp;s.componentWillMount(),typeof s.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;s.UNSAFE_componentWillMount()),typeof s.componentDidMount==&quot;function&quot;&amp;&amp;(t.flags|=4194308)):(typeof s.componentDidMount==&quot;function&quot;&amp;&amp;(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=h),s.props=i,s.state=h,s.context=o,i=c):(typeof s.componentDidMount==&quot;function&quot;&amp;&amp;(t.flags|=4194308),i=!1)}else{s=t.stateNode,E1(n,t),o=t.memoizedProps,d=Kl(e,o),s.props=d,m=t.pendingProps,g=s.context,h=e.contextType,c=Ic,typeof h==&quot;object&quot;&amp;&amp;h!==null&amp;&amp;(c=Ci(h)),u=e.getDerivedStateFromProps,(h=typeof u==&quot;function&quot;||typeof s.getSnapshotBeforeUpdate==&quot;function&quot;)||typeof s.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof s.componentWillReceiveProps!=&quot;function&quot;||(o!==m||g!==c)&amp;&amp;ew(t,s,i,c),To=!1,g=t.memoizedState,s.state=g,Ld(t,i,s,a),Od();var y=t.memoizedState;o!==m||g!==y||To||n!==null&amp;&amp;n.dependencies!==null&amp;&amp;_v(n.dependencies)?(typeof u==&quot;function&quot;&amp;&amp;(HM(t,e,u,i),y=t.memoizedState),(d=To||tw(t,e,d,i,g,y,c)||n!==null&amp;&amp;n.dependencies!==null&amp;&amp;_v(n.dependencies))?(h||typeof s.UNSAFE_componentWillUpdate!=&quot;function&quot;&amp;&amp;typeof s.componentWillUpdate!=&quot;function&quot;||(typeof s.componentWillUpdate==&quot;function&quot;&amp;&amp;s.componentWillUpdate(i,y,c),typeof s.UNSAFE_componentWillUpdate==&quot;function&quot;&amp;&amp;s.UNSAFE_componentWillUpdate(i,y,c)),typeof s.componentDidUpdate==&quot;function&quot;&amp;&amp;(t.flags|=4),typeof s.getSnapshotBeforeUpdate==&quot;function&quot;&amp;&amp;(t.flags|=1024)):(typeof s.componentDidUpdate!=&quot;function&quot;||o===n.memoizedProps&amp;&amp;g===n.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!=&quot;function&quot;||o===n.memoizedProps&amp;&amp;g===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=y),s.props=i,s.state=y,s.context=c,i=d):(typeof s.componentDidUpdate!=&quot;function&quot;||o===n.memoizedProps&amp;&amp;g===n.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!=&quot;function&quot;||o===n.memoizedProps&amp;&amp;g===n.memoizedState||(t.flags|=1024),i=!1)}return s=i,sv(n,t),i=(t.flags&amp;128)!==0,s||i?(s=t.stateNode,e=i&amp;&amp;typeof e.getDerivedStateFromError!=&quot;function&quot;?null:s.render(),t.flags|=1,n!==null&amp;&amp;i?(t.child=nf(t,n.child,null,a),t.child=nf(t,null,e,a)):pi(n,t,e,a),t.memoizedState=s.state,n=t.child):n=Br(n,t,a),n}function lw(n,t,e,i){return op(),t.flags|=256,pi(n,t,e,i),t.child}var FM={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function VM(n){return{baseLanes:n,cachePool:T3()}}function GM(n,t,e){return n=n!==null?n.childLanes&amp;~e:0,t&amp;&amp;(n|=is),n}function _D(n,t,e){var i=t.pendingProps,a=!1,s=(t.flags&amp;128)!==0,o;if((o=s)||(o=n!==null&amp;&amp;n.memoizedState===null?!1:(Wn.current&amp;2)!==0),o&amp;&amp;(a=!0,t.flags&amp;=-129),o=(t.flags&amp;32)!==0,t.flags&amp;=-33,n===null){if(Ve){if(a?Ro(t):Co(t),Ve){var u=Cn,c;if(c=u){t:{for(c=u,u=qs;c.nodeType!==8;){if(!u){u=null;break t}if(c=ys(c.nextSibling),c===null){u=null;break t}}u=c}u!==null?(t.memoizedState={dehydrated:u,treeContext:Xl!==null?{id:Cr,overflow:wr}:null,retryLane:536870912,hydrationErrors:null},c=Ea(18,null,null,0),c.stateNode=u,c.return=t,t.child=c,Vi=t,Cn=null,c=!0):c=!1}c||Zl(t)}if(u=t.memoizedState,u!==null&amp;&amp;(u=u.dehydrated,u!==null))return Y1(u)?t.lanes=32:t.lanes=536870912,null;Ur(t)}return u=i.children,i=i.fallback,a?(Co(t),a=t.mode,u=Rv({mode:&quot;hidden&quot;,children:u},a),i=Gl(i,a,e,null),u.return=t,i.return=t,u.sibling=i,t.child=u,a=t.child,a.memoizedState=VM(e),a.childLanes=GM(n,o,e),t.memoizedState=FM,i):(Ro(t),N1(t,u))}if(c=n.memoizedState,c!==null&amp;&amp;(u=c.dehydrated,u!==null)){if(s)t.flags&amp;256?(Ro(t),t.flags&amp;=-257,t=XM(n,t,e)):t.memoizedState!==null?(Co(t),t.child=n.child,t.flags|=128,t=null):(Co(t),a=i.fallback,u=t.mode,i=Rv({mode:&quot;visible&quot;,children:i.children},u),a=Gl(a,u,e,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,nf(t,n.child,null,e),i=t.child,i.memoizedState=VM(e),i.childLanes=GM(n,o,e),t.memoizedState=FM,t=a);else if(Ro(t),Y1(u)){if(o=u.nextSibling&amp;&amp;u.nextSibling.dataset,o)var h=o.dgst;o=h,i=Error(ft(419)),i.stack=&quot;&quot;,i.digest=o,Yd({value:i,source:null,stack:null}),t=XM(n,t,e)}else if(ii||lp(n,t,e,!1),o=(e&amp;n.childLanes)!==0,ii||o){if(o=fn,o!==null&amp;&amp;(i=e&amp;-e,i=(i&amp;42)!==0?1:$1(i),i=(i&amp;(o.suspendedLanes|e))!==0?0:i,i!==0&amp;&amp;i!==c.retryLane))throw c.retryLane=i,cf(n,i),Ra(o,n,i),gD;u.data===&quot;$?&quot;||I1(),t=XM(n,t,e)}else u.data===&quot;$?&quot;?(t.flags|=192,t.child=n.child,t=null):(n=c.treeContext,Cn=ys(u.nextSibling),Vi=t,Ve=!0,ql=null,qs=!1,n!==null&amp;&amp;($a[ts++]=Cr,$a[ts++]=wr,$a[ts++]=Xl,Cr=n.id,wr=n.overflow,Xl=t),t=N1(t,i.children),t.flags|=4096);return t}return a?(Co(t),a=i.fallback,u=t.mode,c=n.child,h=c.sibling,i=Nr(c,{mode:&quot;hidden&quot;,children:i.children}),i.subtreeFlags=c.subtreeFlags&amp;65011712,h!==null?a=Nr(h,a):(a=Gl(a,u,e,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,u=n.child.memoizedState,u===null?u=VM(e):(c=u.cachePool,c!==null?(h=Yn._currentValue,c=c.parent!==h?{parent:h,pool:h}:c):c=T3(),u={baseLanes:u.baseLanes|e,cachePool:c}),a.memoizedState=u,a.childLanes=GM(n,o,e),t.memoizedState=FM,i):(Ro(t),e=n.child,n=e.sibling,e=Nr(e,{mode:&quot;visible&quot;,children:i.children}),e.return=t,e.sibling=null,n!==null&amp;&amp;(o=t.deletions,o===null?(t.deletions=[n],t.flags|=16):o.push(n)),t.child=e,t.memoizedState=null,e)}function N1(n,t){return t=Rv({mode:&quot;visible&quot;,children:t},n.mode),t.return=n,n.child=t}function Rv(n,t){return n=Ea(22,n,null,t),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function XM(n,t,e){return nf(t,n.child,null,e),n=N1(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function uw(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&amp;&amp;(i.lanes|=t),_1(n.return,t,e)}function qM(n,t,e,i,a){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=e,s.tailMode=a)}function xD(n,t,e){var i=t.pendingProps,a=i.revealOrder,s=i.tail;if(pi(n,t,i.children,e),i=Wn.current,(i&amp;2)!==0)i=i&amp;1|2,t.flags|=128;else{if(n!==null&amp;&amp;(n.flags&amp;128)!==0)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&amp;&amp;uw(n,e,t);else if(n.tag===19)uw(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&amp;=1}switch(yn(Wn,i),a){case&quot;forwards&quot;:for(e=t.child,a=null;e!==null;)n=e.alternate,n!==null&amp;&amp;bv(n)===null&amp;&amp;(a=e),e=e.sibling;e=a,e===null?(a=t.child,t.child=null):(a=e.sibling,e.sibling=null),qM(t,!1,a,e,s);break;case&quot;backwards&quot;:for(e=null,a=t.child,t.child=null;a!==null;){if(n=a.alternate,n!==null&amp;&amp;bv(n)===null){t.child=a;break}n=a.sibling,a.sibling=e,e=a,a=n}qM(t,!0,e,null,s);break;case&quot;together&quot;:qM(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Br(n,t,e){if(n!==null&amp;&amp;(t.dependencies=n.dependencies),qo|=t.lanes,(e&amp;t.childLanes)===0)if(n!==null){if(lp(n,t,e,!1),(e&amp;t.childLanes)===0)return null}else return null;if(n!==null&amp;&amp;t.child!==n.child)throw Error(ft(153));if(t.child!==null){for(n=t.child,e=Nr(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=Nr(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function wE(n,t){return(n.lanes&amp;t)!==0?!0:(n=n.dependencies,!!(n!==null&amp;&amp;_v(n)))}function vI(n,t,e){switch(t.tag){case 3:fv(t,t.stateNode.containerInfo),Ao(t,Yn,n.memoizedState.cache),op();break;case 27:case 5:o1(t);break;case 4:fv(t,t.stateNode.containerInfo);break;case 10:Ao(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ro(t),t.flags|=128,null):(e&amp;t.child.childLanes)!==0?_D(n,t,e):(Ro(t),n=Br(n,t,e),n!==null?n.sibling:null);Ro(t);break;case 19:var a=(n.flags&amp;128)!==0;if(i=(e&amp;t.childLanes)!==0,i||(lp(n,t,e,!1),i=(e&amp;t.childLanes)!==0),a){if(i)return xD(n,t,e);t.flags|=128}if(a=t.memoizedState,a!==null&amp;&amp;(a.rendering=null,a.tail=null,a.lastEffect=null),yn(Wn,Wn.current),i)break;return null;case 22:case 23:return t.lanes=0,yD(n,t,e);case 24:Ao(t,Yn,n.memoizedState.cache)}return Br(n,t,e)}function SD(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps)ii=!0;else{if(!wE(n,e)&amp;&amp;(t.flags&amp;128)===0)return ii=!1,vI(n,t,e);ii=(n.flags&amp;131072)!==0}else ii=!1,Ve&amp;&amp;(t.flags&amp;1048576)!==0&amp;&amp;E3(t,yv,t.index);switch(t.lanes=0,t.tag){case 16:t:{n=t.pendingProps;var i=t.elementType,a=i._init;if(i=a(i._payload),t.type=i,typeof i==&quot;function&quot;)cE(i)?(n=Kl(i,n),t.tag=1,t=ow(null,t,i,n,e)):(t.tag=0,t=U1(null,t,i,n,e));else{if(i!=null){if(a=i.$$typeof,a===Q1){t.tag=11,t=iw(null,t,i,n,e);break t}else if(a===K1){t.tag=14,t=aw(null,t,i,n,e);break t}}throw t=s1(i)||i,Error(ft(306,t,&quot;&quot;))}}return t;case 0:return U1(n,t,t.type,t.pendingProps,e);case 1:return i=t.type,a=Kl(i,t.pendingProps),ow(n,t,i,a,e);case 3:t:{if(fv(t,t.stateNode.containerInfo),n===null)throw Error(ft(387));i=t.pendingProps;var s=t.memoizedState;a=s.element,E1(n,t),Ld(t,i,null,e);var o=t.memoizedState;if(i=o.cache,Ao(t,Yn,i),i!==s.cache&amp;&amp;x1(t,[Yn],e,!0),Od(),i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&amp;256){t=lw(n,t,i,e);break t}else if(i!==a){a=ns(Error(ft(424)),t),Yd(a),t=lw(n,t,i,e);break t}else{switch(n=t.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName===&quot;HTML&quot;?n.ownerDocument.body:n}for(Cn=ys(n.firstChild),Vi=t,Ve=!0,ql=null,qs=!0,e=uD(t,null,i,e),t.child=e;e;)e.flags=e.flags&amp;-3|4096,e=e.sibling}else{if(op(),i===a){t=Br(n,t,e);break t}pi(n,t,i,e)}t=t.child}return t;case 26:return sv(n,t),n===null?(e=Cw(t.type,null,t.pendingProps,null))?t.memoizedState=e:Ve||(e=t.type,n=t.pendingProps,i=Lv(Lo.current).createElement(e),i[Ri]=t,i[ta]=n,gi(i,e,n),ni(i),t.stateNode=i):t.memoizedState=Cw(t.type,n.memoizedProps,t.pendingProps,n.memoizedState),null;case 27:return o1(t),n===null&amp;&amp;Ve&amp;&amp;(i=t.stateNode=oU(t.type,t.pendingProps,Lo.current),Vi=t,qs=!0,a=Cn,Wo(t.type)?(W1=a,Cn=ys(i.firstChild)):Cn=a),pi(n,t,t.pendingProps.children,e),sv(n,t),n===null&amp;&amp;(t.flags|=4194304),t.child;case 5:return n===null&amp;&amp;Ve&amp;&amp;((a=i=Cn)&amp;&amp;(i=XI(i,t.type,t.pendingProps,qs),i!==null?(t.stateNode=i,Vi=t,Cn=ys(i.firstChild),qs=!1,a=!0):a=!1),a||Zl(t)),o1(t),a=t.type,s=t.pendingProps,o=n!==null?n.memoizedProps:null,i=s.children,X1(a,s)?i=null:o!==null&amp;&amp;X1(a,o)&amp;&amp;(t.flags|=32),t.memoizedState!==null&amp;&amp;(a=yE(n,t,uI,null,null,e),Kd._currentValue=a),sv(n,t),pi(n,t,i,e),t.child;case 6:return n===null&amp;&amp;Ve&amp;&amp;((n=e=Cn)&amp;&amp;(e=qI(e,t.pendingProps,qs),e!==null?(t.stateNode=e,Vi=t,Cn=null,n=!0):n=!1),n||Zl(t)),null;case 13:return _D(n,t,e);case 4:return fv(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=nf(t,null,i,e):pi(n,t,i,e),t.child;case 11:return iw(n,t,t.type,t.pendingProps,e);case 7:return pi(n,t,t.pendingProps,e),t.child;case 8:return pi(n,t,t.pendingProps.children,e),t.child;case 12:return pi(n,t,t.pendingProps.children,e),t.child;case 10:return i=t.pendingProps,Ao(t,t.type,i.value),pi(n,t,i.children,e),t.child;case 9:return a=t.type._context,i=t.pendingProps.children,jl(t),a=Ci(a),i=i(a),t.flags|=1,pi(n,t,i,e),t.child;case 14:return aw(n,t,t.type,t.pendingProps,e);case 15:return vD(n,t,t.type,t.pendingProps,e);case 19:return xD(n,t,e);case 31:return i=t.pendingProps,e=t.mode,i={mode:i.mode,children:i.children},n===null?(e=Rv(i,e),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=Nr(n.child,i),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return yD(n,t,e);case 24:return jl(t),i=Ci(Yn),n===null?(a=pE(),a===null&amp;&amp;(a=fn,s=dE(),a.pooledCache=s,s.refCount++,s!==null&amp;&amp;(a.pooledCacheLanes|=e),a=s),t.memoizedState={parent:i,cache:a},mE(t),Ao(t,Yn,a)):((n.lanes&amp;e)!==0&amp;&amp;(E1(n,t),Ld(t,null,null,e),Od()),a=n.memoizedState,s=t.memoizedState,a.parent!==i?(a={parent:i,cache:i},t.memoizedState=a,t.lanes===0&amp;&amp;(t.memoizedState=t.updateQueue.baseState=a),Ao(t,Yn,i)):(i=s.cache,Ao(t,Yn,i),i!==a.cache&amp;&amp;x1(t,[Yn],e,!0))),pi(n,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(ft(156,t.tag))}function br(n){n.flags|=4}function cw(n,t){if(t.type!==&quot;stylesheet&quot;||(t.state.loading&amp;4)!==0)n.flags&amp;=-16777217;else if(n.flags|=16777216,!cU(t)){if(t=as.current,t!==null&amp;&amp;((Ne&amp;4194048)===Ne?Zs!==null:(Ne&amp;62914560)!==Ne&amp;&amp;(Ne&amp;536870912)===0||t!==Zs))throw Ud=M1,A3;n.flags|=8192}}function Y0(n,t){t!==null&amp;&amp;(n.flags|=4),n.flags&amp;16384&amp;&amp;(t=n.tag!==22?kw():536870912,n.lanes|=t,af|=t)}function _d(n,t){if(!Ve)switch(n.tailMode){case&quot;hidden&quot;:t=n.tail;for(var e=null;t!==null;)t.alternate!==null&amp;&amp;(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case&quot;collapsed&quot;:e=n.tail;for(var i=null;e!==null;)e.alternate!==null&amp;&amp;(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Sn(n){var t=n.alternate!==null&amp;&amp;n.alternate.child===n.child,e=0,i=0;if(t)for(var a=n.child;a!==null;)e|=a.lanes|a.childLanes,i|=a.subtreeFlags&amp;65011712,i|=a.flags&amp;65011712,a.return=n,a=a.sibling;else for(a=n.child;a!==null;)e|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=n,a=a.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function yI(n,t,e){var i=t.pendingProps;switch(hE(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(t),null;case 1:return Sn(t),null;case 3:return e=t.stateNode,i=null,n!==null&amp;&amp;(i=n.memoizedState.cache),t.memoizedState.cache!==i&amp;&amp;(t.flags|=2048),Or(Yn),Qc(),e.pendingContext&amp;&amp;(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&amp;&amp;(vd(t)?br(t):n===null||n.memoizedState.isDehydrated&amp;&amp;(t.flags&amp;256)===0||(t.flags|=1024,FC())),Sn(t),null;case 26:return e=t.memoizedState,n===null?(br(t),e!==null?(Sn(t),cw(t,e)):(Sn(t),t.flags&amp;=-16777217)):e?e!==n.memoizedState?(br(t),Sn(t),cw(t,e)):(Sn(t),t.flags&amp;=-16777217):(n.memoizedProps!==i&amp;&amp;br(t),Sn(t),t.flags&amp;=-16777217),null;case 27:hv(t),e=Lo.current;var a=t.type;if(n!==null&amp;&amp;t.stateNode!=null)n.memoizedProps!==i&amp;&amp;br(t);else{if(!i){if(t.stateNode===null)throw Error(ft(166));return Sn(t),null}n=Ws.current,vd(t)?IC(t,n):(n=oU(a,i,e),t.stateNode=n,br(t))}return Sn(t),null;case 5:if(hv(t),e=t.type,n!==null&amp;&amp;t.stateNode!=null)n.memoizedProps!==i&amp;&amp;br(t);else{if(!i){if(t.stateNode===null)throw Error(ft(166));return Sn(t),null}if(n=Ws.current,vd(t))IC(t,n);else{switch(a=Lv(Lo.current),n){case 1:n=a.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,e);break;case 2:n=a.createElementNS(&quot;http://www.w3.org/1998/Math/MathML&quot;,e);break;default:switch(e){case&quot;svg&quot;:n=a.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,e);break;case&quot;math&quot;:n=a.createElementNS(&quot;http://www.w3.org/1998/Math/MathML&quot;,e);break;case&quot;script&quot;:n=a.createElement(&quot;div&quot;),n.innerHTML=&quot;&lt;script&gt;&lt;\/script&gt;&quot;,n=n.removeChild(n.firstChild);break;case&quot;select&quot;:n=typeof i.is==&quot;string&quot;?a.createElement(&quot;select&quot;,{is:i.is}):a.createElement(&quot;select&quot;),i.multiple?n.multiple=!0:i.size&amp;&amp;(n.size=i.size);break;default:n=typeof i.is==&quot;string&quot;?a.createElement(e,{is:i.is}):a.createElement(e)}}n[Ri]=t,n[ta]=i;t:for(a=t.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&amp;&amp;a.tag!==27&amp;&amp;a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break t;for(;a.sibling===null;){if(a.return===null||a.return===t)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}t.stateNode=n;t:switch(gi(n,e,i),e){case&quot;button&quot;:case&quot;input&quot;:case&quot;select&quot;:case&quot;textarea&quot;:n=!!i.autoFocus;break t;case&quot;img&quot;:n=!0;break t;default:n=!1}n&amp;&amp;br(t)}}return Sn(t),t.flags&amp;=-16777217,null;case 6:if(n&amp;&amp;t.stateNode!=null)n.memoizedProps!==i&amp;&amp;br(t);else{if(typeof i!=&quot;string&quot;&amp;&amp;t.stateNode===null)throw Error(ft(166));if(n=Lo.current,vd(t)){if(n=t.stateNode,e=t.memoizedProps,i=null,a=Vi,a!==null)switch(a.tag){case 27:case 5:i=a.memoizedProps}n[Ri]=t,n=!!(n.nodeValue===e||i!==null&amp;&amp;i.suppressHydrationWarning===!0||aU(n.nodeValue,e)),n||Zl(t)}else n=Lv(n).createTextNode(i),n[Ri]=t,t.stateNode=n}return Sn(t),null;case 13:if(i=t.memoizedState,n===null||n.memoizedState!==null&amp;&amp;n.memoizedState.dehydrated!==null){if(a=vd(t),i!==null&amp;&amp;i.dehydrated!==null){if(n===null){if(!a)throw Error(ft(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ft(317));a[Ri]=t}else op(),(t.flags&amp;128)===0&amp;&amp;(t.memoizedState=null),t.flags|=4;Sn(t),a=!1}else a=FC(),n!==null&amp;&amp;n.memoizedState!==null&amp;&amp;(n.memoizedState.hydrationErrors=a),a=!0;if(!a)return t.flags&amp;256?(Ur(t),t):(Ur(t),null)}if(Ur(t),(t.flags&amp;128)!==0)return t.lanes=e,t;if(e=i!==null,n=n!==null&amp;&amp;n.memoizedState!==null,e){i=t.child,a=null,i.alternate!==null&amp;&amp;i.alternate.memoizedState!==null&amp;&amp;i.alternate.memoizedState.cachePool!==null&amp;&amp;(a=i.alternate.memoizedState.cachePool.pool);var s=null;i.memoizedState!==null&amp;&amp;i.memoizedState.cachePool!==null&amp;&amp;(s=i.memoizedState.cachePool.pool),s!==a&amp;&amp;(i.flags|=2048)}return e!==n&amp;&amp;e&amp;&amp;(t.child.flags|=8192),Y0(t,t.updateQueue),Sn(t),null;case 4:return Qc(),n===null&amp;&amp;PE(t.stateNode.containerInfo),Sn(t),null;case 10:return Or(t.type),Sn(t),null;case 19:if(ai(Wn),a=t.memoizedState,a===null)return Sn(t),null;if(i=(t.flags&amp;128)!==0,s=a.rendering,s===null)if(i)_d(a,!1);else{if(wn!==0||n!==null&amp;&amp;(n.flags&amp;128)!==0)for(n=t.child;n!==null;){if(s=bv(n),s!==null){for(t.flags|=128,_d(a,!1),n=s.updateQueue,t.updateQueue=n,Y0(t,n),t.subtreeFlags=0,n=e,e=t.child;e!==null;)M3(e,n),e=e.sibling;return yn(Wn,Wn.current&amp;1|2),t.child}n=n.sibling}a.tail!==null&amp;&amp;ks()&gt;wv&amp;&amp;(t.flags|=128,i=!0,_d(a,!1),t.lanes=4194304)}else{if(!i)if(n=bv(s),n!==null){if(t.flags|=128,i=!0,n=n.updateQueue,t.updateQueue=n,Y0(t,n),_d(a,!0),a.tail===null&amp;&amp;a.tailMode===&quot;hidden&quot;&amp;&amp;!s.alternate&amp;&amp;!Ve)return Sn(t),null}else 2*ks()-a.renderingStartTime&gt;wv&amp;&amp;e!==536870912&amp;&amp;(t.flags|=128,i=!0,_d(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(n=a.last,n!==null?n.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ks(),t.sibling=null,n=Wn.current,yn(Wn,i?n&amp;1|2:n&amp;1),t):(Sn(t),null);case 22:case 23:return Ur(t),gE(),i=t.memoizedState!==null,n!==null?n.memoizedState!==null!==i&amp;&amp;(t.flags|=8192):i&amp;&amp;(t.flags|=8192),i?(e&amp;536870912)!==0&amp;&amp;(t.flags&amp;128)===0&amp;&amp;(Sn(t),t.subtreeFlags&amp;6&amp;&amp;(t.flags|=8192)):Sn(t),e=t.updateQueue,e!==null&amp;&amp;Y0(t,e.retryQueue),e=null,n!==null&amp;&amp;n.memoizedState!==null&amp;&amp;n.memoizedState.cachePool!==null&amp;&amp;(e=n.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&amp;&amp;t.memoizedState.cachePool!==null&amp;&amp;(i=t.memoizedState.cachePool.pool),i!==e&amp;&amp;(t.flags|=2048),n!==null&amp;&amp;ai(Yl),null;case 24:return e=null,n!==null&amp;&amp;(e=n.memoizedState.cache),t.memoizedState.cache!==e&amp;&amp;(t.flags|=2048),Or(Yn),Sn(t),null;case 25:return null;case 30:return null}throw Error(ft(156,t.tag))}function _I(n,t){switch(hE(t),t.tag){case 1:return n=t.flags,n&amp;65536?(t.flags=n&amp;-65537|128,t):null;case 3:return Or(Yn),Qc(),n=t.flags,(n&amp;65536)!==0&amp;&amp;(n&amp;128)===0?(t.flags=n&amp;-65537|128,t):null;case 26:case 27:case 5:return hv(t),null;case 13:if(Ur(t),n=t.memoizedState,n!==null&amp;&amp;n.dehydrated!==null){if(t.alternate===null)throw Error(ft(340));op()}return n=t.flags,n&amp;65536?(t.flags=n&amp;-65537|128,t):null;case 19:return ai(Wn),null;case 4:return Qc(),null;case 10:return Or(t.type),null;case 22:case 23:return Ur(t),gE(),n!==null&amp;&amp;ai(Yl),n=t.flags,n&amp;65536?(t.flags=n&amp;-65537|128,t):null;case 24:return Or(Yn),null;case 25:return null;default:return null}}function MD(n,t){switch(hE(t),t.tag){case 3:Or(Yn),Qc();break;case 26:case 27:case 5:hv(t);break;case 4:Qc();break;case 13:Ur(t);break;case 19:ai(Wn);break;case 10:Or(t.type);break;case 22:case 23:Ur(t),gE(),n!==null&amp;&amp;ai(Yl);break;case 24:Or(Yn)}}function dp(n,t){try{var e=t.updateQueue,i=e!==null?e.lastEffect:null;if(i!==null){var a=i.next;e=a;do{if((e.tag&amp;n)===n){i=void 0;var s=e.create,o=e.inst;i=s(),o.destroy=i}e=e.next}while(e!==a)}}catch(u){nn(t,t.return,u)}}function Xo(n,t,e){try{var i=t.updateQueue,a=i!==null?i.lastEffect:null;if(a!==null){var s=a.next;i=s;do{if((i.tag&amp;n)===n){var o=i.inst,u=o.destroy;if(u!==void 0){o.destroy=void 0,a=t;var c=e,h=u;try{h()}catch(d){nn(a,c,d)}}}i=i.next}while(i!==s)}}catch(d){nn(t,t.return,d)}}function ED(n){var t=n.updateQueue;if(t!==null){var e=n.stateNode;try{w3(t,e)}catch(i){nn(n,n.return,i)}}}function bD(n,t,e){e.props=Kl(n.type,n.memoizedProps),e.state=n.memoizedState;try{e.componentWillUnmount()}catch(i){nn(n,t,i)}}function Bd(n,t){try{var e=n.ref;if(e!==null){switch(n.tag){case 26:case 27:case 5:var i=n.stateNode;break;case 30:i=n.stateNode;break;default:i=n.stateNode}typeof e==&quot;function&quot;?n.refCleanup=e(i):e.current=i}}catch(a){nn(n,t,a)}}function Ys(n,t){var e=n.ref,i=n.refCleanup;if(e!==null)if(typeof i==&quot;function&quot;)try{i()}catch(a){nn(n,t,a)}finally{n.refCleanup=null,n=n.alternate,n!=null&amp;&amp;(n.refCleanup=null)}else if(typeof e==&quot;function&quot;)try{e(null)}catch(a){nn(n,t,a)}else e.current=null}function TD(n){var t=n.type,e=n.memoizedProps,i=n.stateNode;try{t:switch(t){case&quot;button&quot;:case&quot;input&quot;:case&quot;select&quot;:case&quot;textarea&quot;:e.autoFocus&amp;&amp;i.focus();break t;case&quot;img&quot;:e.src?i.src=e.src:e.srcSet&amp;&amp;(i.srcset=e.srcSet)}}catch(a){nn(n,n.return,a)}}function YM(n,t,e){try{var i=n.stateNode;II(i,n.type,e,t),i[ta]=t}catch(a){nn(n,n.return,a)}}function AD(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&amp;&amp;Wo(n.type)||n.tag===4}function WM(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||AD(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&amp;&amp;n.tag!==6&amp;&amp;n.tag!==18;){if(n.tag===27&amp;&amp;Wo(n.type)||n.flags&amp;2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&amp;2))return n.stateNode}}function O1(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?(e.nodeType===9?e.body:e.nodeName===&quot;HTML&quot;?e.ownerDocument.body:e).insertBefore(n,t):(t=e.nodeType===9?e.body:e.nodeName===&quot;HTML&quot;?e.ownerDocument.body:e,t.appendChild(n),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=$v));else if(i!==4&amp;&amp;(i===27&amp;&amp;Wo(n.type)&amp;&amp;(e=n.stateNode,t=null),n=n.child,n!==null))for(O1(n,t,e),n=n.sibling;n!==null;)O1(n,t,e),n=n.sibling}function Cv(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&amp;&amp;(i===27&amp;&amp;Wo(n.type)&amp;&amp;(e=n.stateNode),n=n.child,n!==null))for(Cv(n,t,e),n=n.sibling;n!==null;)Cv(n,t,e),n=n.sibling}function RD(n){var t=n.stateNode,e=n.memoizedProps;try{for(var i=n.type,a=t.attributes;a.length;)t.removeAttributeNode(a[0]);gi(t,i,e),t[Ri]=n,t[ta]=e}catch(s){nn(n,n.return,s)}}var Ar=!1,On=!1,kM=!1,fw=typeof WeakSet==&quot;function&quot;?WeakSet:Set,ei=null;function xI(n,t){if(n=n.containerInfo,V1=Iv,n=p3(n),oE(n)){if(&quot;selectionStart&quot;in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&amp;&amp;e.defaultView||window;var i=e.getSelection&amp;&amp;e.getSelection();if(i&amp;&amp;i.rangeCount!==0){e=i.anchorNode;var a=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{e.nodeType,s.nodeType}catch{e=null;break t}var o=0,u=-1,c=-1,h=0,d=0,m=n,g=null;e:for(;;){for(var y;m!==e||a!==0&amp;&amp;m.nodeType!==3||(u=o+a),m!==s||i!==0&amp;&amp;m.nodeType!==3||(c=o+i),m.nodeType===3&amp;&amp;(o+=m.nodeValue.length),(y=m.firstChild)!==null;)g=m,m=y;for(;;){if(m===n)break e;if(g===e&amp;&amp;++h===a&amp;&amp;(u=o),g===s&amp;&amp;++d===i&amp;&amp;(c=o),(y=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=y}e=u===-1||c===-1?null:{start:u,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(G1={focusedElem:n,selectionRange:e},Iv=!1,ei=t;ei!==null;)if(t=ei,n=t.child,(t.subtreeFlags&amp;1024)!==0&amp;&amp;n!==null)n.return=t,ei=n;else for(;ei!==null;){switch(t=ei,s=t.alternate,n=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((n&amp;1024)!==0&amp;&amp;s!==null){n=void 0,e=t,a=s.memoizedProps,s=s.memoizedState,i=e.stateNode;try{var x=Kl(e.type,a,e.elementType===e.type);n=i.getSnapshotBeforeUpdate(x,s),i.__reactInternalSnapshotBeforeUpdate=n}catch(b){nn(e,e.return,b)}}break;case 3:if((n&amp;1024)!==0){if(n=t.stateNode.containerInfo,e=n.nodeType,e===9)q1(n);else if(e===1)switch(n.nodeName){case&quot;HEAD&quot;:case&quot;HTML&quot;:case&quot;BODY&quot;:q1(n);break;default:n.textContent=&quot;&quot;}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&amp;1024)!==0)throw Error(ft(163))}if(n=t.sibling,n!==null){n.return=t.return,ei=n;break}ei=t.return}}function CD(n,t,e){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Mo(n,e),i&amp;4&amp;&amp;dp(5,e);break;case 1:if(Mo(n,e),i&amp;4)if(n=e.stateNode,t===null)try{n.componentDidMount()}catch(o){nn(e,e.return,o)}else{var a=Kl(e.type,t.memoizedProps);t=t.memoizedState;try{n.componentDidUpdate(a,t,n.__reactInternalSnapshotBeforeUpdate)}catch(o){nn(e,e.return,o)}}i&amp;64&amp;&amp;ED(e),i&amp;512&amp;&amp;Bd(e,e.return);break;case 3:if(Mo(n,e),i&amp;64&amp;&amp;(n=e.updateQueue,n!==null)){if(t=null,e.child!==null)switch(e.child.tag){case 27:case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}try{w3(n,t)}catch(o){nn(e,e.return,o)}}break;case 27:t===null&amp;&amp;i&amp;4&amp;&amp;RD(e);case 26:case 5:Mo(n,e),t===null&amp;&amp;i&amp;4&amp;&amp;TD(e),i&amp;512&amp;&amp;Bd(e,e.return);break;case 12:Mo(n,e);break;case 13:Mo(n,e),i&amp;4&amp;&amp;UD(n,e),i&amp;64&amp;&amp;(n=e.memoizedState,n!==null&amp;&amp;(n=n.dehydrated,n!==null&amp;&amp;(e=wI.bind(null,e),YI(n,e))));break;case 22:if(i=e.memoizedState!==null||Ar,!i){t=t!==null&amp;&amp;t.memoizedState!==null||On,a=Ar;var s=On;Ar=i,(On=t)&amp;&amp;!s?Eo(n,e,(e.subtreeFlags&amp;8772)!==0):Mo(n,e),Ar=a,On=s}break;case 30:break;default:Mo(n,e)}}function wD(n){var t=n.alternate;t!==null&amp;&amp;(n.alternate=null,wD(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&amp;&amp;(t=n.stateNode,t!==null&amp;&amp;eE(t)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var vn=null,Ji=!1;function Tr(n,t,e){for(e=e.child;e!==null;)DD(n,t,e),e=e.sibling}function DD(n,t,e){if(ba&amp;&amp;typeof ba.onCommitFiberUnmount==&quot;function&quot;)try{ba.onCommitFiberUnmount(np,e)}catch{}switch(e.tag){case 26:On||Ys(e,t),Tr(n,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&amp;&amp;(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:On||Ys(e,t);var i=vn,a=Ji;Wo(e.type)&amp;&amp;(vn=e.stateNode,Ji=!1),Tr(n,t,e),Fd(e.stateNode),vn=i,Ji=a;break;case 5:On||Ys(e,t);case 6:if(i=vn,a=Ji,vn=null,Tr(n,t,e),vn=i,Ji=a,vn!==null)if(Ji)try{(vn.nodeType===9?vn.body:vn.nodeName===&quot;HTML&quot;?vn.ownerDocument.body:vn).removeChild(e.stateNode)}catch(s){nn(e,t,s)}else try{vn.removeChild(e.stateNode)}catch(s){nn(e,t,s)}break;case 18:vn!==null&amp;&amp;(Ji?(n=vn,Tw(n.nodeType===9?n.body:n.nodeName===&quot;HTML&quot;?n.ownerDocument.body:n,e.stateNode),tp(n)):Tw(vn,e.stateNode));break;case 4:i=vn,a=Ji,vn=e.stateNode.containerInfo,Ji=!0,Tr(n,t,e),vn=i,Ji=a;break;case 0:case 11:case 14:case 15:On||Xo(2,e,t),On||Xo(4,e,t),Tr(n,t,e);break;case 1:On||(Ys(e,t),i=e.stateNode,typeof i.componentWillUnmount==&quot;function&quot;&amp;&amp;bD(e,t,i)),Tr(n,t,e);break;case 21:Tr(n,t,e);break;case 22:On=(i=On)||e.memoizedState!==null,Tr(n,t,e),On=i;break;default:Tr(n,t,e)}}function UD(n,t){if(t.memoizedState===null&amp;&amp;(n=t.alternate,n!==null&amp;&amp;(n=n.memoizedState,n!==null&amp;&amp;(n=n.dehydrated,n!==null))))try{tp(n)}catch(e){nn(t,t.return,e)}}function SI(n){switch(n.tag){case 13:case 19:var t=n.stateNode;return t===null&amp;&amp;(t=n.stateNode=new fw),t;case 22:return n=n.stateNode,t=n._retryCache,t===null&amp;&amp;(t=n._retryCache=new fw),t;default:throw Error(ft(435,n.tag))}}function ZM(n,t){var e=SI(n);t.forEach(function(i){var a=DI.bind(null,n,i);e.has(i)||(e.add(i),i.then(a,a))})}function xa(n,t){var e=t.deletions;if(e!==null)for(var i=0;i&lt;e.length;i++){var a=e[i],s=n,o=t,u=o;t:for(;u!==null;){switch(u.tag){case 27:if(Wo(u.type)){vn=u.stateNode,Ji=!1;break t}break;case 5:vn=u.stateNode,Ji=!1;break t;case 3:case 4:vn=u.stateNode.containerInfo,Ji=!0;break t}u=u.return}if(vn===null)throw Error(ft(160));DD(s,o,a),vn=null,Ji=!1,s=a.alternate,s!==null&amp;&amp;(s.return=null),a.return=null}if(t.subtreeFlags&amp;13878)for(t=t.child;t!==null;)ND(t,n),t=t.sibling}var vs=null;function ND(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:xa(t,n),Sa(n),i&amp;4&amp;&amp;(Xo(3,n,n.return),dp(3,n),Xo(5,n,n.return));break;case 1:xa(t,n),Sa(n),i&amp;512&amp;&amp;(On||e===null||Ys(e,e.return)),i&amp;64&amp;&amp;Ar&amp;&amp;(n=n.updateQueue,n!==null&amp;&amp;(i=n.callbacks,i!==null&amp;&amp;(e=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=e===null?i:e.concat(i))));break;case 26:var a=vs;if(xa(t,n),Sa(n),i&amp;512&amp;&amp;(On||e===null||Ys(e,e.return)),i&amp;4){var s=e!==null?e.memoizedState:null;if(i=n.memoizedState,e===null)if(i===null)if(n.stateNode===null){t:{i=n.type,e=n.memoizedProps,a=a.ownerDocument||a;e:switch(i){case&quot;title&quot;:s=a.getElementsByTagName(&quot;title&quot;)[0],(!s||s[sp]||s[Ri]||s.namespaceURI===&quot;http://www.w3.org/2000/svg&quot;||s.hasAttribute(&quot;itemprop&quot;))&amp;&amp;(s=a.createElement(i),a.head.insertBefore(s,a.querySelector(&quot;head &gt; title&quot;))),gi(s,i,e),s[Ri]=n,ni(s),i=s;break t;case&quot;link&quot;:var o=Dw(&quot;link&quot;,&quot;href&quot;,a).get(i+(e.href||&quot;&quot;));if(o){for(var u=0;u&lt;o.length;u++)if(s=o[u],s.getAttribute(&quot;href&quot;)===(e.href==null||e.href===&quot;&quot;?null:e.href)&amp;&amp;s.getAttribute(&quot;rel&quot;)===(e.rel==null?null:e.rel)&amp;&amp;s.getAttribute(&quot;title&quot;)===(e.title==null?null:e.title)&amp;&amp;s.getAttribute(&quot;crossorigin&quot;)===(e.crossOrigin==null?null:e.crossOrigin)){o.splice(u,1);break e}}s=a.createElement(i),gi(s,i,e),a.head.appendChild(s);break;case&quot;meta&quot;:if(o=Dw(&quot;meta&quot;,&quot;content&quot;,a).get(i+(e.content||&quot;&quot;))){for(u=0;u&lt;o.length;u++)if(s=o[u],s.getAttribute(&quot;content&quot;)===(e.content==null?null:&quot;&quot;+e.content)&amp;&amp;s.getAttribute(&quot;name&quot;)===(e.name==null?null:e.name)&amp;&amp;s.getAttribute(&quot;property&quot;)===(e.property==null?null:e.property)&amp;&amp;s.getAttribute(&quot;http-equiv&quot;)===(e.httpEquiv==null?null:e.httpEquiv)&amp;&amp;s.getAttribute(&quot;charset&quot;)===(e.charSet==null?null:e.charSet)){o.splice(u,1);break e}}s=a.createElement(i),gi(s,i,e),a.head.appendChild(s);break;default:throw Error(ft(468,i))}s[Ri]=n,ni(s),i=s}n.stateNode=i}else Uw(a,n.type,n.stateNode);else n.stateNode=ww(a,i,n.memoizedProps);else s!==i?(s===null?e.stateNode!==null&amp;&amp;(e=e.stateNode,e.parentNode.removeChild(e)):s.count--,i===null?Uw(a,n.type,n.stateNode):ww(a,i,n.memoizedProps)):i===null&amp;&amp;n.stateNode!==null&amp;&amp;YM(n,n.memoizedProps,e.memoizedProps)}break;case 27:xa(t,n),Sa(n),i&amp;512&amp;&amp;(On||e===null||Ys(e,e.return)),e!==null&amp;&amp;i&amp;4&amp;&amp;YM(n,n.memoizedProps,e.memoizedProps);break;case 5:if(xa(t,n),Sa(n),i&amp;512&amp;&amp;(On||e===null||Ys(e,e.return)),n.flags&amp;32){a=n.stateNode;try{Jc(a,&quot;&quot;)}catch(y){nn(n,n.return,y)}}i&amp;4&amp;&amp;n.stateNode!=null&amp;&amp;(a=n.memoizedProps,YM(n,a,e!==null?e.memoizedProps:a)),i&amp;1024&amp;&amp;(kM=!0);break;case 6:if(xa(t,n),Sa(n),i&amp;4){if(n.stateNode===null)throw Error(ft(162));i=n.memoizedProps,e=n.stateNode;try{e.nodeValue=i}catch(y){nn(n,n.return,y)}}break;case 3:if(lv=null,a=vs,vs=zv(t.containerInfo),xa(t,n),vs=a,Sa(n),i&amp;4&amp;&amp;e!==null&amp;&amp;e.memoizedState.isDehydrated)try{tp(t.containerInfo)}catch(y){nn(n,n.return,y)}kM&amp;&amp;(kM=!1,OD(n));break;case 4:i=vs,vs=zv(n.stateNode.containerInfo),xa(t,n),Sa(n),vs=i;break;case 12:xa(t,n),Sa(n);break;case 13:xa(t,n),Sa(n),n.child.flags&amp;8192&amp;&amp;n.memoizedState!==null!=(e!==null&amp;&amp;e.memoizedState!==null)&amp;&amp;(LE=ks()),i&amp;4&amp;&amp;(i=n.updateQueue,i!==null&amp;&amp;(n.updateQueue=null,ZM(n,i)));break;case 22:a=n.memoizedState!==null;var c=e!==null&amp;&amp;e.memoizedState!==null,h=Ar,d=On;if(Ar=h||a,On=d||c,xa(t,n),On=d,Ar=h,Sa(n),i&amp;8192)t:for(t=n.stateNode,t._visibility=a?t._visibility&amp;-2:t._visibility|1,a&amp;&amp;(e===null||c||Ar||On||Fl(n)),e=null,t=n;;){if(t.tag===5||t.tag===26){if(e===null){c=e=t;try{if(s=c.stateNode,a)o=s.style,typeof o.setProperty==&quot;function&quot;?o.setProperty(&quot;display&quot;,&quot;none&quot;,&quot;important&quot;):o.display=&quot;none&quot;;else{u=c.stateNode;var m=c.memoizedProps.style,g=m!=null&amp;&amp;m.hasOwnProperty(&quot;display&quot;)?m.display:null;u.style.display=g==null||typeof g==&quot;boolean&quot;?&quot;&quot;:(&quot;&quot;+g).trim()}}catch(y){nn(c,c.return,y)}}}else if(t.tag===6){if(e===null){c=t;try{c.stateNode.nodeValue=a?&quot;&quot;:c.memoizedProps}catch(y){nn(c,c.return,y)}}}else if((t.tag!==22&amp;&amp;t.tag!==23||t.memoizedState===null||t===n)&amp;&amp;t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;e===t&amp;&amp;(e=null),t=t.return}e===t&amp;&amp;(e=null),t.sibling.return=t.return,t=t.sibling}i&amp;4&amp;&amp;(i=n.updateQueue,i!==null&amp;&amp;(e=i.retryQueue,e!==null&amp;&amp;(i.retryQueue=null,ZM(n,e))));break;case 19:xa(t,n),Sa(n),i&amp;4&amp;&amp;(i=n.updateQueue,i!==null&amp;&amp;(n.updateQueue=null,ZM(n,i)));break;case 30:break;case 21:break;default:xa(t,n),Sa(n)}}function Sa(n){var t=n.flags;if(t&amp;2){try{for(var e,i=n.return;i!==null;){if(AD(i)){e=i;break}i=i.return}if(e==null)throw Error(ft(160));switch(e.tag){case 27:var a=e.stateNode,s=WM(n);Cv(n,s,a);break;case 5:var o=e.stateNode;e.flags&amp;32&amp;&amp;(Jc(o,&quot;&quot;),e.flags&amp;=-33);var u=WM(n);Cv(n,u,o);break;case 3:case 4:var c=e.stateNode.containerInfo,h=WM(n);O1(n,h,c);break;default:throw Error(ft(161))}}catch(d){nn(n,n.return,d)}n.flags&amp;=-3}t&amp;4096&amp;&amp;(n.flags&amp;=-4097)}function OD(n){if(n.subtreeFlags&amp;1024)for(n=n.child;n!==null;){var t=n;OD(t),t.tag===5&amp;&amp;t.flags&amp;1024&amp;&amp;t.stateNode.reset(),n=n.sibling}}function Mo(n,t){if(t.subtreeFlags&amp;8772)for(t=t.child;t!==null;)CD(n,t.alternate,t),t=t.sibling}function Fl(n){for(n=n.child;n!==null;){var t=n;switch(t.tag){case 0:case 11:case 14:case 15:Xo(4,t,t.return),Fl(t);break;case 1:Ys(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount==&quot;function&quot;&amp;&amp;bD(t,t.return,e),Fl(t);break;case 27:Fd(t.stateNode);case 26:case 5:Ys(t,t.return),Fl(t);break;case 22:t.memoizedState===null&amp;&amp;Fl(t);break;case 30:Fl(t);break;default:Fl(t)}n=n.sibling}}function Eo(n,t,e){for(e=e&amp;&amp;(t.subtreeFlags&amp;8772)!==0,t=t.child;t!==null;){var i=t.alternate,a=n,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Eo(a,s,e),dp(4,s);break;case 1:if(Eo(a,s,e),i=s,a=i.stateNode,typeof a.componentDidMount==&quot;function&quot;)try{a.componentDidMount()}catch(h){nn(i,i.return,h)}if(i=s,a=i.updateQueue,a!==null){var u=i.stateNode;try{var c=a.shared.hiddenCallbacks;if(c!==null)for(a.shared.hiddenCallbacks=null,a=0;a&lt;c.length;a++)C3(c[a],u)}catch(h){nn(i,i.return,h)}}e&amp;&amp;o&amp;64&amp;&amp;ED(s),Bd(s,s.return);break;case 27:RD(s);case 26:case 5:Eo(a,s,e),e&amp;&amp;i===null&amp;&amp;o&amp;4&amp;&amp;TD(s),Bd(s,s.return);break;case 12:Eo(a,s,e);break;case 13:Eo(a,s,e),e&amp;&amp;o&amp;4&amp;&amp;UD(a,s);break;case 22:s.memoizedState===null&amp;&amp;Eo(a,s,e),Bd(s,s.return);break;case 30:break;default:Eo(a,s,e)}t=t.sibling}}function DE(n,t){var e=null;n!==null&amp;&amp;n.memoizedState!==null&amp;&amp;n.memoizedState.cachePool!==null&amp;&amp;(e=n.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&amp;&amp;t.memoizedState.cachePool!==null&amp;&amp;(n=t.memoizedState.cachePool.pool),n!==e&amp;&amp;(n!=null&amp;&amp;n.refCount++,e!=null&amp;&amp;up(e))}function UE(n,t){n=null,t.alternate!==null&amp;&amp;(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&amp;&amp;(t.refCount++,n!=null&amp;&amp;up(n))}function Xs(n,t,e,i){if(t.subtreeFlags&amp;10256)for(t=t.child;t!==null;)LD(n,t,e,i),t=t.sibling}function LD(n,t,e,i){var a=t.flags;switch(t.tag){case 0:case 11:case 15:Xs(n,t,e,i),a&amp;2048&amp;&amp;dp(9,t);break;case 1:Xs(n,t,e,i);break;case 3:Xs(n,t,e,i),a&amp;2048&amp;&amp;(n=null,t.alternate!==null&amp;&amp;(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&amp;&amp;(t.refCount++,n!=null&amp;&amp;up(n)));break;case 12:if(a&amp;2048){Xs(n,t,e,i),n=t.stateNode;try{var s=t.memoizedProps,o=s.id,u=s.onPostCommit;typeof u==&quot;function&quot;&amp;&amp;u(o,t.alternate===null?&quot;mount&quot;:&quot;update&quot;,n.passiveEffectDuration,-0)}catch(c){nn(t,t.return,c)}}else Xs(n,t,e,i);break;case 13:Xs(n,t,e,i);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,t.memoizedState!==null?s._visibility&amp;2?Xs(n,t,e,i):Pd(n,t):s._visibility&amp;2?Xs(n,t,e,i):(s._visibility|=2,Cc(n,t,e,i,(t.subtreeFlags&amp;10256)!==0)),a&amp;2048&amp;&amp;DE(o,t);break;case 24:Xs(n,t,e,i),a&amp;2048&amp;&amp;UE(t.alternate,t);break;default:Xs(n,t,e,i)}}function Cc(n,t,e,i,a){for(a=a&amp;&amp;(t.subtreeFlags&amp;10256)!==0,t=t.child;t!==null;){var s=n,o=t,u=e,c=i,h=o.flags;switch(o.tag){case 0:case 11:case 15:Cc(s,o,u,c,a),dp(8,o);break;case 23:break;case 22:var d=o.stateNode;o.memoizedState!==null?d._visibility&amp;2?Cc(s,o,u,c,a):Pd(s,o):(d._visibility|=2,Cc(s,o,u,c,a)),a&amp;&amp;h&amp;2048&amp;&amp;DE(o.alternate,o);break;case 24:Cc(s,o,u,c,a),a&amp;&amp;h&amp;2048&amp;&amp;UE(o.alternate,o);break;default:Cc(s,o,u,c,a)}t=t.sibling}}function Pd(n,t){if(t.subtreeFlags&amp;10256)for(t=t.child;t!==null;){var e=n,i=t,a=i.flags;switch(i.tag){case 22:Pd(e,i),a&amp;2048&amp;&amp;DE(i.alternate,i);break;case 24:Pd(e,i),a&amp;2048&amp;&amp;UE(i.alternate,i);break;default:Pd(e,i)}t=t.sibling}}var Ad=8192;function Tc(n){if(n.subtreeFlags&amp;Ad)for(n=n.child;n!==null;)zD(n),n=n.sibling}function zD(n){switch(n.tag){case 26:Tc(n),n.flags&amp;Ad&amp;&amp;n.memoizedState!==null&amp;&amp;aH(vs,n.memoizedState,n.memoizedProps);break;case 5:Tc(n);break;case 3:case 4:var t=vs;vs=zv(n.stateNode.containerInfo),Tc(n),vs=t;break;case 22:n.memoizedState===null&amp;&amp;(t=n.alternate,t!==null&amp;&amp;t.memoizedState!==null?(t=Ad,Ad=16777216,Tc(n),Ad=t):Tc(n));break;default:Tc(n)}}function BD(n){var t=n.alternate;if(t!==null&amp;&amp;(n=t.child,n!==null)){t.child=null;do t=n.sibling,n.sibling=null,n=t;while(n!==null)}}function xd(n){var t=n.deletions;if((n.flags&amp;16)!==0){if(t!==null)for(var e=0;e&lt;t.length;e++){var i=t[e];ei=i,ID(i,n)}BD(n)}if(n.subtreeFlags&amp;10256)for(n=n.child;n!==null;)PD(n),n=n.sibling}function PD(n){switch(n.tag){case 0:case 11:case 15:xd(n),n.flags&amp;2048&amp;&amp;Xo(9,n,n.return);break;case 3:xd(n);break;case 12:xd(n);break;case 22:var t=n.stateNode;n.memoizedState!==null&amp;&amp;t._visibility&amp;2&amp;&amp;(n.return===null||n.return.tag!==13)?(t._visibility&amp;=-3,rv(n)):xd(n);break;default:xd(n)}}function rv(n){var t=n.deletions;if((n.flags&amp;16)!==0){if(t!==null)for(var e=0;e&lt;t.length;e++){var i=t[e];ei=i,ID(i,n)}BD(n)}for(n=n.child;n!==null;){switch(t=n,t.tag){case 0:case 11:case 15:Xo(8,t,t.return),rv(t);break;case 22:e=t.stateNode,e._visibility&amp;2&amp;&amp;(e._visibility&amp;=-3,rv(t));break;default:rv(t)}n=n.sibling}}function ID(n,t){for(;ei!==null;){var e=ei;switch(e.tag){case 0:case 11:case 15:Xo(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&amp;&amp;e.memoizedState.cachePool!==null){var i=e.memoizedState.cachePool.pool;i!=null&amp;&amp;i.refCount++}break;case 24:up(e.memoizedState.cache)}if(i=e.child,i!==null)i.return=e,ei=i;else t:for(e=n;ei!==null;){i=ei;var a=i.sibling,s=i.return;if(wD(i),i===e){ei=null;break t}if(a!==null){a.return=s,ei=a;break t}ei=s}}}var MI={getCacheForType:function(n){var t=Ci(Yn),e=t.data.get(n);return e===void 0&amp;&amp;(e=n(),t.data.set(n,e)),e}},EI=typeof WeakMap==&quot;function&quot;?WeakMap:Map,Ke=0,fn=null,Ce=null,Ne=0,Qe=0,Ma=null,No=!1,ff=!1,NE=!1,Pr=0,wn=0,qo=0,Wl=0,OE=0,is=0,af=0,Id=null,$i=null,L1=!1,LE=0,wv=1/0,Dv=null,Po=null,mi=0,Io=null,sf=null,jc=0,z1=0,B1=null,HD=null,Hd=0,P1=null;function Aa(){if((Ke&amp;2)!==0&amp;&amp;Ne!==0)return Ne&amp;-Ne;if(ce.T!==null){var n=$c;return n!==0?n:BE()}return Qw()}function FD(){is===0&amp;&amp;(is=(Ne&amp;536870912)===0||Ve?Ww():536870912);var n=as.current;return n!==null&amp;&amp;(n.flags|=32),is}function Ra(n,t,e){(n===fn&amp;&amp;(Qe===2||Qe===9)||n.cancelPendingCommit!==null)&amp;&amp;(rf(n,0),Oo(n,Ne,is,!1)),ap(n,e),((Ke&amp;2)===0||n!==fn)&amp;&amp;(n===fn&amp;&amp;((Ke&amp;2)===0&amp;&amp;(Wl|=e),wn===4&amp;&amp;Oo(n,Ne,is,!1)),Qs(n))}function VD(n,t,e){if((Ke&amp;6)!==0)throw Error(ft(327));var i=!e&amp;&amp;(t&amp;124)===0&amp;&amp;(t&amp;n.expiredLanes)===0||ip(n,t),a=i?AI(n,t):jM(n,t,!0),s=i;do{if(a===0){ff&amp;&amp;!i&amp;&amp;Oo(n,t,0,!1);break}else{if(e=n.current.alternate,s&amp;&amp;!bI(e)){a=jM(n,t,!1),s=!1;continue}if(a===2){if(s=t,n.errorRecoveryDisabledLanes&amp;s)var o=0;else o=n.pendingLanes&amp;-536870913,o=o!==0?o:o&amp;536870912?536870912:0;if(o!==0){t=o;t:{var u=n;a=Id;var c=u.current.memoizedState.isDehydrated;if(c&amp;&amp;(rf(u,o).flags|=256),o=jM(u,o,!1),o!==2){if(NE&amp;&amp;!c){u.errorRecoveryDisabledLanes|=s,Wl|=s,a=4;break t}s=$i,$i=a,s!==null&amp;&amp;($i===null?$i=s:$i.push.apply($i,s))}a=o}if(s=!1,a!==2)continue}}if(a===1){rf(n,0),Oo(n,t,0,!0);break}t:{switch(i=n,s=a,s){case 0:case 1:throw Error(ft(345));case 4:if((t&amp;4194048)!==t)break;case 6:Oo(i,t,is,!No);break t;case 2:$i=null;break;case 3:case 5:break;default:throw Error(ft(329))}if((t&amp;62914560)===t&amp;&amp;(a=LE+300-ks(),10&lt;a)){if(Oo(i,t,is,!No),Fv(i,0,!0)!==0)break t;i.timeoutHandle=rU(hw.bind(null,i,e,$i,Dv,L1,t,is,Wl,af,No,s,2,-0,0),a);break t}hw(i,e,$i,Dv,L1,t,is,Wl,af,No,s,0,-0,0)}}break}while(!0);Qs(n)}function hw(n,t,e,i,a,s,o,u,c,h,d,m,g,y){if(n.timeoutHandle=-1,m=t.subtreeFlags,(m&amp;8192||(m&amp;16785408)===16785408)&amp;&amp;(Qd={stylesheets:null,count:0,unsuspend:iH},zD(t),m=sH(),m!==null)){n.cancelPendingCommit=m(pw.bind(null,n,t,s,e,i,a,o,u,c,d,1,g,y)),Oo(n,s,o,!h);return}pw(n,t,s,e,i,a,o,u,c)}function bI(n){for(var t=n;;){var e=t.tag;if((e===0||e===11||e===15)&amp;&amp;t.flags&amp;16384&amp;&amp;(e=t.updateQueue,e!==null&amp;&amp;(e=e.stores,e!==null)))for(var i=0;i&lt;e.length;i++){var a=e[i],s=a.getSnapshot;a=a.value;try{if(!Ca(s(),a))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&amp;16384&amp;&amp;e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oo(n,t,e,i){t&amp;=~OE,t&amp;=~Wl,n.suspendedLanes|=t,n.pingedLanes&amp;=~t,i&amp;&amp;(n.warmLanes|=t),i=n.expirationTimes;for(var a=t;0&lt;a;){var s=31-Ta(a),o=1&lt;&lt;s;i[s]=-1,a&amp;=~o}e!==0&amp;&amp;Zw(n,e,t)}function Qv(){return(Ke&amp;6)===0?(pp(0,!1),!1):!0}function zE(){if(Ce!==null){if(Qe===0)var n=Ce.return;else n=Ce,Dr=eu=null,SE(n),Zc=null,kd=0,n=Ce;for(;n!==null;)MD(n.alternate,n),n=n.return;Ce=null}}function rf(n,t){var e=n.timeoutHandle;e!==-1&amp;&amp;(n.timeoutHandle=-1,FI(e)),e=n.cancelPendingCommit,e!==null&amp;&amp;(n.cancelPendingCommit=null,e()),zE(),fn=n,Ce=e=Nr(n.current,null),Ne=t,Qe=0,Ma=null,No=!1,ff=ip(n,t),NE=!1,af=is=OE=Wl=qo=wn=0,$i=Id=null,L1=!1,(t&amp;8)!==0&amp;&amp;(t|=t&amp;32);var i=n.entangledLanes;if(i!==0)for(n=n.entanglements,i&amp;=t;0&lt;i;){var a=31-Ta(i),s=1&lt;&lt;a;t|=n[a],i&amp;=~s}return Pr=t,qv(),e}function GD(n,t){be=null,ce.H=Ev,t===cp||t===Wv?(t=qC(),Qe=3):t===A3?(t=qC(),Qe=4):Qe=t===gD?8:t!==null&amp;&amp;typeof t==&quot;object&quot;&amp;&amp;typeof t.then==&quot;function&quot;?6:1,Ma=t,Ce===null&amp;&amp;(wn=1,Av(n,ns(t,n.current)))}function XD(){var n=ce.H;return ce.H=Ev,n===null?Ev:n}function qD(){var n=ce.A;return ce.A=MI,n}function I1(){wn=4,No||(Ne&amp;4194048)!==Ne&amp;&amp;as.current!==null||(ff=!0),(qo&amp;134217727)===0&amp;&amp;(Wl&amp;134217727)===0||fn===null||Oo(fn,Ne,is,!1)}function jM(n,t,e){var i=Ke;Ke|=2;var a=XD(),s=qD();(fn!==n||Ne!==t)&amp;&amp;(Dv=null,rf(n,t)),t=!1;var o=wn;t:do try{if(Qe!==0&amp;&amp;Ce!==null){var u=Ce,c=Ma;switch(Qe){case 8:zE(),o=6;break t;case 3:case 2:case 9:case 6:as.current===null&amp;&amp;(t=!0);var h=Qe;if(Qe=0,Ma=null,Vc(n,u,c,h),e&amp;&amp;ff){o=0;break t}break;default:h=Qe,Qe=0,Ma=null,Vc(n,u,c,h)}}TI(),o=wn;break}catch(d){GD(n,d)}while(!0);return t&amp;&amp;n.shellSuspendCounter++,Dr=eu=null,Ke=i,ce.H=a,ce.A=s,Ce===null&amp;&amp;(fn=null,Ne=0,qv()),o}function TI(){for(;Ce!==null;)YD(Ce)}function AI(n,t){var e=Ke;Ke|=2;var i=XD(),a=qD();fn!==n||Ne!==t?(Dv=null,wv=ks()+500,rf(n,t)):ff=ip(n,t);t:do try{if(Qe!==0&amp;&amp;Ce!==null){t=Ce;var s=Ma;e:switch(Qe){case 1:Qe=0,Ma=null,Vc(n,t,s,1);break;case 2:case 9:if(XC(s)){Qe=0,Ma=null,dw(t);break}t=function(){Qe!==2&amp;&amp;Qe!==9||fn!==n||(Qe=7),Qs(n)},s.then(t,t);break t;case 3:Qe=7;break t;case 4:Qe=5;break t;case 7:XC(s)?(Qe=0,Ma=null,dw(t)):(Qe=0,Ma=null,Vc(n,t,s,7));break;case 5:var o=null;switch(Ce.tag){case 26:o=Ce.memoizedState;case 5:case 27:var u=Ce;if(!o||cU(o)){Qe=0,Ma=null;var c=u.sibling;if(c!==null)Ce=c;else{var h=u.return;h!==null?(Ce=h,Kv(h)):Ce=null}break e}}Qe=0,Ma=null,Vc(n,t,s,5);break;case 6:Qe=0,Ma=null,Vc(n,t,s,6);break;case 8:zE(),wn=6;break t;default:throw Error(ft(462))}}RI();break}catch(d){GD(n,d)}while(!0);return Dr=eu=null,ce.H=i,ce.A=a,Ke=e,Ce!==null?0:(fn=null,Ne=0,qv(),wn)}function RI(){for(;Ce!==null&amp;&amp;!j4();)YD(Ce)}function YD(n){var t=SD(n.alternate,n,Pr);n.memoizedProps=n.pendingProps,t===null?Kv(n):Ce=t}function dw(n){var t=n,e=t.alternate;switch(t.tag){case 15:case 0:t=rw(e,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=rw(e,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:SE(t);default:MD(e,t),t=Ce=M3(t,Pr),t=SD(e,t,Pr)}n.memoizedProps=n.pendingProps,t===null?Kv(n):Ce=t}function Vc(n,t,e,i){Dr=eu=null,SE(t),Zc=null,kd=0;var a=t.return;try{if(gI(n,a,t,e,Ne)){wn=1,Av(n,ns(e,n.current)),Ce=null;return}}catch(s){if(a!==null)throw Ce=a,s;wn=1,Av(n,ns(e,n.current)),Ce=null;return}t.flags&amp;32768?(Ve||i===1?n=!0:ff||(Ne&amp;536870912)!==0?n=!1:(No=n=!0,(i===2||i===9||i===3||i===6)&amp;&amp;(i=as.current,i!==null&amp;&amp;i.tag===13&amp;&amp;(i.flags|=16384))),WD(t,n)):Kv(t)}function Kv(n){var t=n;do{if((t.flags&amp;32768)!==0){WD(t,No);return}n=t.return;var e=yI(t.alternate,t,Pr);if(e!==null){Ce=e;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=n}while(t!==null);wn===0&amp;&amp;(wn=5)}function WD(n,t){do{var e=_I(n.alternate,n);if(e!==null){e.flags&amp;=32767,Ce=e;return}if(e=n.return,e!==null&amp;&amp;(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&amp;&amp;(n=n.sibling,n!==null)){Ce=n;return}Ce=n=e}while(n!==null);wn=6,Ce=null}function pw(n,t,e,i,a,s,o,u,c){n.cancelPendingCommit=null;do Jv();while(mi!==0);if((Ke&amp;6)!==0)throw Error(ft(327));if(t!==null){if(t===n.current)throw Error(ft(177));if(s=t.lanes|t.childLanes,s|=lE,sP(n,e,s,o,u,c),n===fn&amp;&amp;(Ce=fn=null,Ne=0),sf=t,Io=n,jc=e,z1=s,B1=a,HD=i,(t.subtreeFlags&amp;10256)!==0||(t.flags&amp;10256)!==0?(n.callbackNode=null,n.callbackPriority=0,UI(dv,function(){return KD(!0),null})):(n.callbackNode=null,n.callbackPriority=0),i=(t.flags&amp;13878)!==0,(t.subtreeFlags&amp;13878)!==0||i){i=ce.T,ce.T=null,a=Ge.p,Ge.p=2,o=Ke,Ke|=4;try{xI(n,t,e)}finally{Ke=o,Ge.p=a,ce.T=i}}mi=1,kD(),ZD(),jD()}}function kD(){if(mi===1){mi=0;var n=Io,t=sf,e=(t.flags&amp;13878)!==0;if((t.subtreeFlags&amp;13878)!==0||e){e=ce.T,ce.T=null;var i=Ge.p;Ge.p=2;var a=Ke;Ke|=4;try{ND(t,n);var s=G1,o=p3(n.containerInfo),u=s.focusedElem,c=s.selectionRange;if(o!==u&amp;&amp;u&amp;&amp;u.ownerDocument&amp;&amp;d3(u.ownerDocument.documentElement,u)){if(c!==null&amp;&amp;oE(u)){var h=c.start,d=c.end;if(d===void 0&amp;&amp;(d=h),&quot;selectionStart&quot;in u)u.selectionStart=h,u.selectionEnd=Math.min(d,u.value.length);else{var m=u.ownerDocument||document,g=m&amp;&amp;m.defaultView||window;if(g.getSelection){var y=g.getSelection(),x=u.textContent.length,b=Math.min(c.start,x),M=c.end===void 0?b:Math.min(c.end,x);!y.extend&amp;&amp;b&gt;M&amp;&amp;(o=M,M=b,b=o);var v=zC(u,b),S=zC(u,M);if(v&amp;&amp;S&amp;&amp;(y.rangeCount!==1||y.anchorNode!==v.node||y.anchorOffset!==v.offset||y.focusNode!==S.node||y.focusOffset!==S.offset)){var E=m.createRange();E.setStart(v.node,v.offset),y.removeAllRanges(),b&gt;M?(y.addRange(E),y.extend(S.node,S.offset)):(E.setEnd(S.node,S.offset),y.addRange(E))}}}}for(m=[],y=u;y=y.parentNode;)y.nodeType===1&amp;&amp;m.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof u.focus==&quot;function&quot;&amp;&amp;u.focus(),u=0;u&lt;m.length;u++){var T=m[u];T.element.scrollLeft=T.left,T.element.scrollTop=T.top}}Iv=!!V1,G1=V1=null}finally{Ke=a,Ge.p=i,ce.T=e}}n.current=t,mi=2}}function ZD(){if(mi===2){mi=0;var n=Io,t=sf,e=(t.flags&amp;8772)!==0;if((t.subtreeFlags&amp;8772)!==0||e){e=ce.T,ce.T=null;var i=Ge.p;Ge.p=2;var a=Ke;Ke|=4;try{CD(n,t.alternate,t)}finally{Ke=a,Ge.p=i,ce.T=e}}mi=3}}function jD(){if(mi===4||mi===3){mi=0,Q4();var n=Io,t=sf,e=jc,i=HD;(t.subtreeFlags&amp;10256)!==0||(t.flags&amp;10256)!==0?mi=5:(mi=0,sf=Io=null,QD(n,n.pendingLanes));var a=n.pendingLanes;if(a===0&amp;&amp;(Po=null),tE(e),t=t.stateNode,ba&amp;&amp;typeof ba.onCommitFiberRoot==&quot;function&quot;)try{ba.onCommitFiberRoot(np,t,void 0,(t.current.flags&amp;128)===128)}catch{}if(i!==null){t=ce.T,a=Ge.p,Ge.p=2,ce.T=null;try{for(var s=n.onRecoverableError,o=0;o&lt;i.length;o++){var u=i[o];s(u.value,{componentStack:u.stack})}}finally{ce.T=t,Ge.p=a}}(jc&amp;3)!==0&amp;&amp;Jv(),Qs(n),a=n.pendingLanes,(e&amp;4194090)!==0&amp;&amp;(a&amp;42)!==0?n===P1?Hd++:(Hd=0,P1=n):Hd=0,pp(0,!1)}}function QD(n,t){(n.pooledCacheLanes&amp;=t)===0&amp;&amp;(t=n.pooledCache,t!=null&amp;&amp;(n.pooledCache=null,up(t)))}function Jv(n){return kD(),ZD(),jD(),KD(n)}function KD(){if(mi!==5)return!1;var n=Io,t=z1;z1=0;var e=tE(jc),i=ce.T,a=Ge.p;try{Ge.p=32&gt;e?32:e,ce.T=null,e=B1,B1=null;var s=Io,o=jc;if(mi=0,sf=Io=null,jc=0,(Ke&amp;6)!==0)throw Error(ft(331));var u=Ke;if(Ke|=4,PD(s.current),LD(s,s.current,o,e),Ke=u,pp(0,!1),ba&amp;&amp;typeof ba.onPostCommitFiberRoot==&quot;function&quot;)try{ba.onPostCommitFiberRoot(np,s)}catch{}return!0}finally{Ge.p=a,ce.T=i,QD(n,t)}}function mw(n,t,e){t=ns(e,t),t=D1(n.stateNode,t,2),n=Bo(n,t,2),n!==null&amp;&amp;(ap(n,2),Qs(n))}function nn(n,t,e){if(n.tag===3)mw(n,n,e);else for(;t!==null;){if(t.tag===3){mw(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError==&quot;function&quot;||typeof i.componentDidCatch==&quot;function&quot;&amp;&amp;(Po===null||!Po.has(i))){n=ns(e,n),e=pD(2),i=Bo(t,e,2),i!==null&amp;&amp;(mD(e,i,t,n),ap(i,2),Qs(i));break}}t=t.return}}function QM(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new EI;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&amp;&amp;(a=new Set,i.set(t,a));a.has(e)||(NE=!0,a.add(e),n=CI.bind(null,n,t,e),t.then(n,n))}function CI(n,t,e){var i=n.pingCache;i!==null&amp;&amp;i.delete(t),n.pingedLanes|=n.suspendedLanes&amp;e,n.warmLanes&amp;=~e,fn===n&amp;&amp;(Ne&amp;e)===e&amp;&amp;(wn===4||wn===3&amp;&amp;(Ne&amp;62914560)===Ne&amp;&amp;300&gt;ks()-LE?(Ke&amp;2)===0&amp;&amp;rf(n,0):OE|=e,af===Ne&amp;&amp;(af=0)),Qs(n)}function JD(n,t){t===0&amp;&amp;(t=kw()),n=cf(n,t),n!==null&amp;&amp;(ap(n,t),Qs(n))}function wI(n){var t=n.memoizedState,e=0;t!==null&amp;&amp;(e=t.retryLane),JD(n,e)}function DI(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,a=n.memoizedState;a!==null&amp;&amp;(e=a.retryLane);break;case 19:i=n.stateNode;break;case 22:i=n.stateNode._retryCache;break;default:throw Error(ft(314))}i!==null&amp;&amp;i.delete(t),JD(n,e)}function UI(n,t){return J1(n,t)}var Uv=null,wc=null,H1=!1,Nv=!1,KM=!1,kl=0;function Qs(n){n!==wc&amp;&amp;n.next===null&amp;&amp;(wc===null?Uv=wc=n:wc=wc.next=n),Nv=!0,H1||(H1=!0,OI())}function pp(n,t){if(!KM&amp;&amp;Nv){KM=!0;do for(var e=!1,i=Uv;i!==null;){if(!t)if(n!==0){var a=i.pendingLanes;if(a===0)var s=0;else{var o=i.suspendedLanes,u=i.pingedLanes;s=(1&lt;&lt;31-Ta(42|n)+1)-1,s&amp;=a&amp;~(o&amp;~u),s=s&amp;201326741?s&amp;201326741|1:s?s|2:0}s!==0&amp;&amp;(e=!0,gw(i,s))}else s=Ne,s=Fv(i,i===fn?s:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(s&amp;3)===0||ip(i,s)||(e=!0,gw(i,s));i=i.next}while(e);KM=!1}}function NI(){$D()}function $D(){Nv=H1=!1;var n=0;kl!==0&amp;&amp;(HI()&amp;&amp;(n=kl),kl=0);for(var t=ks(),e=null,i=Uv;i!==null;){var a=i.next,s=tU(i,t);s===0?(i.next=null,e===null?Uv=a:e.next=a,a===null&amp;&amp;(wc=e)):(e=i,(n!==0||(s&amp;3)!==0)&amp;&amp;(Nv=!0)),i=a}pp(n,!1)}function tU(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,a=n.expirationTimes,s=n.pendingLanes&amp;-62914561;0&lt;s;){var o=31-Ta(s),u=1&lt;&lt;o,c=a[o];c===-1?((u&amp;e)===0||(u&amp;i)!==0)&amp;&amp;(a[o]=aP(u,t)):c&lt;=t&amp;&amp;(n.expiredLanes|=u),s&amp;=~u}if(t=fn,e=Ne,e=Fv(n,n===t?e:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i=n.callbackNode,e===0||n===t&amp;&amp;(Qe===2||Qe===9)||n.cancelPendingCommit!==null)return i!==null&amp;&amp;i!==null&amp;&amp;bM(i),n.callbackNode=null,n.callbackPriority=0;if((e&amp;3)===0||ip(n,e)){if(t=e&amp;-e,t===n.callbackPriority)return t;switch(i!==null&amp;&amp;bM(i),tE(e)){case 2:case 8:e=qw;break;case 32:e=dv;break;case 268435456:e=Yw;break;default:e=dv}return i=eU.bind(null,n),e=J1(e,i),n.callbackPriority=t,n.callbackNode=e,t}return i!==null&amp;&amp;i!==null&amp;&amp;bM(i),n.callbackPriority=2,n.callbackNode=null,2}function eU(n,t){if(mi!==0&amp;&amp;mi!==5)return n.callbackNode=null,n.callbackPriority=0,null;var e=n.callbackNode;if(Jv(!0)&amp;&amp;n.callbackNode!==e)return null;var i=Ne;return i=Fv(n,n===fn?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i===0?null:(VD(n,i,t),tU(n,ks()),n.callbackNode!=null&amp;&amp;n.callbackNode===e?eU.bind(null,n):null)}function gw(n,t){if(Jv())return null;VD(n,t,!0)}function OI(){VI(function(){(Ke&amp;6)!==0?J1(Xw,NI):$D()})}function BE(){return kl===0&amp;&amp;(kl=Ww()),kl}function vw(n){return n==null||typeof n==&quot;symbol&quot;||typeof n==&quot;boolean&quot;?null:typeof n==&quot;function&quot;?n:J0(&quot;&quot;+n)}function yw(n,t){var e=t.ownerDocument.createElement(&quot;input&quot;);return e.name=t.name,e.value=t.value,n.id&amp;&amp;e.setAttribute(&quot;form&quot;,n.id),t.parentNode.insertBefore(e,t),n=new FormData(n),e.parentNode.removeChild(e),n}function LI(n,t,e,i,a){if(t===&quot;submit&quot;&amp;&amp;e&amp;&amp;e.stateNode===a){var s=vw((a[ta]||null).action),o=i.submitter;o&amp;&amp;(t=(t=o[ta]||null)?vw(t.formAction):o.getAttribute(&quot;formAction&quot;),t!==null&amp;&amp;(s=t,o=null));var u=new Vv(&quot;action&quot;,&quot;action&quot;,null,i,a);n.push({event:u,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(kl!==0){var c=o?yw(a,o):new FormData(a);C1(e,{pending:!0,data:c,method:a.method,action:s},null,c)}}else typeof s==&quot;function&quot;&amp;&amp;(u.preventDefault(),c=o?yw(a,o):new FormData(a),C1(e,{pending:!0,data:c,method:a.method,action:s},s,c))},currentTarget:a}]})}}for(W0=0;W0&lt;g1.length;W0++)k0=g1[W0],_w=k0.toLowerCase(),xw=k0[0].toUpperCase()+k0.slice(1),_s(_w,&quot;on&quot;+xw);var k0,_w,xw,W0;_s(g3,&quot;onAnimationEnd&quot;);_s(v3,&quot;onAnimationIteration&quot;);_s(y3,&quot;onAnimationStart&quot;);_s(&quot;dblclick&quot;,&quot;onDoubleClick&quot;);_s(&quot;focusin&quot;,&quot;onFocus&quot;);_s(&quot;focusout&quot;,&quot;onBlur&quot;);_s($P,&quot;onTransitionRun&quot;);_s(tI,&quot;onTransitionStart&quot;);_s(eI,&quot;onTransitionCancel&quot;);_s(_3,&quot;onTransitionEnd&quot;);Kc(&quot;onMouseEnter&quot;,[&quot;mouseout&quot;,&quot;mouseover&quot;]);Kc(&quot;onMouseLeave&quot;,[&quot;mouseout&quot;,&quot;mouseover&quot;]);Kc(&quot;onPointerEnter&quot;,[&quot;pointerout&quot;,&quot;pointerover&quot;]);Kc(&quot;onPointerLeave&quot;,[&quot;pointerout&quot;,&quot;pointerover&quot;]);Jl(&quot;onChange&quot;,&quot;change click focusin focusout input keydown keyup selectionchange&quot;.split(&quot; &quot;));Jl(&quot;onSelect&quot;,&quot;focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange&quot;.split(&quot; &quot;));Jl(&quot;onBeforeInput&quot;,[&quot;compositionend&quot;,&quot;keypress&quot;,&quot;textInput&quot;,&quot;paste&quot;]);Jl(&quot;onCompositionEnd&quot;,&quot;compositionend focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;));Jl(&quot;onCompositionStart&quot;,&quot;compositionstart focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;));Jl(&quot;onCompositionUpdate&quot;,&quot;compositionupdate focusout keydown keypress keyup mousedown&quot;.split(&quot; &quot;));var Zd=&quot;abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting&quot;.split(&quot; &quot;),zI=new Set(&quot;beforetoggle cancel close invalid load scroll scrollend toggle&quot;.split(&quot; &quot;).concat(Zd));function nU(n,t){t=(t&amp;4)!==0;for(var e=0;e&lt;n.length;e++){var i=n[e],a=i.event;i=i.listeners;t:{var s=void 0;if(t)for(var o=i.length-1;0&lt;=o;o--){var u=i[o],c=u.instance,h=u.currentTarget;if(u=u.listener,c!==s&amp;&amp;a.isPropagationStopped())break t;s=u,a.currentTarget=h;try{s(a)}catch(d){Tv(d)}a.currentTarget=null,s=c}else for(o=0;o&lt;i.length;o++){if(u=i[o],c=u.instance,h=u.currentTarget,u=u.listener,c!==s&amp;&amp;a.isPropagationStopped())break t;s=u,a.currentTarget=h;try{s(a)}catch(d){Tv(d)}a.currentTarget=null,s=c}}}}function Re(n,t){var e=t[u1];e===void 0&amp;&amp;(e=t[u1]=new Set);var i=n+&quot;__bubble&quot;;e.has(i)||(iU(t,n,2,!1),e.add(i))}function JM(n,t,e){var i=0;t&amp;&amp;(i|=4),iU(e,n,i,t)}var Z0=&quot;_reactListening&quot;+Math.random().toString(36).slice(2);function PE(n){if(!n[Z0]){n[Z0]=!0,Kw.forEach(function(e){e!==&quot;selectionchange&quot;&amp;&amp;(zI.has(e)||JM(e,!1,n),JM(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Z0]||(t[Z0]=!0,JM(&quot;selectionchange&quot;,!1,t))}}function iU(n,t,e,i){switch(mU(t)){case 2:var a=lH;break;case 8:a=uH;break;default:a=VE}e=a.bind(null,t,e,n),a=void 0,!d1||t!==&quot;touchstart&quot;&amp;&amp;t!==&quot;touchmove&quot;&amp;&amp;t!==&quot;wheel&quot;||(a=!0),i?a!==void 0?n.addEventListener(t,e,{capture:!0,passive:a}):n.addEventListener(t,e,!0):a!==void 0?n.addEventListener(t,e,{passive:a}):n.addEventListener(t,e,!1)}function $M(n,t,e,i,a){var s=i;if((t&amp;1)===0&amp;&amp;(t&amp;2)===0&amp;&amp;i!==null)t:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var u=i.stateNode.containerInfo;if(u===a)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&amp;&amp;o.stateNode.containerInfo===a)return;o=o.return}for(;u!==null;){if(o=Nc(u),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){i=s=o;continue t}u=u.parentNode}}i=i.return}s3(function(){var h=s,d=iE(e),m=[];t:{var g=x3.get(n);if(g!==void 0){var y=Vv,x=n;switch(n){case&quot;keypress&quot;:if(tv(e)===0)break t;case&quot;keydown&quot;:case&quot;keyup&quot;:y=UP;break;case&quot;focusin&quot;:x=&quot;focus&quot;,y=NM;break;case&quot;focusout&quot;:x=&quot;blur&quot;,y=NM;break;case&quot;beforeblur&quot;:case&quot;afterblur&quot;:y=NM;break;case&quot;click&quot;:if(e.button===2)break t;case&quot;auxclick&quot;:case&quot;dblclick&quot;:case&quot;mousedown&quot;:case&quot;mousemove&quot;:case&quot;mouseup&quot;:case&quot;mouseout&quot;:case&quot;mouseover&quot;:case&quot;contextmenu&quot;:y=AC;break;case&quot;drag&quot;:case&quot;dragend&quot;:case&quot;dragenter&quot;:case&quot;dragexit&quot;:case&quot;dragleave&quot;:case&quot;dragover&quot;:case&quot;dragstart&quot;:case&quot;drop&quot;:y=_P;break;case&quot;touchcancel&quot;:case&quot;touchend&quot;:case&quot;touchmove&quot;:case&quot;touchstart&quot;:y=LP;break;case g3:case v3:case y3:y=MP;break;case _3:y=BP;break;case&quot;scroll&quot;:case&quot;scrollend&quot;:y=vP;break;case&quot;wheel&quot;:y=IP;break;case&quot;copy&quot;:case&quot;cut&quot;:case&quot;paste&quot;:y=bP;break;case&quot;gotpointercapture&quot;:case&quot;lostpointercapture&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;pointerup&quot;:y=CC;break;case&quot;toggle&quot;:case&quot;beforetoggle&quot;:y=FP}var b=(t&amp;4)!==0,M=!b&amp;&amp;(n===&quot;scroll&quot;||n===&quot;scrollend&quot;),v=b?g!==null?g+&quot;Capture&quot;:null:g;b=[];for(var S=h,E;S!==null;){var T=S;if(E=T.stateNode,T=T.tag,T!==5&amp;&amp;T!==26&amp;&amp;T!==27||E===null||v===null||(T=Gd(S,v),T!=null&amp;&amp;b.push(jd(S,T,E))),M)break;S=S.return}0&lt;b.length&amp;&amp;(g=new y(g,x,null,e,d),m.push({event:g,listeners:b}))}}if((t&amp;7)===0){t:{if(g=n===&quot;mouseover&quot;||n===&quot;pointerover&quot;,y=n===&quot;mouseout&quot;||n===&quot;pointerout&quot;,g&amp;&amp;e!==h1&amp;&amp;(x=e.relatedTarget||e.fromElement)&amp;&amp;(Nc(x)||x[lf]))break t;if((y||g)&amp;&amp;(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(x=e.relatedTarget||e.toElement,y=h,x=x?Nc(x):null,x!==null&amp;&amp;(M=ep(x),b=x.tag,x!==M||b!==5&amp;&amp;b!==27&amp;&amp;b!==6)&amp;&amp;(x=null)):(y=null,x=h),y!==x)){if(b=AC,T=&quot;onMouseLeave&quot;,v=&quot;onMouseEnter&quot;,S=&quot;mouse&quot;,(n===&quot;pointerout&quot;||n===&quot;pointerover&quot;)&amp;&amp;(b=CC,T=&quot;onPointerLeave&quot;,v=&quot;onPointerEnter&quot;,S=&quot;pointer&quot;),M=y==null?g:Td(y),E=x==null?g:Td(x),g=new b(T,S+&quot;leave&quot;,y,e,d),g.target=M,g.relatedTarget=E,T=null,Nc(d)===h&amp;&amp;(b=new b(v,S+&quot;enter&quot;,x,e,d),b.target=E,b.relatedTarget=M,T=b),M=T,y&amp;&amp;x)e:{for(b=y,v=x,S=0,E=b;E;E=Ac(E))S++;for(E=0,T=v;T;T=Ac(T))E++;for(;0&lt;S-E;)b=Ac(b),S--;for(;0&lt;E-S;)v=Ac(v),E--;for(;S--;){if(b===v||v!==null&amp;&amp;b===v.alternate)break e;b=Ac(b),v=Ac(v)}b=null}else b=null;y!==null&amp;&amp;Sw(m,g,y,b,!1),x!==null&amp;&amp;M!==null&amp;&amp;Sw(m,M,x,b,!0)}}t:{if(g=h?Td(h):window,y=g.nodeName&amp;&amp;g.nodeName.toLowerCase(),y===&quot;select&quot;||y===&quot;input&quot;&amp;&amp;g.type===&quot;file&quot;)var w=NC;else if(UC(g))if(f3)w=QP;else{w=ZP;var U=kP}else y=g.nodeName,!y||y.toLowerCase()!==&quot;input&quot;||g.type!==&quot;checkbox&quot;&amp;&amp;g.type!==&quot;radio&quot;?h&amp;&amp;nE(h.elementType)&amp;&amp;(w=NC):w=jP;if(w&amp;&amp;(w=w(n,h))){c3(m,w,e,d);break t}U&amp;&amp;U(n,g,h),n===&quot;focusout&quot;&amp;&amp;h&amp;&amp;g.type===&quot;number&quot;&amp;&amp;h.memoizedProps.value!=null&amp;&amp;f1(g,&quot;number&quot;,g.value)}switch(U=h?Td(h):window,n){case&quot;focusin&quot;:(UC(U)||U.contentEditable===&quot;true&quot;)&amp;&amp;(zc=U,p1=h,wd=null);break;case&quot;focusout&quot;:wd=p1=zc=null;break;case&quot;mousedown&quot;:m1=!0;break;case&quot;contextmenu&quot;:case&quot;mouseup&quot;:case&quot;dragend&quot;:m1=!1,BC(m,e,d);break;case&quot;selectionchange&quot;:if(JP)break;case&quot;keydown&quot;:case&quot;keyup&quot;:BC(m,e,d)}var O;if(rE)t:{switch(n){case&quot;compositionstart&quot;:var z=&quot;onCompositionStart&quot;;break t;case&quot;compositionend&quot;:z=&quot;onCompositionEnd&quot;;break t;case&quot;compositionupdate&quot;:z=&quot;onCompositionUpdate&quot;;break t}z=void 0}else Lc?l3(n,e)&amp;&amp;(z=&quot;onCompositionEnd&quot;):n===&quot;keydown&quot;&amp;&amp;e.keyCode===229&amp;&amp;(z=&quot;onCompositionStart&quot;);z&amp;&amp;(o3&amp;&amp;e.locale!==&quot;ko&quot;&amp;&amp;(Lc||z!==&quot;onCompositionStart&quot;?z===&quot;onCompositionEnd&quot;&amp;&amp;Lc&amp;&amp;(O=r3()):(Uo=d,aE=&quot;value&quot;in Uo?Uo.value:Uo.textContent,Lc=!0)),U=Ov(h,z),0&lt;U.length&amp;&amp;(z=new RC(z,n,null,e,d),m.push({event:z,listeners:U}),O?z.data=O:(O=u3(e),O!==null&amp;&amp;(z.data=O)))),(O=GP?XP(n,e):qP(n,e))&amp;&amp;(z=Ov(h,&quot;onBeforeInput&quot;),0&lt;z.length&amp;&amp;(U=new RC(&quot;onBeforeInput&quot;,&quot;beforeinput&quot;,null,e,d),m.push({event:U,listeners:z}),U.data=O)),LI(m,n,h,e,d)}nU(m,t)})}function jd(n,t,e){return{instance:n,listener:t,currentTarget:e}}function Ov(n,t){for(var e=t+&quot;Capture&quot;,i=[];n!==null;){var a=n,s=a.stateNode;if(a=a.tag,a!==5&amp;&amp;a!==26&amp;&amp;a!==27||s===null||(a=Gd(n,e),a!=null&amp;&amp;i.unshift(jd(n,a,s)),a=Gd(n,t),a!=null&amp;&amp;i.push(jd(n,a,s))),n.tag===3)return i;n=n.return}return[]}function Ac(n){if(n===null)return null;do n=n.return;while(n&amp;&amp;n.tag!==5&amp;&amp;n.tag!==27);return n||null}function Sw(n,t,e,i,a){for(var s=t._reactName,o=[];e!==null&amp;&amp;e!==i;){var u=e,c=u.alternate,h=u.stateNode;if(u=u.tag,c!==null&amp;&amp;c===i)break;u!==5&amp;&amp;u!==26&amp;&amp;u!==27||h===null||(c=h,a?(h=Gd(e,s),h!=null&amp;&amp;o.unshift(jd(e,h,c))):a||(h=Gd(e,s),h!=null&amp;&amp;o.push(jd(e,h,c)))),e=e.return}o.length!==0&amp;&amp;n.push({event:t,listeners:o})}var BI=/\r\n?/g,PI=/\u0000|\uFFFD/g;function Mw(n){return(typeof n==&quot;string&quot;?n:&quot;&quot;+n).replace(BI,`
<a href="#l9" class="line" id="l9">      9</a> `).replace(PI,&quot;&quot;)}function aU(n,t){return t=Mw(t),Mw(n)===t}function $v(){}function tn(n,t,e,i,a,s){switch(e){case&quot;children&quot;:typeof i==&quot;string&quot;?t===&quot;body&quot;||t===&quot;textarea&quot;&amp;&amp;i===&quot;&quot;||Jc(n,i):(typeof i==&quot;number&quot;||typeof i==&quot;bigint&quot;)&amp;&amp;t!==&quot;body&quot;&amp;&amp;Jc(n,&quot;&quot;+i);break;case&quot;className&quot;:P0(n,&quot;class&quot;,i);break;case&quot;tabIndex&quot;:P0(n,&quot;tabindex&quot;,i);break;case&quot;dir&quot;:case&quot;role&quot;:case&quot;viewBox&quot;:case&quot;width&quot;:case&quot;height&quot;:P0(n,e,i);break;case&quot;style&quot;:a3(n,i,s);break;case&quot;data&quot;:if(t!==&quot;object&quot;){P0(n,&quot;data&quot;,i);break}case&quot;src&quot;:case&quot;href&quot;:if(i===&quot;&quot;&amp;&amp;(t!==&quot;a&quot;||e!==&quot;href&quot;)){n.removeAttribute(e);break}if(i==null||typeof i==&quot;function&quot;||typeof i==&quot;symbol&quot;||typeof i==&quot;boolean&quot;){n.removeAttribute(e);break}i=J0(&quot;&quot;+i),n.setAttribute(e,i);break;case&quot;action&quot;:case&quot;formAction&quot;:if(typeof i==&quot;function&quot;){n.setAttribute(e,&quot;javascript:throw new Error(&#39;A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\&#39;re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().&#39;)&quot;);break}else typeof s==&quot;function&quot;&amp;&amp;(e===&quot;formAction&quot;?(t!==&quot;input&quot;&amp;&amp;tn(n,t,&quot;name&quot;,a.name,a,null),tn(n,t,&quot;formEncType&quot;,a.formEncType,a,null),tn(n,t,&quot;formMethod&quot;,a.formMethod,a,null),tn(n,t,&quot;formTarget&quot;,a.formTarget,a,null)):(tn(n,t,&quot;encType&quot;,a.encType,a,null),tn(n,t,&quot;method&quot;,a.method,a,null),tn(n,t,&quot;target&quot;,a.target,a,null)));if(i==null||typeof i==&quot;symbol&quot;||typeof i==&quot;boolean&quot;){n.removeAttribute(e);break}i=J0(&quot;&quot;+i),n.setAttribute(e,i);break;case&quot;onClick&quot;:i!=null&amp;&amp;(n.onclick=$v);break;case&quot;onScroll&quot;:i!=null&amp;&amp;Re(&quot;scroll&quot;,n);break;case&quot;onScrollEnd&quot;:i!=null&amp;&amp;Re(&quot;scrollend&quot;,n);break;case&quot;dangerouslySetInnerHTML&quot;:if(i!=null){if(typeof i!=&quot;object&quot;||!(&quot;__html&quot;in i))throw Error(ft(61));if(e=i.__html,e!=null){if(a.children!=null)throw Error(ft(60));n.innerHTML=e}}break;case&quot;multiple&quot;:n.multiple=i&amp;&amp;typeof i!=&quot;function&quot;&amp;&amp;typeof i!=&quot;symbol&quot;;break;case&quot;muted&quot;:n.muted=i&amp;&amp;typeof i!=&quot;function&quot;&amp;&amp;typeof i!=&quot;symbol&quot;;break;case&quot;suppressContentEditableWarning&quot;:case&quot;suppressHydrationWarning&quot;:case&quot;defaultValue&quot;:case&quot;defaultChecked&quot;:case&quot;innerHTML&quot;:case&quot;ref&quot;:break;case&quot;autoFocus&quot;:break;case&quot;xlinkHref&quot;:if(i==null||typeof i==&quot;function&quot;||typeof i==&quot;boolean&quot;||typeof i==&quot;symbol&quot;){n.removeAttribute(&quot;xlink:href&quot;);break}e=J0(&quot;&quot;+i),n.setAttributeNS(&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:href&quot;,e);break;case&quot;contentEditable&quot;:case&quot;spellCheck&quot;:case&quot;draggable&quot;:case&quot;value&quot;:case&quot;autoReverse&quot;:case&quot;externalResourcesRequired&quot;:case&quot;focusable&quot;:case&quot;preserveAlpha&quot;:i!=null&amp;&amp;typeof i!=&quot;function&quot;&amp;&amp;typeof i!=&quot;symbol&quot;?n.setAttribute(e,&quot;&quot;+i):n.removeAttribute(e);break;case&quot;inert&quot;:case&quot;allowFullScreen&quot;:case&quot;async&quot;:case&quot;autoPlay&quot;:case&quot;controls&quot;:case&quot;default&quot;:case&quot;defer&quot;:case&quot;disabled&quot;:case&quot;disablePictureInPicture&quot;:case&quot;disableRemotePlayback&quot;:case&quot;formNoValidate&quot;:case&quot;hidden&quot;:case&quot;loop&quot;:case&quot;noModule&quot;:case&quot;noValidate&quot;:case&quot;open&quot;:case&quot;playsInline&quot;:case&quot;readOnly&quot;:case&quot;required&quot;:case&quot;reversed&quot;:case&quot;scoped&quot;:case&quot;seamless&quot;:case&quot;itemScope&quot;:i&amp;&amp;typeof i!=&quot;function&quot;&amp;&amp;typeof i!=&quot;symbol&quot;?n.setAttribute(e,&quot;&quot;):n.removeAttribute(e);break;case&quot;capture&quot;:case&quot;download&quot;:i===!0?n.setAttribute(e,&quot;&quot;):i!==!1&amp;&amp;i!=null&amp;&amp;typeof i!=&quot;function&quot;&amp;&amp;typeof i!=&quot;symbol&quot;?n.setAttribute(e,i):n.removeAttribute(e);break;case&quot;cols&quot;:case&quot;rows&quot;:case&quot;size&quot;:case&quot;span&quot;:i!=null&amp;&amp;typeof i!=&quot;function&quot;&amp;&amp;typeof i!=&quot;symbol&quot;&amp;&amp;!isNaN(i)&amp;&amp;1&lt;=i?n.setAttribute(e,i):n.removeAttribute(e);break;case&quot;rowSpan&quot;:case&quot;start&quot;:i==null||typeof i==&quot;function&quot;||typeof i==&quot;symbol&quot;||isNaN(i)?n.removeAttribute(e):n.setAttribute(e,i);break;case&quot;popover&quot;:Re(&quot;beforetoggle&quot;,n),Re(&quot;toggle&quot;,n),K0(n,&quot;popover&quot;,i);break;case&quot;xlinkActuate&quot;:Er(n,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:actuate&quot;,i);break;case&quot;xlinkArcrole&quot;:Er(n,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:arcrole&quot;,i);break;case&quot;xlinkRole&quot;:Er(n,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:role&quot;,i);break;case&quot;xlinkShow&quot;:Er(n,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:show&quot;,i);break;case&quot;xlinkTitle&quot;:Er(n,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:title&quot;,i);break;case&quot;xlinkType&quot;:Er(n,&quot;http://www.w3.org/1999/xlink&quot;,&quot;xlink:type&quot;,i);break;case&quot;xmlBase&quot;:Er(n,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:base&quot;,i);break;case&quot;xmlLang&quot;:Er(n,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:lang&quot;,i);break;case&quot;xmlSpace&quot;:Er(n,&quot;http://www.w3.org/XML/1998/namespace&quot;,&quot;xml:space&quot;,i);break;case&quot;is&quot;:K0(n,&quot;is&quot;,i);break;case&quot;innerText&quot;:case&quot;textContent&quot;:break;default:(!(2&lt;e.length)||e[0]!==&quot;o&quot;&amp;&amp;e[0]!==&quot;O&quot;||e[1]!==&quot;n&quot;&amp;&amp;e[1]!==&quot;N&quot;)&amp;&amp;(e=mP.get(e)||e,K0(n,e,i))}}function F1(n,t,e,i,a,s){switch(e){case&quot;style&quot;:a3(n,i,s);break;case&quot;dangerouslySetInnerHTML&quot;:if(i!=null){if(typeof i!=&quot;object&quot;||!(&quot;__html&quot;in i))throw Error(ft(61));if(e=i.__html,e!=null){if(a.children!=null)throw Error(ft(60));n.innerHTML=e}}break;case&quot;children&quot;:typeof i==&quot;string&quot;?Jc(n,i):(typeof i==&quot;number&quot;||typeof i==&quot;bigint&quot;)&amp;&amp;Jc(n,&quot;&quot;+i);break;case&quot;onScroll&quot;:i!=null&amp;&amp;Re(&quot;scroll&quot;,n);break;case&quot;onScrollEnd&quot;:i!=null&amp;&amp;Re(&quot;scrollend&quot;,n);break;case&quot;onClick&quot;:i!=null&amp;&amp;(n.onclick=$v);break;case&quot;suppressContentEditableWarning&quot;:case&quot;suppressHydrationWarning&quot;:case&quot;innerHTML&quot;:case&quot;ref&quot;:break;case&quot;innerText&quot;:case&quot;textContent&quot;:break;default:if(!Jw.hasOwnProperty(e))t:{if(e[0]===&quot;o&quot;&amp;&amp;e[1]===&quot;n&quot;&amp;&amp;(a=e.endsWith(&quot;Capture&quot;),t=e.slice(2,a?e.length-7:void 0),s=n[ta]||null,s=s!=null?s[e]:null,typeof s==&quot;function&quot;&amp;&amp;n.removeEventListener(t,s,a),typeof i==&quot;function&quot;)){typeof s!=&quot;function&quot;&amp;&amp;s!==null&amp;&amp;(e in n?n[e]=null:n.hasAttribute(e)&amp;&amp;n.removeAttribute(e)),n.addEventListener(t,i,a);break t}e in n?n[e]=i:i===!0?n.setAttribute(e,&quot;&quot;):K0(n,e,i)}}}function gi(n,t,e){switch(t){case&quot;div&quot;:case&quot;span&quot;:case&quot;svg&quot;:case&quot;path&quot;:case&quot;a&quot;:case&quot;g&quot;:case&quot;p&quot;:case&quot;li&quot;:break;case&quot;img&quot;:Re(&quot;error&quot;,n),Re(&quot;load&quot;,n);var i=!1,a=!1,s;for(s in e)if(e.hasOwnProperty(s)){var o=e[s];if(o!=null)switch(s){case&quot;src&quot;:i=!0;break;case&quot;srcSet&quot;:a=!0;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:throw Error(ft(137,t));default:tn(n,t,s,o,e,null)}}a&amp;&amp;tn(n,t,&quot;srcSet&quot;,e.srcSet,e,null),i&amp;&amp;tn(n,t,&quot;src&quot;,e.src,e,null);return;case&quot;input&quot;:Re(&quot;invalid&quot;,n);var u=s=o=a=null,c=null,h=null;for(i in e)if(e.hasOwnProperty(i)){var d=e[i];if(d!=null)switch(i){case&quot;name&quot;:a=d;break;case&quot;type&quot;:o=d;break;case&quot;checked&quot;:c=d;break;case&quot;defaultChecked&quot;:h=d;break;case&quot;value&quot;:s=d;break;case&quot;defaultValue&quot;:u=d;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(d!=null)throw Error(ft(137,t));break;default:tn(n,t,i,d,e,null)}}e3(n,s,u,c,h,o,a,!1),pv(n);return;case&quot;select&quot;:Re(&quot;invalid&quot;,n),i=o=s=null;for(a in e)if(e.hasOwnProperty(a)&amp;&amp;(u=e[a],u!=null))switch(a){case&quot;value&quot;:s=u;break;case&quot;defaultValue&quot;:o=u;break;case&quot;multiple&quot;:i=u;default:tn(n,t,a,u,e,null)}t=s,e=o,n.multiple=!!i,t!=null?Xc(n,!!i,t,!1):e!=null&amp;&amp;Xc(n,!!i,e,!0);return;case&quot;textarea&quot;:Re(&quot;invalid&quot;,n),s=a=i=null;for(o in e)if(e.hasOwnProperty(o)&amp;&amp;(u=e[o],u!=null))switch(o){case&quot;value&quot;:i=u;break;case&quot;defaultValue&quot;:a=u;break;case&quot;children&quot;:s=u;break;case&quot;dangerouslySetInnerHTML&quot;:if(u!=null)throw Error(ft(91));break;default:tn(n,t,o,u,e,null)}i3(n,i,a,s),pv(n);return;case&quot;option&quot;:for(c in e)if(e.hasOwnProperty(c)&amp;&amp;(i=e[c],i!=null))switch(c){case&quot;selected&quot;:n.selected=i&amp;&amp;typeof i!=&quot;function&quot;&amp;&amp;typeof i!=&quot;symbol&quot;;break;default:tn(n,t,c,i,e,null)}return;case&quot;dialog&quot;:Re(&quot;beforetoggle&quot;,n),Re(&quot;toggle&quot;,n),Re(&quot;cancel&quot;,n),Re(&quot;close&quot;,n);break;case&quot;iframe&quot;:case&quot;object&quot;:Re(&quot;load&quot;,n);break;case&quot;video&quot;:case&quot;audio&quot;:for(i=0;i&lt;Zd.length;i++)Re(Zd[i],n);break;case&quot;image&quot;:Re(&quot;error&quot;,n),Re(&quot;load&quot;,n);break;case&quot;details&quot;:Re(&quot;toggle&quot;,n);break;case&quot;embed&quot;:case&quot;source&quot;:case&quot;link&quot;:Re(&quot;error&quot;,n),Re(&quot;load&quot;,n);case&quot;area&quot;:case&quot;base&quot;:case&quot;br&quot;:case&quot;col&quot;:case&quot;hr&quot;:case&quot;keygen&quot;:case&quot;meta&quot;:case&quot;param&quot;:case&quot;track&quot;:case&quot;wbr&quot;:case&quot;menuitem&quot;:for(h in e)if(e.hasOwnProperty(h)&amp;&amp;(i=e[h],i!=null))switch(h){case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:throw Error(ft(137,t));default:tn(n,t,h,i,e,null)}return;default:if(nE(t)){for(d in e)e.hasOwnProperty(d)&amp;&amp;(i=e[d],i!==void 0&amp;&amp;F1(n,t,d,i,e,void 0));return}}for(u in e)e.hasOwnProperty(u)&amp;&amp;(i=e[u],i!=null&amp;&amp;tn(n,t,u,i,e,null))}function II(n,t,e,i){switch(t){case&quot;div&quot;:case&quot;span&quot;:case&quot;svg&quot;:case&quot;path&quot;:case&quot;a&quot;:case&quot;g&quot;:case&quot;p&quot;:case&quot;li&quot;:break;case&quot;input&quot;:var a=null,s=null,o=null,u=null,c=null,h=null,d=null;for(y in e){var m=e[y];if(e.hasOwnProperty(y)&amp;&amp;m!=null)switch(y){case&quot;checked&quot;:break;case&quot;value&quot;:break;case&quot;defaultValue&quot;:c=m;default:i.hasOwnProperty(y)||tn(n,t,y,null,i,m)}}for(var g in i){var y=i[g];if(m=e[g],i.hasOwnProperty(g)&amp;&amp;(y!=null||m!=null))switch(g){case&quot;type&quot;:s=y;break;case&quot;name&quot;:a=y;break;case&quot;checked&quot;:h=y;break;case&quot;defaultChecked&quot;:d=y;break;case&quot;value&quot;:o=y;break;case&quot;defaultValue&quot;:u=y;break;case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(y!=null)throw Error(ft(137,t));break;default:y!==m&amp;&amp;tn(n,t,g,y,i,m)}}c1(n,o,u,c,h,d,s,a);return;case&quot;select&quot;:y=o=u=g=null;for(s in e)if(c=e[s],e.hasOwnProperty(s)&amp;&amp;c!=null)switch(s){case&quot;value&quot;:break;case&quot;multiple&quot;:y=c;default:i.hasOwnProperty(s)||tn(n,t,s,null,i,c)}for(a in i)if(s=i[a],c=e[a],i.hasOwnProperty(a)&amp;&amp;(s!=null||c!=null))switch(a){case&quot;value&quot;:g=s;break;case&quot;defaultValue&quot;:u=s;break;case&quot;multiple&quot;:o=s;default:s!==c&amp;&amp;tn(n,t,a,s,i,c)}t=u,e=o,i=y,g!=null?Xc(n,!!e,g,!1):!!i!=!!e&amp;&amp;(t!=null?Xc(n,!!e,t,!0):Xc(n,!!e,e?[]:&quot;&quot;,!1));return;case&quot;textarea&quot;:y=g=null;for(u in e)if(a=e[u],e.hasOwnProperty(u)&amp;&amp;a!=null&amp;&amp;!i.hasOwnProperty(u))switch(u){case&quot;value&quot;:break;case&quot;children&quot;:break;default:tn(n,t,u,null,i,a)}for(o in i)if(a=i[o],s=e[o],i.hasOwnProperty(o)&amp;&amp;(a!=null||s!=null))switch(o){case&quot;value&quot;:g=a;break;case&quot;defaultValue&quot;:y=a;break;case&quot;children&quot;:break;case&quot;dangerouslySetInnerHTML&quot;:if(a!=null)throw Error(ft(91));break;default:a!==s&amp;&amp;tn(n,t,o,a,i,s)}n3(n,g,y);return;case&quot;option&quot;:for(var x in e)if(g=e[x],e.hasOwnProperty(x)&amp;&amp;g!=null&amp;&amp;!i.hasOwnProperty(x))switch(x){case&quot;selected&quot;:n.selected=!1;break;default:tn(n,t,x,null,i,g)}for(c in i)if(g=i[c],y=e[c],i.hasOwnProperty(c)&amp;&amp;g!==y&amp;&amp;(g!=null||y!=null))switch(c){case&quot;selected&quot;:n.selected=g&amp;&amp;typeof g!=&quot;function&quot;&amp;&amp;typeof g!=&quot;symbol&quot;;break;default:tn(n,t,c,g,i,y)}return;case&quot;img&quot;:case&quot;link&quot;:case&quot;area&quot;:case&quot;base&quot;:case&quot;br&quot;:case&quot;col&quot;:case&quot;embed&quot;:case&quot;hr&quot;:case&quot;keygen&quot;:case&quot;meta&quot;:case&quot;param&quot;:case&quot;source&quot;:case&quot;track&quot;:case&quot;wbr&quot;:case&quot;menuitem&quot;:for(var b in e)g=e[b],e.hasOwnProperty(b)&amp;&amp;g!=null&amp;&amp;!i.hasOwnProperty(b)&amp;&amp;tn(n,t,b,null,i,g);for(h in i)if(g=i[h],y=e[h],i.hasOwnProperty(h)&amp;&amp;g!==y&amp;&amp;(g!=null||y!=null))switch(h){case&quot;children&quot;:case&quot;dangerouslySetInnerHTML&quot;:if(g!=null)throw Error(ft(137,t));break;default:tn(n,t,h,g,i,y)}return;default:if(nE(t)){for(var M in e)g=e[M],e.hasOwnProperty(M)&amp;&amp;g!==void 0&amp;&amp;!i.hasOwnProperty(M)&amp;&amp;F1(n,t,M,void 0,i,g);for(d in i)g=i[d],y=e[d],!i.hasOwnProperty(d)||g===y||g===void 0&amp;&amp;y===void 0||F1(n,t,d,g,i,y);return}}for(var v in e)g=e[v],e.hasOwnProperty(v)&amp;&amp;g!=null&amp;&amp;!i.hasOwnProperty(v)&amp;&amp;tn(n,t,v,null,i,g);for(m in i)g=i[m],y=e[m],!i.hasOwnProperty(m)||g===y||g==null&amp;&amp;y==null||tn(n,t,m,g,i,y)}var V1=null,G1=null;function Lv(n){return n.nodeType===9?n:n.ownerDocument}function Ew(n){switch(n){case&quot;http://www.w3.org/2000/svg&quot;:return 1;case&quot;http://www.w3.org/1998/Math/MathML&quot;:return 2;default:return 0}}function sU(n,t){if(n===0)switch(t){case&quot;svg&quot;:return 1;case&quot;math&quot;:return 2;default:return 0}return n===1&amp;&amp;t===&quot;foreignObject&quot;?0:n}function X1(n,t){return n===&quot;textarea&quot;||n===&quot;noscript&quot;||typeof t.children==&quot;string&quot;||typeof t.children==&quot;number&quot;||typeof t.children==&quot;bigint&quot;||typeof t.dangerouslySetInnerHTML==&quot;object&quot;&amp;&amp;t.dangerouslySetInnerHTML!==null&amp;&amp;t.dangerouslySetInnerHTML.__html!=null}var t1=null;function HI(){var n=window.event;return n&amp;&amp;n.type===&quot;popstate&quot;?n===t1?!1:(t1=n,!0):(t1=null,!1)}var rU=typeof setTimeout==&quot;function&quot;?setTimeout:void 0,FI=typeof clearTimeout==&quot;function&quot;?clearTimeout:void 0,bw=typeof Promise==&quot;function&quot;?Promise:void 0,VI=typeof queueMicrotask==&quot;function&quot;?queueMicrotask:typeof bw&lt;&quot;u&quot;?function(n){return bw.resolve(null).then(n).catch(GI)}:rU;function GI(n){setTimeout(function(){throw n})}function Wo(n){return n===&quot;head&quot;}function Tw(n,t){var e=t,i=0,a=0;do{var s=e.nextSibling;if(n.removeChild(e),s&amp;&amp;s.nodeType===8)if(e=s.data,e===&quot;/$&quot;){if(0&lt;i&amp;&amp;8&gt;i){e=i;var o=n.ownerDocument;if(e&amp;1&amp;&amp;Fd(o.documentElement),e&amp;2&amp;&amp;Fd(o.body),e&amp;4)for(e=o.head,Fd(e),o=e.firstChild;o;){var u=o.nextSibling,c=o.nodeName;o[sp]||c===&quot;SCRIPT&quot;||c===&quot;STYLE&quot;||c===&quot;LINK&quot;&amp;&amp;o.rel.toLowerCase()===&quot;stylesheet&quot;||e.removeChild(o),o=u}}if(a===0){n.removeChild(s),tp(t);return}a--}else e===&quot;$&quot;||e===&quot;$?&quot;||e===&quot;$!&quot;?a++:i=e.charCodeAt(0)-48;else i=0;e=s}while(e);tp(t)}function q1(n){var t=n.firstChild;for(t&amp;&amp;t.nodeType===10&amp;&amp;(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case&quot;HTML&quot;:case&quot;HEAD&quot;:case&quot;BODY&quot;:q1(e),eE(e);continue;case&quot;SCRIPT&quot;:case&quot;STYLE&quot;:continue;case&quot;LINK&quot;:if(e.rel.toLowerCase()===&quot;stylesheet&quot;)continue}n.removeChild(e)}}function XI(n,t,e,i){for(;n.nodeType===1;){var a=e;if(n.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&amp;&amp;(n.nodeName!==&quot;INPUT&quot;||n.type!==&quot;hidden&quot;))break}else if(i){if(!n[sp])switch(t){case&quot;meta&quot;:if(!n.hasAttribute(&quot;itemprop&quot;))break;return n;case&quot;link&quot;:if(s=n.getAttribute(&quot;rel&quot;),s===&quot;stylesheet&quot;&amp;&amp;n.hasAttribute(&quot;data-precedence&quot;))break;if(s!==a.rel||n.getAttribute(&quot;href&quot;)!==(a.href==null||a.href===&quot;&quot;?null:a.href)||n.getAttribute(&quot;crossorigin&quot;)!==(a.crossOrigin==null?null:a.crossOrigin)||n.getAttribute(&quot;title&quot;)!==(a.title==null?null:a.title))break;return n;case&quot;style&quot;:if(n.hasAttribute(&quot;data-precedence&quot;))break;return n;case&quot;script&quot;:if(s=n.getAttribute(&quot;src&quot;),(s!==(a.src==null?null:a.src)||n.getAttribute(&quot;type&quot;)!==(a.type==null?null:a.type)||n.getAttribute(&quot;crossorigin&quot;)!==(a.crossOrigin==null?null:a.crossOrigin))&amp;&amp;s&amp;&amp;n.hasAttribute(&quot;async&quot;)&amp;&amp;!n.hasAttribute(&quot;itemprop&quot;))break;return n;default:return n}}else if(t===&quot;input&quot;&amp;&amp;n.type===&quot;hidden&quot;){var s=a.name==null?null:&quot;&quot;+a.name;if(a.type===&quot;hidden&quot;&amp;&amp;n.getAttribute(&quot;name&quot;)===s)return n}else return n;if(n=ys(n.nextSibling),n===null)break}return null}function qI(n,t,e){if(t===&quot;&quot;)return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!==&quot;INPUT&quot;||n.type!==&quot;hidden&quot;)&amp;&amp;!e||(n=ys(n.nextSibling),n===null))return null;return n}function Y1(n){return n.data===&quot;$!&quot;||n.data===&quot;$?&quot;&amp;&amp;n.ownerDocument.readyState===&quot;complete&quot;}function YI(n,t){var e=n.ownerDocument;if(n.data!==&quot;$?&quot;||e.readyState===&quot;complete&quot;)t();else{var i=function(){t(),e.removeEventListener(&quot;DOMContentLoaded&quot;,i)};e.addEventListener(&quot;DOMContentLoaded&quot;,i),n._reactRetry=i}}function ys(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t===&quot;$&quot;||t===&quot;$!&quot;||t===&quot;$?&quot;||t===&quot;F!&quot;||t===&quot;F&quot;)break;if(t===&quot;/$&quot;)return null}}return n}var W1=null;function Aw(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e===&quot;$&quot;||e===&quot;$!&quot;||e===&quot;$?&quot;){if(t===0)return n;t--}else e===&quot;/$&quot;&amp;&amp;t++}n=n.previousSibling}return null}function oU(n,t,e){switch(t=Lv(e),n){case&quot;html&quot;:if(n=t.documentElement,!n)throw Error(ft(452));return n;case&quot;head&quot;:if(n=t.head,!n)throw Error(ft(453));return n;case&quot;body&quot;:if(n=t.body,!n)throw Error(ft(454));return n;default:throw Error(ft(451))}}function Fd(n){for(var t=n.attributes;t.length;)n.removeAttributeNode(t[0]);eE(n)}var ss=new Map,Rw=new Set;function zv(n){return typeof n.getRootNode==&quot;function&quot;?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ir=Ge.d;Ge.d={f:WI,r:kI,D:ZI,C:jI,L:QI,m:KI,X:$I,S:JI,M:tH};function WI(){var n=Ir.f(),t=Qv();return n||t}function kI(n){var t=uf(n);t!==null&amp;&amp;t.tag===5&amp;&amp;t.type===&quot;form&quot;?tD(t):Ir.r(n)}var hf=typeof document&gt;&quot;u&quot;?null:document;function lU(n,t,e){var i=hf;if(i&amp;&amp;typeof t==&quot;string&quot;&amp;&amp;t){var a=es(t);a=&#39;link[rel=&quot;&#39;+n+&#39;&quot;][href=&quot;&#39;+a+&#39;&quot;]&#39;,typeof e==&quot;string&quot;&amp;&amp;(a+=&#39;[crossorigin=&quot;&#39;+e+&#39;&quot;]&#39;),Rw.has(a)||(Rw.add(a),n={rel:n,crossOrigin:e,href:t},i.querySelector(a)===null&amp;&amp;(t=i.createElement(&quot;link&quot;),gi(t,&quot;link&quot;,n),ni(t),i.head.appendChild(t)))}}function ZI(n){Ir.D(n),lU(&quot;dns-prefetch&quot;,n,null)}function jI(n,t){Ir.C(n,t),lU(&quot;preconnect&quot;,n,t)}function QI(n,t,e){Ir.L(n,t,e);var i=hf;if(i&amp;&amp;n&amp;&amp;t){var a=&#39;link[rel=&quot;preload&quot;][as=&quot;&#39;+es(t)+&#39;&quot;]&#39;;t===&quot;image&quot;&amp;&amp;e&amp;&amp;e.imageSrcSet?(a+=&#39;[imagesrcset=&quot;&#39;+es(e.imageSrcSet)+&#39;&quot;]&#39;,typeof e.imageSizes==&quot;string&quot;&amp;&amp;(a+=&#39;[imagesizes=&quot;&#39;+es(e.imageSizes)+&#39;&quot;]&#39;)):a+=&#39;[href=&quot;&#39;+es(n)+&#39;&quot;]&#39;;var s=a;switch(t){case&quot;style&quot;:s=of(n);break;case&quot;script&quot;:s=df(n)}ss.has(s)||(n=pn({rel:&quot;preload&quot;,href:t===&quot;image&quot;&amp;&amp;e&amp;&amp;e.imageSrcSet?void 0:n,as:t},e),ss.set(s,n),i.querySelector(a)!==null||t===&quot;style&quot;&amp;&amp;i.querySelector(mp(s))||t===&quot;script&quot;&amp;&amp;i.querySelector(gp(s))||(t=i.createElement(&quot;link&quot;),gi(t,&quot;link&quot;,n),ni(t),i.head.appendChild(t)))}}function KI(n,t){Ir.m(n,t);var e=hf;if(e&amp;&amp;n){var i=t&amp;&amp;typeof t.as==&quot;string&quot;?t.as:&quot;script&quot;,a=&#39;link[rel=&quot;modulepreload&quot;][as=&quot;&#39;+es(i)+&#39;&quot;][href=&quot;&#39;+es(n)+&#39;&quot;]&#39;,s=a;switch(i){case&quot;audioworklet&quot;:case&quot;paintworklet&quot;:case&quot;serviceworker&quot;:case&quot;sharedworker&quot;:case&quot;worker&quot;:case&quot;script&quot;:s=df(n)}if(!ss.has(s)&amp;&amp;(n=pn({rel:&quot;modulepreload&quot;,href:n},t),ss.set(s,n),e.querySelector(a)===null)){switch(i){case&quot;audioworklet&quot;:case&quot;paintworklet&quot;:case&quot;serviceworker&quot;:case&quot;sharedworker&quot;:case&quot;worker&quot;:case&quot;script&quot;:if(e.querySelector(gp(s)))return}i=e.createElement(&quot;link&quot;),gi(i,&quot;link&quot;,n),ni(i),e.head.appendChild(i)}}}function JI(n,t,e){Ir.S(n,t,e);var i=hf;if(i&amp;&amp;n){var a=Gc(i).hoistableStyles,s=of(n);t=t||&quot;default&quot;;var o=a.get(s);if(!o){var u={loading:0,preload:null};if(o=i.querySelector(mp(s)))u.loading=5;else{n=pn({rel:&quot;stylesheet&quot;,href:n,&quot;data-precedence&quot;:t},e),(e=ss.get(s))&amp;&amp;IE(n,e);var c=o=i.createElement(&quot;link&quot;);ni(c),gi(c,&quot;link&quot;,n),c._p=new Promise(function(h,d){c.onload=h,c.onerror=d}),c.addEventListener(&quot;load&quot;,function(){u.loading|=1}),c.addEventListener(&quot;error&quot;,function(){u.loading|=2}),u.loading|=4,ov(o,t,i)}o={type:&quot;stylesheet&quot;,instance:o,count:1,state:u},a.set(s,o)}}}function $I(n,t){Ir.X(n,t);var e=hf;if(e&amp;&amp;n){var i=Gc(e).hoistableScripts,a=df(n),s=i.get(a);s||(s=e.querySelector(gp(a)),s||(n=pn({src:n,async:!0},t),(t=ss.get(a))&amp;&amp;HE(n,t),s=e.createElement(&quot;script&quot;),ni(s),gi(s,&quot;link&quot;,n),e.head.appendChild(s)),s={type:&quot;script&quot;,instance:s,count:1,state:null},i.set(a,s))}}function tH(n,t){Ir.M(n,t);var e=hf;if(e&amp;&amp;n){var i=Gc(e).hoistableScripts,a=df(n),s=i.get(a);s||(s=e.querySelector(gp(a)),s||(n=pn({src:n,async:!0,type:&quot;module&quot;},t),(t=ss.get(a))&amp;&amp;HE(n,t),s=e.createElement(&quot;script&quot;),ni(s),gi(s,&quot;link&quot;,n),e.head.appendChild(s)),s={type:&quot;script&quot;,instance:s,count:1,state:null},i.set(a,s))}}function Cw(n,t,e,i){var a=(a=Lo.current)?zv(a):null;if(!a)throw Error(ft(446));switch(n){case&quot;meta&quot;:case&quot;title&quot;:return null;case&quot;style&quot;:return typeof e.precedence==&quot;string&quot;&amp;&amp;typeof e.href==&quot;string&quot;?(t=of(e.href),e=Gc(a).hoistableStyles,i=e.get(t),i||(i={type:&quot;style&quot;,instance:null,count:0,state:null},e.set(t,i)),i):{type:&quot;void&quot;,instance:null,count:0,state:null};case&quot;link&quot;:if(e.rel===&quot;stylesheet&quot;&amp;&amp;typeof e.href==&quot;string&quot;&amp;&amp;typeof e.precedence==&quot;string&quot;){n=of(e.href);var s=Gc(a).hoistableStyles,o=s.get(n);if(o||(a=a.ownerDocument||a,o={type:&quot;stylesheet&quot;,instance:null,count:0,state:{loading:0,preload:null}},s.set(n,o),(s=a.querySelector(mp(n)))&amp;&amp;!s._p&amp;&amp;(o.instance=s,o.state.loading=5),ss.has(n)||(e={rel:&quot;preload&quot;,as:&quot;style&quot;,href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},ss.set(n,e),s||eH(a,n,e,o.state))),t&amp;&amp;i===null)throw Error(ft(528,&quot;&quot;));return o}if(t&amp;&amp;i!==null)throw Error(ft(529,&quot;&quot;));return null;case&quot;script&quot;:return t=e.async,e=e.src,typeof e==&quot;string&quot;&amp;&amp;t&amp;&amp;typeof t!=&quot;function&quot;&amp;&amp;typeof t!=&quot;symbol&quot;?(t=df(e),e=Gc(a).hoistableScripts,i=e.get(t),i||(i={type:&quot;script&quot;,instance:null,count:0,state:null},e.set(t,i)),i):{type:&quot;void&quot;,instance:null,count:0,state:null};default:throw Error(ft(444,n))}}function of(n){return&#39;href=&quot;&#39;+es(n)+&#39;&quot;&#39;}function mp(n){return&#39;link[rel=&quot;stylesheet&quot;][&#39;+n+&quot;]&quot;}function uU(n){return pn({},n,{&quot;data-precedence&quot;:n.precedence,precedence:null})}function eH(n,t,e,i){n.querySelector(&#39;link[rel=&quot;preload&quot;][as=&quot;style&quot;][&#39;+t+&quot;]&quot;)?i.loading=1:(t=n.createElement(&quot;link&quot;),i.preload=t,t.addEventListener(&quot;load&quot;,function(){return i.loading|=1}),t.addEventListener(&quot;error&quot;,function(){return i.loading|=2}),gi(t,&quot;link&quot;,e),ni(t),n.head.appendChild(t))}function df(n){return&#39;[src=&quot;&#39;+es(n)+&#39;&quot;]&#39;}function gp(n){return&quot;script[async]&quot;+n}function ww(n,t,e){if(t.count++,t.instance===null)switch(t.type){case&quot;style&quot;:var i=n.querySelector(&#39;style[data-href~=&quot;&#39;+es(e.href)+&#39;&quot;]&#39;);if(i)return t.instance=i,ni(i),i;var a=pn({},e,{&quot;data-href&quot;:e.href,&quot;data-precedence&quot;:e.precedence,href:null,precedence:null});return i=(n.ownerDocument||n).createElement(&quot;style&quot;),ni(i),gi(i,&quot;style&quot;,a),ov(i,e.precedence,n),t.instance=i;case&quot;stylesheet&quot;:a=of(e.href);var s=n.querySelector(mp(a));if(s)return t.state.loading|=4,t.instance=s,ni(s),s;i=uU(e),(a=ss.get(a))&amp;&amp;IE(i,a),s=(n.ownerDocument||n).createElement(&quot;link&quot;),ni(s);var o=s;return o._p=new Promise(function(u,c){o.onload=u,o.onerror=c}),gi(s,&quot;link&quot;,i),t.state.loading|=4,ov(s,e.precedence,n),t.instance=s;case&quot;script&quot;:return s=df(e.src),(a=n.querySelector(gp(s)))?(t.instance=a,ni(a),a):(i=e,(a=ss.get(s))&amp;&amp;(i=pn({},e),HE(i,a)),n=n.ownerDocument||n,a=n.createElement(&quot;script&quot;),ni(a),gi(a,&quot;link&quot;,i),n.head.appendChild(a),t.instance=a);case&quot;void&quot;:return null;default:throw Error(ft(443,t.type))}else t.type===&quot;stylesheet&quot;&amp;&amp;(t.state.loading&amp;4)===0&amp;&amp;(i=t.instance,t.state.loading|=4,ov(i,e.precedence,n));return t.instance}function ov(n,t,e){for(var i=e.querySelectorAll(&#39;link[rel=&quot;stylesheet&quot;][data-precedence],style[data-precedence]&#39;),a=i.length?i[i.length-1]:null,s=a,o=0;o&lt;i.length;o++){var u=i[o];if(u.dataset.precedence===t)s=u;else if(s!==a)break}s?s.parentNode.insertBefore(n,s.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(n,t.firstChild))}function IE(n,t){n.crossOrigin==null&amp;&amp;(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&amp;&amp;(n.referrerPolicy=t.referrerPolicy),n.title==null&amp;&amp;(n.title=t.title)}function HE(n,t){n.crossOrigin==null&amp;&amp;(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&amp;&amp;(n.referrerPolicy=t.referrerPolicy),n.integrity==null&amp;&amp;(n.integrity=t.integrity)}var lv=null;function Dw(n,t,e){if(lv===null){var i=new Map,a=lv=new Map;a.set(e,i)}else a=lv,i=a.get(e),i||(i=new Map,a.set(e,i));if(i.has(n))return i;for(i.set(n,null),e=e.getElementsByTagName(n),a=0;a&lt;e.length;a++){var s=e[a];if(!(s[sp]||s[Ri]||n===&quot;link&quot;&amp;&amp;s.getAttribute(&quot;rel&quot;)===&quot;stylesheet&quot;)&amp;&amp;s.namespaceURI!==&quot;http://www.w3.org/2000/svg&quot;){var o=s.getAttribute(t)||&quot;&quot;;o=n+o;var u=i.get(o);u?u.push(s):i.set(o,[s])}}return i}function Uw(n,t,e){n=n.ownerDocument||n,n.head.insertBefore(e,t===&quot;title&quot;?n.querySelector(&quot;head &gt; title&quot;):null)}function nH(n,t,e){if(e===1||t.itemProp!=null)return!1;switch(n){case&quot;meta&quot;:case&quot;title&quot;:return!0;case&quot;style&quot;:if(typeof t.precedence!=&quot;string&quot;||typeof t.href!=&quot;string&quot;||t.href===&quot;&quot;)break;return!0;case&quot;link&quot;:if(typeof t.rel!=&quot;string&quot;||typeof t.href!=&quot;string&quot;||t.href===&quot;&quot;||t.onLoad||t.onError)break;switch(t.rel){case&quot;stylesheet&quot;:return n=t.disabled,typeof t.precedence==&quot;string&quot;&amp;&amp;n==null;default:return!0}case&quot;script&quot;:if(t.async&amp;&amp;typeof t.async!=&quot;function&quot;&amp;&amp;typeof t.async!=&quot;symbol&quot;&amp;&amp;!t.onLoad&amp;&amp;!t.onError&amp;&amp;t.src&amp;&amp;typeof t.src==&quot;string&quot;)return!0}return!1}function cU(n){return!(n.type===&quot;stylesheet&quot;&amp;&amp;(n.state.loading&amp;3)===0)}var Qd=null;function iH(){}function aH(n,t,e){if(Qd===null)throw Error(ft(475));var i=Qd;if(t.type===&quot;stylesheet&quot;&amp;&amp;(typeof e.media!=&quot;string&quot;||matchMedia(e.media).matches!==!1)&amp;&amp;(t.state.loading&amp;4)===0){if(t.instance===null){var a=of(e.href),s=n.querySelector(mp(a));if(s){n=s._p,n!==null&amp;&amp;typeof n==&quot;object&quot;&amp;&amp;typeof n.then==&quot;function&quot;&amp;&amp;(i.count++,i=Bv.bind(i),n.then(i,i)),t.state.loading|=4,t.instance=s,ni(s);return}s=n.ownerDocument||n,e=uU(e),(a=ss.get(a))&amp;&amp;IE(e,a),s=s.createElement(&quot;link&quot;),ni(s);var o=s;o._p=new Promise(function(u,c){o.onload=u,o.onerror=c}),gi(s,&quot;link&quot;,e),t.instance=s}i.stylesheets===null&amp;&amp;(i.stylesheets=new Map),i.stylesheets.set(t,n),(n=t.state.preload)&amp;&amp;(t.state.loading&amp;3)===0&amp;&amp;(i.count++,t=Bv.bind(i),n.addEventListener(&quot;load&quot;,t),n.addEventListener(&quot;error&quot;,t))}}function sH(){if(Qd===null)throw Error(ft(475));var n=Qd;return n.stylesheets&amp;&amp;n.count===0&amp;&amp;k1(n,n.stylesheets),0&lt;n.count?function(t){var e=setTimeout(function(){if(n.stylesheets&amp;&amp;k1(n,n.stylesheets),n.unsuspend){var i=n.unsuspend;n.unsuspend=null,i()}},6e4);return n.unsuspend=t,function(){n.unsuspend=null,clearTimeout(e)}}:null}function Bv(){if(this.count--,this.count===0){if(this.stylesheets)k1(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Pv=null;function k1(n,t){n.stylesheets=null,n.unsuspend!==null&amp;&amp;(n.count++,Pv=new Map,t.forEach(rH,n),Pv=null,Bv.call(n))}function rH(n,t){if(!(t.state.loading&amp;4)){var e=Pv.get(n);if(e)var i=e.get(null);else{e=new Map,Pv.set(n,e);for(var a=n.querySelectorAll(&quot;link[data-precedence],style[data-precedence]&quot;),s=0;s&lt;a.length;s++){var o=a[s];(o.nodeName===&quot;LINK&quot;||o.getAttribute(&quot;media&quot;)!==&quot;not all&quot;)&amp;&amp;(e.set(o.dataset.precedence,o),i=o)}i&amp;&amp;e.set(null,i)}a=t.instance,o=a.getAttribute(&quot;data-precedence&quot;),s=e.get(o)||i,s===i&amp;&amp;e.set(null,a),e.set(o,a),this.count++,i=Bv.bind(this),a.addEventListener(&quot;load&quot;,i),a.addEventListener(&quot;error&quot;,i),s?s.parentNode.insertBefore(a,s.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(a,n.firstChild)),t.state.loading|=4}}var Kd={$$typeof:Rr,Provider:null,Consumer:null,_currentValue:Vl,_currentValue2:Vl,_threadCount:0};function oH(n,t,e,i,a,s,o,u){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=TM(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=TM(0),this.hiddenUpdates=TM(null),this.identifierPrefix=i,this.onUncaughtError=a,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=u,this.incompleteTransitions=new Map}function fU(n,t,e,i,a,s,o,u,c,h,d,m){return n=new oH(n,t,e,o,u,c,h,m),t=1,s===!0&amp;&amp;(t|=24),s=Ea(3,null,null,t),n.current=s,s.stateNode=n,t=dE(),t.refCount++,n.pooledCache=t,t.refCount++,s.memoizedState={element:i,isDehydrated:e,cache:t},mE(s),n}function hU(n){return n?(n=Ic,n):Ic}function dU(n,t,e,i,a,s){a=hU(a),i.context===null?i.context=a:i.pendingContext=a,i=zo(t),i.payload={element:e},s=s===void 0?null:s,s!==null&amp;&amp;(i.callback=s),e=Bo(n,i,t),e!==null&amp;&amp;(Ra(e,n,t),Nd(e,n,t))}function Nw(n,t){if(n=n.memoizedState,n!==null&amp;&amp;n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&amp;&amp;e&lt;t?e:t}}function FE(n,t){Nw(n,t),(n=n.alternate)&amp;&amp;Nw(n,t)}function pU(n){if(n.tag===13){var t=cf(n,67108864);t!==null&amp;&amp;Ra(t,n,67108864),FE(n,67108864)}}var Iv=!0;function lH(n,t,e,i){var a=ce.T;ce.T=null;var s=Ge.p;try{Ge.p=2,VE(n,t,e,i)}finally{Ge.p=s,ce.T=a}}function uH(n,t,e,i){var a=ce.T;ce.T=null;var s=Ge.p;try{Ge.p=8,VE(n,t,e,i)}finally{Ge.p=s,ce.T=a}}function VE(n,t,e,i){if(Iv){var a=Z1(i);if(a===null)$M(n,t,i,Hv,e),Ow(n,i);else if(fH(a,n,t,e,i))i.stopPropagation();else if(Ow(n,i),t&amp;4&amp;&amp;-1&lt;cH.indexOf(n)){for(;a!==null;){var s=uf(a);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var o=Il(s.pendingLanes);if(o!==0){var u=s;for(u.pendingLanes|=2,u.entangledLanes|=2;o;){var c=1&lt;&lt;31-Ta(o);u.entanglements[1]|=c,o&amp;=~c}Qs(s),(Ke&amp;6)===0&amp;&amp;(wv=ks()+500,pp(0,!1))}}break;case 13:u=cf(s,2),u!==null&amp;&amp;Ra(u,s,2),Qv(),FE(s,2)}if(s=Z1(i),s===null&amp;&amp;$M(n,t,i,Hv,e),s===a)break;a=s}a!==null&amp;&amp;i.stopPropagation()}else $M(n,t,i,null,e)}}function Z1(n){return n=iE(n),GE(n)}var Hv=null;function GE(n){if(Hv=null,n=Nc(n),n!==null){var t=ep(n);if(t===null)n=null;else{var e=t.tag;if(e===13){if(n=Hw(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&amp;&amp;(n=null)}}return Hv=n,null}function mU(n){switch(n){case&quot;beforetoggle&quot;:case&quot;cancel&quot;:case&quot;click&quot;:case&quot;close&quot;:case&quot;contextmenu&quot;:case&quot;copy&quot;:case&quot;cut&quot;:case&quot;auxclick&quot;:case&quot;dblclick&quot;:case&quot;dragend&quot;:case&quot;dragstart&quot;:case&quot;drop&quot;:case&quot;focusin&quot;:case&quot;focusout&quot;:case&quot;input&quot;:case&quot;invalid&quot;:case&quot;keydown&quot;:case&quot;keypress&quot;:case&quot;keyup&quot;:case&quot;mousedown&quot;:case&quot;mouseup&quot;:case&quot;paste&quot;:case&quot;pause&quot;:case&quot;play&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointerup&quot;:case&quot;ratechange&quot;:case&quot;reset&quot;:case&quot;resize&quot;:case&quot;seeked&quot;:case&quot;submit&quot;:case&quot;toggle&quot;:case&quot;touchcancel&quot;:case&quot;touchend&quot;:case&quot;touchstart&quot;:case&quot;volumechange&quot;:case&quot;change&quot;:case&quot;selectionchange&quot;:case&quot;textInput&quot;:case&quot;compositionstart&quot;:case&quot;compositionend&quot;:case&quot;compositionupdate&quot;:case&quot;beforeblur&quot;:case&quot;afterblur&quot;:case&quot;beforeinput&quot;:case&quot;blur&quot;:case&quot;fullscreenchange&quot;:case&quot;focus&quot;:case&quot;hashchange&quot;:case&quot;popstate&quot;:case&quot;select&quot;:case&quot;selectstart&quot;:return 2;case&quot;drag&quot;:case&quot;dragenter&quot;:case&quot;dragexit&quot;:case&quot;dragleave&quot;:case&quot;dragover&quot;:case&quot;mousemove&quot;:case&quot;mouseout&quot;:case&quot;mouseover&quot;:case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;scroll&quot;:case&quot;touchmove&quot;:case&quot;wheel&quot;:case&quot;mouseenter&quot;:case&quot;mouseleave&quot;:case&quot;pointerenter&quot;:case&quot;pointerleave&quot;:return 8;case&quot;message&quot;:switch(K4()){case Xw:return 2;case qw:return 8;case dv:case J4:return 32;case Yw:return 268435456;default:return 32}default:return 32}}var j1=!1,Ho=null,Fo=null,Vo=null,Jd=new Map,$d=new Map,wo=[],cH=&quot;mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset&quot;.split(&quot; &quot;);function Ow(n,t){switch(n){case&quot;focusin&quot;:case&quot;focusout&quot;:Ho=null;break;case&quot;dragenter&quot;:case&quot;dragleave&quot;:Fo=null;break;case&quot;mouseover&quot;:case&quot;mouseout&quot;:Vo=null;break;case&quot;pointerover&quot;:case&quot;pointerout&quot;:Jd.delete(t.pointerId);break;case&quot;gotpointercapture&quot;:case&quot;lostpointercapture&quot;:$d.delete(t.pointerId)}}function Sd(n,t,e,i,a,s){return n===null||n.nativeEvent!==s?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:s,targetContainers:[a]},t!==null&amp;&amp;(t=uf(t),t!==null&amp;&amp;pU(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,a!==null&amp;&amp;t.indexOf(a)===-1&amp;&amp;t.push(a),n)}function fH(n,t,e,i,a){switch(t){case&quot;focusin&quot;:return Ho=Sd(Ho,n,t,e,i,a),!0;case&quot;dragenter&quot;:return Fo=Sd(Fo,n,t,e,i,a),!0;case&quot;mouseover&quot;:return Vo=Sd(Vo,n,t,e,i,a),!0;case&quot;pointerover&quot;:var s=a.pointerId;return Jd.set(s,Sd(Jd.get(s)||null,n,t,e,i,a)),!0;case&quot;gotpointercapture&quot;:return s=a.pointerId,$d.set(s,Sd($d.get(s)||null,n,t,e,i,a)),!0}return!1}function gU(n){var t=Nc(n.target);if(t!==null){var e=ep(t);if(e!==null){if(t=e.tag,t===13){if(t=Hw(e),t!==null){n.blockedOn=t,rP(n.priority,function(){if(e.tag===13){var i=Aa();i=$1(i);var a=cf(e,i);a!==null&amp;&amp;Ra(a,e,i),FE(e,i)}});return}}else if(t===3&amp;&amp;e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function uv(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0&lt;t.length;){var e=Z1(n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);h1=i,e.target.dispatchEvent(i),h1=null}else return t=uf(e),t!==null&amp;&amp;pU(t),n.blockedOn=e,!1;t.shift()}return!0}function Lw(n,t,e){uv(n)&amp;&amp;e.delete(t)}function hH(){j1=!1,Ho!==null&amp;&amp;uv(Ho)&amp;&amp;(Ho=null),Fo!==null&amp;&amp;uv(Fo)&amp;&amp;(Fo=null),Vo!==null&amp;&amp;uv(Vo)&amp;&amp;(Vo=null),Jd.forEach(Lw),$d.forEach(Lw)}function j0(n,t){n.blockedOn===t&amp;&amp;(n.blockedOn=null,j1||(j1=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,hH)))}var Q0=null;function zw(n){Q0!==n&amp;&amp;(Q0=n,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,function(){Q0===n&amp;&amp;(Q0=null);for(var t=0;t&lt;n.length;t+=3){var e=n[t],i=n[t+1],a=n[t+2];if(typeof i!=&quot;function&quot;){if(GE(i||e)===null)continue;break}var s=uf(e);s!==null&amp;&amp;(n.splice(t,3),t-=3,C1(s,{pending:!0,data:a,method:e.method,action:i},i,a))}}))}function tp(n){function t(c){return j0(c,n)}Ho!==null&amp;&amp;j0(Ho,n),Fo!==null&amp;&amp;j0(Fo,n),Vo!==null&amp;&amp;j0(Vo,n),Jd.forEach(t),$d.forEach(t);for(var e=0;e&lt;wo.length;e++){var i=wo[e];i.blockedOn===n&amp;&amp;(i.blockedOn=null)}for(;0&lt;wo.length&amp;&amp;(e=wo[0],e.blockedOn===null);)gU(e),e.blockedOn===null&amp;&amp;wo.shift();if(e=(n.ownerDocument||n).$$reactFormReplay,e!=null)for(i=0;i&lt;e.length;i+=3){var a=e[i],s=e[i+1],o=a[ta]||null;if(typeof s==&quot;function&quot;)o||zw(e);else if(o){var u=null;if(s&amp;&amp;s.hasAttribute(&quot;formAction&quot;)){if(a=s,o=s[ta]||null)u=o.formAction;else if(GE(a)!==null)continue}else u=o.action;typeof u==&quot;function&quot;?e[i+1]=u:(e.splice(i,3),i-=3),zw(e)}}}function XE(n){this._internalRoot=n}ty.prototype.render=XE.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(ft(409));var e=t.current,i=Aa();dU(e,i,n,t,null,null)};ty.prototype.unmount=XE.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;dU(n.current,2,null,n,null,null),Qv(),t[lf]=null}};function ty(n){this._internalRoot=n}ty.prototype.unstable_scheduleHydration=function(n){if(n){var t=Qw();n={blockedOn:null,target:n,priority:t};for(var e=0;e&lt;wo.length&amp;&amp;t!==0&amp;&amp;t&lt;wo[e].priority;e++);wo.splice(e,0,n),e===0&amp;&amp;gU(n)}};var Bw=Pw.version;if(Bw!==&quot;19.1.1&quot;)throw Error(ft(527,Bw,&quot;19.1.1&quot;));Ge.findDOMNode=function(n){var t=n._reactInternals;if(t===void 0)throw typeof n.render==&quot;function&quot;?Error(ft(188)):(n=Object.keys(n).join(&quot;,&quot;),Error(ft(268,n)));return n=q4(t),n=n!==null?Fw(n):null,n=n===null?null:n.stateNode,n};var dH={bundleType:0,version:&quot;19.1.1&quot;,rendererPackageName:&quot;react-dom&quot;,currentDispatcherRef:ce,reconcilerVersion:&quot;19.1.1&quot;};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&lt;&quot;u&quot;&amp;&amp;(Md=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Md.isDisabled&amp;&amp;Md.supportsFiber))try{np=Md.inject(dH),ba=Md}catch{}var Md;ey.createRoot=function(n,t){if(!Iw(n))throw Error(ft(299));var e=!1,i=&quot;&quot;,a=fD,s=hD,o=dD,u=null;return t!=null&amp;&amp;(t.unstable_strictMode===!0&amp;&amp;(e=!0),t.identifierPrefix!==void 0&amp;&amp;(i=t.identifierPrefix),t.onUncaughtError!==void 0&amp;&amp;(a=t.onUncaughtError),t.onCaughtError!==void 0&amp;&amp;(s=t.onCaughtError),t.onRecoverableError!==void 0&amp;&amp;(o=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&amp;&amp;(u=t.unstable_transitionCallbacks)),t=fU(n,1,!1,null,null,e,i,a,s,o,u,null),n[lf]=t.current,PE(n),new XE(t)};ey.hydrateRoot=function(n,t,e){if(!Iw(n))throw Error(ft(299));var i=!1,a=&quot;&quot;,s=fD,o=hD,u=dD,c=null,h=null;return e!=null&amp;&amp;(e.unstable_strictMode===!0&amp;&amp;(i=!0),e.identifierPrefix!==void 0&amp;&amp;(a=e.identifierPrefix),e.onUncaughtError!==void 0&amp;&amp;(s=e.onUncaughtError),e.onCaughtError!==void 0&amp;&amp;(o=e.onCaughtError),e.onRecoverableError!==void 0&amp;&amp;(u=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&amp;&amp;(c=e.unstable_transitionCallbacks),e.formState!==void 0&amp;&amp;(h=e.formState)),t=fU(n,1,!0,t,e??null,i,a,s,o,u,c,h),t.context=hU(null),e=t.current,i=Aa(),i=$1(i),a=zo(i),a.callback=null,Bo(e,a,i),e=i,t.current.lanes=e,ap(t,e),Qs(t),n[lf]=t.current,PE(n),new ty(t)};ey.version=&quot;19.1.1&quot;});var xU=In((W7,_U)=&gt;{&quot;use strict&quot;;function yU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!=&quot;function&quot;))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yU)}catch(n){console.error(n)}}yU(),_U.exports=vU()});var SU=In(ko=&gt;{&quot;use strict&quot;;ko.ConcurrentRoot=1;ko.ContinuousEventPriority=8;ko.DefaultEventPriority=32;ko.DiscreteEventPriority=2;ko.IdleEventPriority=268435456;ko.LegacyRoot=0;ko.NoEventPriority=0});var qE=In((Z7,MU)=&gt;{&quot;use strict&quot;;MU.exports=SU()});var nL=In(eL=&gt;{&quot;use strict&quot;;var Dh=ja();function O8(n,t){return n===t&amp;&amp;(n!==0||1/n===1/t)||n!==n&amp;&amp;t!==t}var L8=typeof Object.is==&quot;function&quot;?Object.is:O8,z8=Dh.useState,B8=Dh.useEffect,P8=Dh.useLayoutEffect,I8=Dh.useDebugValue;function H8(n,t){var e=t(),i=z8({inst:{value:e,getSnapshot:t}}),a=i[0].inst,s=i[1];return P8(function(){a.value=e,a.getSnapshot=t,eA(a)&amp;&amp;s({inst:a})},[n,e,t]),B8(function(){return eA(a)&amp;&amp;s({inst:a}),n(function(){eA(a)&amp;&amp;s({inst:a})})},[n]),I8(e),e}function eA(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!L8(n,e)}catch{return!0}}function F8(n,t){return t()}var V8=typeof window&gt;&quot;u&quot;||typeof window.document&gt;&quot;u&quot;||typeof window.document.createElement&gt;&quot;u&quot;?F8:H8;eL.useSyncExternalStore=Dh.useSyncExternalStore!==void 0?Dh.useSyncExternalStore:V8});var aL=In(($7,iL)=&gt;{&quot;use strict&quot;;iL.exports=nL()});var rL=In(sL=&gt;{&quot;use strict&quot;;var xx=ja(),G8=aL();function X8(n,t){return n===t&amp;&amp;(n!==0||1/n===1/t)||n!==n&amp;&amp;t!==t}var q8=typeof Object.is==&quot;function&quot;?Object.is:X8,Y8=G8.useSyncExternalStore,W8=xx.useRef,k8=xx.useEffect,Z8=xx.useMemo,j8=xx.useDebugValue;sL.useSyncExternalStoreWithSelector=function(n,t,e,i,a){var s=W8(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Z8(function(){function c(y){if(!h){if(h=!0,d=y,y=i(y),a!==void 0&amp;&amp;o.hasValue){var x=o.value;if(a(x,y))return m=x}return m=y}if(x=m,q8(d,y))return x;var b=i(y);return a!==void 0&amp;&amp;a(x,b)?(d=y,x):(d=y,m=b)}var h=!1,d,m,g=e===void 0?null:e;return[function(){return c(t())},g===null?void 0:function(){return c(g())}]},[t,e,i,a]);var u=Y8(n,s[0],s[1]);return k8(function(){o.hasValue=!0,o.value=u},[u]),j8(u),u}});var lL=In((e9,oL)=&gt;{&quot;use strict&quot;;oL.exports=rL()});var wL=In(an=&gt;{&quot;use strict&quot;;function sA(n,t){var e=n.length;n.push(t);t:for(;0&lt;e;){var i=e-1&gt;&gt;&gt;1,a=n[i];if(0&lt;Sx(a,t))n[i]=t,n[e]=a,e=i;else break t}}function Os(n){return n.length===0?null:n[0]}function Ex(n){if(n.length===0)return null;var t=n[0],e=n.pop();if(e!==t){n[0]=e;t:for(var i=0,a=n.length,s=a&gt;&gt;&gt;1;i&lt;s;){var o=2*(i+1)-1,u=n[o],c=o+1,h=n[c];if(0&gt;Sx(u,e))c&lt;a&amp;&amp;0&gt;Sx(h,u)?(n[i]=h,n[c]=e,i=c):(n[i]=u,n[o]=e,i=o);else if(c&lt;a&amp;&amp;0&gt;Sx(h,e))n[i]=h,n[c]=e,i=c;else break t}}return t}function Sx(n,t){var e=n.sortIndex-t.sortIndex;return e!==0?e:n.id-t.id}an.unstable_now=void 0;typeof performance==&quot;object&quot;&amp;&amp;typeof performance.now==&quot;function&quot;?(xL=performance,an.unstable_now=function(){return xL.now()}):(nA=Date,SL=nA.now(),an.unstable_now=function(){return nA.now()-SL});var xL,nA,SL,ur=[],ml=[],t7=1,cs=null,Li=3,bx=!1,Yu=!1,Vg=!1,bL=typeof setTimeout==&quot;function&quot;?setTimeout:null,TL=typeof clearTimeout==&quot;function&quot;?clearTimeout:null,ML=typeof setImmediate&lt;&quot;u&quot;?setImmediate:null;function Mx(n){for(var t=Os(ml);t!==null;){if(t.callback===null)Ex(ml);else if(t.startTime&lt;=n)Ex(ml),t.sortIndex=t.expirationTime,sA(ur,t);else break;t=Os(ml)}}function rA(n){if(Vg=!1,Mx(n),!Yu)if(Os(ur)!==null)Yu=!0,oA();else{var t=Os(ml);t!==null&amp;&amp;lA(rA,t.startTime-n)}}var Tx=!1,Gg=-1,AL=5,RL=-1;function CL(){return!(an.unstable_now()-RL&lt;AL)}function iA(){if(Tx){var n=an.unstable_now();RL=n;var t=!0;try{t:{Yu=!1,Vg&amp;&amp;(Vg=!1,TL(Gg),Gg=-1),bx=!0;var e=Li;try{e:{for(Mx(n),cs=Os(ur);cs!==null&amp;&amp;!(cs.expirationTime&gt;n&amp;&amp;CL());){var i=cs.callback;if(typeof i==&quot;function&quot;){cs.callback=null,Li=cs.priorityLevel;var a=i(cs.expirationTime&lt;=n);if(n=an.unstable_now(),typeof a==&quot;function&quot;){cs.callback=a,Mx(n),t=!0;break e}cs===Os(ur)&amp;&amp;Ex(ur),Mx(n)}else Ex(ur);cs=Os(ur)}if(cs!==null)t=!0;else{var s=Os(ml);s!==null&amp;&amp;lA(rA,s.startTime-n),t=!1}}break t}finally{cs=null,Li=e,bx=!1}t=void 0}}finally{t?Fg():Tx=!1}}}var Fg;typeof ML==&quot;function&quot;?Fg=function(){ML(iA)}:typeof MessageChannel&lt;&quot;u&quot;?(aA=new MessageChannel,EL=aA.port2,aA.port1.onmessage=iA,Fg=function(){EL.postMessage(null)}):Fg=function(){bL(iA,0)};var aA,EL;function oA(){Tx||(Tx=!0,Fg())}function lA(n,t){Gg=bL(function(){n(an.unstable_now())},t)}an.unstable_IdlePriority=5;an.unstable_ImmediatePriority=1;an.unstable_LowPriority=4;an.unstable_NormalPriority=3;an.unstable_Profiling=null;an.unstable_UserBlockingPriority=2;an.unstable_cancelCallback=function(n){n.callback=null};an.unstable_continueExecution=function(){Yu||bx||(Yu=!0,oA())};an.unstable_forceFrameRate=function(n){0&gt;n||125&lt;n?console.error(&quot;forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported&quot;):AL=0&lt;n?Math.floor(1e3/n):5};an.unstable_getCurrentPriorityLevel=function(){return Li};an.unstable_getFirstCallbackNode=function(){return Os(ur)};an.unstable_next=function(n){switch(Li){case 1:case 2:case 3:var t=3;break;default:t=Li}var e=Li;Li=t;try{return n()}finally{Li=e}};an.unstable_pauseExecution=function(){};an.unstable_requestPaint=function(){};an.unstable_runWithPriority=function(n,t){switch(n){case 1:case 2:case 3:case 4:case 5:break;default:n=3}var e=Li;Li=n;try{return t()}finally{Li=e}};an.unstable_scheduleCallback=function(n,t,e){var i=an.unstable_now();switch(typeof e==&quot;object&quot;&amp;&amp;e!==null?(e=e.delay,e=typeof e==&quot;number&quot;&amp;&amp;0&lt;e?i+e:i):e=i,n){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return a=e+a,n={id:t7++,callback:t,priorityLevel:n,startTime:e,expirationTime:a,sortIndex:-1},e&gt;i?(n.sortIndex=e,sA(ml,n),Os(ur)===null&amp;&amp;n===Os(ml)&amp;&amp;(Vg?(TL(Gg),Gg=-1):Vg=!0,lA(rA,e-i))):(n.sortIndex=a,sA(ur,n),Yu||bx||(Yu=!0,oA())),n};an.unstable_shouldYield=CL;an.unstable_wrapCallback=function(n){var t=Li;return function(){var e=Li;Li=t;try{return n.apply(this,arguments)}finally{Li=e}}}});var Ax=In((o9,DL)=&gt;{&quot;use strict&quot;;DL.exports=wL()});var UL=In((l9,Xg)=&gt;{&quot;use strict&quot;;Xg.exports=function(n){function t(r,l,f,p){return new Lz(r,l,f,p)}function e(){}function i(r){var l=&quot;https://react.dev/errors/&quot;+r;if(1&lt;arguments.length){l+=&quot;?args[]=&quot;+encodeURIComponent(arguments[1]);for(var f=2;f&lt;arguments.length;f++)l+=&quot;&amp;args[]=&quot;+encodeURIComponent(arguments[f])}return&quot;Minified React error #&quot;+r+&quot;; visit &quot;+l+&quot; for the full message or use the non-minified dev environment for full errors and additional helpful warnings.&quot;}function a(r){return r===null||typeof r!=&quot;object&quot;?null:(r=rR&amp;&amp;r[rR]||r[&quot;@@iterator&quot;],typeof r==&quot;function&quot;?r:null)}function s(r){if(r==null)return null;if(typeof r==&quot;function&quot;)return r.$$typeof===Fz?null:r.displayName||r.name||null;if(typeof r==&quot;string&quot;)return r;switch(r){case ec:return&quot;Fragment&quot;;case tc:return&quot;Portal&quot;;case DS:return&quot;Profiler&quot;;case iR:return&quot;StrictMode&quot;;case NS:return&quot;Suspense&quot;;case OS:return&quot;SuspenseList&quot;}if(typeof r==&quot;object&quot;)switch(r.$$typeof){case uo:return(r.displayName||&quot;Context&quot;)+&quot;.Provider&quot;;case aR:return(r._context.displayName||&quot;Context&quot;)+&quot;.Consumer&quot;;case US:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||&quot;&quot;,r=r!==&quot;&quot;?&quot;ForwardRef(&quot;+r+&quot;)&quot;:&quot;ForwardRef&quot;),r;case LS:return l=r.displayName||null,l!==null?l:s(r.type)||&quot;Memo&quot;;case co:l=r._payload,r=r._init;try{return s(r(l))}catch{}}return null}function o(r){if(zS===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);zS=l&amp;&amp;l[1]||&quot;&quot;,oR=-1&lt;f.stack.indexOf(`
<a href="#l10" class="line" id="l10">     10</a>     at`)?&quot; (&lt;anonymous&gt;)&quot;:-1&lt;f.stack.indexOf(&quot;@&quot;)?&quot;@unknown:0:0&quot;:&quot;&quot;}return`
<a href="#l11" class="line" id="l11">     11</a> `+zS+r+oR}function u(r,l){if(!r||BS)return&quot;&quot;;BS=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(l){var Pt=function(){throw Error()};if(Object.defineProperty(Pt.prototype,&quot;props&quot;,{set:function(){throw Error()}}),typeof Reflect==&quot;object&quot;&amp;&amp;Reflect.construct){try{Reflect.construct(Pt,[])}catch(ye){var Ht=ye}Reflect.construct(r,[],Pt)}else{try{Pt.call()}catch(ye){Ht=ye}r.call(Pt.prototype)}}else{try{throw Error()}catch(ye){Ht=ye}(Pt=r())&amp;&amp;typeof Pt.catch==&quot;function&quot;&amp;&amp;Pt.catch(function(){})}}catch(ye){if(ye&amp;&amp;Ht&amp;&amp;typeof ye.stack==&quot;string&quot;)return[ye.stack,Ht.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName=&quot;DetermineComponentFrameRoot&quot;;var _=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,&quot;name&quot;);_&amp;&amp;_.configurable&amp;&amp;Object.defineProperty(p.DetermineComponentFrameRoot,&quot;name&quot;,{value:&quot;DetermineComponentFrameRoot&quot;});var A=p.DetermineComponentFrameRoot(),L=A[0],F=A[1];if(L&amp;&amp;F){var W=L.split(`
<a href="#l12" class="line" id="l12">     12</a> `),ot=F.split(`
<a href="#l13" class="line" id="l13">     13</a> `);for(_=p=0;p&lt;W.length&amp;&amp;!W[p].includes(&quot;DetermineComponentFrameRoot&quot;);)p++;for(;_&lt;ot.length&amp;&amp;!ot[_].includes(&quot;DetermineComponentFrameRoot&quot;);)_++;if(p===W.length||_===ot.length)for(p=W.length-1,_=ot.length-1;1&lt;=p&amp;&amp;0&lt;=_&amp;&amp;W[p]!==ot[_];)_--;for(;1&lt;=p&amp;&amp;0&lt;=_;p--,_--)if(W[p]!==ot[_]){if(p!==1||_!==1)do if(p--,_--,0&gt;_||W[p]!==ot[_]){var At=`
<a href="#l14" class="line" id="l14">     14</a> `+W[p].replace(&quot; at new &quot;,&quot; at &quot;);return r.displayName&amp;&amp;At.includes(&quot;&lt;anonymous&gt;&quot;)&amp;&amp;(At=At.replace(&quot;&lt;anonymous&gt;&quot;,r.displayName)),At}while(1&lt;=p&amp;&amp;0&lt;=_);break}}}finally{BS=!1,Error.prepareStackTrace=f}return(f=r?r.displayName||r.name:&quot;&quot;)?o(f):&quot;&quot;}function c(r){switch(r.tag){case 26:case 27:case 5:return o(r.type);case 16:return o(&quot;Lazy&quot;);case 13:return o(&quot;Suspense&quot;);case 19:return o(&quot;SuspenseList&quot;);case 0:case 15:return r=u(r.type,!1),r;case 11:return r=u(r.type.render,!1),r;case 1:return r=u(r.type,!0),r;default:return&quot;&quot;}}function h(r){try{var l=&quot;&quot;;do l+=c(r),r=r.return;while(r);return l}catch(f){return`
<a href="#l15" class="line" id="l15">     15</a> Error generating stack: `+f.message+`
<a href="#l16" class="line" id="l16">     16</a> `+f.stack}}function d(r){var l=r,f=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&amp;4098)!==0&amp;&amp;(f=l.return),r=l.return;while(r)}return l.tag===3?f:null}function m(r){if(d(r)!==r)throw Error(i(188))}function g(r){var l=r.alternate;if(!l){if(l=d(r),l===null)throw Error(i(188));return l!==r?null:r}for(var f=r,p=l;;){var _=f.return;if(_===null)break;var A=_.alternate;if(A===null){if(p=_.return,p!==null){f=p;continue}break}if(_.child===A.child){for(A=_.child;A;){if(A===f)return m(_),r;if(A===p)return m(_),l;A=A.sibling}throw Error(i(188))}if(f.return!==p.return)f=_,p=A;else{for(var L=!1,F=_.child;F;){if(F===f){L=!0,f=_,p=A;break}if(F===p){L=!0,p=_,f=A;break}F=F.sibling}if(!L){for(F=A.child;F;){if(F===f){L=!0,f=A,p=_;break}if(F===p){L=!0,p=A,f=_;break}F=F.sibling}if(!L)throw Error(i(189))}}if(f.alternate!==p)throw Error(i(190))}if(f.tag!==3)throw Error(i(188));return f.stateNode.current===f?r:l}function y(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=y(r),l!==null)return l;r=r.sibling}return null}function x(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(r.tag!==4&amp;&amp;(l=x(r),l!==null))return l;r=r.sibling}return null}function b(r){return{current:r}}function M(r){0&gt;ic||(r.current=GS[ic],GS[ic]=null,ic--)}function v(r,l){ic++,GS[ic]=r.current,r.current=l}function S(r){return r&gt;&gt;&gt;=0,r===0?32:31-(e4(r)/n4|0)|0}function E(r){var l=r&amp;42;if(l!==0)return l;switch(r&amp;-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&amp;4194176;case 4194304:case 8388608:case 16777216:case 33554432:return r&amp;62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function T(r,l){var f=r.pendingLanes;if(f===0)return 0;var p=0,_=r.suspendedLanes,A=r.pingedLanes,L=r.warmLanes;r=r.finishedLanes!==0;var F=f&amp;134217727;return F!==0?(f=F&amp;~_,f!==0?p=E(f):(A&amp;=F,A!==0?p=E(A):r||(L=F&amp;~L,L!==0&amp;&amp;(p=E(L))))):(F=f&amp;~_,F!==0?p=E(F):A!==0?p=E(A):r||(L=f&amp;~L,L!==0&amp;&amp;(p=E(L)))),p===0?0:l!==0&amp;&amp;l!==p&amp;&amp;(l&amp;_)===0&amp;&amp;(_=p&amp;-p,L=l&amp;-l,_&gt;=L||_===32&amp;&amp;(L&amp;4194176)!==0)?l:p}function w(r,l){return(r.pendingLanes&amp;~(r.suspendedLanes&amp;~r.pingedLanes)&amp;l)===0}function U(r,l){switch(r){case 1:case 2:case 4:case 8:return l+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O(){var r=u0;return u0&lt;&lt;=1,(u0&amp;4194176)===0&amp;&amp;(u0=128),r}function z(){var r=c0;return c0&lt;&lt;=1,(c0&amp;62914560)===0&amp;&amp;(c0=4194304),r}function C(r){for(var l=[],f=0;31&gt;f;f++)l.push(r);return l}function R(r,l){r.pendingLanes|=l,l!==268435456&amp;&amp;(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function P(r,l,f,p,_,A){var L=r.pendingLanes;r.pendingLanes=f,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&amp;=f,r.entangledLanes&amp;=f,r.errorRecoveryDisabledLanes&amp;=f,r.shellSuspendCounter=0;var F=r.entanglements,W=r.expirationTimes,ot=r.hiddenUpdates;for(f=L&amp;~f;0&lt;f;){var At=31-ma(f),Pt=1&lt;&lt;At;F[At]=0,W[At]=-1;var Ht=ot[At];if(Ht!==null)for(ot[At]=null,At=0;At&lt;Ht.length;At++){var ye=Ht[At];ye!==null&amp;&amp;(ye.lane&amp;=-536870913)}f&amp;=~Pt}p!==0&amp;&amp;j(r,p,0),A!==0&amp;&amp;_===0&amp;&amp;r.tag!==0&amp;&amp;(r.suspendedLanes|=A&amp;~(L&amp;~l))}function j(r,l,f){r.pendingLanes|=l,r.suspendedLanes&amp;=~l;var p=31-ma(l);r.entangledLanes|=l,r.entanglements[p]=r.entanglements[p]|1073741824|f&amp;4194218}function X(r,l){var f=r.entangledLanes|=l;for(r=r.entanglements;f;){var p=31-ma(f),_=1&lt;&lt;p;_&amp;l|r[p]&amp;l&amp;&amp;(r[p]|=l),f&amp;=~_}}function Z(r){return r&amp;=-r,2&lt;r?8&lt;r?(r&amp;134217727)!==0?32:268435456:8:2}function st(r){if(ga&amp;&amp;typeof ga.onCommitFiberRoot==&quot;function&quot;)try{ga.onCommitFiberRoot($h,r,void 0,(r.current.flags&amp;128)===128)}catch{}}function et(r){if(typeof o4==&quot;function&quot;&amp;&amp;l4(r),ga&amp;&amp;typeof ga.setStrictMode==&quot;function&quot;)try{ga.setStrictMode($h,r)}catch{}}function mt(r,l){return r===l&amp;&amp;(r!==0||1/r===1/l)||r!==r&amp;&amp;l!==l}function K(r,l){if(typeof r==&quot;object&quot;&amp;&amp;r!==null){var f=OR.get(r);return f!==void 0?f:(l={value:r,source:l,stack:h(l)},OR.set(r,l),l)}return{value:r,source:l,stack:h(l)}}function _t(r,l){sc[rc++]=d0,sc[rc++]=h0,h0=r,d0=l}function Ut(r,l,f){Xa[qa++]=gr,Xa[qa++]=vr,Xa[qa++]=Rl,Rl=r;var p=gr;r=vr;var _=32-ma(p)-1;p&amp;=~(1&lt;&lt;_),f+=1;var A=32-ma(l)+_;if(30&lt;A){var L=_-_%5;A=(p&amp;(1&lt;&lt;L)-1).toString(32),p&gt;&gt;=L,_-=L,gr=1&lt;&lt;32-ma(l)+_|f&lt;&lt;_|p,vr=A+r}else gr=1&lt;&lt;A|f&lt;&lt;_|p,vr=r}function xt(r){r.return!==null&amp;&amp;(_t(r,1),Ut(r,1,0))}function It(r){for(;r===h0;)h0=sc[--rc],sc[rc]=null,d0=sc[--rc],sc[rc]=null;for(;r===Rl;)Rl=Xa[--qa],Xa[qa]=null,vr=Xa[--qa],Xa[qa]=null,gr=Xa[--qa],Xa[qa]=null}function se(r,l){v(ho,l),v(td,r),v(di,null),r=Xz(l),M(di),v(di,r)}function Qt(){M(di),M(td),M(ho)}function it(r){r.memoizedState!==null&amp;&amp;v(p0,r);var l=di.current,f=qz(l,r.type);l!==f&amp;&amp;(v(td,r),v(di,f))}function wt(r){td.current===r&amp;&amp;(M(di),M(td)),p0.current===r&amp;&amp;(M(p0),mr?Al._currentValue=nc:Al._currentValue2=nc)}function bt(r){var l=Error(i(418,&quot;&quot;));throw re(K(l,r)),YS}function Jt(r,l){if(!Va)throw Error(i(175));PB(r.stateNode,r.type,r.memoizedProps,l,r)||bt(r)}function Zt(r){for(Ii=r.return;Ii;)switch(Ii.tag){case 3:case 27:Is=!0;return;case 5:case 13:Is=!1;return;default:Ii=Ii.return}}function te(r){if(!Va||r!==Ii)return!1;if(!ze)return Zt(r),ze=!0,!1;var l=!1;if(Ei?r.tag!==3&amp;&amp;r.tag!==27&amp;&amp;(r.tag!==5||MR(r.type)&amp;&amp;!l0(r.type,r.memoizedProps))&amp;&amp;(l=!0):r.tag!==3&amp;&amp;(r.tag!==5||MR(r.type)&amp;&amp;!l0(r.type,r.memoizedProps))&amp;&amp;(l=!0),l&amp;&amp;bi&amp;&amp;bt(r),Zt(r),r.tag===13){if(!Va)throw Error(i(316));if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));bi=FB(r)}else bi=Ii?xR(r.stateNode):null;return!0}function ke(){Va&amp;&amp;(bi=Ii=null,ze=!1)}function re(r){ms===null?ms=[r]:ms.push(r)}function H(){for(var r=oc,l=WS=oc=0;l&lt;r;){var f=Ya[l];Ya[l++]=null;var p=Ya[l];Ya[l++]=null;var _=Ya[l];Ya[l++]=null;var A=Ya[l];if(Ya[l++]=null,p!==null&amp;&amp;_!==null){var L=p.pending;L===null?_.next=_:(_.next=L.next,L.next=_),p.pending=_}A!==0&amp;&amp;lt(f,_,A)}}function ht(r,l,f,p){Ya[oc++]=r,Ya[oc++]=l,Ya[oc++]=f,Ya[oc++]=p,WS|=p,r.lanes|=p,r=r.alternate,r!==null&amp;&amp;(r.lanes|=p)}function rt(r,l,f,p){return ht(r,l,f,p),Ct(r)}function pt(r,l){return ht(r,null,null,l),Ct(r)}function lt(r,l,f){r.lanes|=f;var p=r.alternate;p!==null&amp;&amp;(p.lanes|=f);for(var _=!1,A=r.return;A!==null;)A.childLanes|=f,p=A.alternate,p!==null&amp;&amp;(p.childLanes|=f),A.tag===22&amp;&amp;(r=A.stateNode,r===null||r._visibility&amp;1||(_=!0)),r=A,A=A.return;_&amp;&amp;l!==null&amp;&amp;r.tag===3&amp;&amp;(A=r.stateNode,_=31-ma(f),A=A.hiddenUpdates,r=A[_],r===null?A[_]=[l]:r.push(l),l.lane=f|536870912)}function Ct(r){if(50&lt;ud)throw ud=0,lM=null,Error(i(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}function dt(r){r!==lc&amp;&amp;r.next===null&amp;&amp;(lc===null?m0=lc=r:lc=lc.next=r),g0=!0,kS||(kS=!0,k(de))}function Rt(r,l){if(!ZS&amp;&amp;g0){ZS=!0;do for(var f=!1,p=m0;p!==null;){if(!l)if(r!==0){var _=p.pendingLanes;if(_===0)var A=0;else{var L=p.suspendedLanes,F=p.pingedLanes;A=(1&lt;&lt;31-ma(42|r)+1)-1,A&amp;=_&amp;~(L&amp;~F),A=A&amp;201326677?A&amp;201326677|1:A?A|2:0}A!==0&amp;&amp;(f=!0,D(p,A))}else A=Ue,A=T(p,p===un?A:0),(A&amp;3)===0||w(p,A)||(f=!0,D(p,A));p=p.next}while(f);ZS=!1}}function de(){g0=kS=!1;var r=0;uc!==0&amp;&amp;(Jz()&amp;&amp;(r=uc),uc=0);for(var l=ps(),f=null,p=m0;p!==null;){var _=p.next,A=ue(p,l);A===0?(p.next=null,f===null?m0=_:f.next=_,_===null&amp;&amp;(lc=f)):(f=p,(r!==0||(A&amp;3)!==0)&amp;&amp;(g0=!0)),p=_}Rt(r,!1)}function ue(r,l){for(var f=r.suspendedLanes,p=r.pingedLanes,_=r.expirationTimes,A=r.pendingLanes&amp;-62914561;0&lt;A;){var L=31-ma(A),F=1&lt;&lt;L,W=_[L];W===-1?((F&amp;f)===0||(F&amp;p)!==0)&amp;&amp;(_[L]=U(F,l)):W&lt;=l&amp;&amp;(r.expiredLanes|=F),A&amp;=~F}if(l=un,f=Ue,f=T(r,r===l?f:0),p=r.callbackNode,f===0||r===l&amp;&amp;cn===2||r.cancelPendingCommit!==null)return p!==null&amp;&amp;p!==null&amp;&amp;XS(p),r.callbackNode=null,r.callbackPriority=0;if((f&amp;3)===0||w(r,f)){if(l=f&amp;-f,l===r.callbackPriority)return l;switch(p!==null&amp;&amp;XS(p),Z(f)){case 2:case 8:f=s4;break;case 32:f=qS;break;case 268435456:f=r4;break;default:f=qS}return p=I.bind(null,r),f=f0(f,p),r.callbackPriority=l,r.callbackNode=f,l}return p!==null&amp;&amp;p!==null&amp;&amp;XS(p),r.callbackPriority=2,r.callbackNode=null,2}function I(r,l){var f=r.callbackNode;if(El()&amp;&amp;r.callbackNode!==f)return null;var p=Ue;return p=T(r,r===un?p:0),p===0?null:(B2(r,p,l),ue(r,ps()),r.callbackNode!=null&amp;&amp;r.callbackNode===f?I.bind(null,r):null)}function D(r,l){if(El())return null;B2(r,l,!0)}function k(r){aB?sB(function(){($e&amp;6)!==0?f0(NR,r):r()}):f0(NR,r)}function nt(){return uc===0&amp;&amp;(uc=O()),uc}function gt(r,l){if(ed===null){var f=ed=[];jS=0,cc=nt(),fc={status:&quot;pending&quot;,value:void 0,then:function(p){f.push(p)}}}return jS++,l.then(at,at),l}function at(){if(--jS===0&amp;&amp;ed!==null){fc!==null&amp;&amp;(fc.status=&quot;fulfilled&quot;);var r=ed;ed=null,cc=0,fc=null;for(var l=0;l&lt;r.length;l++)(0,r[l])()}}function jt(r,l){var f=[],p={status:&quot;pending&quot;,value:null,reason:null,then:function(_){f.push(_)}};return r.then(function(){p.status=&quot;fulfilled&quot;,p.value=l;for(var _=0;_&lt;f.length;_++)(0,f[_])(l)},function(_){for(p.status=&quot;rejected&quot;,p.reason=_,_=0;_&lt;f.length;_++)(0,f[_])(void 0)}),p}function Tt(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wt(r,l){r=r.updateQueue,l.updateQueue===r&amp;&amp;(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Ft(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function vt(r,l,f){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,($e&amp;2)!==0){var _=p.pending;return _===null?l.next=l:(l.next=_.next,_.next=l),p.pending=l,l=Ct(r),lt(r,null,f),l}return ht(r,p,l,f),Ct(r)}function Ot(r,l,f){if(l=l.updateQueue,l!==null&amp;&amp;(l=l.shared,(f&amp;4194176)!==0)){var p=l.lanes;p&amp;=r.pendingLanes,f|=p,l.lanes=f,X(r,f)}}function ne(r,l){var f=r.updateQueue,p=r.alternate;if(p!==null&amp;&amp;(p=p.updateQueue,f===p)){var _=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var L={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};A===null?_=A=L:A=A.next=L,f=f.next}while(f!==null);A===null?_=A=l:A=A.next=l}else _=A=l;f={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:A,shared:p.shared,callbacks:p.callbacks},r.updateQueue=f;return}r=f.lastBaseUpdate,r===null?f.firstBaseUpdate=l:r.next=l,f.lastBaseUpdate=l}function kt(){if(QS){var r=fc;if(r!==null)throw r}}function Nt(r,l,f,p){QS=!1;var _=r.updateQueue;po=!1;var A=_.firstBaseUpdate,L=_.lastBaseUpdate,F=_.shared.pending;if(F!==null){_.shared.pending=null;var W=F,ot=W.next;W.next=null,L===null?A=ot:L.next=ot,L=W;var At=r.alternate;At!==null&amp;&amp;(At=At.updateQueue,F=At.lastBaseUpdate,F!==L&amp;&amp;(F===null?At.firstBaseUpdate=ot:F.next=ot,At.lastBaseUpdate=W))}if(A!==null){var Pt=_.baseState;L=0,At=ot=W=null,F=A;do{var Ht=F.lane&amp;-536870913,ye=Ht!==F.lane;if(ye?(Ue&amp;Ht)===Ht:(p&amp;Ht)===Ht){Ht!==0&amp;&amp;Ht===cc&amp;&amp;(QS=!0),At!==null&amp;&amp;(At=At.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});t:{var Za=r,cd=F;Ht=l;var Bl=f;switch(cd.tag){case 1:if(Za=cd.payload,typeof Za==&quot;function&quot;){Pt=Za.call(Bl,Pt,Ht);break t}Pt=Za;break t;case 3:Za.flags=Za.flags&amp;-65537|128;case 0:if(Za=cd.payload,Ht=typeof Za==&quot;function&quot;?Za.call(Bl,Pt,Ht):Za,Ht==null)break t;Pt=wS({},Pt,Ht);break t;case 2:po=!0}}Ht=F.callback,Ht!==null&amp;&amp;(r.flags|=64,ye&amp;&amp;(r.flags|=8192),ye=_.callbacks,ye===null?_.callbacks=[Ht]:ye.push(Ht))}else ye={lane:Ht,tag:F.tag,payload:F.payload,callback:F.callback,next:null},At===null?(ot=At=ye,W=Pt):At=At.next=ye,L|=Ht;if(F=F.next,F===null){if(F=_.shared.pending,F===null)break;ye=F,F=ye.next,ye.next=null,_.lastBaseUpdate=ye,_.shared.pending=null}}while(!0);At===null&amp;&amp;(W=Pt),_.baseState=W,_.firstBaseUpdate=ot,_.lastBaseUpdate=At,A===null&amp;&amp;(_.shared.lanes=0),vo|=L,r.lanes=L,r.memoizedState=Pt}}function me(r,l){if(typeof r!=&quot;function&quot;)throw Error(i(191,r));r.call(l)}function G(r,l){var f=r.callbacks;if(f!==null)for(r.callbacks=null,r=0;r&lt;f.length;r++)me(f[r],l)}function Mt(r,l){if(va(r,l))return!0;if(typeof r!=&quot;object&quot;||r===null||typeof l!=&quot;object&quot;||l===null)return!1;var f=Object.keys(r),p=Object.keys(l);if(f.length!==p.length)return!1;for(p=0;p&lt;f.length;p++){var _=f[p];if(!u4.call(l,_)||!va(r[_],l[_]))return!1}return!0}function Dt(r){return r=r.status,r===&quot;fulfilled&quot;||r===&quot;rejected&quot;}function Gt(){}function St(r,l,f){switch(f=r[f],f===void 0?r.push(l):f!==l&amp;&amp;(l.then(Gt,Gt),l=f),l.status){case&quot;fulfilled&quot;:return l.value;case&quot;rejected&quot;:throw r=l.reason,r===nd?Error(i(483)):r;default:if(typeof l.status==&quot;string&quot;)l.then(Gt,Gt);else{if(r=un,r!==null&amp;&amp;100&lt;r.shellSuspendCounter)throw Error(i(482));r=l,r.status=&quot;pending&quot;,r.then(function(p){if(l.status===&quot;pending&quot;){var _=l;_.status=&quot;fulfilled&quot;,_.value=p}},function(p){if(l.status===&quot;pending&quot;){var _=l;_.status=&quot;rejected&quot;,_.reason=p}})}switch(l.status){case&quot;fulfilled&quot;:return l.value;case&quot;rejected&quot;:throw r=l.reason,r===nd?Error(i(483)):r}throw hc=l,nd}}function ut(){if(hc===null)throw Error(i(459));var r=hc;return hc=null,r}function qt(r){var l=id;return id+=1,dc===null&amp;&amp;(dc=[]),St(dc,r,l)}function oe(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function He(r,l){throw l.$$typeof===Pz?Error(i(525)):(r=Object.prototype.toString.call(l),Error(i(31,r===&quot;[object Object]&quot;?&quot;object with keys {&quot;+Object.keys(l).join(&quot;, &quot;)+&quot;}&quot;:r)))}function Le(r){var l=r._init;return l(r._payload)}function Ha(r){function l(Q,Y){if(r){var tt=Q.deletions;tt===null?(Q.deletions=[Y],Q.flags|=16):tt.push(Y)}}function f(Q,Y){if(!r)return null;for(;Y!==null;)l(Q,Y),Y=Y.sibling;return null}function p(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function _(Q,Y){return Q=lo(Q,Y),Q.index=0,Q.sibling=null,Q}function A(Q,Y,tt){return Q.index=tt,r?(tt=Q.alternate,tt!==null?(tt=tt.index,tt&lt;Y?(Q.flags|=33554434,Y):tt):(Q.flags|=33554434,Y)):(Q.flags|=1048576,Y)}function L(Q){return r&amp;&amp;Q.alternate===null&amp;&amp;(Q.flags|=33554434),Q}function F(Q,Y,tt,Et){return Y===null||Y.tag!==6?(Y=AS(tt,Q.mode,Et),Y.return=Q,Y):(Y=_(Y,tt),Y.return=Q,Y)}function W(Q,Y,tt,Et){var $t=tt.type;return $t===ec?At(Q,Y,tt.props.children,Et,tt.key):Y!==null&amp;&amp;(Y.elementType===$t||typeof $t==&quot;object&quot;&amp;&amp;$t!==null&amp;&amp;$t.$$typeof===co&amp;&amp;Le($t)===Y.type)?(Y=_(Y,tt.props),oe(Y,tt),Y.return=Q,Y):(Y=s0(tt.type,tt.key,tt.props,null,Q.mode,Et),oe(Y,tt),Y.return=Q,Y)}function ot(Q,Y,tt,Et){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==tt.containerInfo||Y.stateNode.implementation!==tt.implementation?(Y=RS(tt,Q.mode,Et),Y.return=Q,Y):(Y=_(Y,tt.children||[]),Y.return=Q,Y)}function At(Q,Y,tt,Et,$t){return Y===null||Y.tag!==7?(Y=bl(tt,Q.mode,Et,$t),Y.return=Q,Y):(Y=_(Y,tt),Y.return=Q,Y)}function Pt(Q,Y,tt){if(typeof Y==&quot;string&quot;&amp;&amp;Y!==&quot;&quot;||typeof Y==&quot;number&quot;||typeof Y==&quot;bigint&quot;)return Y=AS(&quot;&quot;+Y,Q.mode,tt),Y.return=Q,Y;if(typeof Y==&quot;object&quot;&amp;&amp;Y!==null){switch(Y.$$typeof){case r0:return tt=s0(Y.type,Y.key,Y.props,null,Q.mode,tt),oe(tt,Y),tt.return=Q,tt;case tc:return Y=RS(Y,Q.mode,tt),Y.return=Q,Y;case co:var Et=Y._init;return Y=Et(Y._payload),Pt(Q,Y,tt)}if(o0(Y)||a(Y))return Y=bl(Y,Q.mode,tt,null),Y.return=Q,Y;if(typeof Y.then==&quot;function&quot;)return Pt(Q,qt(Y),tt);if(Y.$$typeof===uo)return Pt(Q,$g(Q,Y),tt);He(Q,Y)}return null}function Ht(Q,Y,tt,Et){var $t=Y!==null?Y.key:null;if(typeof tt==&quot;string&quot;&amp;&amp;tt!==&quot;&quot;||typeof tt==&quot;number&quot;||typeof tt==&quot;bigint&quot;)return $t!==null?null:F(Q,Y,&quot;&quot;+tt,Et);if(typeof tt==&quot;object&quot;&amp;&amp;tt!==null){switch(tt.$$typeof){case r0:return tt.key===$t?W(Q,Y,tt,Et):null;case tc:return tt.key===$t?ot(Q,Y,tt,Et):null;case co:return $t=tt._init,tt=$t(tt._payload),Ht(Q,Y,tt,Et)}if(o0(tt)||a(tt))return $t!==null?null:At(Q,Y,tt,Et,null);if(typeof tt.then==&quot;function&quot;)return Ht(Q,Y,qt(tt),Et);if(tt.$$typeof===uo)return Ht(Q,Y,$g(Q,tt),Et);He(Q,tt)}return null}function ye(Q,Y,tt,Et,$t){if(typeof Et==&quot;string&quot;&amp;&amp;Et!==&quot;&quot;||typeof Et==&quot;number&quot;||typeof Et==&quot;bigint&quot;)return Q=Q.get(tt)||null,F(Y,Q,&quot;&quot;+Et,$t);if(typeof Et==&quot;object&quot;&amp;&amp;Et!==null){switch(Et.$$typeof){case r0:return Q=Q.get(Et.key===null?tt:Et.key)||null,W(Y,Q,Et,$t);case tc:return Q=Q.get(Et.key===null?tt:Et.key)||null,ot(Y,Q,Et,$t);case co:var dn=Et._init;return Et=dn(Et._payload),ye(Q,Y,tt,Et,$t)}if(o0(Et)||a(Et))return Q=Q.get(tt)||null,At(Y,Q,Et,$t,null);if(typeof Et.then==&quot;function&quot;)return ye(Q,Y,tt,qt(Et),$t);if(Et.$$typeof===uo)return ye(Q,Y,tt,$g(Y,Et),$t);He(Y,Et)}return null}function Za(Q,Y,tt,Et){for(var $t=null,dn=null,he=Y,Be=Y=0,ti=null;he!==null&amp;&amp;Be&lt;tt.length;Be++){he.index&gt;Be?(ti=he,he=null):ti=he.sibling;var Pe=Ht(Q,he,tt[Be],Et);if(Pe===null){he===null&amp;&amp;(he=ti);break}r&amp;&amp;he&amp;&amp;Pe.alternate===null&amp;&amp;l(Q,he),Y=A(Pe,Y,Be),dn===null?$t=Pe:dn.sibling=Pe,dn=Pe,he=ti}if(Be===tt.length)return f(Q,he),ze&amp;&amp;_t(Q,Be),$t;if(he===null){for(;Be&lt;tt.length;Be++)he=Pt(Q,tt[Be],Et),he!==null&amp;&amp;(Y=A(he,Y,Be),dn===null?$t=he:dn.sibling=he,dn=he);return ze&amp;&amp;_t(Q,Be),$t}for(he=p(he);Be&lt;tt.length;Be++)ti=ye(he,Q,Be,tt[Be],Et),ti!==null&amp;&amp;(r&amp;&amp;ti.alternate!==null&amp;&amp;he.delete(ti.key===null?Be:ti.key),Y=A(ti,Y,Be),dn===null?$t=ti:dn.sibling=ti,dn=ti);return r&amp;&amp;he.forEach(function(_o){return l(Q,_o)}),ze&amp;&amp;_t(Q,Be),$t}function cd(Q,Y,tt,Et){if(tt==null)throw Error(i(151));for(var $t=null,dn=null,he=Y,Be=Y=0,ti=null,Pe=tt.next();he!==null&amp;&amp;!Pe.done;Be++,Pe=tt.next()){he.index&gt;Be?(ti=he,he=null):ti=he.sibling;var _o=Ht(Q,he,Pe.value,Et);if(_o===null){he===null&amp;&amp;(he=ti);break}r&amp;&amp;he&amp;&amp;_o.alternate===null&amp;&amp;l(Q,he),Y=A(_o,Y,Be),dn===null?$t=_o:dn.sibling=_o,dn=_o,he=ti}if(Pe.done)return f(Q,he),ze&amp;&amp;_t(Q,Be),$t;if(he===null){for(;!Pe.done;Be++,Pe=tt.next())Pe=Pt(Q,Pe.value,Et),Pe!==null&amp;&amp;(Y=A(Pe,Y,Be),dn===null?$t=Pe:dn.sibling=Pe,dn=Pe);return ze&amp;&amp;_t(Q,Be),$t}for(he=p(he);!Pe.done;Be++,Pe=tt.next())Pe=ye(he,Q,Be,Pe.value,Et),Pe!==null&amp;&amp;(r&amp;&amp;Pe.alternate!==null&amp;&amp;he.delete(Pe.key===null?Be:Pe.key),Y=A(Pe,Y,Be),dn===null?$t=Pe:dn.sibling=Pe,dn=Pe);return r&amp;&amp;he.forEach(function(g4){return l(Q,g4)}),ze&amp;&amp;_t(Q,Be),$t}function Bl(Q,Y,tt,Et){if(typeof tt==&quot;object&quot;&amp;&amp;tt!==null&amp;&amp;tt.type===ec&amp;&amp;tt.key===null&amp;&amp;(tt=tt.props.children),typeof tt==&quot;object&quot;&amp;&amp;tt!==null){switch(tt.$$typeof){case r0:t:{for(var $t=tt.key;Y!==null;){if(Y.key===$t){if($t=tt.type,$t===ec){if(Y.tag===7){f(Q,Y.sibling),Et=_(Y,tt.props.children),Et.return=Q,Q=Et;break t}}else if(Y.elementType===$t||typeof $t==&quot;object&quot;&amp;&amp;$t!==null&amp;&amp;$t.$$typeof===co&amp;&amp;Le($t)===Y.type){f(Q,Y.sibling),Et=_(Y,tt.props),oe(Et,tt),Et.return=Q,Q=Et;break t}f(Q,Y);break}else l(Q,Y);Y=Y.sibling}tt.type===ec?(Et=bl(tt.props.children,Q.mode,Et,tt.key),Et.return=Q,Q=Et):(Et=s0(tt.type,tt.key,tt.props,null,Q.mode,Et),oe(Et,tt),Et.return=Q,Q=Et)}return L(Q);case tc:t:{for($t=tt.key;Y!==null;){if(Y.key===$t)if(Y.tag===4&amp;&amp;Y.stateNode.containerInfo===tt.containerInfo&amp;&amp;Y.stateNode.implementation===tt.implementation){f(Q,Y.sibling),Et=_(Y,tt.children||[]),Et.return=Q,Q=Et;break t}else{f(Q,Y);break}else l(Q,Y);Y=Y.sibling}Et=RS(tt,Q.mode,Et),Et.return=Q,Q=Et}return L(Q);case co:return $t=tt._init,tt=$t(tt._payload),Bl(Q,Y,tt,Et)}if(o0(tt))return Za(Q,Y,tt,Et);if(a(tt)){if($t=a(tt),typeof $t!=&quot;function&quot;)throw Error(i(150));return tt=$t.call(tt),cd(Q,Y,tt,Et)}if(typeof tt.then==&quot;function&quot;)return Bl(Q,Y,qt(tt),Et);if(tt.$$typeof===uo)return Bl(Q,Y,$g(Q,tt),Et);He(Q,tt)}return typeof tt==&quot;string&quot;&amp;&amp;tt!==&quot;&quot;||typeof tt==&quot;number&quot;||typeof tt==&quot;bigint&quot;?(tt=&quot;&quot;+tt,Y!==null&amp;&amp;Y.tag===6?(f(Q,Y.sibling),Et=_(Y,tt),Et.return=Q,Q=Et):(f(Q,Y),Et=AS(tt,Q.mode,Et),Et.return=Q,Q=Et),L(Q)):f(Q,Y)}return function(Q,Y,tt,Et){try{id=0;var $t=Bl(Q,Y,tt,Et);return dc=null,$t}catch(he){if(he===nd)throw he;var dn=t(29,he,null,Q.mode);return dn.lanes=Et,dn.return=Q,dn}finally{}}}function ua(r,l){r=Sr,v(y0,r),v(pc,l),Sr=r|l.baseLanes}function ku(){v(y0,Sr),v(pc,pc.current)}function fs(){Sr=y0.current,M(pc),M(y0)}function Fa(r){var l=r.alternate;v(qn,qn.current&amp;1),v(Wa,r),Hs===null&amp;&amp;(l===null||pc.current!==null||l.memoizedState!==null)&amp;&amp;(Hs=r)}function Ih(r){if(r.tag===22){if(v(qn,qn.current),v(Wa,r),Hs===null){var l=r.alternate;l!==null&amp;&amp;l.memoizedState!==null&amp;&amp;(Hs=r)}}else hs(r)}function hs(){v(qn,qn.current),v(Wa,Wa.current)}function Zi(r){M(Wa),Hs===r&amp;&amp;(Hs=null),M(qn)}function yl(r){for(var l=r;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&amp;&amp;(f=f.dehydrated,f===null||HS(f)||FS(f)))return l}else if(l.tag===19&amp;&amp;l.memoizedProps.revealOrder!==void 0){if((l.flags&amp;128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function rn(){throw Error(i(321))}function Zu(r,l){if(l===null)return!1;for(var f=0;f&lt;l.length&amp;&amp;f&lt;r.length;f++)if(!va(r[f],l[f]))return!1;return!0}function ju(r,l,f,p,_,A){return mo=A,Ee=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,pe.H=r===null||r.memoizedState===null?Dl:go,wl=!1,A=f(p,_),wl=!1,mc&amp;&amp;(A=kg(l,f,p,_)),Wg(r),A}function Wg(r){pe.H=Fs;var l=Je!==null&amp;&amp;Je.next!==null;if(mo=0,Bn=Je=Ee=null,_0=!1,ad=0,gc=null,l)throw Error(i(300));r===null||Jn||(r=r.dependencies,r!==null&amp;&amp;Jg(r)&amp;&amp;(Jn=!0))}function kg(r,l,f,p){Ee=r;var _=0;do{if(mc&amp;&amp;(gc=null),ad=0,mc=!1,25&lt;=_)throw Error(i(301));if(_+=1,Bn=Je=null,r.updateQueue!=null){var A=r.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&amp;&amp;(A.memoCache.index=0)}pe.H=Ul,A=l(f,p)}while(mc);return A}function Vx(){var r=pe.H,l=r.useState()[0];return l=typeof l.then==&quot;function&quot;?J(l):l,r=r.useState()[0],(Je!==null?Je.memoizedState:null)!==r&amp;&amp;(Ee.flags|=1024),l}function Hh(){var r=x0!==0;return x0=0,r}function Fh(r,l,f){l.updateQueue=r.updateQueue,l.flags&amp;=-2053,r.lanes&amp;=~f}function Vh(r){if(_0){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&amp;&amp;(l.pending=null),r=r.next}_0=!1}mo=0,Bn=Je=Ee=null,mc=!1,ad=x0=0,gc=null}function N(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bn===null?Ee.memoizedState=Bn=r:Bn=Bn.next=r,Bn}function V(){if(Je===null){var r=Ee.alternate;r=r!==null?r.memoizedState:null}else r=Je.next;var l=Bn===null?Ee.memoizedState:Bn.next;if(l!==null)Bn=l,Je=r;else{if(r===null)throw Ee.alternate===null?Error(i(467)):Error(i(310));Je=r,r={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},Bn===null?Ee.memoizedState=Bn=r:Bn=Bn.next=r}return Bn}function J(r){var l=ad;return ad+=1,gc===null&amp;&amp;(gc=[]),r=St(gc,r,l),l=Ee,(Bn===null?l.memoizedState:Bn.next)===null&amp;&amp;(l=l.alternate,pe.H=l===null||l.memoizedState===null?Dl:go),r}function $(r){if(r!==null&amp;&amp;typeof r==&quot;object&quot;){if(typeof r.then==&quot;function&quot;)return J(r);if(r.$$typeof===uo)return Si(r)}throw Error(i(438,String(r)))}function q(r){var l=null,f=Ee.updateQueue;if(f!==null&amp;&amp;(l=f.memoCache),l==null){var p=Ee.alternate;p!==null&amp;&amp;(p=p.updateQueue,p!==null&amp;&amp;(p=p.memoCache,p!=null&amp;&amp;(l={data:p.data.map(function(_){return _.slice()}),index:0})))}if(l==null&amp;&amp;(l={data:[],index:0}),f===null&amp;&amp;(f=JS(),Ee.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(r),p=0;p&lt;r;p++)f[p]=Hz;return l.index++,f}function yt(r,l){return typeof l==&quot;function&quot;?l(r):l}function Lt(r){var l=V();return Yt(l,Je,r)}function Yt(r,l,f){var p=r.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=f;var _=r.baseQueue,A=p.pending;if(A!==null){if(_!==null){var L=_.next;_.next=A.next,A.next=L}l.baseQueue=_=A,p.pending=null}if(A=r.baseState,_===null)r.memoizedState=A;else{l=_.next;var F=L=null,W=null,ot=l,At=!1;do{var Pt=ot.lane&amp;-536870913;if(Pt!==ot.lane?(Ue&amp;Pt)===Pt:(mo&amp;Pt)===Pt){var Ht=ot.revertLane;if(Ht===0)W!==null&amp;&amp;(W=W.next={lane:0,revertLane:0,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null}),Pt===cc&amp;&amp;(At=!0);else if((mo&amp;Ht)===Ht){ot=ot.next,Ht===cc&amp;&amp;(At=!0);continue}else Pt={lane:0,revertLane:ot.revertLane,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},W===null?(F=W=Pt,L=A):W=W.next=Pt,Ee.lanes|=Ht,vo|=Ht;Pt=ot.action,wl&amp;&amp;f(A,Pt),A=ot.hasEagerState?ot.eagerState:f(A,Pt)}else Ht={lane:Pt,revertLane:ot.revertLane,action:ot.action,hasEagerState:ot.hasEagerState,eagerState:ot.eagerState,next:null},W===null?(F=W=Ht,L=A):W=W.next=Ht,Ee.lanes|=Pt,vo|=Pt;ot=ot.next}while(ot!==null&amp;&amp;ot!==l);if(W===null?L=A:W.next=F,!va(A,r.memoizedState)&amp;&amp;(Jn=!0,At&amp;&amp;(f=fc,f!==null)))throw f;r.memoizedState=A,r.baseState=L,r.baseQueue=W,p.lastRenderedState=A}return _===null&amp;&amp;(p.lanes=0),[r.memoizedState,p.dispatch]}function Vt(r){var l=V(),f=l.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=r;var p=f.dispatch,_=f.pending,A=l.memoizedState;if(_!==null){f.pending=null;var L=_=_.next;do A=r(A,L.action),L=L.next;while(L!==_);va(A,l.memoizedState)||(Jn=!0),l.memoizedState=A,l.baseQueue===null&amp;&amp;(l.baseState=A),f.lastRenderedState=A}return[A,p]}function ie(r,l,f){var p=Ee,_=V(),A=ze;if(A){if(f===void 0)throw Error(i(407));f=f()}else f=l();var L=!va((Je||_).memoizedState,f);if(L&amp;&amp;(_.memoizedState=f,Jn=!0),_=_.queue,Gx(Me.bind(null,p,_,r),[r]),_.getSnapshot!==l||L||Bn!==null&amp;&amp;Bn.memoizedState.tag&amp;1){if(p.flags|=2048,Bs(9,Kt.bind(null,p,_,f,l),{destroy:void 0},null),un===null)throw Error(i(349));A||(mo&amp;60)!==0||ae(p,l,f)}return f}function ae(r,l,f){r.flags|=16384,r={getSnapshot:l,value:f},l=Ee.updateQueue,l===null?(l=JS(),Ee.updateQueue=l,l.stores=[r]):(f=l.stores,f===null?l.stores=[r]:f.push(r))}function Kt(r,l,f,p){l.value=f,l.getSnapshot=p,Fe(l)&amp;&amp;hn(r)}function Me(r,l,f){return f(function(){Fe(l)&amp;&amp;hn(r)})}function Fe(r){var l=r.getSnapshot;r=r.value;try{var f=l();return!va(r,f)}catch{return!0}}function hn(r){var l=pt(r,2);l!==null&amp;&amp;Pi(l,r,2)}function Ze(r){var l=N();if(typeof r==&quot;function&quot;){var f=r;if(r=f(),wl){et(!0);try{f()}finally{et(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yt,lastRenderedState:r},l}function qe(r,l,f,p){return r.baseState=f,Yt(r,Je,typeof p==&quot;function&quot;?p:yt)}function ee(r,l,f,p,_){if(Qg(r))throw Error(i(485));if(r=l.action,r!==null){var A={payload:_,action:r,next:null,isTransition:!0,status:&quot;pending&quot;,value:null,reason:null,listeners:[],then:function(L){A.listeners.push(L)}};pe.T!==null?f(!0):A.isTransition=!1,p(A),f=l.pending,f===null?(A.next=l.pending=A,on(l,A)):(A.next=f.next,l.pending=f.next=A)}}function on(r,l){var f=l.action,p=l.payload,_=r.state;if(l.isTransition){var A=pe.T,L={};pe.T=L;try{var F=f(_,p),W=pe.S;W!==null&amp;&amp;W(L,F),De(r,l,F)}catch(ot){zs(r,l,ot)}finally{pe.T=A}}else try{A=f(_,p),De(r,l,A)}catch(ot){zs(r,l,ot)}}function De(r,l,f){f!==null&amp;&amp;typeof f==&quot;object&quot;&amp;&amp;typeof f.then==&quot;function&quot;?f.then(function(p){_i(r,l,p)},function(p){return zs(r,l,p)}):_i(r,l,f)}function _i(r,l,f){l.status=&quot;fulfilled&quot;,l.value=f,xi(l),r.state=f,l=r.pending,l!==null&amp;&amp;(f=l.next,f===l?r.pending=null:(f=f.next,l.next=f,on(r,f)))}function zs(r,l,f){var p=r.pending;if(r.pending=null,p!==null){p=p.next;do l.status=&quot;rejected&quot;,l.reason=f,xi(l),l=l.next;while(l!==p)}r.action=null}function xi(r){r=r.listeners;for(var l=0;l&lt;r.length;l++)(0,r[l])()}function io(r,l){return l}function ln(r,l){if(ze){var f=un.formState;if(f!==null){t:{var p=Ee;if(ze){if(bi){var _=DB(bi,Is);if(_){bi=xR(_),p=UB(_);break t}}bt(p)}p=!1}p&amp;&amp;(l=f[0])}}f=N(),f.memoizedState=f.baseState=l,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:l},f.queue=p,f=YA.bind(null,Ee,p),p.dispatch=f,p=Ze(!1);var A=Wx.bind(null,Ee,!1,p.queue);return p=N(),_={state:l,dispatch:null,action:r,pending:null},p.queue=_,f=ee.bind(null,Ee,_,A,f),_.dispatch=f,p.memoizedState=r,[l,f,!1]}function zi(r){var l=V();return Bi(l,Je,r)}function Bi(r,l,f){l=Yt(r,l,io)[0],r=Lt(yt)[0],l=typeof l==&quot;object&quot;&amp;&amp;l!==null&amp;&amp;typeof l.then==&quot;function&quot;?J(l):l;var p=V(),_=p.queue,A=_.dispatch;return f!==p.memoizedState&amp;&amp;(Ee.flags|=2048,Bs(9,ci.bind(null,_,f),{destroy:void 0},null)),[l,A,r]}function ci(r,l){r.action=l}function fi(r){var l=V(),f=Je;if(f!==null)return Bi(l,f,r);V(),l=l.memoizedState,f=V();var p=f.queue.dispatch;return f.memoizedState=r,[l,p,!1]}function Bs(r,l,f,p){return r={tag:r,create:l,inst:f,deps:p,next:null},l=Ee.updateQueue,l===null&amp;&amp;(l=JS(),Ee.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=r.next=r:(p=f.next,f.next=r,r.next=p,l.lastEffect=r),r}function Ps(){return V().memoizedState}function Zg(r,l,f,p){var _=N();Ee.flags|=r,_.memoizedState=Bs(1|l,f,{destroy:void 0},p===void 0?null:p)}function jg(r,l,f,p){var _=V();p=p===void 0?null:p;var A=_.memoizedState.inst;Je!==null&amp;&amp;p!==null&amp;&amp;Zu(p,Je.memoizedState.deps)?_.memoizedState=Bs(l,f,A,p):(Ee.flags|=r,_.memoizedState=Bs(1|l,f,A,p))}function OA(r,l){Zg(8390656,8,r,l)}function Gx(r,l){jg(2048,8,r,l)}function LA(r,l){return jg(4,2,r,l)}function zA(r,l){return jg(4,4,r,l)}function BA(r,l){if(typeof l==&quot;function&quot;){r=r();var f=l(r);return function(){typeof f==&quot;function&quot;?f():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function PA(r,l,f){f=f!=null?f.concat([r]):null,jg(4,4,BA.bind(null,l,r),f)}function Xx(){}function IA(r,l){var f=V();l=l===void 0?null:l;var p=f.memoizedState;return l!==null&amp;&amp;Zu(l,p[1])?p[0]:(f.memoizedState=[r,l],r)}function HA(r,l){var f=V();l=l===void 0?null:l;var p=f.memoizedState;if(l!==null&amp;&amp;Zu(l,p[1]))return p[0];if(p=r(),wl){et(!0);try{r()}finally{et(!1)}}return f.memoizedState=[p,l],p}function qx(r,l,f){return f===void 0||(mo&amp;1073741824)!==0?r.memoizedState=l:(r.memoizedState=f,r=z2(),Ee.lanes|=r,vo|=r,f)}function FA(r,l,f,p){return va(f,l)?f:pc.current!==null?(r=qx(r,f,p),va(r,l)||(Jn=!0),r):(mo&amp;42)===0?(Jn=!0,r.memoizedState=f):(r=z2(),Ee.lanes|=r,vo|=r,l)}function VA(r,l,f,p,_){var A=Tl();Qi(A!==0&amp;&amp;8&gt;A?A:8);var L=pe.T,F={};pe.T=F,Wx(r,!1,l,f);try{var W=_(),ot=pe.S;if(ot!==null&amp;&amp;ot(F,W),W!==null&amp;&amp;typeof W==&quot;object&quot;&amp;&amp;typeof W.then==&quot;function&quot;){var At=jt(W,p);Gh(r,l,At,da(r))}else Gh(r,l,p,da(r))}catch(Pt){Gh(r,l,{then:function(){},status:&quot;rejected&quot;,reason:Pt},da())}finally{Qi(A),pe.T=L}}function GA(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:nc,baseState:nc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yt,lastRenderedState:nc},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yt,lastRenderedState:f},next:null},r.memoizedState=l,r=r.alternate,r!==null&amp;&amp;(r.memoizedState=l),l}function Yx(){return Si(Al)}function XA(){return V().memoizedState}function qA(){return V().memoizedState}function vz(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var f=da();r=Ft(f);var p=vt(l,r,f);p!==null&amp;&amp;(Pi(p,l,f),Ot(p,l,f)),l={cache:sS()},r.payload=l;return}l=l.return}}function yz(r,l,f){var p=da();f={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Qg(r)?WA(l,f):(f=rt(r,l,f,p),f!==null&amp;&amp;(Pi(f,r,p),kA(f,l,p)))}function YA(r,l,f){var p=da();Gh(r,l,f,p)}function Gh(r,l,f,p){var _={lane:p,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Qg(r))WA(l,_);else{var A=r.alternate;if(r.lanes===0&amp;&amp;(A===null||A.lanes===0)&amp;&amp;(A=l.lastRenderedReducer,A!==null))try{var L=l.lastRenderedState,F=A(L,f);if(_.hasEagerState=!0,_.eagerState=F,va(F,L))return ht(r,l,_,0),un===null&amp;&amp;H(),!1}catch{}finally{}if(f=rt(r,l,_,p),f!==null)return Pi(f,r,p),kA(f,l,p),!0}return!1}function Wx(r,l,f,p){if(p={lane:2,revertLane:nt(),action:p,hasEagerState:!1,eagerState:null,next:null},Qg(r)){if(l)throw Error(i(479))}else l=rt(r,f,p,2),l!==null&amp;&amp;Pi(l,r,2)}function Qg(r){var l=r.alternate;return r===Ee||l!==null&amp;&amp;l===Ee}function WA(r,l){mc=_0=!0;var f=r.pending;f===null?l.next=l:(l.next=f.next,f.next=l),r.pending=l}function kA(r,l,f){if((f&amp;4194176)!==0){var p=l.lanes;p&amp;=r.pendingLanes,f|=p,l.lanes=f,X(r,f)}}function kx(r,l,f,p){l=r.memoizedState,f=f(p,l),f=f==null?l:wS({},l,f),r.memoizedState=f,r.lanes===0&amp;&amp;(r.updateQueue.baseState=f)}function ZA(r,l,f,p,_,A,L){return r=r.stateNode,typeof r.shouldComponentUpdate==&quot;function&quot;?r.shouldComponentUpdate(p,A,L):l.prototype&amp;&amp;l.prototype.isPureReactComponent?!Mt(f,p)||!Mt(_,A):!0}function jA(r,l,f,p){r=l.state,typeof l.componentWillReceiveProps==&quot;function&quot;&amp;&amp;l.componentWillReceiveProps(f,p),typeof l.UNSAFE_componentWillReceiveProps==&quot;function&quot;&amp;&amp;l.UNSAFE_componentWillReceiveProps(f,p),l.state!==r&amp;&amp;$S.enqueueReplaceState(l,l.state,null)}function _l(r,l){var f=l;if(&quot;ref&quot;in l){f={};for(var p in l)p!==&quot;ref&quot;&amp;&amp;(f[p]=l[p])}if(r=r.defaultProps){f===l&amp;&amp;(f=wS({},f));for(var _ in r)f[_]===void 0&amp;&amp;(f[_]=r[_])}return f}function Kg(r,l){try{var f=r.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(p){setTimeout(function(){throw p})}}function QA(r,l,f){try{var p=r.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Zx(r,l,f){return f=Ft(f),f.tag=3,f.payload={element:null},f.callback=function(){Kg(r,l)},f}function KA(r){return r=Ft(r),r.tag=3,r}function JA(r,l,f,p){var _=f.type.getDerivedStateFromError;if(typeof _==&quot;function&quot;){var A=p.value;r.payload=function(){return _(A)},r.callback=function(){QA(l,f,p)}}var L=f.stateNode;L!==null&amp;&amp;typeof L.componentDidCatch==&quot;function&quot;&amp;&amp;(r.callback=function(){QA(l,f,p),typeof _!=&quot;function&quot;&amp;&amp;(yo===null?yo=new Set([this]):yo.add(this));var F=p.stack;this.componentDidCatch(p.value,{componentStack:F!==null?F:&quot;&quot;})})}function _z(r,l,f,p,_){if(f.flags|=32768,p!==null&amp;&amp;typeof p==&quot;object&quot;&amp;&amp;typeof p.then==&quot;function&quot;){if(l=f.alternate,l!==null&amp;&amp;qh(l,f,_,!0),f=Wa.current,f!==null){switch(f.tag){case 13:return Hs===null?MS():f.alternate===null&amp;&amp;Rn===0&amp;&amp;(Rn=3),f.flags&amp;=-257,f.flags|=65536,f.lanes=_,p===v0?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([p]):l.add(p),bS(r,p,_)),!1;case 22:return f.flags|=65536,p===v0?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([p]):f.add(p)),bS(r,p,_)),!1}throw Error(i(435,f.tag))}return bS(r,p,_),MS(),!1}if(ze)return l=Wa.current,l!==null?((l.flags&amp;65536)===0&amp;&amp;(l.flags|=256),l.flags|=65536,l.lanes=_,p!==YS&amp;&amp;(r=Error(i(422),{cause:p}),re(K(r,f)))):(p!==YS&amp;&amp;(l=Error(i(423),{cause:p}),re(K(l,f))),r=r.current.alternate,r.flags|=65536,_&amp;=-_,r.lanes|=_,p=K(p,f),_=Zx(r.stateNode,p,_),ne(r,_),Rn!==4&amp;&amp;(Rn=2)),!1;var A=Error(i(520),{cause:p});if(A=K(A,f),rd===null?rd=[A]:rd.push(A),Rn!==4&amp;&amp;(Rn=2),l===null)return!0;p=K(p,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,r=_&amp;-_,f.lanes|=r,r=Zx(f.stateNode,p,r),ne(f,r),!1;case 1:if(l=f.type,A=f.stateNode,(f.flags&amp;128)===0&amp;&amp;(typeof l.getDerivedStateFromError==&quot;function&quot;||A!==null&amp;&amp;typeof A.componentDidCatch==&quot;function&quot;&amp;&amp;(yo===null||!yo.has(A))))return f.flags|=65536,_&amp;=-_,f.lanes|=_,_=KA(_),JA(_,r,f,p),ne(f,_),!1}f=f.return}while(f!==null);return!1}function hi(r,l,f,p){l.child=r===null?LR(l,null,f,p):Cl(l,r.child,f,p)}function $A(r,l,f,p,_){f=f.render;var A=l.ref;if(&quot;ref&quot;in p){var L={};for(var F in p)F!==&quot;ref&quot;&amp;&amp;(L[F]=p[F])}else L=p;return xl(l),p=ju(r,l,f,L,A,_),F=Hh(),r!==null&amp;&amp;!Jn?(Fh(r,l,_),fr(r,l,_)):(ze&amp;&amp;F&amp;&amp;xt(l),l.flags|=1,hi(r,l,p,_),l.child)}function t2(r,l,f,p,_){if(r===null){var A=f.type;return typeof A==&quot;function&quot;&amp;&amp;!TS(A)&amp;&amp;A.defaultProps===void 0&amp;&amp;f.compare===null?(l.tag=15,l.type=A,e2(r,l,A,p,_)):(r=s0(f.type,null,p,l,l.mode,_),r.ref=l.ref,r.return=l,l.child=r)}if(A=r.child,!nS(r,_)){var L=A.memoizedProps;if(f=f.compare,f=f!==null?f:Mt,f(L,p)&amp;&amp;r.ref===l.ref)return fr(r,l,_)}return l.flags|=1,r=lo(A,p),r.ref=l.ref,r.return=l,l.child=r}function e2(r,l,f,p,_){if(r!==null){var A=r.memoizedProps;if(Mt(A,p)&amp;&amp;r.ref===l.ref)if(Jn=!1,l.pendingProps=p=A,nS(r,_))(r.flags&amp;131072)!==0&amp;&amp;(Jn=!0);else return l.lanes=r.lanes,fr(r,l,_)}return jx(r,l,f,p,_)}function n2(r,l,f){var p=l.pendingProps,_=p.children,A=(l.stateNode._pendingVisibility&amp;2)!==0,L=r!==null?r.memoizedState:null;if(Xh(r,l),p.mode===&quot;hidden&quot;||A){if((l.flags&amp;128)!==0){if(p=L!==null?L.baseLanes|f:f,r!==null){for(_=l.child=r.child,A=0;_!==null;)A=A|_.lanes|_.childLanes,_=_.sibling;l.childLanes=A&amp;~p}else l.childLanes=0,l.child=null;return i2(r,l,p,f)}if((f&amp;536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&amp;&amp;t0(l,L!==null?L.cachePool:null),L!==null?ua(l,L):ku(),Ih(l);else return l.lanes=l.childLanes=536870912,i2(r,l,L!==null?L.baseLanes|f:f,f)}else L!==null?(t0(l,L.cachePool),ua(l,L),hs(l),l.memoizedState=null):(r!==null&amp;&amp;t0(l,null),ku(),hs(l));return hi(r,l,_,f),l.child}function i2(r,l,f,p){var _=rS();return _=_===null?null:{parent:mr?Tn._currentValue:Tn._currentValue2,pool:_},l.memoizedState={baseLanes:f,cachePool:_},r!==null&amp;&amp;t0(l,null),ku(),Ih(l),r!==null&amp;&amp;qh(r,l,p,!0),null}function Xh(r,l){var f=l.ref;if(f===null)r!==null&amp;&amp;r.ref!==null&amp;&amp;(l.flags|=2097664);else{if(typeof f!=&quot;function&quot;&amp;&amp;typeof f!=&quot;object&quot;)throw Error(i(284));(r===null||r.ref!==f)&amp;&amp;(l.flags|=2097664)}}function jx(r,l,f,p,_){return xl(l),f=ju(r,l,f,p,void 0,_),p=Hh(),r!==null&amp;&amp;!Jn?(Fh(r,l,_),fr(r,l,_)):(ze&amp;&amp;p&amp;&amp;xt(l),l.flags|=1,hi(r,l,f,_),l.child)}function a2(r,l,f,p,_,A){return xl(l),l.updateQueue=null,f=kg(l,p,f,_),Wg(r),p=Hh(),r!==null&amp;&amp;!Jn?(Fh(r,l,A),fr(r,l,A)):(ze&amp;&amp;p&amp;&amp;xt(l),l.flags|=1,hi(r,l,f,A),l.child)}function s2(r,l,f,p,_){if(xl(l),l.stateNode===null){var A=ac,L=f.contextType;typeof L==&quot;object&quot;&amp;&amp;L!==null&amp;&amp;(A=Si(L)),A=new f(p,A),l.memoizedState=A.state!==null&amp;&amp;A.state!==void 0?A.state:null,A.updater=$S,l.stateNode=A,A._reactInternals=l,A=l.stateNode,A.props=p,A.state=l.memoizedState,A.refs={},Tt(l),L=f.contextType,A.context=typeof L==&quot;object&quot;&amp;&amp;L!==null?Si(L):ac,A.state=l.memoizedState,L=f.getDerivedStateFromProps,typeof L==&quot;function&quot;&amp;&amp;(kx(l,f,L,p),A.state=l.memoizedState),typeof f.getDerivedStateFromProps==&quot;function&quot;||typeof A.getSnapshotBeforeUpdate==&quot;function&quot;||typeof A.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof A.componentWillMount!=&quot;function&quot;||(L=A.state,typeof A.componentWillMount==&quot;function&quot;&amp;&amp;A.componentWillMount(),typeof A.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;A.UNSAFE_componentWillMount(),L!==A.state&amp;&amp;$S.enqueueReplaceState(A,A.state,null),Nt(l,p,A,_),kt(),A.state=l.memoizedState),typeof A.componentDidMount==&quot;function&quot;&amp;&amp;(l.flags|=4194308),p=!0}else if(r===null){A=l.stateNode;var F=l.memoizedProps,W=_l(f,F);A.props=W;var ot=A.context,At=f.contextType;L=ac,typeof At==&quot;object&quot;&amp;&amp;At!==null&amp;&amp;(L=Si(At));var Pt=f.getDerivedStateFromProps;At=typeof Pt==&quot;function&quot;||typeof A.getSnapshotBeforeUpdate==&quot;function&quot;,F=l.pendingProps!==F,At||typeof A.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof A.componentWillReceiveProps!=&quot;function&quot;||(F||ot!==L)&amp;&amp;jA(l,A,p,L),po=!1;var Ht=l.memoizedState;A.state=Ht,Nt(l,p,A,_),kt(),ot=l.memoizedState,F||Ht!==ot||po?(typeof Pt==&quot;function&quot;&amp;&amp;(kx(l,f,Pt,p),ot=l.memoizedState),(W=po||ZA(l,f,W,p,Ht,ot,L))?(At||typeof A.UNSAFE_componentWillMount!=&quot;function&quot;&amp;&amp;typeof A.componentWillMount!=&quot;function&quot;||(typeof A.componentWillMount==&quot;function&quot;&amp;&amp;A.componentWillMount(),typeof A.UNSAFE_componentWillMount==&quot;function&quot;&amp;&amp;A.UNSAFE_componentWillMount()),typeof A.componentDidMount==&quot;function&quot;&amp;&amp;(l.flags|=4194308)):(typeof A.componentDidMount==&quot;function&quot;&amp;&amp;(l.flags|=4194308),l.memoizedProps=p,l.memoizedState=ot),A.props=p,A.state=ot,A.context=L,p=W):(typeof A.componentDidMount==&quot;function&quot;&amp;&amp;(l.flags|=4194308),p=!1)}else{A=l.stateNode,Wt(r,l),L=l.memoizedProps,At=_l(f,L),A.props=At,Pt=l.pendingProps,Ht=A.context,ot=f.contextType,W=ac,typeof ot==&quot;object&quot;&amp;&amp;ot!==null&amp;&amp;(W=Si(ot)),F=f.getDerivedStateFromProps,(ot=typeof F==&quot;function&quot;||typeof A.getSnapshotBeforeUpdate==&quot;function&quot;)||typeof A.UNSAFE_componentWillReceiveProps!=&quot;function&quot;&amp;&amp;typeof A.componentWillReceiveProps!=&quot;function&quot;||(L!==Pt||Ht!==W)&amp;&amp;jA(l,A,p,W),po=!1,Ht=l.memoizedState,A.state=Ht,Nt(l,p,A,_),kt();var ye=l.memoizedState;L!==Pt||Ht!==ye||po||r!==null&amp;&amp;r.dependencies!==null&amp;&amp;Jg(r.dependencies)?(typeof F==&quot;function&quot;&amp;&amp;(kx(l,f,F,p),ye=l.memoizedState),(At=po||ZA(l,f,At,p,Ht,ye,W)||r!==null&amp;&amp;r.dependencies!==null&amp;&amp;Jg(r.dependencies))?(ot||typeof A.UNSAFE_componentWillUpdate!=&quot;function&quot;&amp;&amp;typeof A.componentWillUpdate!=&quot;function&quot;||(typeof A.componentWillUpdate==&quot;function&quot;&amp;&amp;A.componentWillUpdate(p,ye,W),typeof A.UNSAFE_componentWillUpdate==&quot;function&quot;&amp;&amp;A.UNSAFE_componentWillUpdate(p,ye,W)),typeof A.componentDidUpdate==&quot;function&quot;&amp;&amp;(l.flags|=4),typeof A.getSnapshotBeforeUpdate==&quot;function&quot;&amp;&amp;(l.flags|=1024)):(typeof A.componentDidUpdate!=&quot;function&quot;||L===r.memoizedProps&amp;&amp;Ht===r.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!=&quot;function&quot;||L===r.memoizedProps&amp;&amp;Ht===r.memoizedState||(l.flags|=1024),l.memoizedProps=p,l.memoizedState=ye),A.props=p,A.state=ye,A.context=W,p=At):(typeof A.componentDidUpdate!=&quot;function&quot;||L===r.memoizedProps&amp;&amp;Ht===r.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!=&quot;function&quot;||L===r.memoizedProps&amp;&amp;Ht===r.memoizedState||(l.flags|=1024),p=!1)}return A=p,Xh(r,l),p=(l.flags&amp;128)!==0,A||p?(A=l.stateNode,f=p&amp;&amp;typeof f.getDerivedStateFromError!=&quot;function&quot;?null:A.render(),l.flags|=1,r!==null&amp;&amp;p?(l.child=Cl(l,r.child,null,_),l.child=Cl(l,null,f,_)):hi(r,l,f,_),l.memoizedState=A.state,r=l.child):r=fr(r,l,_),r}function r2(r,l,f,p){return ke(),l.flags|=256,hi(r,l,f,p),l.child}function Qx(r){return{baseLanes:r,cachePool:h2()}}function Kx(r,l,f){return r=r!==null?r.childLanes&amp;~f:0,l&amp;&amp;(r|=ka),r}function o2(r,l,f){var p=l.pendingProps,_=!1,A=(l.flags&amp;128)!==0,L;if((L=A)||(L=r!==null&amp;&amp;r.memoizedState===null?!1:(qn.current&amp;2)!==0),L&amp;&amp;(_=!0,l.flags&amp;=-129),L=(l.flags&amp;32)!==0,l.flags&amp;=-33,r===null){if(ze){if(_?Fa(l):hs(l),ze){var F=bi,W;(W=F)&amp;&amp;(F=BB(F,Is),F!==null?(l.memoizedState={dehydrated:F,treeContext:Rl!==null?{id:gr,overflow:vr}:null,retryLane:536870912},W=t(18,null,null,0),W.stateNode=F,W.return=l,l.child=W,Ii=l,bi=null,W=!0):W=!1),W||bt(l)}if(F=l.memoizedState,F!==null&amp;&amp;(F=F.dehydrated,F!==null))return FS(F)?l.lanes=16:l.lanes=536870912,null;Zi(l)}return F=p.children,p=p.fallback,_?(hs(l),_=l.mode,F=$x({mode:&quot;hidden&quot;,children:F},_),p=bl(p,_,f,null),F.return=l,p.return=l,F.sibling=p,l.child=F,_=l.child,_.memoizedState=Qx(f),_.childLanes=Kx(r,L,f),l.memoizedState=tM,p):(Fa(l),Jx(l,F))}if(W=r.memoizedState,W!==null&amp;&amp;(F=W.dehydrated,F!==null)){if(A)l.flags&amp;256?(Fa(l),l.flags&amp;=-257,l=tS(r,l,f)):l.memoizedState!==null?(hs(l),l.child=r.child,l.flags|=128,l=null):(hs(l),_=p.fallback,F=l.mode,p=$x({mode:&quot;visible&quot;,children:p.children},F),_=bl(_,F,f,null),_.flags|=2,p.return=l,_.return=l,p.sibling=_,l.child=p,Cl(l,r.child,null,f),p=l.child,p.memoizedState=Qx(f),p.childLanes=Kx(r,L,f),l.memoizedState=tM,l=_);else if(Fa(l),FS(F))L=CB(F).digest,p=Error(i(419)),p.stack=&quot;&quot;,p.digest=L,re({value:p,source:null,stack:null}),l=tS(r,l,f);else if(Jn||qh(r,l,f,!1),L=(f&amp;r.childLanes)!==0,Jn||L){if(L=un,L!==null){if(p=f&amp;-f,(p&amp;42)!==0)p=1;else switch(p){case 2:p=1;break;case 8:p=4;break;case 32:p=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:p=64;break;case 268435456:p=134217728;break;default:p=0}if(p=(p&amp;(L.suspendedLanes|f))!==0?0:p,p!==0&amp;&amp;p!==W.retryLane)throw W.retryLane=p,pt(r,p),Pi(L,r,p),BR}HS(F)||MS(),l=tS(r,l,f)}else HS(F)?(l.flags|=128,l.child=r.child,l=Uz.bind(null,r),wB(F,l),l=null):(r=W.treeContext,Va&amp;&amp;(bi=OB(F),Ii=l,ze=!0,ms=null,Is=!1,r!==null&amp;&amp;(Xa[qa++]=gr,Xa[qa++]=vr,Xa[qa++]=Rl,gr=r.id,vr=r.overflow,Rl=l)),l=Jx(l,p.children),l.flags|=4096);return l}return _?(hs(l),_=p.fallback,F=l.mode,W=r.child,A=W.sibling,p=lo(W,{mode:&quot;hidden&quot;,children:p.children}),p.subtreeFlags=W.subtreeFlags&amp;31457280,A!==null?_=lo(A,_):(_=bl(_,F,f,null),_.flags|=2),_.return=l,p.return=l,p.sibling=_,l.child=p,p=_,_=l.child,F=r.child.memoizedState,F===null?F=Qx(f):(W=F.cachePool,W!==null?(A=mr?Tn._currentValue:Tn._currentValue2,W=W.parent!==A?{parent:A,pool:A}:W):W=h2(),F={baseLanes:F.baseLanes|f,cachePool:W}),_.memoizedState=F,_.childLanes=Kx(r,L,f),l.memoizedState=tM,p):(Fa(l),f=r.child,r=f.sibling,f=lo(f,{mode:&quot;visible&quot;,children:p.children}),f.return=l,f.sibling=null,r!==null&amp;&amp;(L=l.deletions,L===null?(l.deletions=[r],l.flags|=16):L.push(r)),l.child=f,l.memoizedState=null,f)}function Jx(r,l){return l=$x({mode:&quot;visible&quot;,children:l},r.mode),l.return=r,r.child=l}function $x(r,l){return K2(r,l,0,null)}function tS(r,l,f){return Cl(l,r.child,null,f),r=Jx(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function l2(r,l,f){r.lanes|=l;var p=r.alternate;p!==null&amp;&amp;(p.lanes|=l),iS(r.return,l,f)}function eS(r,l,f,p,_){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:_}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=p,A.tail=f,A.tailMode=_)}function u2(r,l,f){var p=l.pendingProps,_=p.revealOrder,A=p.tail;if(hi(r,l,p.children,f),p=qn.current,(p&amp;2)!==0)p=p&amp;1|2,l.flags|=128;else{if(r!==null&amp;&amp;(r.flags&amp;128)!==0)t:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&amp;&amp;l2(r,f,l);else if(r.tag===19)l2(r,f,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break t;for(;r.sibling===null;){if(r.return===null||r.return===l)break t;r=r.return}r.sibling.return=r.return,r=r.sibling}p&amp;=1}switch(v(qn,p),_){case&quot;forwards&quot;:for(f=l.child,_=null;f!==null;)r=f.alternate,r!==null&amp;&amp;yl(r)===null&amp;&amp;(_=f),f=f.sibling;f=_,f===null?(_=l.child,l.child=null):(_=f.sibling,f.sibling=null),eS(l,!1,_,f,A);break;case&quot;backwards&quot;:for(f=null,_=l.child,l.child=null;_!==null;){if(r=_.alternate,r!==null&amp;&amp;yl(r)===null){l.child=_;break}r=_.sibling,_.sibling=f,f=_,_=r}eS(l,!0,f,null,A);break;case&quot;together&quot;:eS(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function fr(r,l,f){if(r!==null&amp;&amp;(l.dependencies=r.dependencies),vo|=l.lanes,(f&amp;l.childLanes)===0)if(r!==null){if(qh(r,l,f,!1),(f&amp;l.childLanes)===0)return null}else return null;if(r!==null&amp;&amp;l.child!==r.child)throw Error(i(153));if(l.child!==null){for(r=l.child,f=lo(r,r.pendingProps),l.child=f,f.return=l;r.sibling!==null;)r=r.sibling,f=f.sibling=lo(r,r.pendingProps),f.return=l;f.sibling=null}return l.child}function nS(r,l){return(r.lanes&amp;l)!==0?!0:(r=r.dependencies,!!(r!==null&amp;&amp;Jg(r)))}function xz(r,l,f){switch(l.tag){case 3:se(l,l.stateNode.containerInfo),ao(l,Tn,r.memoizedState.cache),ke();break;case 27:case 5:it(l);break;case 4:se(l,l.stateNode.containerInfo);break;case 10:ao(l,l.type,l.memoizedProps.value);break;case 13:var p=l.memoizedState;if(p!==null)return p.dehydrated!==null?(Fa(l),l.flags|=128,null):(f&amp;l.child.childLanes)!==0?o2(r,l,f):(Fa(l),r=fr(r,l,f),r!==null?r.sibling:null);Fa(l);break;case 19:var _=(r.flags&amp;128)!==0;if(p=(f&amp;l.childLanes)!==0,p||(qh(r,l,f,!1),p=(f&amp;l.childLanes)!==0),_){if(p)return u2(r,l,f);l.flags|=128}if(_=l.memoizedState,_!==null&amp;&amp;(_.rendering=null,_.tail=null,_.lastEffect=null),v(qn,qn.current),p)break;return null;case 22:case 23:return l.lanes=0,n2(r,l,f);case 24:ao(l,Tn,r.memoizedState.cache)}return fr(r,l,f)}function c2(r,l,f){if(r!==null)if(r.memoizedProps!==l.pendingProps)Jn=!0;else{if(!nS(r,f)&amp;&amp;(l.flags&amp;128)===0)return Jn=!1,xz(r,l,f);Jn=(r.flags&amp;131072)!==0}else Jn=!1,ze&amp;&amp;(l.flags&amp;1048576)!==0&amp;&amp;Ut(l,d0,l.index);switch(l.lanes=0,l.tag){case 16:t:{r=l.pendingProps;var p=l.elementType,_=p._init;if(p=_(p._payload),l.type=p,typeof p==&quot;function&quot;)TS(p)?(r=_l(p,r),l.tag=1,l=s2(null,l,p,r,f)):(l.tag=0,l=jx(null,l,p,r,f));else{if(p!=null){if(_=p.$$typeof,_===US){l.tag=11,l=$A(null,l,p,r,f);break t}else if(_===LS){l.tag=14,l=t2(null,l,p,r,f);break t}}throw l=s(p)||p,Error(i(306,l,&quot;&quot;))}}return l;case 0:return jx(r,l,l.type,l.pendingProps,f);case 1:return p=l.type,_=_l(p,l.pendingProps),s2(r,l,p,_,f);case 3:t:{if(se(l,l.stateNode.containerInfo),r===null)throw Error(i(387));var A=l.pendingProps;_=l.memoizedState,p=_.element,Wt(r,l),Nt(l,A,null,f);var L=l.memoizedState;if(A=L.cache,ao(l,Tn,A),A!==_.cache&amp;&amp;aS(l,[Tn],f,!0),kt(),A=L.element,Va&amp;&amp;_.isDehydrated)if(_={element:A,isDehydrated:!1,cache:L.cache},l.updateQueue.baseState=_,l.memoizedState=_,l.flags&amp;256){l=r2(r,l,A,f);break t}else if(A!==p){p=K(Error(i(424)),l),re(p),l=r2(r,l,A,f);break t}else for(Va&amp;&amp;(bi=NB(l.stateNode.containerInfo),Ii=l,ze=!0,ms=null,Is=!0),f=LR(l,null,A,f),l.child=f;f;)f.flags=f.flags&amp;-3|4096,f=f.sibling;else{if(ke(),A===p){l=fr(r,l,f);break t}hi(r,l,A,f)}l=l.child}return l;case 26:if(Ga)return Xh(r,l),r===null?(f=bR(l.type,null,l.pendingProps,null))?l.memoizedState=f:ze||(l.stateNode=ZB(l.type,l.pendingProps,ho.current,l)):l.memoizedState=bR(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:if(Ei)return it(l),r===null&amp;&amp;Ei&amp;&amp;ze&amp;&amp;(p=l.stateNode=DR(l.type,l.pendingProps,ho.current,di.current,!1),Ii=l,Is=!0,bi=SR(p)),p=l.pendingProps.children,r!==null||ze?hi(r,l,p,f):l.child=Cl(l,null,p,f),Xh(r,l),l.child;case 5:return r===null&amp;&amp;ze&amp;&amp;(YB(l.type,l.pendingProps,di.current),(_=p=bi)&amp;&amp;(p=LB(p,l.type,l.pendingProps,Is),p!==null?(l.stateNode=p,Ii=l,bi=SR(p),Is=!1,_=!0):_=!1),_||bt(l)),it(l),_=l.type,A=l.pendingProps,L=r!==null?r.memoizedProps:null,p=A.children,l0(_,A)?p=null:L!==null&amp;&amp;l0(_,L)&amp;&amp;(l.flags|=32),l.memoizedState!==null&amp;&amp;(_=ju(r,l,Vx,null,null,f),mr?Al._currentValue=_:Al._currentValue2=_),Xh(r,l),hi(r,l,p,f),l.child;case 6:return r===null&amp;&amp;ze&amp;&amp;(WB(l.pendingProps,di.current),(r=f=bi)&amp;&amp;(f=zB(f,l.pendingProps,Is),f!==null?(l.stateNode=f,Ii=l,bi=null,r=!0):r=!1),r||bt(l)),null;case 13:return o2(r,l,f);case 4:return se(l,l.stateNode.containerInfo),p=l.pendingProps,r===null?l.child=Cl(l,null,p,f):hi(r,l,p,f),l.child;case 11:return $A(r,l,l.type,l.pendingProps,f);case 7:return hi(r,l,l.pendingProps,f),l.child;case 8:return hi(r,l,l.pendingProps.children,f),l.child;case 12:return hi(r,l,l.pendingProps.children,f),l.child;case 10:return p=l.pendingProps,ao(l,l.type,p.value),hi(r,l,p.children,f),l.child;case 9:return _=l.type._context,p=l.pendingProps.children,xl(l),_=Si(_),p=p(_),l.flags|=1,hi(r,l,p,f),l.child;case 14:return t2(r,l,l.type,l.pendingProps,f);case 15:return e2(r,l,l.type,l.pendingProps,f);case 19:return u2(r,l,f);case 22:return n2(r,l,f);case 24:return xl(l),p=Si(Tn),r===null?(_=rS(),_===null&amp;&amp;(_=un,A=sS(),_.pooledCache=A,A.refCount++,A!==null&amp;&amp;(_.pooledCacheLanes|=f),_=A),l.memoizedState={parent:p,cache:_},Tt(l),ao(l,Tn,_)):((r.lanes&amp;f)!==0&amp;&amp;(Wt(r,l),Nt(l,null,null,f),kt()),_=r.memoizedState,A=l.memoizedState,_.parent!==p?(_={parent:p,cache:p},l.memoizedState=_,l.lanes===0&amp;&amp;(l.memoizedState=l.updateQueue.baseState=_),ao(l,Tn,p)):(p=A.cache,ao(l,Tn,p),p!==_.cache&amp;&amp;aS(l,[Tn],f,!0))),hi(r,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function ao(r,l,f){mr?(v(S0,l._currentValue),l._currentValue=f):(v(S0,l._currentValue2),l._currentValue2=f)}function hr(r){var l=S0.current;mr?r._currentValue=l:r._currentValue2=l,M(S0)}function iS(r,l,f){for(;r!==null;){var p=r.alternate;if((r.childLanes&amp;l)!==l?(r.childLanes|=l,p!==null&amp;&amp;(p.childLanes|=l)):p!==null&amp;&amp;(p.childLanes&amp;l)!==l&amp;&amp;(p.childLanes|=l),r===f)break;r=r.return}}function aS(r,l,f,p){var _=r.child;for(_!==null&amp;&amp;(_.return=r);_!==null;){var A=_.dependencies;if(A!==null){var L=_.child;A=A.firstContext;t:for(;A!==null;){var F=A;A=_;for(var W=0;W&lt;l.length;W++)if(F.context===l[W]){A.lanes|=f,F=A.alternate,F!==null&amp;&amp;(F.lanes|=f),iS(A.return,f,r),p||(L=null);break t}A=F.next}}else if(_.tag===18){if(L=_.return,L===null)throw Error(i(341));L.lanes|=f,A=L.alternate,A!==null&amp;&amp;(A.lanes|=f),iS(L,f,r),L=null}else L=_.child;if(L!==null)L.return=_;else for(L=_;L!==null;){if(L===r){L=null;break}if(_=L.sibling,_!==null){_.return=L.return,L=_;break}L=L.return}_=L}}function qh(r,l,f,p){r=null;for(var _=l,A=!1;_!==null;){if(!A){if((_.flags&amp;524288)!==0)A=!0;else if((_.flags&amp;262144)!==0)break}if(_.tag===10){var L=_.alternate;if(L===null)throw Error(i(387));if(L=L.memoizedProps,L!==null){var F=_.type;va(_.pendingProps.value,L.value)||(r!==null?r.push(F):r=[F])}}else if(_===p0.current){if(L=_.alternate,L===null)throw Error(i(387));L.memoizedState.memoizedState!==_.memoizedState.memoizedState&amp;&amp;(r!==null?r.push(Al):r=[Al])}_=_.return}r!==null&amp;&amp;aS(l,r,f,p),l.flags|=262144}function Jg(r){for(r=r.firstContext;r!==null;){var l=r.context;if(!va(mr?l._currentValue:l._currentValue2,r.memoizedValue))return!0;r=r.next}return!1}function xl(r){Nl=r,yr=null,r=r.dependencies,r!==null&amp;&amp;(r.firstContext=null)}function Si(r){return f2(Nl,r)}function $g(r,l){return Nl===null&amp;&amp;xl(r),f2(r,l)}function f2(r,l){var f=mr?l._currentValue:l._currentValue2;if(l={context:l,memoizedValue:f,next:null},yr===null){if(r===null)throw Error(i(308));yr=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else yr=yr.next=l;return f}function sS(){return{controller:new f4,data:new Map,refCount:0}}function Yh(r){r.refCount--,r.refCount===0&amp;&amp;h4(d4,function(){r.controller.abort()})}function rS(){var r=Ol.current;return r!==null?r:un.pooledCache}function t0(r,l){l===null?v(Ol,Ol.current):v(Ol,l.pool)}function h2(){var r=rS();return r===null?null:{parent:mr?Tn._currentValue:Tn._currentValue2,pool:r}}function ca(r){r.flags|=4}function d2(r,l){if(r!==null&amp;&amp;r.child===l.child)return!1;if((l.flags&amp;16)!==0)return!0;for(r=l.child;r!==null;){if((r.flags&amp;13878)!==0||(r.subtreeFlags&amp;13878)!==0)return!0;r=r.sibling}return!1}function oS(r,l,f,p){if(Mi)for(f=l.child;f!==null;){if(f.tag===5||f.tag===6)PS(r,f.stateNode);else if(!(f.tag===4||Ei&amp;&amp;f.tag===27)&amp;&amp;f.child!==null){f.child.return=f,f=f.child;continue}if(f===l)break;for(;f.sibling===null;){if(f.return===null||f.return===l)return;f=f.return}f.sibling.return=f.return,f=f.sibling}else if(fo)for(var _=l.child;_!==null;){if(_.tag===5){var A=_.stateNode;f&amp;&amp;p&amp;&amp;(A=yR(A,_.type,_.memoizedProps)),PS(r,A)}else if(_.tag===6)A=_.stateNode,f&amp;&amp;p&amp;&amp;(A=_R(A,_.memoizedProps)),PS(r,A);else if(_.tag!==4){if(_.tag===22&amp;&amp;_.memoizedState!==null)A=_.child,A!==null&amp;&amp;(A.return=_),oS(r,_,!0,!0);else if(_.child!==null){_.child.return=_,_=_.child;continue}}if(_===l)break;for(;_.sibling===null;){if(_.return===null||_.return===l)return;_=_.return}_.sibling.return=_.return,_=_.sibling}}function p2(r,l,f,p){if(fo)for(var _=l.child;_!==null;){if(_.tag===5){var A=_.stateNode;f&amp;&amp;p&amp;&amp;(A=yR(A,_.type,_.memoizedProps)),gR(r,A)}else if(_.tag===6)A=_.stateNode,f&amp;&amp;p&amp;&amp;(A=_R(A,_.memoizedProps)),gR(r,A);else if(_.tag!==4){if(_.tag===22&amp;&amp;_.memoizedState!==null)A=_.child,A!==null&amp;&amp;(A.return=_),p2(r,_,!(_.memoizedProps!==null&amp;&amp;_.memoizedProps.mode===&quot;manual&quot;),!0);else if(_.child!==null){_.child.return=_,_=_.child;continue}}if(_===l)break;for(;_.sibling===null;){if(_.return===null||_.return===l)return;_=_.return}_.sibling.return=_.return,_=_.sibling}}function m2(r,l){if(fo&amp;&amp;d2(r,l)){r=l.stateNode;var f=r.containerInfo,p=mR();p2(p,l,!1,!1),r.pendingChildren=p,ca(l),RB(f,p)}}function lS(r,l,f,p){if(Mi)r.memoizedProps!==p&amp;&amp;ca(l);else if(fo){var _=r.stateNode,A=r.memoizedProps;if((r=d2(r,l))||A!==p){var L=di.current;A=AB(_,f,A,p,!r,null),A===_?l.stateNode=_:(uR(A,f,p,L)&amp;&amp;ca(l),l.stateNode=A,r?oS(A,l,!1,!1):ca(l))}else l.stateNode=_}}function uS(r,l,f){if(tB(l,f)){if(r.flags|=16777216,!hR(l,f))if(F2())r.flags|=8192;else throw hc=v0,KS}else r.flags&amp;=-16777217}function g2(r,l){if(QB(l)){if(r.flags|=16777216,!wR(l))if(F2())r.flags|=8192;else throw hc=v0,KS}else r.flags&amp;=-16777217}function e0(r,l){l!==null&amp;&amp;(r.flags|=4),r.flags&amp;16384&amp;&amp;(l=r.tag!==22?z():536870912,r.lanes|=l,_c|=l)}function Wh(r,l){if(!ze)switch(r.tailMode){case&quot;hidden&quot;:l=r.tail;for(var f=null;l!==null;)l.alternate!==null&amp;&amp;(f=l),l=l.sibling;f===null?r.tail=null:f.sibling=null;break;case&quot;collapsed&quot;:f=r.tail;for(var p=null;f!==null;)f.alternate!==null&amp;&amp;(p=f),f=f.sibling;p===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function xn(r){var l=r.alternate!==null&amp;&amp;r.alternate.child===r.child,f=0,p=0;if(l)for(var _=r.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags&amp;31457280,p|=_.flags&amp;31457280,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)f|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=p,r.childLanes=f,l}function Sz(r,l,f){var p=l.pendingProps;switch(It(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(l),null;case 1:return xn(l),null;case 3:return f=l.stateNode,p=null,r!==null&amp;&amp;(p=r.memoizedState.cache),l.memoizedState.cache!==p&amp;&amp;(l.flags|=2048),hr(Tn),Qt(),f.pendingContext&amp;&amp;(f.context=f.pendingContext,f.pendingContext=null),(r===null||r.child===null)&amp;&amp;(te(l)?ca(l):r===null||r.memoizedState.isDehydrated&amp;&amp;(l.flags&amp;256)===0||(l.flags|=1024,ms!==null&amp;&amp;(xS(ms),ms=null))),m2(r,l),xn(l),null;case 26:if(Ga){f=l.type;var _=l.memoizedState;return r===null?(ca(l),_!==null?(xn(l),g2(l,_)):(xn(l),uS(l,f,p))):_?_!==r.memoizedState?(ca(l),xn(l),g2(l,_)):(xn(l),l.flags&amp;=-16777217):(Mi?r.memoizedProps!==p&amp;&amp;ca(l):lS(r,l,f,p),xn(l),uS(l,f,p)),null}case 27:if(Ei){if(wt(l),f=ho.current,_=l.type,r!==null&amp;&amp;l.stateNode!=null)Mi?r.memoizedProps!==p&amp;&amp;ca(l):lS(r,l,_,p);else{if(!p){if(l.stateNode===null)throw Error(i(166));return xn(l),null}r=di.current,te(l)?Jt(l,r):(r=DR(_,p,f,r,!0),l.stateNode=r,ca(l))}return xn(l),null}case 5:if(wt(l),f=l.type,r!==null&amp;&amp;l.stateNode!=null)lS(r,l,f,p);else{if(!p){if(l.stateNode===null)throw Error(i(166));return xn(l),null}r=di.current,te(l)?Jt(l,r):(_=kz(f,p,ho.current,r,l),oS(_,l,!1,!1),l.stateNode=_,uR(_,f,p,r)&amp;&amp;ca(l))}return xn(l),uS(l,l.type,l.pendingProps),null;case 6:if(r&amp;&amp;l.stateNode!=null)f=r.memoizedProps,Mi?f!==p&amp;&amp;ca(l):fo&amp;&amp;(f!==p?(l.stateNode=cR(p,ho.current,di.current,l),ca(l)):l.stateNode=r.stateNode);else{if(typeof p!=&quot;string&quot;&amp;&amp;l.stateNode===null)throw Error(i(166));if(r=ho.current,f=di.current,te(l)){if(!Va)throw Error(i(176));if(r=l.stateNode,f=l.memoizedProps,p=null,_=Ii,_!==null)switch(_.tag){case 27:case 5:p=_.memoizedProps}IB(r,f,l,p)||bt(l)}else l.stateNode=cR(p,r,f,l)}return xn(l),null;case 13:if(p=l.memoizedState,r===null||r.memoizedState!==null&amp;&amp;r.memoizedState.dehydrated!==null){if(_=te(l),p!==null&amp;&amp;p.dehydrated!==null){if(r===null){if(!_)throw Error(i(318));if(!Va)throw Error(i(344));if(_=l.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));HB(_,l)}else ke(),(l.flags&amp;128)===0&amp;&amp;(l.memoizedState=null),l.flags|=4;xn(l),_=!1}else ms!==null&amp;&amp;(xS(ms),ms=null),_=!0;if(!_)return l.flags&amp;256?(Zi(l),l):(Zi(l),null)}if(Zi(l),(l.flags&amp;128)!==0)return l.lanes=f,l;if(f=p!==null,r=r!==null&amp;&amp;r.memoizedState!==null,f){p=l.child,_=null,p.alternate!==null&amp;&amp;p.alternate.memoizedState!==null&amp;&amp;p.alternate.memoizedState.cachePool!==null&amp;&amp;(_=p.alternate.memoizedState.cachePool.pool);var A=null;p.memoizedState!==null&amp;&amp;p.memoizedState.cachePool!==null&amp;&amp;(A=p.memoizedState.cachePool.pool),A!==_&amp;&amp;(p.flags|=2048)}return f!==r&amp;&amp;f&amp;&amp;(l.child.flags|=8192),e0(l,l.updateQueue),xn(l),null;case 4:return Qt(),m2(r,l),r===null&amp;&amp;Qz(l.stateNode.containerInfo),xn(l),null;case 10:return hr(l.type),xn(l),null;case 19:if(M(qn),_=l.memoizedState,_===null)return xn(l),null;if(p=(l.flags&amp;128)!==0,A=_.rendering,A===null)if(p)Wh(_,!1);else{if(Rn!==0||r!==null&amp;&amp;(r.flags&amp;128)!==0)for(r=l.child;r!==null;){if(A=yl(r),A!==null){for(l.flags|=128,Wh(_,!1),r=A.updateQueue,l.updateQueue=r,e0(l,r),l.subtreeFlags=0,r=f,f=l.child;f!==null;)Q2(f,r),f=f.sibling;return v(qn,qn.current&amp;1|2),l.child}r=r.sibling}_.tail!==null&amp;&amp;ps()&gt;od&amp;&amp;(l.flags|=128,p=!0,Wh(_,!1),l.lanes=4194304)}else{if(!p)if(r=yl(A),r!==null){if(l.flags|=128,p=!0,r=r.updateQueue,l.updateQueue=r,e0(l,r),Wh(_,!0),_.tail===null&amp;&amp;_.tailMode===&quot;hidden&quot;&amp;&amp;!A.alternate&amp;&amp;!ze)return xn(l),null}else 2*ps()-_.renderingStartTime&gt;od&amp;&amp;f!==536870912&amp;&amp;(l.flags|=128,p=!0,Wh(_,!1),l.lanes=4194304);_.isBackwards?(A.sibling=l.child,l.child=A):(r=_.last,r!==null?r.sibling=A:l.child=A,_.last=A)}return _.tail!==null?(l=_.tail,_.rendering=l,_.tail=l.sibling,_.renderingStartTime=ps(),l.sibling=null,r=qn.current,v(qn,p?r&amp;1|2:r&amp;1),l):(xn(l),null);case 22:case 23:return Zi(l),fs(),p=l.memoizedState!==null,r!==null?r.memoizedState!==null!==p&amp;&amp;(l.flags|=8192):p&amp;&amp;(l.flags|=8192),p?(f&amp;536870912)!==0&amp;&amp;(l.flags&amp;128)===0&amp;&amp;(xn(l),l.subtreeFlags&amp;6&amp;&amp;(l.flags|=8192)):xn(l),f=l.updateQueue,f!==null&amp;&amp;e0(l,f.retryQueue),f=null,r!==null&amp;&amp;r.memoizedState!==null&amp;&amp;r.memoizedState.cachePool!==null&amp;&amp;(f=r.memoizedState.cachePool.pool),p=null,l.memoizedState!==null&amp;&amp;l.memoizedState.cachePool!==null&amp;&amp;(p=l.memoizedState.cachePool.pool),p!==f&amp;&amp;(l.flags|=2048),r!==null&amp;&amp;M(Ol),null;case 24:return f=null,r!==null&amp;&amp;(f=r.memoizedState.cache),l.memoizedState.cache!==f&amp;&amp;(l.flags|=2048),hr(Tn),xn(l),null;case 25:return null}throw Error(i(156,l.tag))}function Mz(r,l){switch(It(l),l.tag){case 1:return r=l.flags,r&amp;65536?(l.flags=r&amp;-65537|128,l):null;case 3:return hr(Tn),Qt(),r=l.flags,(r&amp;65536)!==0&amp;&amp;(r&amp;128)===0?(l.flags=r&amp;-65537|128,l):null;case 26:case 27:case 5:return wt(l),null;case 13:if(Zi(l),r=l.memoizedState,r!==null&amp;&amp;r.dehydrated!==null){if(l.alternate===null)throw Error(i(340));ke()}return r=l.flags,r&amp;65536?(l.flags=r&amp;-65537|128,l):null;case 19:return M(qn),null;case 4:return Qt(),null;case 10:return hr(l.type),null;case 22:case 23:return Zi(l),fs(),r!==null&amp;&amp;M(Ol),r=l.flags,r&amp;65536?(l.flags=r&amp;-65537|128,l):null;case 24:return hr(Tn),null;case 25:return null;default:return null}}function v2(r,l){switch(It(l),l.tag){case 3:hr(Tn),Qt();break;case 26:case 27:case 5:wt(l);break;case 4:Qt();break;case 13:Zi(l);break;case 19:M(qn);break;case 10:hr(l.type);break;case 22:case 23:Zi(l),fs(),r!==null&amp;&amp;M(Ol);break;case 24:hr(Tn)}}function kh(r,l){try{var f=l.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var _=p.next;f=_;do{if((f.tag&amp;r)===r){p=void 0;var A=f.create,L=f.inst;p=A(),L.destroy=p}f=f.next}while(f!==_)}}catch(F){je(l,l.return,F)}}function so(r,l,f){try{var p=l.updateQueue,_=p!==null?p.lastEffect:null;if(_!==null){var A=_.next;p=A;do{if((p.tag&amp;r)===r){var L=p.inst,F=L.destroy;if(F!==void 0){L.destroy=void 0,_=l;var W=f;try{F()}catch(ot){je(_,W,ot)}}}p=p.next}while(p!==A)}}catch(ot){je(l,l.return,ot)}}function y2(r){var l=r.updateQueue;if(l!==null){var f=r.stateNode;try{G(l,f)}catch(p){je(r,r.return,p)}}}function _2(r,l,f){f.props=_l(r.type,r.memoizedProps),f.state=r.memoizedState;try{f.componentWillUnmount()}catch(p){je(r,l,p)}}function Sl(r,l){try{var f=r.ref;if(f!==null){var p=r.stateNode;switch(r.tag){case 26:case 27:case 5:var _=Qh(p);break;default:_=p}typeof f==&quot;function&quot;?r.refCleanup=f(_):f.current=_}}catch(A){je(r,l,A)}}function fa(r,l){var f=r.ref,p=r.refCleanup;if(f!==null)if(typeof p==&quot;function&quot;)try{p()}catch(_){je(r,l,_)}finally{r.refCleanup=null,r=r.alternate,r!=null&amp;&amp;(r.refCleanup=null)}else if(typeof f==&quot;function&quot;)try{f(null)}catch(_){je(r,l,_)}else f.current=null}function x2(r){var l=r.type,f=r.memoizedProps,p=r.stateNode;try{mB(p,l,f,r)}catch(_){je(r,r.return,_)}}function S2(r,l,f){try{gB(r.stateNode,r.type,f,l,r)}catch(p){je(r,r.return,p)}}function M2(r){return r.tag===5||r.tag===3||(Ga?r.tag===26:!1)||(Ei?r.tag===27:!1)||r.tag===4}function cS(r){t:for(;;){for(;r.sibling===null;){if(r.return===null||M2(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&amp;&amp;r.tag!==6&amp;&amp;(!Ei||r.tag!==27)&amp;&amp;r.tag!==18;){if(r.flags&amp;2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&amp;2))return r.stateNode}}function fS(r,l,f){var p=r.tag;if(p===5||p===6)r=r.stateNode,l?yB(f,r,l):dB(f,r);else if(!(p===4||Ei&amp;&amp;p===27)&amp;&amp;(r=r.child,r!==null))for(fS(r,l,f),r=r.sibling;r!==null;)fS(r,l,f),r=r.sibling}function n0(r,l,f){var p=r.tag;if(p===5||p===6)r=r.stateNode,l?vB(f,r,l):hB(f,r);else if(!(p===4||Ei&amp;&amp;p===27)&amp;&amp;(r=r.child,r!==null))for(n0(r,l,f),r=r.sibling;r!==null;)n0(r,l,f),r=r.sibling}function E2(r,l,f){r=r.containerInfo;try{vR(r,f)}catch(p){je(l,l.return,p)}}function Ez(r,l){for(Yz(r.containerInfo),$n=l;$n!==null;)if(r=$n,l=r.child,(r.subtreeFlags&amp;1028)!==0&amp;&amp;l!==null)l.return=r,$n=l;else for(;$n!==null;){r=$n;var f=r.alternate;switch(l=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((l&amp;1024)!==0&amp;&amp;f!==null){l=void 0;var p=r,_=f.memoizedProps;f=f.memoizedState;var A=p.stateNode;try{var L=_l(p.type,_,p.elementType===p.type);l=A.getSnapshotBeforeUpdate(L,f),A.__reactInternalSnapshotBeforeUpdate=l}catch(F){je(p,p.return,F)}}break;case 3:(l&amp;1024)!==0&amp;&amp;Mi&amp;&amp;TB(r.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&amp;1024)!==0)throw Error(i(163))}if(l=r.sibling,l!==null){l.return=r.return,$n=l;break}$n=r.return}return L=HR,HR=!1,L}function b2(r,l,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:dr(r,f),p&amp;4&amp;&amp;kh(5,f);break;case 1:if(dr(r,f),p&amp;4)if(r=f.stateNode,l===null)try{r.componentDidMount()}catch(F){je(f,f.return,F)}else{var _=_l(f.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(_,l,r.__reactInternalSnapshotBeforeUpdate)}catch(F){je(f,f.return,F)}}p&amp;64&amp;&amp;y2(f),p&amp;512&amp;&amp;Sl(f,f.return);break;case 3:if(dr(r,f),p&amp;64&amp;&amp;(p=f.updateQueue,p!==null)){if(r=null,f.child!==null)switch(f.child.tag){case 27:case 5:r=Qh(f.child.stateNode);break;case 1:r=f.child.stateNode}try{G(p,r)}catch(F){je(f,f.return,F)}}break;case 26:if(Ga){dr(r,f),p&amp;512&amp;&amp;Sl(f,f.return);break}case 27:case 5:dr(r,f),l===null&amp;&amp;p&amp;4&amp;&amp;x2(f),p&amp;512&amp;&amp;Sl(f,f.return);break;case 12:dr(r,f);break;case 13:dr(r,f),p&amp;4&amp;&amp;A2(r,f);break;case 22:if(_=f.memoizedState!==null||_r,!_){l=l!==null&amp;&amp;l.memoizedState!==null||An;var A=_r,L=An;_r=_,(An=l)&amp;&amp;!L?ro(r,f,(f.subtreeFlags&amp;8772)!==0):dr(r,f),_r=A,An=L}p&amp;512&amp;&amp;(f.memoizedProps.mode===&quot;manual&quot;?Sl(f,f.return):fa(f,f.return));break;default:dr(r,f)}}function T2(r){var l=r.alternate;l!==null&amp;&amp;(r.alternate=null,T2(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&amp;&amp;(l=r.stateNode,l!==null&amp;&amp;$z(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ds(r,l,f){for(f=f.child;f!==null;)hS(r,l,f),f=f.sibling}function hS(r,l,f){if(ga&amp;&amp;typeof ga.onCommitFiberUnmount==&quot;function&quot;)try{ga.onCommitFiberUnmount($h,f)}catch{}switch(f.tag){case 26:if(Ga){An||fa(f,l),ds(r,l,f),f.memoizedState?AR(f.memoizedState):f.stateNode&amp;&amp;CR(f.stateNode);break}case 27:if(Ei){An||fa(f,l);var p=Pn,_=ya;Pn=f.stateNode,ds(r,l,f),t4(f.stateNode),Pn=p,ya=_;break}case 5:An||fa(f,l);case 6:if(Mi){if(p=Pn,_=ya,Pn=null,ds(r,l,f),Pn=p,ya=_,Pn!==null)if(ya)try{xB(Pn,f.stateNode)}catch(A){je(f,l,A)}else try{_B(Pn,f.stateNode)}catch(A){je(f,l,A)}}else ds(r,l,f);break;case 18:Mi&amp;&amp;Pn!==null&amp;&amp;(ya?qB(Pn,f.stateNode):XB(Pn,f.stateNode));break;case 4:Mi?(p=Pn,_=ya,Pn=f.stateNode.containerInfo,ya=!0,ds(r,l,f),Pn=p,ya=_):(fo&amp;&amp;E2(f.stateNode,f,mR()),ds(r,l,f));break;case 0:case 11:case 14:case 15:An||so(2,f,l),An||so(4,f,l),ds(r,l,f);break;case 1:An||(fa(f,l),p=f.stateNode,typeof p.componentWillUnmount==&quot;function&quot;&amp;&amp;_2(f,l,p)),ds(r,l,f);break;case 21:ds(r,l,f);break;case 22:An||fa(f,l),An=(p=An)||f.memoizedState!==null,ds(r,l,f),An=p;break;default:ds(r,l,f)}}function A2(r,l){if(Va&amp;&amp;l.memoizedState===null&amp;&amp;(r=l.alternate,r!==null&amp;&amp;(r=r.memoizedState,r!==null&amp;&amp;(r=r.dehydrated,r!==null))))try{GB(r)}catch(f){je(l,l.return,f)}}function bz(r){switch(r.tag){case 13:case 19:var l=r.stateNode;return l===null&amp;&amp;(l=r.stateNode=new IR),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&amp;&amp;(l=r._retryCache=new IR),l;default:throw Error(i(435,r.tag))}}function dS(r,l){var f=bz(r);l.forEach(function(p){var _=Nz.bind(null,r,p);f.has(p)||(f.add(p),p.then(_,_))})}function ji(r,l){var f=l.deletions;if(f!==null)for(var p=0;p&lt;f.length;p++){var _=f[p],A=r,L=l;if(Mi){var F=L;t:for(;F!==null;){switch(F.tag){case 27:case 5:Pn=F.stateNode,ya=!1;break t;case 3:Pn=F.stateNode.containerInfo,ya=!0;break t;case 4:Pn=F.stateNode.containerInfo,ya=!0;break t}F=F.return}if(Pn===null)throw Error(i(160));hS(A,L,_),Pn=null,ya=!1}else hS(A,L,_);A=_.alternate,A!==null&amp;&amp;(A.return=null),_.return=null}if(l.subtreeFlags&amp;13878)for(l=l.child;l!==null;)R2(l,r),l=l.sibling}function R2(r,l){var f=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ji(l,r),ha(r),p&amp;4&amp;&amp;(so(3,r,r.return),kh(3,r),so(5,r,r.return));break;case 1:ji(l,r),ha(r),p&amp;512&amp;&amp;(An||f===null||fa(f,f.return)),p&amp;64&amp;&amp;_r&amp;&amp;(r=r.updateQueue,r!==null&amp;&amp;(p=r.callbacks,p!==null&amp;&amp;(f=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:if(Ga){var _=gs;ji(l,r),ha(r),p&amp;512&amp;&amp;(An||f===null||fa(f,f.return)),p&amp;4&amp;&amp;(p=f!==null?f.memoizedState:null,l=r.memoizedState,f===null?l===null?r.stateNode===null?r.stateNode=kB(_,r.type,r.memoizedProps,r):RR(_,r.type,r.stateNode):r.stateNode=TR(_,l,r.memoizedProps):p!==l?(p===null?f.stateNode!==null&amp;&amp;CR(f.stateNode):AR(p),l===null?RR(_,r.type,r.stateNode):TR(_,l,r.memoizedProps)):l===null&amp;&amp;r.stateNode!==null&amp;&amp;S2(r,r.memoizedProps,f.memoizedProps));break}case 27:if(Ei&amp;&amp;p&amp;4&amp;&amp;r.alternate===null){_=r.stateNode;var A=r.memoizedProps;try{JB(_),$B(r.type,A,_,r)}catch(At){je(r,r.return,At)}}case 5:if(ji(l,r),ha(r),p&amp;512&amp;&amp;(An||f===null||fa(f,f.return)),Mi){if(r.flags&amp;32){l=r.stateNode;try{pR(l)}catch(At){je(r,r.return,At)}}p&amp;4&amp;&amp;r.stateNode!=null&amp;&amp;(l=r.memoizedProps,S2(r,l,f!==null?f.memoizedProps:l)),p&amp;1024&amp;&amp;(eM=!0)}break;case 6:if(ji(l,r),ha(r),p&amp;4&amp;&amp;Mi){if(r.stateNode===null)throw Error(i(162));p=r.memoizedProps,f=f!==null?f.memoizedProps:p,l=r.stateNode;try{pB(l,f,p)}catch(At){je(r,r.return,At)}}break;case 3:if(Ga?(jB(),_=gs,gs=VS(l.containerInfo),ji(l,r),gs=_):ji(l,r),ha(r),p&amp;4){if(Mi&amp;&amp;Va&amp;&amp;f!==null&amp;&amp;f.memoizedState.isDehydrated)try{VB(l.containerInfo)}catch(At){je(r,r.return,At)}if(fo){p=l.containerInfo,f=l.pendingChildren;try{vR(p,f)}catch(At){je(r,r.return,At)}}}eM&amp;&amp;(eM=!1,C2(r));break;case 4:Ga?(f=gs,gs=VS(r.stateNode.containerInfo),ji(l,r),ha(r),gs=f):(ji(l,r),ha(r)),p&amp;4&amp;&amp;fo&amp;&amp;E2(r.stateNode,r,r.stateNode.pendingChildren);break;case 12:ji(l,r),ha(r);break;case 13:ji(l,r),ha(r),r.child.flags&amp;8192&amp;&amp;r.memoizedState!==null!=(f!==null&amp;&amp;f.memoizedState!==null)&amp;&amp;(sM=ps()),p&amp;4&amp;&amp;(p=r.updateQueue,p!==null&amp;&amp;(r.updateQueue=null,dS(r,p)));break;case 22:p&amp;512&amp;&amp;(An||f===null||fa(f,f.return)),_=r.memoizedState!==null;var L=f!==null&amp;&amp;f.memoizedState!==null,F=_r,W=An;if(_r=F||_,An=W||L,ji(l,r),An=W,_r=F,ha(r),l=r.stateNode,l._current=r,l._visibility&amp;=-3,l._visibility|=l._pendingVisibility&amp;2,p&amp;8192&amp;&amp;(l._visibility=_?l._visibility&amp;-2:l._visibility|1,_&amp;&amp;(l=_r||An,f===null||L||l||Qu(r)),Mi&amp;&amp;(r.memoizedProps===null||r.memoizedProps.mode!==&quot;manual&quot;))){t:if(f=null,Mi)for(l=r;;){if(l.tag===5||Ga&amp;&amp;l.tag===26||Ei&amp;&amp;l.tag===27){if(f===null){L=f=l;try{A=L.stateNode,_?SB(A):EB(L.stateNode,L.memoizedProps)}catch(At){je(L,L.return,At)}}}else if(l.tag===6){if(f===null){L=l;try{var ot=L.stateNode;_?MB(ot):bB(ot,L.memoizedProps)}catch(At){je(L,L.return,At)}}}else if((l.tag!==22&amp;&amp;l.tag!==23||l.memoizedState===null||l===r)&amp;&amp;l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break t;for(;l.sibling===null;){if(l.return===null||l.return===r)break t;f===l&amp;&amp;(f=null),l=l.return}f===l&amp;&amp;(f=null),l.sibling.return=l.return,l=l.sibling}}p&amp;4&amp;&amp;(p=r.updateQueue,p!==null&amp;&amp;(f=p.retryQueue,f!==null&amp;&amp;(p.retryQueue=null,dS(r,f))));break;case 19:ji(l,r),ha(r),p&amp;4&amp;&amp;(p=r.updateQueue,p!==null&amp;&amp;(r.updateQueue=null,dS(r,p)));break;case 21:break;default:ji(l,r),ha(r)}}function ha(r){var l=r.flags;if(l&amp;2){try{if(Mi&amp;&amp;(!Ei||r.tag!==27)){t:{for(var f=r.return;f!==null;){if(M2(f)){var p=f;break t}f=f.return}throw Error(i(160))}switch(p.tag){case 27:if(Ei){var _=p.stateNode,A=cS(r);n0(r,A,_);break}case 5:var L=p.stateNode;p.flags&amp;32&amp;&amp;(pR(L),p.flags&amp;=-33);var F=cS(r);n0(r,F,L);break;case 3:case 4:var W=p.stateNode.containerInfo,ot=cS(r);fS(r,ot,W);break;default:throw Error(i(161))}}}catch(At){je(r,r.return,At)}r.flags&amp;=-3}l&amp;4096&amp;&amp;(r.flags&amp;=-4097)}function C2(r){if(r.subtreeFlags&amp;1024)for(r=r.child;r!==null;){var l=r;C2(l),l.tag===5&amp;&amp;l.flags&amp;1024&amp;&amp;iB(l.stateNode),r=r.sibling}}function dr(r,l){if(l.subtreeFlags&amp;8772)for(l=l.child;l!==null;)b2(r,l.alternate,l),l=l.sibling}function Qu(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:so(4,l,l.return),Qu(l);break;case 1:fa(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount==&quot;function&quot;&amp;&amp;_2(l,l.return,f),Qu(l);break;case 26:case 27:case 5:fa(l,l.return),Qu(l);break;case 22:fa(l,l.return),l.memoizedState===null&amp;&amp;Qu(l);break;default:Qu(l)}r=r.sibling}}function ro(r,l,f){for(f=f&amp;&amp;(l.subtreeFlags&amp;8772)!==0,l=l.child;l!==null;){var p=l.alternate,_=r,A=l,L=A.flags;switch(A.tag){case 0:case 11:case 15:ro(_,A,f),kh(4,A);break;case 1:if(ro(_,A,f),p=A,_=p.stateNode,typeof _.componentDidMount==&quot;function&quot;)try{_.componentDidMount()}catch(ot){je(p,p.return,ot)}if(p=A,_=p.updateQueue,_!==null){var F=p.stateNode;try{var W=_.shared.hiddenCallbacks;if(W!==null)for(_.shared.hiddenCallbacks=null,_=0;_&lt;W.length;_++)me(W[_],F)}catch(ot){je(p,p.return,ot)}}f&amp;&amp;L&amp;64&amp;&amp;y2(A),Sl(A,A.return);break;case 26:case 27:case 5:ro(_,A,f),f&amp;&amp;p===null&amp;&amp;L&amp;4&amp;&amp;x2(A),Sl(A,A.return);break;case 12:ro(_,A,f);break;case 13:ro(_,A,f),f&amp;&amp;L&amp;4&amp;&amp;A2(_,A);break;case 22:A.memoizedState===null&amp;&amp;ro(_,A,f),Sl(A,A.return);break;default:ro(_,A,f)}l=l.sibling}}function pS(r,l){var f=null;r!==null&amp;&amp;r.memoizedState!==null&amp;&amp;r.memoizedState.cachePool!==null&amp;&amp;(f=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&amp;&amp;l.memoizedState.cachePool!==null&amp;&amp;(r=l.memoizedState.cachePool.pool),r!==f&amp;&amp;(r!=null&amp;&amp;r.refCount++,f!=null&amp;&amp;Yh(f))}function mS(r,l){r=null,l.alternate!==null&amp;&amp;(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&amp;&amp;(l.refCount++,r!=null&amp;&amp;Yh(r))}function oo(r,l,f,p){if(l.subtreeFlags&amp;10256)for(l=l.child;l!==null;)w2(r,l,f,p),l=l.sibling}function w2(r,l,f,p){var _=l.flags;switch(l.tag){case 0:case 11:case 15:oo(r,l,f,p),_&amp;2048&amp;&amp;kh(9,l);break;case 3:oo(r,l,f,p),_&amp;2048&amp;&amp;(r=null,l.alternate!==null&amp;&amp;(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&amp;&amp;(l.refCount++,r!=null&amp;&amp;Yh(r)));break;case 12:if(_&amp;2048){oo(r,l,f,p),r=l.stateNode;try{var A=l.memoizedProps,L=A.id,F=A.onPostCommit;typeof F==&quot;function&quot;&amp;&amp;F(L,l.alternate===null?&quot;mount&quot;:&quot;update&quot;,r.passiveEffectDuration,-0)}catch(W){je(l,l.return,W)}}else oo(r,l,f,p);break;case 23:break;case 22:A=l.stateNode,l.memoizedState!==null?A._visibility&amp;4?oo(r,l,f,p):Zh(r,l):A._visibility&amp;4?oo(r,l,f,p):(A._visibility|=4,Ku(r,l,f,p,(l.subtreeFlags&amp;10256)!==0)),_&amp;2048&amp;&amp;pS(l.alternate,l);break;case 24:oo(r,l,f,p),_&amp;2048&amp;&amp;mS(l.alternate,l);break;default:oo(r,l,f,p)}}function Ku(r,l,f,p,_){for(_=_&amp;&amp;(l.subtreeFlags&amp;10256)!==0,l=l.child;l!==null;){var A=r,L=l,F=f,W=p,ot=L.flags;switch(L.tag){case 0:case 11:case 15:Ku(A,L,F,W,_),kh(8,L);break;case 23:break;case 22:var At=L.stateNode;L.memoizedState!==null?At._visibility&amp;4?Ku(A,L,F,W,_):Zh(A,L):(At._visibility|=4,Ku(A,L,F,W,_)),_&amp;&amp;ot&amp;2048&amp;&amp;pS(L.alternate,L);break;case 24:Ku(A,L,F,W,_),_&amp;&amp;ot&amp;2048&amp;&amp;mS(L.alternate,L);break;default:Ku(A,L,F,W,_)}l=l.sibling}}function Zh(r,l){if(l.subtreeFlags&amp;10256)for(l=l.child;l!==null;){var f=r,p=l,_=p.flags;switch(p.tag){case 22:Zh(f,p),_&amp;2048&amp;&amp;pS(p.alternate,p);break;case 24:Zh(f,p),_&amp;2048&amp;&amp;mS(p.alternate,p);break;default:Zh(f,p)}l=l.sibling}}function Ml(r){if(r.subtreeFlags&amp;vc)for(r=r.child;r!==null;)D2(r),r=r.sibling}function D2(r){switch(r.tag){case 26:Ml(r),r.flags&amp;vc&amp;&amp;(r.memoizedState!==null?KB(gs,r.memoizedState,r.memoizedProps):dR(r.type,r.memoizedProps));break;case 5:Ml(r),r.flags&amp;vc&amp;&amp;dR(r.type,r.memoizedProps);break;case 3:case 4:if(Ga){var l=gs;gs=VS(r.stateNode.containerInfo),Ml(r),gs=l}else Ml(r);break;case 22:r.memoizedState===null&amp;&amp;(l=r.alternate,l!==null&amp;&amp;l.memoizedState!==null?(l=vc,vc=16777216,Ml(r),vc=l):Ml(r));break;default:Ml(r)}}function U2(r){var l=r.alternate;if(l!==null&amp;&amp;(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function jh(r){var l=r.deletions;if((r.flags&amp;16)!==0){if(l!==null)for(var f=0;f&lt;l.length;f++){var p=l[f];$n=p,O2(p,r)}U2(r)}if(r.subtreeFlags&amp;10256)for(r=r.child;r!==null;)N2(r),r=r.sibling}function N2(r){switch(r.tag){case 0:case 11:case 15:jh(r),r.flags&amp;2048&amp;&amp;so(9,r,r.return);break;case 3:jh(r);break;case 12:jh(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&amp;&amp;l._visibility&amp;4&amp;&amp;(r.return===null||r.return.tag!==13)?(l._visibility&amp;=-5,i0(r)):jh(r);break;default:jh(r)}}function i0(r){var l=r.deletions;if((r.flags&amp;16)!==0){if(l!==null)for(var f=0;f&lt;l.length;f++){var p=l[f];$n=p,O2(p,r)}U2(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:so(8,l,l.return),i0(l);break;case 22:f=l.stateNode,f._visibility&amp;4&amp;&amp;(f._visibility&amp;=-5,i0(l));break;default:i0(l)}r=r.sibling}}function O2(r,l){for(;$n!==null;){var f=$n;switch(f.tag){case 0:case 11:case 15:so(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&amp;&amp;f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&amp;&amp;p.refCount++}break;case 24:Yh(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,$n=p;else t:for(f=r;$n!==null;){p=$n;var _=p.sibling,A=p.return;if(T2(p),p===f){$n=null;break t}if(_!==null){_.return=A,$n=_;break t}$n=A}}}function gS(r){var l=fR(r);if(l!=null){if(typeof l.memoizedProps[&quot;data-testname&quot;]!=&quot;string&quot;)throw Error(i(364));return l}if(r=rB(r),r===null)throw Error(i(362));return r.stateNode.current}function vS(r,l){var f=r.tag;switch(l.$$typeof){case M0:if(r.type===l.value)return!0;break;case E0:t:{for(l=l.value,r=[r,0],f=0;f&lt;r.length;){var p=r[f++],_=p.tag,A=r[f++],L=l[A];if(_!==5&amp;&amp;_!==26&amp;&amp;_!==27||!Jh(p)){for(;L!=null&amp;&amp;vS(p,L);)A++,L=l[A];if(A===l.length){l=!0;break t}else for(p=p.child;p!==null;)r.push(p,A),p=p.sibling}}l=!1}return l;case b0:if((f===5||f===26||f===27)&amp;&amp;uB(r.stateNode,l.value))return!0;break;case A0:if((f===5||f===6||f===26||f===27)&amp;&amp;(r=lB(r),r!==null&amp;&amp;0&lt;=r.indexOf(l.value)))return!0;break;case T0:if((f===5||f===26||f===27)&amp;&amp;(r=r.memoizedProps[&quot;data-testname&quot;],typeof r==&quot;string&quot;&amp;&amp;r.toLowerCase()===l.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function yS(r){switch(r.$$typeof){case M0:return&quot;&lt;&quot;+(s(r.value)||&quot;Unknown&quot;)+&quot;&gt;&quot;;case E0:return&quot;:has(&quot;+(yS(r)||&quot;&quot;)+&quot;)&quot;;case b0:return&#39;[role=&quot;&#39;+r.value+&#39;&quot;]&#39;;case A0:return&#39;&quot;&#39;+r.value+&#39;&quot;&#39;;case T0:return&#39;[data-testname=&quot;&#39;+r.value+&#39;&quot;]&#39;;default:throw Error(i(365))}}function L2(r,l){var f=[];r=[r,0];for(var p=0;p&lt;r.length;){var _=r[p++],A=_.tag,L=r[p++],F=l[L];if(A!==5&amp;&amp;A!==26&amp;&amp;A!==27||!Jh(_)){for(;F!=null&amp;&amp;vS(_,F);)L++,F=l[L];if(L===l.length)f.push(_);else for(_=_.child;_!==null;)r.push(_,L),_=_.sibling}}return f}function _S(r,l){if(!Kh)throw Error(i(363));r=gS(r),r=L2(r,l),l=[],r=Array.from(r);for(var f=0;f&lt;r.length;){var p=r[f++],_=p.tag;if(_===5||_===26||_===27)Jh(p)||l.push(p.stateNode);else for(p=p.child;p!==null;)r.push(p),p=p.sibling}return l}function da(){if(($e&amp;2)!==0&amp;&amp;Ue!==0)return Ue&amp;-Ue;if(pe.T!==null){var r=cc;return r!==0?r:nt()}return Kz()}function z2(){ka===0&amp;&amp;(ka=(Ue&amp;536870912)===0||ze?O():536870912);var r=Wa.current;return r!==null&amp;&amp;(r.flags|=32),ka}function Pi(r,l,f){(r===un&amp;&amp;cn===2||r.cancelPendingCommit!==null)&amp;&amp;(Ju(r,0),pr(r,Ue,ka,!1)),R(r,f),(($e&amp;2)===0||r!==un)&amp;&amp;(r===un&amp;&amp;(($e&amp;2)===0&amp;&amp;(Ll|=f),Rn===4&amp;&amp;pr(r,Ue,ka,!1)),dt(r))}function B2(r,l,f){if(($e&amp;6)!==0)throw Error(i(327));var p=!f&amp;&amp;(l&amp;60)===0&amp;&amp;(l&amp;r.expiredLanes)===0||w(r,l),_=p?Rz(r,l):ES(r,l,!0),A=p;do{if(_===0){yc&amp;&amp;!p&amp;&amp;pr(r,l,0,!1);break}else if(_===6)pr(r,l,0,!xr);else{if(f=r.current.alternate,A&amp;&amp;!Tz(f)){_=ES(r,l,!1),A=!1;continue}if(_===2){if(A=l,r.errorRecoveryDisabledLanes&amp;A)var L=0;else L=r.pendingLanes&amp;-536870913,L=L!==0?L:L&amp;536870912?536870912:0;if(L!==0){l=L;t:{var F=r;_=rd;var W=Va&amp;&amp;F.current.memoizedState.isDehydrated;if(W&amp;&amp;(Ju(F,L).flags|=256),L=ES(F,L,!1),L!==2){if(nM&amp;&amp;!W){F.errorRecoveryDisabledLanes|=A,Ll|=A,_=4;break t}A=Vs,Vs=_,A!==null&amp;&amp;xS(A)}_=L}if(A=!1,_!==2)continue}}if(_===1){Ju(r,0),pr(r,l,0,!0);break}t:{switch(p=r,_){case 0:case 1:throw Error(i(345));case 4:if((l&amp;4194176)===l){pr(p,l,ka,!xr);break t}break;case 2:Vs=null;break;case 3:case 5:break;default:throw Error(i(329))}if(p.finishedWork=f,p.finishedLanes=l,(l&amp;62914560)===l&amp;&amp;(A=sM+300-ps(),10&lt;A)){if(pr(p,l,ka,!xr),T(p,0)!==0)break t;p.timeoutHandle=Zz(P2.bind(null,p,f,Vs,R0,aM,l,ka,Ll,_c,xr,2,-0,0),A);break t}P2(p,f,Vs,R0,aM,l,ka,Ll,_c,xr,0,-0,0)}}break}while(!0);dt(r)}function xS(r){Vs===null?Vs=r:Vs.push.apply(Vs,r)}function P2(r,l,f,p,_,A,L,F,W,ot,At,Pt,Ht){var ye=l.subtreeFlags;if((ye&amp;8192||(ye&amp;16785408)===16785408)&amp;&amp;(eB(),D2(l),l=nB(),l!==null)){r.cancelPendingCommit=l(W2.bind(null,r,f,p,_,L,F,W,1,Pt,Ht)),pr(r,A,L,!ot);return}W2(r,f,p,_,L,F,W,At,Pt,Ht)}function Tz(r){for(var l=r;;){var f=l.tag;if((f===0||f===11||f===15)&amp;&amp;l.flags&amp;16384&amp;&amp;(f=l.updateQueue,f!==null&amp;&amp;(f=f.stores,f!==null)))for(var p=0;p&lt;f.length;p++){var _=f[p],A=_.getSnapshot;_=_.value;try{if(!va(A(),_))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&amp;16384&amp;&amp;f!==null)f.return=l,l=f;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function pr(r,l,f,p){l&amp;=~iM,l&amp;=~Ll,r.suspendedLanes|=l,r.pingedLanes&amp;=~l,p&amp;&amp;(r.warmLanes|=l),p=r.expirationTimes;for(var _=l;0&lt;_;){var A=31-ma(_),L=1&lt;&lt;A;p[A]=-1,_&amp;=~L}f!==0&amp;&amp;j(r,f,l)}function I2(){return($e&amp;6)===0?(Rt(0,!1),!1):!0}function SS(){if(Ae!==null){if(cn===0)var r=Ae.return;else r=Ae,yr=Nl=null,Vh(r),dc=null,id=0,r=Ae;for(;r!==null;)v2(r.alternate,r),r=r.return;Ae=null}}function Ju(r,l){r.finishedWork=null,r.finishedLanes=0;var f=r.timeoutHandle;f!==IS&amp;&amp;(r.timeoutHandle=IS,jz(f)),f=r.cancelPendingCommit,f!==null&amp;&amp;(r.cancelPendingCommit=null,f()),SS(),un=r,Ae=f=lo(r.current,null),Ue=l,cn=0,_a=null,xr=!1,yc=w(r,l),nM=!1,_c=ka=iM=Ll=vo=Rn=0,Vs=rd=null,aM=!1,(l&amp;8)!==0&amp;&amp;(l|=l&amp;32);var p=r.entangledLanes;if(p!==0)for(r=r.entanglements,p&amp;=l;0&lt;p;){var _=31-ma(p),A=1&lt;&lt;_;l|=r[_],p&amp;=~A}return Sr=l,H(),f}function H2(r,l){Ee=null,pe.H=Fs,l===nd?(l=ut(),cn=3):l===KS?(l=ut(),cn=4):cn=l===BR?8:l!==null&amp;&amp;typeof l==&quot;object&quot;&amp;&amp;typeof l.then==&quot;function&quot;?6:1,_a=l,Ae===null&amp;&amp;(Rn=1,Kg(r,K(l,r.current)))}function F2(){var r=Wa.current;return r===null?!0:(Ue&amp;4194176)===Ue?Hs===null:(Ue&amp;62914560)===Ue||(Ue&amp;536870912)!==0?r===Hs:!1}function V2(){var r=pe.H;return pe.H=Fs,r===null?Fs:r}function G2(){var r=pe.A;return pe.A=p4,r}function MS(){Rn=4,xr||(Ue&amp;4194176)!==Ue&amp;&amp;Wa.current!==null||(yc=!0),(vo&amp;134217727)===0&amp;&amp;(Ll&amp;134217727)===0||un===null||pr(un,Ue,ka,!1)}function ES(r,l,f){var p=$e;$e|=2;var _=V2(),A=G2();(un!==r||Ue!==l)&amp;&amp;(R0=null,Ju(r,l)),l=!1;var L=Rn;t:do try{if(cn!==0&amp;&amp;Ae!==null){var F=Ae,W=_a;switch(cn){case 8:SS(),L=6;break t;case 3:case 2:case 6:Wa.current===null&amp;&amp;(l=!0);var ot=cn;if(cn=0,_a=null,$u(r,F,W,ot),f&amp;&amp;yc){L=0;break t}break;default:ot=cn,cn=0,_a=null,$u(r,F,W,ot)}}Az(),L=Rn;break}catch(At){H2(r,At)}while(!0);return l&amp;&amp;r.shellSuspendCounter++,yr=Nl=null,$e=p,pe.H=_,pe.A=A,Ae===null&amp;&amp;(un=null,Ue=0,H()),L}function Az(){for(;Ae!==null;)X2(Ae)}function Rz(r,l){var f=$e;$e|=2;var p=V2(),_=G2();un!==r||Ue!==l?(R0=null,od=ps()+500,Ju(r,l)):yc=w(r,l);t:do try{if(cn!==0&amp;&amp;Ae!==null){l=Ae;var A=_a;e:switch(cn){case 1:cn=0,_a=null,$u(r,l,A,1);break;case 2:if(Dt(A)){cn=0,_a=null,q2(l);break}l=function(){cn===2&amp;&amp;un===r&amp;&amp;(cn=7),dt(r)},A.then(l,l);break t;case 3:cn=7;break t;case 4:cn=5;break t;case 7:Dt(A)?(cn=0,_a=null,q2(l)):(cn=0,_a=null,$u(r,l,A,7));break;case 5:var L=null;switch(Ae.tag){case 26:L=Ae.memoizedState;case 5:case 27:var F=Ae,W=F.type,ot=F.pendingProps;if(L?wR(L):hR(W,ot)){cn=0,_a=null;var At=F.sibling;if(At!==null)Ae=At;else{var Pt=F.return;Pt!==null?(Ae=Pt,a0(Pt)):Ae=null}break e}}cn=0,_a=null,$u(r,l,A,5);break;case 6:cn=0,_a=null,$u(r,l,A,6);break;case 8:SS(),Rn=6;break t;default:throw Error(i(462))}}Cz();break}catch(Ht){H2(r,Ht)}while(!0);return yr=Nl=null,pe.H=p,pe.A=_,$e=f,Ae!==null?0:(un=null,Ue=0,H(),Rn)}function Cz(){for(;Ae!==null&amp;&amp;!i4();)X2(Ae)}function X2(r){var l=c2(r.alternate,r,Sr);r.memoizedProps=r.pendingProps,l===null?a0(r):Ae=l}function q2(r){var l=r,f=l.alternate;switch(l.tag){case 15:case 0:l=a2(f,l,l.pendingProps,l.type,void 0,Ue);break;case 11:l=a2(f,l,l.pendingProps,l.type.render,l.ref,Ue);break;case 5:Vh(l);default:v2(f,l),l=Ae=Q2(l,Sr),l=c2(f,l,Sr)}r.memoizedProps=r.pendingProps,l===null?a0(r):Ae=l}function $u(r,l,f,p){yr=Nl=null,Vh(l),dc=null,id=0;var _=l.return;try{if(_z(r,_,l,f,Ue)){Rn=1,Kg(r,K(f,r.current)),Ae=null;return}}catch(A){if(_!==null)throw Ae=_,A;Rn=1,Kg(r,K(f,r.current)),Ae=null;return}l.flags&amp;32768?(ze||p===1?r=!0:yc||(Ue&amp;536870912)!==0?r=!1:(xr=r=!0,(p===2||p===3||p===6)&amp;&amp;(p=Wa.current,p!==null&amp;&amp;p.tag===13&amp;&amp;(p.flags|=16384))),Y2(l,r)):a0(l)}function a0(r){var l=r;do{if((l.flags&amp;32768)!==0){Y2(l,xr);return}r=l.return;var f=Sz(l.alternate,l,Sr);if(f!==null){Ae=f;return}if(l=l.sibling,l!==null){Ae=l;return}Ae=l=r}while(l!==null);Rn===0&amp;&amp;(Rn=5)}function Y2(r,l){do{var f=Mz(r.alternate,r);if(f!==null){f.flags&amp;=32767,Ae=f;return}if(f=r.return,f!==null&amp;&amp;(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&amp;&amp;(r=r.sibling,r!==null)){Ae=r;return}Ae=r=f}while(r!==null);Rn=6,Ae=null}function W2(r,l,f,p,_,A,L,F,W,ot){var At=pe.T,Pt=Tl();try{Qi(2),pe.T=null,wz(r,l,f,p,Pt,_,A,L,F,W,ot)}finally{pe.T=At,Qi(Pt)}}function wz(r,l,f,p,_,A,L,F){do El();while(zl!==null);if(($e&amp;6)!==0)throw Error(i(327));var W=r.finishedWork;if(p=r.finishedLanes,W===null)return null;if(r.finishedWork=null,r.finishedLanes=0,W===r.current)throw Error(i(177));r.callbackNode=null,r.callbackPriority=0,r.cancelPendingCommit=null;var ot=W.lanes|W.childLanes;if(ot|=WS,P(r,p,ot,A,L,F),r===un&amp;&amp;(Ae=un=null,Ue=0),(W.subtreeFlags&amp;10256)===0&amp;&amp;(W.flags&amp;10256)===0||C0||(C0=!0,rM=ot,oM=f,Oz(qS,function(){return El(!0),null})),f=(W.flags&amp;15990)!==0,(W.subtreeFlags&amp;15990)!==0||f?(f=pe.T,pe.T=null,A=Tl(),Qi(2),L=$e,$e|=4,Ez(r,W),R2(W,r),Wz(r.containerInfo),r.current=W,b2(r,W.alternate,W),a4(),$e=L,Qi(A),pe.T=f):r.current=W,C0?(C0=!1,zl=r,ld=p):k2(r,ot),ot=r.pendingLanes,ot===0&amp;&amp;(yo=null),st(W.stateNode,_),dt(r),l!==null)for(_=r.onRecoverableError,W=0;W&lt;l.length;W++)ot=l[W],_(ot.value,{componentStack:ot.stack});return(ld&amp;3)!==0&amp;&amp;El(),ot=r.pendingLanes,(p&amp;4194218)!==0&amp;&amp;(ot&amp;42)!==0?r===lM?ud++:(ud=0,lM=r):ud=0,Rt(0,!1),null}function k2(r,l){(r.pooledCacheLanes&amp;=l)===0&amp;&amp;(l=r.pooledCache,l!=null&amp;&amp;(r.pooledCache=null,Yh(l)))}function El(){if(zl!==null){var r=zl,l=rM;rM=0;var f=Z(ld),p=32&gt;f?32:f;f=pe.T;var _=Tl();try{if(Qi(p),pe.T=null,zl===null)var A=!1;else{p=oM,oM=null;var L=zl,F=ld;if(zl=null,ld=0,($e&amp;6)!==0)throw Error(i(331));var W=$e;if($e|=4,N2(L.current),w2(L,L.current,F,p),$e=W,Rt(0,!1),ga&amp;&amp;typeof ga.onPostCommitFiberRoot==&quot;function&quot;)try{ga.onPostCommitFiberRoot($h,L)}catch{}A=!0}return A}finally{Qi(_),pe.T=f,k2(r,l)}}return!1}function Z2(r,l,f){l=K(f,l),l=Zx(r.stateNode,l,2),r=vt(r,l,2),r!==null&amp;&amp;(R(r,2),dt(r))}function je(r,l,f){if(r.tag===3)Z2(r,r,f);else for(;l!==null;){if(l.tag===3){Z2(l,r,f);break}else if(l.tag===1){var p=l.stateNode;if(typeof l.type.getDerivedStateFromError==&quot;function&quot;||typeof p.componentDidCatch==&quot;function&quot;&amp;&amp;(yo===null||!yo.has(p))){r=K(f,r),f=KA(2),p=vt(l,f,2),p!==null&amp;&amp;(JA(f,p,l,r),R(p,2),dt(p));break}}l=l.return}}function bS(r,l,f){var p=r.pingCache;if(p===null){p=r.pingCache=new m4;var _=new Set;p.set(l,_)}else _=p.get(l),_===void 0&amp;&amp;(_=new Set,p.set(l,_));_.has(f)||(nM=!0,_.add(f),r=Dz.bind(null,r,l,f),l.then(r,r))}function Dz(r,l,f){var p=r.pingCache;p!==null&amp;&amp;p.delete(l),r.pingedLanes|=r.suspendedLanes&amp;f,r.warmLanes&amp;=~f,un===r&amp;&amp;(Ue&amp;f)===f&amp;&amp;(Rn===4||Rn===3&amp;&amp;(Ue&amp;62914560)===Ue&amp;&amp;300&gt;ps()-sM?($e&amp;2)===0&amp;&amp;Ju(r,0):iM|=f,_c===Ue&amp;&amp;(_c=0)),dt(r)}function j2(r,l){l===0&amp;&amp;(l=z()),r=pt(r,l),r!==null&amp;&amp;(R(r,l),dt(r))}function Uz(r){var l=r.memoizedState,f=0;l!==null&amp;&amp;(f=l.retryLane),j2(r,f)}function Nz(r,l){var f=0;switch(r.tag){case 13:var p=r.stateNode,_=r.memoizedState;_!==null&amp;&amp;(f=_.retryLane);break;case 19:p=r.stateNode;break;case 22:p=r.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&amp;&amp;p.delete(l),j2(r,f)}function Oz(r,l){return f0(r,l)}function Lz(r,l,f,p){this.tag=r,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function TS(r){return r=r.prototype,!(!r||!r.isReactComponent)}function lo(r,l){var f=r.alternate;return f===null?(f=t(r.tag,l,r.key,r.mode),f.elementType=r.elementType,f.type=r.type,f.stateNode=r.stateNode,f.alternate=r,r.alternate=f):(f.pendingProps=l,f.type=r.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=r.flags&amp;31457280,f.childLanes=r.childLanes,f.lanes=r.lanes,f.child=r.child,f.memoizedProps=r.memoizedProps,f.memoizedState=r.memoizedState,f.updateQueue=r.updateQueue,l=r.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=r.sibling,f.index=r.index,f.ref=r.ref,f.refCleanup=r.refCleanup,f}function Q2(r,l){r.flags&amp;=31457282;var f=r.alternate;return f===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=f.childLanes,r.lanes=f.lanes,r.child=f.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=f.memoizedProps,r.memoizedState=f.memoizedState,r.updateQueue=f.updateQueue,r.type=f.type,l=f.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function s0(r,l,f,p,_,A){var L=0;if(p=r,typeof r==&quot;function&quot;)TS(r)&amp;&amp;(L=1);else if(typeof r==&quot;string&quot;)L=Ga&amp;&amp;Ei?ER(r,f,di.current)?26:UR(r)?27:5:Ga?ER(r,f,di.current)?26:5:Ei&amp;&amp;UR(r)?27:5;else t:switch(r){case ec:return bl(f.children,_,A,l);case iR:L=8,_|=24;break;case DS:return r=t(12,f,l,_|2),r.elementType=DS,r.lanes=A,r;case NS:return r=t(13,f,l,_),r.elementType=NS,r.lanes=A,r;case OS:return r=t(19,f,l,_),r.elementType=OS,r.lanes=A,r;case sR:return K2(f,_,A,l);default:if(typeof r==&quot;object&quot;&amp;&amp;r!==null)switch(r.$$typeof){case Iz:case uo:L=10;break t;case aR:L=9;break t;case US:L=11;break t;case LS:L=14;break t;case co:L=16,p=null;break t}L=29,f=Error(i(130,r===null?&quot;null&quot;:typeof r,&quot;&quot;)),p=null}return l=t(L,f,l,_),l.elementType=r,l.type=p,l.lanes=A,l}function bl(r,l,f,p){return r=t(7,r,p,l),r.lanes=f,r}function K2(r,l,f,p){r=t(22,r,p,l),r.elementType=sR,r.lanes=f;var _={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var A=_._current;if(A===null)throw Error(i(456));if((_._pendingVisibility&amp;2)===0){var L=pt(A,2);L!==null&amp;&amp;(_._pendingVisibility|=2,Pi(L,A,2))}},attach:function(){var A=_._current;if(A===null)throw Error(i(456));if((_._pendingVisibility&amp;2)!==0){var L=pt(A,2);L!==null&amp;&amp;(_._pendingVisibility&amp;=-3,Pi(L,A,2))}}};return r.stateNode=_,r}function AS(r,l,f){return r=t(6,r,null,l),r.lanes=f,r}function RS(r,l,f){return l=t(4,r.children!==null?r.children:[],r.key,l),l.lanes=f,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}function zz(r,l,f,p,_,A,L,F){this.tag=1,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=IS,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=C(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C(0),this.hiddenUpdates=C(null),this.identifierPrefix=p,this.onUncaughtError=_,this.onCaughtError=A,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function J2(r,l,f,p,_,A,L,F,W,ot,At,Pt){return r=new zz(r,l,f,L,F,W,ot,Pt),l=1,A===!0&amp;&amp;(l|=24),A=t(3,null,null,l),r.current=A,A.stateNode=r,l=sS(),l.refCount++,r.pooledCache=l,l.refCount++,A.memoizedState={element:p,isDehydrated:f,cache:l},Tt(A),r}function $2(r){return r?(r=ac,r):ac}function tR(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render==&quot;function&quot;?Error(i(188)):(r=Object.keys(r).join(&quot;,&quot;),Error(i(268,r)));return r=g(l),r=r!==null?y(r):null,r===null?null:Qh(r.stateNode)}function eR(r,l,f,p,_,A){_=$2(_),p.context===null?p.context=_:p.pendingContext=_,p=Ft(l),p.payload={element:f},A=A===void 0?null:A,A!==null&amp;&amp;(p.callback=A),f=vt(r,p,l),f!==null&amp;&amp;(Pi(f,r,l),Ot(f,r,l))}function nR(r,l){if(r=r.memoizedState,r!==null&amp;&amp;r.dehydrated!==null){var f=r.retryLane;r.retryLane=f!==0&amp;&amp;f&lt;l?f:l}}function CS(r,l){nR(r,l),(r=r.alternate)&amp;&amp;nR(r,l)}var Te={},Bz=ja(),pa=Ax(),wS=Object.assign,Pz=Symbol.for(&quot;react.element&quot;),r0=Symbol.for(&quot;react.transitional.element&quot;),tc=Symbol.for(&quot;react.portal&quot;),ec=Symbol.for(&quot;react.fragment&quot;),iR=Symbol.for(&quot;react.strict_mode&quot;),DS=Symbol.for(&quot;react.profiler&quot;),Iz=Symbol.for(&quot;react.provider&quot;),aR=Symbol.for(&quot;react.consumer&quot;),uo=Symbol.for(&quot;react.context&quot;),US=Symbol.for(&quot;react.forward_ref&quot;),NS=Symbol.for(&quot;react.suspense&quot;),OS=Symbol.for(&quot;react.suspense_list&quot;),LS=Symbol.for(&quot;react.memo&quot;),co=Symbol.for(&quot;react.lazy&quot;);Symbol.for(&quot;react.scope&quot;),Symbol.for(&quot;react.debug_trace_mode&quot;);var sR=Symbol.for(&quot;react.offscreen&quot;);Symbol.for(&quot;react.legacy_hidden&quot;),Symbol.for(&quot;react.tracing_marker&quot;);var Hz=Symbol.for(&quot;react.memo_cache_sentinel&quot;),rR=Symbol.iterator,Fz=Symbol.for(&quot;react.client.reference&quot;),pe=Bz.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,zS,oR,BS=!1,o0=Array.isArray,Vz=n.rendererVersion,Gz=n.rendererPackageName,lR=n.extraDevToolsConfig,Qh=n.getPublicInstance,Xz=n.getRootHostContext,qz=n.getChildHostContext,Yz=n.prepareForCommit,Wz=n.resetAfterCommit,kz=n.createInstance,PS=n.appendInitialChild,uR=n.finalizeInitialChildren,l0=n.shouldSetTextContent,cR=n.createTextInstance,Zz=n.scheduleTimeout,jz=n.cancelTimeout,IS=n.noTimeout,mr=n.isPrimaryRenderer;n.warnsIfNotActing;var Mi=n.supportsMutation,fo=n.supportsPersistence,Va=n.supportsHydration,fR=n.getInstanceFromNode;n.beforeActiveInstanceBlur,n.afterActiveInstanceBlur;var Qz=n.preparePortalMount;n.prepareScopeUpdate,n.getInstanceFromScope;var Qi=n.setCurrentUpdatePriority,Tl=n.getCurrentUpdatePriority,Kz=n.resolveUpdatePriority;n.resolveEventType,n.resolveEventTimeStamp;var Jz=n.shouldAttemptEagerTransition,$z=n.detachDeletedInstance;n.requestPostPaintCallback;var tB=n.maySuspendCommit,hR=n.preloadInstance,eB=n.startSuspendingCommit,dR=n.suspendInstance,nB=n.waitForCommitToBeReady,nc=n.NotPendingTransition,Al=n.HostTransitionContext,iB=n.resetFormInstance;n.bindToConsole;var aB=n.supportsMicrotasks,sB=n.scheduleMicrotask,Kh=n.supportsTestSelectors,rB=n.findFiberRoot,oB=n.getBoundingRect,lB=n.getTextContent,Jh=n.isHiddenSubtree,uB=n.matchAccessibilityRole,cB=n.setFocusIfFocusable,fB=n.setupIntersectionObserver,hB=n.appendChild,dB=n.appendChildToContainer,pB=n.commitTextUpdate,mB=n.commitMount,gB=n.commitUpdate,vB=n.insertBefore,yB=n.insertInContainerBefore,_B=n.removeChild,xB=n.removeChildFromContainer,pR=n.resetTextContent,SB=n.hideInstance,MB=n.hideTextInstance,EB=n.unhideInstance,bB=n.unhideTextInstance,TB=n.clearContainer,AB=n.cloneInstance,mR=n.createContainerChildSet,gR=n.appendChildToContainerChildSet,RB=n.finalizeContainerChildren,vR=n.replaceContainerChildren,yR=n.cloneHiddenInstance,_R=n.cloneHiddenTextInstance,HS=n.isSuspenseInstancePending,FS=n.isSuspenseInstanceFallback,CB=n.getSuspenseInstanceFallbackErrorDetails,wB=n.registerSuspenseInstanceRetry,DB=n.canHydrateFormStateMarker,UB=n.isFormStateMarkerMatching,xR=n.getNextHydratableSibling,SR=n.getFirstHydratableChild,NB=n.getFirstHydratableChildWithinContainer,OB=n.getFirstHydratableChildWithinSuspenseInstance,LB=n.canHydrateInstance,zB=n.canHydrateTextInstance,BB=n.canHydrateSuspenseInstance,PB=n.hydrateInstance,IB=n.hydrateTextInstance,HB=n.hydrateSuspenseInstance,FB=n.getNextHydratableInstanceAfterSuspenseInstance,VB=n.commitHydratedContainer,GB=n.commitHydratedSuspenseInstance,XB=n.clearSuspenseBoundary,qB=n.clearSuspenseBoundaryFromContainer,MR=n.shouldDeleteUnhydratedTailInstances;n.diffHydratedPropsForDevWarnings,n.diffHydratedTextForDevWarnings,n.describeHydratableInstanceForDevWarnings;var YB=n.validateHydratableInstance,WB=n.validateHydratableTextInstance,Ga=n.supportsResources,ER=n.isHostHoistableType,VS=n.getHoistableRoot,bR=n.getResource,TR=n.acquireResource,AR=n.releaseResource,kB=n.hydrateHoistable,RR=n.mountHoistable,CR=n.unmountHoistable,ZB=n.createHoistableInstance,jB=n.prepareToCommitHoistables,QB=n.mayResourceSuspendCommit,wR=n.preloadResource,KB=n.suspendResource,Ei=n.supportsSingletons,DR=n.resolveSingletonInstance,JB=n.clearSingleton,$B=n.acquireSingletonInstance,t4=n.releaseSingletonInstance,UR=n.isHostSingletonType,GS=[],ic=-1,ac={},ma=Math.clz32?Math.clz32:S,e4=Math.log,n4=Math.LN2,u0=128,c0=4194304,f0=pa.unstable_scheduleCallback,XS=pa.unstable_cancelCallback,i4=pa.unstable_shouldYield,a4=pa.unstable_requestPaint,ps=pa.unstable_now,NR=pa.unstable_ImmediatePriority,s4=pa.unstable_UserBlockingPriority,qS=pa.unstable_NormalPriority,r4=pa.unstable_IdlePriority,o4=pa.log,l4=pa.unstable_setDisableYieldValue,$h=null,ga=null,va=typeof Object.is==&quot;function&quot;?Object.is:mt,OR=new WeakMap,sc=[],rc=0,h0=null,d0=0,Xa=[],qa=0,Rl=null,gr=1,vr=&quot;&quot;,di=b(null),td=b(null),ho=b(null),p0=b(null),Ii=null,bi=null,ze=!1,ms=null,Is=!1,YS=Error(i(519)),Ya=[],oc=0,WS=0,m0=null,lc=null,kS=!1,g0=!1,ZS=!1,uc=0,ed=null,jS=0,cc=0,fc=null,po=!1,QS=!1,u4=Object.prototype.hasOwnProperty,nd=Error(i(460)),KS=Error(i(474)),v0={then:function(){}},hc=null,dc=null,id=0,Cl=Ha(!0),LR=Ha(!1),pc=b(null),y0=b(0),Wa=b(null),Hs=null,qn=b(0),mo=0,Ee=null,Je=null,Bn=null,_0=!1,mc=!1,wl=!1,x0=0,ad=0,gc=null,c4=0,JS=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Fs={readContext:Si,use:$,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn};Fs.useCacheRefresh=rn,Fs.useMemoCache=rn,Fs.useHostTransitionStatus=rn,Fs.useFormState=rn,Fs.useActionState=rn,Fs.useOptimistic=rn;var Dl={readContext:Si,use:$,useCallback:function(r,l){return N().memoizedState=[r,l===void 0?null:l],r},useContext:Si,useEffect:OA,useImperativeHandle:function(r,l,f){f=f!=null?f.concat([r]):null,Zg(4194308,4,BA.bind(null,l,r),f)},useLayoutEffect:function(r,l){return Zg(4194308,4,r,l)},useInsertionEffect:function(r,l){Zg(4,2,r,l)},useMemo:function(r,l){var f=N();l=l===void 0?null:l;var p=r();if(wl){et(!0);try{r()}finally{et(!1)}}return f.memoizedState=[p,l],p},useReducer:function(r,l,f){var p=N();if(f!==void 0){var _=f(l);if(wl){et(!0);try{f(l)}finally{et(!1)}}}else _=l;return p.memoizedState=p.baseState=_,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:_},p.queue=r,r=r.dispatch=yz.bind(null,Ee,r),[p.memoizedState,r]},useRef:function(r){var l=N();return r={current:r},l.memoizedState=r},useState:function(r){r=Ze(r);var l=r.queue,f=YA.bind(null,Ee,l);return l.dispatch=f,[r.memoizedState,f]},useDebugValue:Xx,useDeferredValue:function(r,l){var f=N();return qx(f,r,l)},useTransition:function(){var r=Ze(!1);return r=VA.bind(null,Ee,r.queue,!0,!1),N().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,f){var p=Ee,_=N();if(ze){if(f===void 0)throw Error(i(407));f=f()}else{if(f=l(),un===null)throw Error(i(349));(Ue&amp;60)!==0||ae(p,l,f)}_.memoizedState=f;var A={value:f,getSnapshot:l};return _.queue=A,OA(Me.bind(null,p,A,r),[r]),p.flags|=2048,Bs(9,Kt.bind(null,p,A,f,l),{destroy:void 0},null),f},useId:function(){var r=N(),l=un.identifierPrefix;if(ze){var f=vr,p=gr;f=(p&amp;~(1&lt;&lt;32-ma(p)-1)).toString(32)+f,l=&quot;:&quot;+l+&quot;R&quot;+f,f=x0++,0&lt;f&amp;&amp;(l+=&quot;H&quot;+f.toString(32)),l+=&quot;:&quot;}else f=c4++,l=&quot;:&quot;+l+&quot;r&quot;+f.toString(32)+&quot;:&quot;;return r.memoizedState=l},useCacheRefresh:function(){return N().memoizedState=vz.bind(null,Ee)}};Dl.useMemoCache=q,Dl.useHostTransitionStatus=Yx,Dl.useFormState=ln,Dl.useActionState=ln,Dl.useOptimistic=function(r){var l=N();l.memoizedState=l.baseState=r;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=Wx.bind(null,Ee,!0,f),f.dispatch=l,[r,l]};var go={readContext:Si,use:$,useCallback:IA,useContext:Si,useEffect:Gx,useImperativeHandle:PA,useInsertionEffect:LA,useLayoutEffect:zA,useMemo:HA,useReducer:Lt,useRef:Ps,useState:function(){return Lt(yt)},useDebugValue:Xx,useDeferredValue:function(r,l){var f=V();return FA(f,Je.memoizedState,r,l)},useTransition:function(){var r=Lt(yt)[0],l=V().memoizedState;return[typeof r==&quot;boolean&quot;?r:J(r),l]},useSyncExternalStore:ie,useId:XA};go.useCacheRefresh=qA,go.useMemoCache=q,go.useHostTransitionStatus=Yx,go.useFormState=zi,go.useActionState=zi,go.useOptimistic=function(r,l){var f=V();return qe(f,Je,r,l)};var Ul={readContext:Si,use:$,useCallback:IA,useContext:Si,useEffect:Gx,useImperativeHandle:PA,useInsertionEffect:LA,useLayoutEffect:zA,useMemo:HA,useReducer:Vt,useRef:Ps,useState:function(){return Vt(yt)},useDebugValue:Xx,useDeferredValue:function(r,l){var f=V();return Je===null?qx(f,r,l):FA(f,Je.memoizedState,r,l)},useTransition:function(){var r=Vt(yt)[0],l=V().memoizedState;return[typeof r==&quot;boolean&quot;?r:J(r),l]},useSyncExternalStore:ie,useId:XA};Ul.useCacheRefresh=qA,Ul.useMemoCache=q,Ul.useHostTransitionStatus=Yx,Ul.useFormState=fi,Ul.useActionState=fi,Ul.useOptimistic=function(r,l){var f=V();return Je!==null?qe(f,Je,r,l):(f.baseState=r,[r,f.queue.dispatch])};var $S={isMounted:function(r){return(r=r._reactInternals)?d(r)===r:!1},enqueueSetState:function(r,l,f){r=r._reactInternals;var p=da(),_=Ft(p);_.payload=l,f!=null&amp;&amp;(_.callback=f),l=vt(r,_,p),l!==null&amp;&amp;(Pi(l,r,p),Ot(l,r,p))},enqueueReplaceState:function(r,l,f){r=r._reactInternals;var p=da(),_=Ft(p);_.tag=1,_.payload=l,f!=null&amp;&amp;(_.callback=f),l=vt(r,_,p),l!==null&amp;&amp;(Pi(l,r,p),Ot(l,r,p))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var f=da(),p=Ft(f);p.tag=2,l!=null&amp;&amp;(p.callback=l),l=vt(r,p,f),l!==null&amp;&amp;(Pi(l,r,f),Ot(l,r,f))}},zR=typeof reportError==&quot;function&quot;?reportError:function(r){if(typeof window==&quot;object&quot;&amp;&amp;typeof window.ErrorEvent==&quot;function&quot;){var l=new window.ErrorEvent(&quot;error&quot;,{bubbles:!0,cancelable:!0,message:typeof r==&quot;object&quot;&amp;&amp;r!==null&amp;&amp;typeof r.message==&quot;string&quot;?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process==&quot;object&quot;&amp;&amp;typeof process.emit==&quot;function&quot;){process.emit(&quot;uncaughtException&quot;,r);return}console.error(r)},BR=Error(i(461)),Jn=!1,tM={dehydrated:null,treeContext:null,retryLane:0},S0=b(null),Nl=null,yr=null,f4=typeof AbortController&lt;&quot;u&quot;?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(f,p){r.push(p)}};this.abort=function(){l.aborted=!0,r.forEach(function(f){return f()})}},h4=pa.unstable_scheduleCallback,d4=pa.unstable_NormalPriority,Tn={$$typeof:uo,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},PR=pe.S;pe.S=function(r,l){typeof l==&quot;object&quot;&amp;&amp;l!==null&amp;&amp;typeof l.then==&quot;function&quot;&amp;&amp;gt(r,l),PR!==null&amp;&amp;PR(r,l)};var Ol=b(null),_r=!1,An=!1,eM=!1,IR=typeof WeakSet==&quot;function&quot;?WeakSet:Set,$n=null,HR=!1,Pn=null,ya=!1,gs=null,vc=8192,p4={getCacheForType:function(r){var l=Si(Tn),f=l.data.get(r);return f===void 0&amp;&amp;(f=r(),l.data.set(r,f)),f}},M0=0,E0=1,b0=2,T0=3,A0=4;if(typeof Symbol==&quot;function&quot;&amp;&amp;Symbol.for){var sd=Symbol.for;M0=sd(&quot;selector.component&quot;),E0=sd(&quot;selector.has_pseudo_class&quot;),b0=sd(&quot;selector.role&quot;),T0=sd(&quot;selector.test_id&quot;),A0=sd(&quot;selector.text&quot;)}var m4=typeof WeakMap==&quot;function&quot;?WeakMap:Map,$e=0,un=null,Ae=null,Ue=0,cn=0,_a=null,xr=!1,yc=!1,nM=!1,Sr=0,Rn=0,vo=0,Ll=0,iM=0,ka=0,_c=0,rd=null,Vs=null,aM=!1,sM=0,od=1/0,R0=null,yo=null,C0=!1,zl=null,ld=0,rM=0,oM=null,ud=0,lM=null;return Te.attemptContinuousHydration=function(r){if(r.tag===13){var l=pt(r,67108864);l!==null&amp;&amp;Pi(l,r,67108864),CS(r,67108864)}},Te.attemptHydrationAtCurrentPriority=function(r){if(r.tag===13){var l=da(),f=pt(r,l);f!==null&amp;&amp;Pi(f,r,l),CS(r,l)}},Te.attemptSynchronousHydration=function(r){switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var l=E(r.pendingLanes);if(l!==0){for(r.pendingLanes|=2,r.entangledLanes|=2;l;){var f=1&lt;&lt;31-ma(l);r.entanglements[1]|=f,l&amp;=~f}dt(r),($e&amp;6)===0&amp;&amp;(od=ps()+500,Rt(0,!1))}}break;case 13:l=pt(r,2),l!==null&amp;&amp;Pi(l,r,2),I2(),CS(r,2)}},Te.batchedUpdates=function(r,l){return r(l)},Te.createComponentSelector=function(r){return{$$typeof:M0,value:r}},Te.createContainer=function(r,l,f,p,_,A,L,F,W,ot){return J2(r,l,!1,null,f,p,A,L,F,W,ot,null)},Te.createHasPseudoClassSelector=function(r){return{$$typeof:E0,value:r}},Te.createHydrationContainer=function(r,l,f,p,_,A,L,F,W,ot,At,Pt,Ht){return r=J2(f,p,!0,r,_,A,F,W,ot,At,Pt,Ht),r.context=$2(null),f=r.current,p=da(),_=Ft(p),_.callback=l??null,vt(f,_,p),r.current.lanes=p,R(r,p),dt(r),r},Te.createPortal=function(r,l,f){var p=3&lt;arguments.length&amp;&amp;arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tc,key:p==null?null:&quot;&quot;+p,children:r,containerInfo:l,implementation:f}},Te.createRoleSelector=function(r){return{$$typeof:b0,value:r}},Te.createTestNameSelector=function(r){return{$$typeof:T0,value:r}},Te.createTextSelector=function(r){return{$$typeof:A0,value:r}},Te.defaultOnCaughtError=function(r){console.error(r)},Te.defaultOnRecoverableError=function(r){zR(r)},Te.defaultOnUncaughtError=function(r){zR(r)},Te.deferredUpdates=function(r){var l=pe.T,f=Tl();try{return Qi(32),pe.T=null,r()}finally{Qi(f),pe.T=l}},Te.discreteUpdates=function(r,l,f,p,_){var A=pe.T,L=Tl();try{return Qi(2),pe.T=null,r(l,f,p,_)}finally{Qi(L),pe.T=A,$e===0&amp;&amp;(od=ps()+500)}},Te.findAllNodes=_S,Te.findBoundingRects=function(r,l){if(!Kh)throw Error(i(363));l=_S(r,l),r=[];for(var f=0;f&lt;l.length;f++)r.push(oB(l[f]));for(l=r.length-1;0&lt;l;l--){f=r[l];for(var p=f.x,_=p+f.width,A=f.y,L=A+f.height,F=l-1;0&lt;=F;F--)if(l!==F){var W=r[F],ot=W.x,At=ot+W.width,Pt=W.y,Ht=Pt+W.height;if(p&gt;=ot&amp;&amp;A&gt;=Pt&amp;&amp;_&lt;=At&amp;&amp;L&lt;=Ht){r.splice(l,1);break}else if(p!==ot||f.width!==W.width||Ht&lt;A||Pt&gt;L){if(!(A!==Pt||f.height!==W.height||At&lt;p||ot&gt;_)){ot&gt;p&amp;&amp;(W.width+=ot-p,W.x=p),At&lt;_&amp;&amp;(W.width=_-ot),r.splice(l,1);break}}else{Pt&gt;A&amp;&amp;(W.height+=Pt-A,W.y=A),Ht&lt;L&amp;&amp;(W.height=L-Pt),r.splice(l,1);break}}}return r},Te.findHostInstance=tR,Te.findHostInstanceWithNoPortals=function(r){return r=g(r),r=r!==null?x(r):null,r===null?null:Qh(r.stateNode)},Te.findHostInstanceWithWarning=function(r){return tR(r)},Te.flushPassiveEffects=El,Te.flushSyncFromReconciler=function(r){var l=$e;$e|=1;var f=pe.T,p=Tl();try{if(Qi(2),pe.T=null,r)return r()}finally{Qi(p),pe.T=f,$e=l,($e&amp;6)===0&amp;&amp;Rt(0,!1)}},Te.flushSyncWork=I2,Te.focusWithin=function(r,l){if(!Kh)throw Error(i(363));for(r=gS(r),l=L2(r,l),l=Array.from(l),r=0;r&lt;l.length;){var f=l[r++],p=f.tag;if(!Jh(f)){if((p===5||p===26||p===27)&amp;&amp;cB(f.stateNode))return!0;for(f=f.child;f!==null;)l.push(f),f=f.sibling}}return!1},Te.getFindAllNodesFailureDescription=function(r,l){if(!Kh)throw Error(i(363));var f=0,p=[];r=[gS(r),0];for(var _=0;_&lt;r.length;){var A=r[_++],L=A.tag,F=r[_++],W=l[F];if((L!==5&amp;&amp;L!==26&amp;&amp;L!==27||!Jh(A))&amp;&amp;(vS(A,W)&amp;&amp;(p.push(yS(W)),F++,F&gt;f&amp;&amp;(f=F)),F&lt;l.length))for(A=A.child;A!==null;)r.push(A,F),A=A.sibling}if(f&lt;l.length){for(r=[];f&lt;l.length;f++)r.push(yS(l[f]));return`findAllNodes was able to match part of the selector:
<a href="#l17" class="line" id="l17">     17</a>   `+(p.join(&quot; &gt; &quot;)+`
<a href="#l18" class="line" id="l18">     18</a> 
<a href="#l19" class="line" id="l19">     19</a> No matching component was found for:
<a href="#l20" class="line" id="l20">     20</a>   `)+r.join(&quot; &gt; &quot;)}return null},Te.getPublicRootInstance=function(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 27:case 5:return Qh(r.child.stateNode);default:return r.child.stateNode}},Te.injectIntoDevTools=function(){var r={bundleType:0,version:Vz,rendererPackageName:Gz,currentDispatcherRef:pe,findFiberByHostInstance:fR,reconcilerVersion:&quot;19.0.0&quot;};if(lR!==null&amp;&amp;(r.rendererConfig=lR),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&gt;&quot;u&quot;)r=!1;else{var l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(l.isDisabled||!l.supportsFiber)r=!0;else{try{$h=l.inject(r),ga=l}catch{}r=!!l.checkDCE}}return r},Te.isAlreadyRendering=function(){return!1},Te.observeVisibleRects=function(r,l,f,p){if(!Kh)throw Error(i(363));r=_S(r,l);var _=fB(r,f,p).disconnect;return{disconnect:function(){_()}}},Te.shouldError=function(){return null},Te.shouldSuspend=function(){return!1},Te.startHostTransition=function(r,l,f,p){if(r.tag!==5)throw Error(i(476));var _=GA(r).queue;VA(r,_,l,nc,f===null?e:function(){var A=GA(r).next.queue;return Gh(r,A,{},da()),f(p)})},Te.updateContainer=function(r,l,f,p){var _=l.current,A=da();return eR(_,A,r,l,f,p),A},Te.updateContainerSync=function(r,l,f,p){return l.tag===0&amp;&amp;El(),eR(l.current,2,r,l,f,p),2},Te};Xg.exports.default=Xg.exports;Object.defineProperty(Xg.exports,&quot;__esModule&quot;,{value:!0})});var uA=In((u9,NL)=&gt;{&quot;use strict&quot;;NL.exports=UL()});var LL=In(Rx=&gt;{&quot;use strict&quot;;var e7=Symbol.for(&quot;react.transitional.element&quot;),n7=Symbol.for(&quot;react.fragment&quot;);function OL(n,t,e){var i=null;if(e!==void 0&amp;&amp;(i=&quot;&quot;+e),t.key!==void 0&amp;&amp;(i=&quot;&quot;+t.key),&quot;key&quot;in t){e={};for(var a in t)a!==&quot;key&quot;&amp;&amp;(e[a]=t[a])}else e=t;return t=e.ref,{$$typeof:e7,type:n,key:i,ref:t!==void 0?t:null,props:e}}Rx.Fragment=n7;Rx.jsx=OL;Rx.jsxs=OL});var cA=In((f9,zL)=&gt;{&quot;use strict&quot;;zL.exports=LL()});var Ls=Ti(ja()),gz=Ti(xU());var sn=Ti(ja()),vl=Ti(qE());var _x={};M4(_x,{ACESFilmicToneMapping:()=&gt;ng,AddEquation:()=&gt;Zr,AddOperation:()=&gt;uT,AdditiveAnimationBlendMode:()=&gt;cx,AdditiveBlending:()=&gt;$_,AgXToneMapping:()=&gt;pT,AlphaFormat:()=&gt;rx,AlwaysCompare:()=&gt;wT,AlwaysDepth:()=&gt;Qm,AlwaysStencilFunc:()=&gt;Yy,AmbientLight:()=&gt;Im,AnimationAction:()=&gt;Zm,AnimationClip:()=&gt;dl,AnimationLoader:()=&gt;c_,AnimationMixer:()=&gt;E_,AnimationObjectGroup:()=&gt;M_,AnimationUtils:()=&gt;u_,ArcCurve:()=&gt;im,ArrayCamera:()=&gt;Ym,ArrowHelper:()=&gt;W_,AttachedBindMode:()=&gt;qy,Audio:()=&gt;Wm,AudioAnalyser:()=&gt;S_,AudioContext:()=&gt;dh,AudioListener:()=&gt;__,AudioLoader:()=&gt;v_,AxesHelper:()=&gt;k_,BackSide:()=&gt;Ni,BasicDepthPacking:()=&gt;xT,BasicShadowMap:()=&gt;J_,BatchedMesh:()=&gt;jp,Bone:()=&gt;kf,BooleanKeyframeTrack:()=&gt;ir,Box2:()=&gt;O_,Box3:()=&gt;Zn,Box3Helper:()=&gt;q_,BoxGeometry:()=&gt;rl,BoxHelper:()=&gt;X_,BufferAttribute:()=&gt;Xe,BufferGeometry:()=&gt;ve,BufferGeometryLoader:()=&gt;qm,ByteType:()=&gt;ix,Cache:()=&gt;As,Camera:()=&gt;Mu,CameraHelper:()=&gt;G_,CanvasTexture:()=&gt;o_,CapsuleGeometry:()=&gt;$p,CatmullRomCurve3:()=&gt;am,CineonToneMapping:()=&gt;hT,CircleGeometry:()=&gt;tm,ClampToEdgeWrapping:()=&gt;Ua,Clock:()=&gt;Uu,Color:()=&gt;Bt,ColorKeyframeTrack:()=&gt;ch,ColorManagement:()=&gt;we,CompressedArrayTexture:()=&gt;s_,CompressedCubeTexture:()=&gt;r_,CompressedTexture:()=&gt;Au,CompressedTextureLoader:()=&gt;f_,ConeGeometry:()=&gt;Kf,ConstantAlphaFactor:()=&gt;rT,ConstantColorFactor:()=&gt;aT,Controls:()=&gt;j_,CubeCamera:()=&gt;Hp,CubeReflectionMapping:()=&gt;rr,CubeRefractionMapping:()=&gt;to,CubeTexture:()=&gt;ol,CubeTextureLoader:()=&gt;h_,CubeUVReflectionMapping:()=&gt;Ou,CubicBezierCurve:()=&gt;Jf,CubicBezierCurve3:()=&gt;sm,CubicInterpolant:()=&gt;Dm,CullFaceBack:()=&gt;K_,CullFaceFront:()=&gt;Xb,CullFaceFrontBack:()=&gt;NN,CullFaceNone:()=&gt;Gb,Curve:()=&gt;oa,CurvePath:()=&gt;om,CustomBlending:()=&gt;qb,CustomToneMapping:()=&gt;dT,CylinderGeometry:()=&gt;Qf,Cylindrical:()=&gt;U_,Data3DTexture:()=&gt;Su,DataArrayTexture:()=&gt;xu,DataTexture:()=&gt;Oa,DataTextureLoader:()=&gt;d_,DataUtils:()=&gt;Zy,DecrementStencilOp:()=&gt;WN,DecrementWrapStencilOp:()=&gt;ZN,DefaultLoadingManager:()=&gt;PT,DepthFormat:()=&gt;gu,DepthStencilFormat:()=&gt;Iu,DepthTexture:()=&gt;jf,DetachedBindMode:()=&gt;gT,DirectionalLight:()=&gt;Pm,DirectionalLightHelper:()=&gt;V_,DiscreteInterpolant:()=&gt;Um,DodecahedronGeometry:()=&gt;em,DoubleSide:()=&gt;Ds,DstAlphaFactor:()=&gt;$b,DstColorFactor:()=&gt;eT,DynamicCopyUsage:()=&gt;uO,DynamicDrawUsage:()=&gt;iO,DynamicReadUsage:()=&gt;rO,EdgesGeometry:()=&gt;nm,EllipseCurve:()=&gt;Ru,EqualCompare:()=&gt;TT,EqualDepth:()=&gt;Jm,EqualStencilFunc:()=&gt;JN,EquirectangularReflectionMapping:()=&gt;vh,EquirectangularRefractionMapping:()=&gt;yh,Euler:()=&gt;sa,EventDispatcher:()=&gt;La,ExtrudeGeometry:()=&gt;fm,FileLoader:()=&gt;ls,Float16BufferAttribute:()=&gt;t_,Float32BufferAttribute:()=&gt;Xt,FloatType:()=&gt;qi,Fog:()=&gt;Gp,FogExp2:()=&gt;Vp,FramebufferTexture:()=&gt;a_,FrontSide:()=&gt;tr,Frustum:()=&gt;Kr,FrustumArray:()=&gt;Zp,GLBufferAttribute:()=&gt;C_,GLSL1:()=&gt;fO,GLSL3:()=&gt;hx,GreaterCompare:()=&gt;AT,GreaterDepth:()=&gt;tg,GreaterEqualCompare:()=&gt;CT,GreaterEqualDepth:()=&gt;$m,GreaterEqualStencilFunc:()=&gt;nO,GreaterStencilFunc:()=&gt;tO,GridHelper:()=&gt;H_,Group:()=&gt;Wr,HalfFloatType:()=&gt;Bu,HemisphereLight:()=&gt;Om,HemisphereLightHelper:()=&gt;I_,IcosahedronGeometry:()=&gt;hm,ImageBitmapLoader:()=&gt;g_,ImageLoader:()=&gt;pl,ImageUtils:()=&gt;Ip,IncrementStencilOp:()=&gt;YN,IncrementWrapStencilOp:()=&gt;kN,InstancedBufferAttribute:()=&gt;Qr,InstancedBufferGeometry:()=&gt;Xm,InstancedInterleavedBuffer:()=&gt;R_,InstancedMesh:()=&gt;kp,Int16BufferAttribute:()=&gt;Jy,Int32BufferAttribute:()=&gt;$y,Int8BufferAttribute:()=&gt;jy,IntType:()=&gt;ag,InterleavedBuffer:()=&gt;Tu,InterleavedBufferAttribute:()=&gt;ll,Interpolant:()=&gt;ul,InterpolateDiscrete:()=&gt;If,InterpolateLinear:()=&gt;Pp,InterpolateSmooth:()=&gt;Up,InterpolationSamplingMode:()=&gt;pO,InterpolationSamplingType:()=&gt;dO,InvertStencilOp:()=&gt;jN,KeepStencilOp:()=&gt;el,KeyframeTrack:()=&gt;Yi,LOD:()=&gt;qp,LatheGeometry:()=&gt;dm,Layers:()=&gt;nr,LessCompare:()=&gt;bT,LessDepth:()=&gt;Km,LessEqualCompare:()=&gt;fx,LessEqualDepth:()=&gt;sl,LessEqualStencilFunc:()=&gt;$N,LessStencilFunc:()=&gt;KN,Light:()=&gt;ws,LightProbe:()=&gt;Vm,Line:()=&gt;Cs,Line3:()=&gt;L_,LineBasicMaterial:()=&gt;ui,LineCurve:()=&gt;$f,LineCurve3:()=&gt;rm,LineDashedMaterial:()=&gt;wm,LineLoop:()=&gt;Qp,LineSegments:()=&gt;Ba,LinearFilter:()=&gt;Gn,LinearInterpolant:()=&gt;uh,LinearMipMapLinearFilter:()=&gt;BN,LinearMipMapNearestFilter:()=&gt;zN,LinearMipmapLinearFilter:()=&gt;Us,LinearMipmapNearestFilter:()=&gt;_h,LinearSRGBColorSpace:()=&gt;er,LinearToneMapping:()=&gt;cT,LinearTransfer:()=&gt;Ff,Loader:()=&gt;yi,LoaderUtils:()=&gt;hh,LoadingManager:()=&gt;fh,LoopOnce:()=&gt;vT,LoopPingPong:()=&gt;_T,LoopRepeat:()=&gt;yT,MOUSE:()=&gt;DN,Material:()=&gt;jn,MaterialLoader:()=&gt;Gm,MathUtils:()=&gt;mO,Matrix2:()=&gt;N_,Matrix3:()=&gt;ge,Matrix4:()=&gt;fe,MaxEquation:()=&gt;Zb,Mesh:()=&gt;En,MeshBasicMaterial:()=&gt;Rs,MeshDepthMaterial:()=&gt;oh,MeshDistanceMaterial:()=&gt;lh,MeshLambertMaterial:()=&gt;Rm,MeshMatcapMaterial:()=&gt;Cm,MeshNormalMaterial:()=&gt;Am,MeshPhongMaterial:()=&gt;bm,MeshPhysicalMaterial:()=&gt;Em,MeshStandardMaterial:()=&gt;rh,MeshToonMaterial:()=&gt;Tm,MinEquation:()=&gt;kb,MirroredRepeatWrapping:()=&gt;Pf,MixOperation:()=&gt;lT,MultiplyBlending:()=&gt;ex,MultiplyOperation:()=&gt;gh,NearestFilter:()=&gt;oi,NearestMipMapLinearFilter:()=&gt;LN,NearestMipMapNearestFilter:()=&gt;ON,NearestMipmapLinearFilter:()=&gt;Lu,NearestMipmapNearestFilter:()=&gt;nx,NeutralToneMapping:()=&gt;mT,NeverCompare:()=&gt;ET,NeverDepth:()=&gt;jm,NeverStencilFunc:()=&gt;QN,NoBlending:()=&gt;sr,NoColorSpace:()=&gt;lr,NoToneMapping:()=&gt;us,NormalAnimationBlendMode:()=&gt;Bg,NormalBlending:()=&gt;al,NotEqualCompare:()=&gt;RT,NotEqualDepth:()=&gt;eg,NotEqualStencilFunc:()=&gt;eO,NumberKeyframeTrack:()=&gt;cl,Object3D:()=&gt;Ie,ObjectLoader:()=&gt;m_,ObjectSpaceNormalMap:()=&gt;MT,OctahedronGeometry:()=&gt;ah,OneFactor:()=&gt;Qb,OneMinusConstantAlphaFactor:()=&gt;oT,OneMinusConstantColorFactor:()=&gt;sT,OneMinusDstAlphaFactor:()=&gt;tT,OneMinusDstColorFactor:()=&gt;nT,OneMinusSrcAlphaFactor:()=&gt;Bp,OneMinusSrcColorFactor:()=&gt;Jb,OrthographicCamera:()=&gt;$r,PCFShadowMap:()=&gt;mh,PCFSoftShadowMap:()=&gt;Nu,PMREMGenerator:()=&gt;Ig,Path:()=&gt;Cu,PerspectiveCamera:()=&gt;Un,Plane:()=&gt;Es,PlaneGeometry:()=&gt;Du,PlaneHelper:()=&gt;Y_,PointLight:()=&gt;Bm,PointLightHelper:()=&gt;P_,Points:()=&gt;Kp,PointsMaterial:()=&gt;Zf,PolarGridHelper:()=&gt;F_,PolyhedronGeometry:()=&gt;Jr,PositionalAudio:()=&gt;x_,PropertyBinding:()=&gt;Ye,PropertyMixer:()=&gt;km,QuadraticBezierCurve:()=&gt;th,QuadraticBezierCurve3:()=&gt;eh,Quaternion:()=&gt;vi,QuaternionKeyframeTrack:()=&gt;fl,QuaternionLinearInterpolant:()=&gt;Nm,RED_GREEN_RGTC2_Format:()=&gt;Lg,RED_RGTC1_Format:()=&gt;ux,REVISION:()=&gt;Vb,RGBADepthPacking:()=&gt;ST,RGBAFormat:()=&gt;li,RGBAIntegerFormat:()=&gt;ug,RGBA_ASTC_10x10_Format:()=&gt;Cg,RGBA_ASTC_10x5_Format:()=&gt;Tg,RGBA_ASTC_10x6_Format:()=&gt;Ag,RGBA_ASTC_10x8_Format:()=&gt;Rg,RGBA_ASTC_12x10_Format:()=&gt;wg,RGBA_ASTC_12x12_Format:()=&gt;Dg,RGBA_ASTC_4x4_Format:()=&gt;vg,RGBA_ASTC_5x4_Format:()=&gt;yg,RGBA_ASTC_5x5_Format:()=&gt;_g,RGBA_ASTC_6x5_Format:()=&gt;xg,RGBA_ASTC_6x6_Format:()=&gt;Sg,RGBA_ASTC_8x5_Format:()=&gt;Mg,RGBA_ASTC_8x6_Format:()=&gt;Eg,RGBA_ASTC_8x8_Format:()=&gt;bg,RGBA_BPTC_Format:()=&gt;Th,RGBA_ETC2_EAC_Format:()=&gt;gg,RGBA_PVRTC_2BPPV1_Format:()=&gt;dg,RGBA_PVRTC_4BPPV1_Format:()=&gt;hg,RGBA_S3TC_DXT1_Format:()=&gt;Mh,RGBA_S3TC_DXT3_Format:()=&gt;Eh,RGBA_S3TC_DXT5_Format:()=&gt;bh,RGBDepthPacking:()=&gt;VN,RGBFormat:()=&gt;ox,RGBIntegerFormat:()=&gt;PN,RGB_BPTC_SIGNED_Format:()=&gt;Ug,RGB_BPTC_UNSIGNED_Format:()=&gt;Ng,RGB_ETC1_Format:()=&gt;pg,RGB_ETC2_Format:()=&gt;mg,RGB_PVRTC_2BPPV1_Format:()=&gt;fg,RGB_PVRTC_4BPPV1_Format:()=&gt;cg,RGB_S3TC_DXT1_Format:()=&gt;Sh,RGDepthPacking:()=&gt;GN,RGFormat:()=&gt;lx,RGIntegerFormat:()=&gt;lg,RawShaderMaterial:()=&gt;Mm,Ray:()=&gt;jr,Raycaster:()=&gt;ph,RectAreaLight:()=&gt;Hm,RedFormat:()=&gt;og,RedIntegerFormat:()=&gt;xh,ReinhardToneMapping:()=&gt;fT,RenderTarget:()=&gt;Xf,RenderTarget3D:()=&gt;b_,RepeatWrapping:()=&gt;Bf,ReplaceStencilOp:()=&gt;qN,ReverseSubtractEquation:()=&gt;Wb,RingGeometry:()=&gt;pm,SIGNED_RED_GREEN_RGTC2_Format:()=&gt;zg,SIGNED_RED_RGTC1_Format:()=&gt;Og,SRGBColorSpace:()=&gt;ri,SRGBTransfer:()=&gt;We,Scene:()=&gt;bu,ShaderChunk:()=&gt;xe,ShaderLib:()=&gt;Ns,ShaderMaterial:()=&gt;ra,ShadowMaterial:()=&gt;Sm,Shape:()=&gt;$s,ShapeGeometry:()=&gt;mm,ShapePath:()=&gt;Z_,ShapeUtils:()=&gt;os,ShortType:()=&gt;ax,Skeleton:()=&gt;Wp,SkeletonHelper:()=&gt;B_,SkinnedMesh:()=&gt;Yp,Source:()=&gt;Ts,Sphere:()=&gt;Xn,SphereGeometry:()=&gt;sh,Spherical:()=&gt;D_,SphericalHarmonics3:()=&gt;Fm,SplineCurve:()=&gt;nh,SpotLight:()=&gt;zm,SpotLightHelper:()=&gt;z_,Sprite:()=&gt;Xp,SpriteMaterial:()=&gt;Wf,SrcAlphaFactor:()=&gt;zp,SrcAlphaSaturateFactor:()=&gt;iT,SrcColorFactor:()=&gt;Kb,StaticCopyUsage:()=&gt;lO,StaticDrawUsage:()=&gt;Vf,StaticReadUsage:()=&gt;sO,StereoCamera:()=&gt;y_,StreamCopyUsage:()=&gt;cO,StreamDrawUsage:()=&gt;aO,StreamReadUsage:()=&gt;oO,StringKeyframeTrack:()=&gt;ar,SubtractEquation:()=&gt;Yb,SubtractiveBlending:()=&gt;tx,TOUCH:()=&gt;UN,TangentSpaceNormalMap:()=&gt;eo,TetrahedronGeometry:()=&gt;gm,Texture:()=&gt;zn,TextureLoader:()=&gt;p_,TextureUtils:()=&gt;Q_,Timer:()=&gt;w_,TimestampQuery:()=&gt;hO,TorusGeometry:()=&gt;vm,TorusKnotGeometry:()=&gt;ym,Triangle:()=&gt;bs,TriangleFanDrawMode:()=&gt;FN,TriangleStripDrawMode:()=&gt;HN,TrianglesDrawMode:()=&gt;IN,TubeGeometry:()=&gt;_m,UVMapping:()=&gt;ig,Uint16BufferAttribute:()=&gt;qf,Uint32BufferAttribute:()=&gt;Yf,Uint8BufferAttribute:()=&gt;Qy,Uint8ClampedBufferAttribute:()=&gt;Ky,Uniform:()=&gt;T_,UniformsGroup:()=&gt;A_,UniformsLib:()=&gt;zt,UniformsUtils:()=&gt;LT,UnsignedByteType:()=&gt;la,UnsignedInt248Type:()=&gt;Pu,UnsignedInt5999Type:()=&gt;sx,UnsignedIntType:()=&gt;or,UnsignedShort4444Type:()=&gt;sg,UnsignedShort5551Type:()=&gt;rg,UnsignedShortType:()=&gt;zu,VSMShadowMap:()=&gt;Pa,Vector2:()=&gt;ct,Vector3:()=&gt;B,Vector4:()=&gt;Oe,VectorKeyframeTrack:()=&gt;hl,VideoFrameTexture:()=&gt;i_,VideoTexture:()=&gt;Jp,WebGL3DRenderTarget:()=&gt;ky,WebGLArrayRenderTarget:()=&gt;Wy,WebGLCoordinateSystem:()=&gt;aa,WebGLCubeRenderTarget:()=&gt;Fp,WebGLRenderTarget:()=&gt;za,WebGLRenderer:()=&gt;Hg,WebGLUtils:()=&gt;tL,WebGPUCoordinateSystem:()=&gt;vu,WebXRController:()=&gt;Eu,WireframeGeometry:()=&gt;xm,WrapAroundEnding:()=&gt;Hf,ZeroCurvatureEnding:()=&gt;nl,ZeroFactor:()=&gt;jb,ZeroSlopeEnding:()=&gt;il,ZeroStencilOp:()=&gt;XN,createCanvasElement:()=&gt;NT});var Vb=&quot;179&quot;,DN={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},UN={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Gb=0,K_=1,Xb=2,NN=3,J_=0,mh=1,Nu=2,Pa=3,tr=0,Ni=1,Ds=2,sr=0,al=1,$_=2,tx=3,ex=4,qb=5,Zr=100,Yb=101,Wb=102,kb=103,Zb=104,jb=200,Qb=201,Kb=202,Jb=203,zp=204,Bp=205,$b=206,tT=207,eT=208,nT=209,iT=210,aT=211,sT=212,rT=213,oT=214,jm=0,Qm=1,Km=2,sl=3,Jm=4,$m=5,tg=6,eg=7,gh=0,lT=1,uT=2,us=0,cT=1,fT=2,hT=3,ng=4,dT=5,pT=6,mT=7,qy=&quot;attached&quot;,gT=&quot;detached&quot;,ig=300,rr=301,to=302,vh=303,yh=304,Ou=306,Bf=1e3,Ua=1001,Pf=1002,oi=1003,nx=1004,ON=1004,Lu=1005,LN=1005,Gn=1006,_h=1007,zN=1007,Us=1008,BN=1008,la=1009,ix=1010,ax=1011,zu=1012,ag=1013,or=1014,qi=1015,Bu=1016,sg=1017,rg=1018,Pu=1020,sx=35902,rx=1021,ox=1022,li=1023,gu=1026,Iu=1027,og=1028,xh=1029,lx=1030,lg=1031,PN=1032,ug=1033,Sh=33776,Mh=33777,Eh=33778,bh=33779,cg=35840,fg=35841,hg=35842,dg=35843,pg=36196,mg=37492,gg=37496,vg=37808,yg=37809,_g=37810,xg=37811,Sg=37812,Mg=37813,Eg=37814,bg=37815,Tg=37816,Ag=37817,Rg=37818,Cg=37819,wg=37820,Dg=37821,Th=36492,Ug=36494,Ng=36495,ux=36283,Og=36284,Lg=36285,zg=36286,vT=2200,yT=2201,_T=2202,If=2300,Pp=2301,Up=2302,nl=2400,il=2401,Hf=2402,Bg=2500,cx=2501,IN=0,HN=1,FN=2,xT=3200,ST=3201,VN=3202,GN=3203,eo=0,MT=1,lr=&quot;&quot;,ri=&quot;srgb&quot;,er=&quot;srgb-linear&quot;,Ff=&quot;linear&quot;,We=&quot;srgb&quot;,XN=0,el=7680,qN=7681,YN=7682,WN=7683,kN=34055,ZN=34056,jN=5386,QN=512,KN=513,JN=514,$N=515,tO=516,eO=517,nO=518,Yy=519,ET=512,bT=513,TT=514,fx=515,AT=516,RT=517,CT=518,wT=519,Vf=35044,iO=35048,aO=35040,sO=35045,rO=35049,oO=35041,lO=35046,uO=35050,cO=35042,fO=&quot;100&quot;,hx=&quot;300 es&quot;,aa=2e3,vu=2001,hO={COMPUTE:&quot;compute&quot;,RENDER:&quot;render&quot;},dO={PERSPECTIVE:&quot;perspective&quot;,LINEAR:&quot;linear&quot;,FLAT:&quot;flat&quot;},pO={NORMAL:&quot;normal&quot;,CENTROID:&quot;centroid&quot;,SAMPLE:&quot;sample&quot;,FIRST:&quot;first&quot;,EITHER:&quot;either&quot;},La=class{addEventListener(t,e){this._listeners===void 0&amp;&amp;(this._listeners={});let i=this._listeners;i[t]===void 0&amp;&amp;(i[t]=[]),i[t].indexOf(e)===-1&amp;&amp;i[t].push(e)}hasEventListener(t,e){let i=this._listeners;return i===void 0?!1:i[t]!==void 0&amp;&amp;i[t].indexOf(e)!==-1}removeEventListener(t,e){let i=this._listeners;if(i===void 0)return;let a=i[t];if(a!==void 0){let s=a.indexOf(e);s!==-1&amp;&amp;a.splice(s,1)}}dispatchEvent(t){let e=this._listeners;if(e===void 0)return;let i=e[t.type];if(i!==void 0){t.target=this;let a=i.slice(0);for(let s=0,o=a.length;s&lt;o;s++)a[s].call(this,t);t.target=null}}},wi=[&quot;00&quot;,&quot;01&quot;,&quot;02&quot;,&quot;03&quot;,&quot;04&quot;,&quot;05&quot;,&quot;06&quot;,&quot;07&quot;,&quot;08&quot;,&quot;09&quot;,&quot;0a&quot;,&quot;0b&quot;,&quot;0c&quot;,&quot;0d&quot;,&quot;0e&quot;,&quot;0f&quot;,&quot;10&quot;,&quot;11&quot;,&quot;12&quot;,&quot;13&quot;,&quot;14&quot;,&quot;15&quot;,&quot;16&quot;,&quot;17&quot;,&quot;18&quot;,&quot;19&quot;,&quot;1a&quot;,&quot;1b&quot;,&quot;1c&quot;,&quot;1d&quot;,&quot;1e&quot;,&quot;1f&quot;,&quot;20&quot;,&quot;21&quot;,&quot;22&quot;,&quot;23&quot;,&quot;24&quot;,&quot;25&quot;,&quot;26&quot;,&quot;27&quot;,&quot;28&quot;,&quot;29&quot;,&quot;2a&quot;,&quot;2b&quot;,&quot;2c&quot;,&quot;2d&quot;,&quot;2e&quot;,&quot;2f&quot;,&quot;30&quot;,&quot;31&quot;,&quot;32&quot;,&quot;33&quot;,&quot;34&quot;,&quot;35&quot;,&quot;36&quot;,&quot;37&quot;,&quot;38&quot;,&quot;39&quot;,&quot;3a&quot;,&quot;3b&quot;,&quot;3c&quot;,&quot;3d&quot;,&quot;3e&quot;,&quot;3f&quot;,&quot;40&quot;,&quot;41&quot;,&quot;42&quot;,&quot;43&quot;,&quot;44&quot;,&quot;45&quot;,&quot;46&quot;,&quot;47&quot;,&quot;48&quot;,&quot;49&quot;,&quot;4a&quot;,&quot;4b&quot;,&quot;4c&quot;,&quot;4d&quot;,&quot;4e&quot;,&quot;4f&quot;,&quot;50&quot;,&quot;51&quot;,&quot;52&quot;,&quot;53&quot;,&quot;54&quot;,&quot;55&quot;,&quot;56&quot;,&quot;57&quot;,&quot;58&quot;,&quot;59&quot;,&quot;5a&quot;,&quot;5b&quot;,&quot;5c&quot;,&quot;5d&quot;,&quot;5e&quot;,&quot;5f&quot;,&quot;60&quot;,&quot;61&quot;,&quot;62&quot;,&quot;63&quot;,&quot;64&quot;,&quot;65&quot;,&quot;66&quot;,&quot;67&quot;,&quot;68&quot;,&quot;69&quot;,&quot;6a&quot;,&quot;6b&quot;,&quot;6c&quot;,&quot;6d&quot;,&quot;6e&quot;,&quot;6f&quot;,&quot;70&quot;,&quot;71&quot;,&quot;72&quot;,&quot;73&quot;,&quot;74&quot;,&quot;75&quot;,&quot;76&quot;,&quot;77&quot;,&quot;78&quot;,&quot;79&quot;,&quot;7a&quot;,&quot;7b&quot;,&quot;7c&quot;,&quot;7d&quot;,&quot;7e&quot;,&quot;7f&quot;,&quot;80&quot;,&quot;81&quot;,&quot;82&quot;,&quot;83&quot;,&quot;84&quot;,&quot;85&quot;,&quot;86&quot;,&quot;87&quot;,&quot;88&quot;,&quot;89&quot;,&quot;8a&quot;,&quot;8b&quot;,&quot;8c&quot;,&quot;8d&quot;,&quot;8e&quot;,&quot;8f&quot;,&quot;90&quot;,&quot;91&quot;,&quot;92&quot;,&quot;93&quot;,&quot;94&quot;,&quot;95&quot;,&quot;96&quot;,&quot;97&quot;,&quot;98&quot;,&quot;99&quot;,&quot;9a&quot;,&quot;9b&quot;,&quot;9c&quot;,&quot;9d&quot;,&quot;9e&quot;,&quot;9f&quot;,&quot;a0&quot;,&quot;a1&quot;,&quot;a2&quot;,&quot;a3&quot;,&quot;a4&quot;,&quot;a5&quot;,&quot;a6&quot;,&quot;a7&quot;,&quot;a8&quot;,&quot;a9&quot;,&quot;aa&quot;,&quot;ab&quot;,&quot;ac&quot;,&quot;ad&quot;,&quot;ae&quot;,&quot;af&quot;,&quot;b0&quot;,&quot;b1&quot;,&quot;b2&quot;,&quot;b3&quot;,&quot;b4&quot;,&quot;b5&quot;,&quot;b6&quot;,&quot;b7&quot;,&quot;b8&quot;,&quot;b9&quot;,&quot;ba&quot;,&quot;bb&quot;,&quot;bc&quot;,&quot;bd&quot;,&quot;be&quot;,&quot;bf&quot;,&quot;c0&quot;,&quot;c1&quot;,&quot;c2&quot;,&quot;c3&quot;,&quot;c4&quot;,&quot;c5&quot;,&quot;c6&quot;,&quot;c7&quot;,&quot;c8&quot;,&quot;c9&quot;,&quot;ca&quot;,&quot;cb&quot;,&quot;cc&quot;,&quot;cd&quot;,&quot;ce&quot;,&quot;cf&quot;,&quot;d0&quot;,&quot;d1&quot;,&quot;d2&quot;,&quot;d3&quot;,&quot;d4&quot;,&quot;d5&quot;,&quot;d6&quot;,&quot;d7&quot;,&quot;d8&quot;,&quot;d9&quot;,&quot;da&quot;,&quot;db&quot;,&quot;dc&quot;,&quot;dd&quot;,&quot;de&quot;,&quot;df&quot;,&quot;e0&quot;,&quot;e1&quot;,&quot;e2&quot;,&quot;e3&quot;,&quot;e4&quot;,&quot;e5&quot;,&quot;e6&quot;,&quot;e7&quot;,&quot;e8&quot;,&quot;e9&quot;,&quot;ea&quot;,&quot;eb&quot;,&quot;ec&quot;,&quot;ed&quot;,&quot;ee&quot;,&quot;ef&quot;,&quot;f0&quot;,&quot;f1&quot;,&quot;f2&quot;,&quot;f3&quot;,&quot;f4&quot;,&quot;f5&quot;,&quot;f6&quot;,&quot;f7&quot;,&quot;f8&quot;,&quot;f9&quot;,&quot;fa&quot;,&quot;fb&quot;,&quot;fc&quot;,&quot;fd&quot;,&quot;fe&quot;,&quot;ff&quot;],EU=1234567,mu=Math.PI/180,yu=180/Math.PI;function Na(){let n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(wi[n&amp;255]+wi[n&gt;&gt;8&amp;255]+wi[n&gt;&gt;16&amp;255]+wi[n&gt;&gt;24&amp;255]+&quot;-&quot;+wi[t&amp;255]+wi[t&gt;&gt;8&amp;255]+&quot;-&quot;+wi[t&gt;&gt;16&amp;15|64]+wi[t&gt;&gt;24&amp;255]+&quot;-&quot;+wi[e&amp;63|128]+wi[e&gt;&gt;8&amp;255]+&quot;-&quot;+wi[e&gt;&gt;16&amp;255]+wi[e&gt;&gt;24&amp;255]+wi[i&amp;255]+wi[i&gt;&gt;8&amp;255]+wi[i&gt;&gt;16&amp;255]+wi[i&gt;&gt;24&amp;255]).toLowerCase()}function le(n,t,e){return Math.max(t,Math.min(e,n))}function DT(n,t){return(n%t+t)%t}function pH(n,t,e,i,a){return i+(n-t)*(a-i)/(e-t)}function mH(n,t,e){return n!==t?(e-n)/(t-n):0}function Np(n,t,e){return(1-e)*n+e*t}function gH(n,t,e,i){return Np(n,t,1-Math.exp(-e*i))}function vH(n,t=1){return t-Math.abs(DT(n,t*2)-t)}function yH(n,t,e){return n&lt;=t?0:n&gt;=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function _H(n,t,e){return n&lt;=t?0:n&gt;=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function xH(n,t){return n+Math.floor(Math.random()*(t-n+1))}function SH(n,t){return n+Math.random()*(t-n)}function MH(n){return n*(.5-Math.random())}function EH(n){n!==void 0&amp;&amp;(EU=n);let t=EU+=1831565813;return t=Math.imul(t^t&gt;&gt;&gt;15,t|1),t^=t+Math.imul(t^t&gt;&gt;&gt;7,t|61),((t^t&gt;&gt;&gt;14)&gt;&gt;&gt;0)/4294967296}function bH(n){return n*mu}function TH(n){return n*yu}function AH(n){return(n&amp;n-1)===0&amp;&amp;n!==0}function RH(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function CH(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function wH(n,t,e,i,a){let s=Math.cos,o=Math.sin,u=s(e/2),c=o(e/2),h=s((t+i)/2),d=o((t+i)/2),m=s((t-i)/2),g=o((t-i)/2),y=s((i-t)/2),x=o((i-t)/2);switch(a){case&quot;XYX&quot;:n.set(u*d,c*m,c*g,u*h);break;case&quot;YZY&quot;:n.set(c*g,u*d,c*m,u*h);break;case&quot;ZXZ&quot;:n.set(c*m,c*g,u*d,u*h);break;case&quot;XZX&quot;:n.set(u*d,c*x,c*y,u*h);break;case&quot;YXY&quot;:n.set(c*y,u*d,c*x,u*h);break;case&quot;ZYZ&quot;:n.set(c*x,c*y,u*d,u*h);break;default:console.warn(&quot;THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: &quot;+a)}}function Xi(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error(&quot;Invalid component type.&quot;)}}function _e(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error(&quot;Invalid component type.&quot;)}}var mO={DEG2RAD:mu,RAD2DEG:yu,generateUUID:Na,clamp:le,euclideanModulo:DT,mapLinear:pH,inverseLerp:mH,lerp:Np,damp:gH,pingpong:vH,smoothstep:yH,smootherstep:_H,randInt:xH,randFloat:SH,randFloatSpread:MH,seededRandom:EH,degToRad:bH,radToDeg:TH,isPowerOfTwo:AH,ceilPowerOfTwo:RH,floorPowerOfTwo:CH,setQuaternionFromProperEuler:wH,normalize:_e,denormalize:Xi},ct=class n{constructor(t=0,e=0){n.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error(&quot;index is out of range: &quot;+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error(&quot;index is out of range: &quot;+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,a=t.elements;return this.x=a[0]*e+a[3]*i+a[6],this.y=a[1]*e+a[4]*i+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=le(this.x,t.x,e.x),this.y=le(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=le(this.x,t,e),this.y=le(this.y,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(le(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(le(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&amp;&amp;t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),a=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*i-o*a+t.x,this.y=s*a+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},vi=class{constructor(t=0,e=0,i=0,a=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=a}static slerpFlat(t,e,i,a,s,o,u){let c=i[a+0],h=i[a+1],d=i[a+2],m=i[a+3],g=s[o+0],y=s[o+1],x=s[o+2],b=s[o+3];if(u===0){t[e+0]=c,t[e+1]=h,t[e+2]=d,t[e+3]=m;return}if(u===1){t[e+0]=g,t[e+1]=y,t[e+2]=x,t[e+3]=b;return}if(m!==b||c!==g||h!==y||d!==x){let M=1-u,v=c*g+h*y+d*x+m*b,S=v&gt;=0?1:-1,E=1-v*v;if(E&gt;Number.EPSILON){let w=Math.sqrt(E),U=Math.atan2(w,v*S);M=Math.sin(M*U)/w,u=Math.sin(u*U)/w}let T=u*S;if(c=c*M+g*T,h=h*M+y*T,d=d*M+x*T,m=m*M+b*T,M===1-u){let w=1/Math.sqrt(c*c+h*h+d*d+m*m);c*=w,h*=w,d*=w,m*=w}}t[e]=c,t[e+1]=h,t[e+2]=d,t[e+3]=m}static multiplyQuaternionsFlat(t,e,i,a,s,o){let u=i[a],c=i[a+1],h=i[a+2],d=i[a+3],m=s[o],g=s[o+1],y=s[o+2],x=s[o+3];return t[e]=u*x+d*m+c*y-h*g,t[e+1]=c*x+d*g+h*m-u*y,t[e+2]=h*x+d*y+u*g-c*m,t[e+3]=d*x-u*m-c*g-h*y,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,a){return this._x=t,this._y=e,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let i=t._x,a=t._y,s=t._z,o=t._order,u=Math.cos,c=Math.sin,h=u(i/2),d=u(a/2),m=u(s/2),g=c(i/2),y=c(a/2),x=c(s/2);switch(o){case&quot;XYZ&quot;:this._x=g*d*m+h*y*x,this._y=h*y*m-g*d*x,this._z=h*d*x+g*y*m,this._w=h*d*m-g*y*x;break;case&quot;YXZ&quot;:this._x=g*d*m+h*y*x,this._y=h*y*m-g*d*x,this._z=h*d*x-g*y*m,this._w=h*d*m+g*y*x;break;case&quot;ZXY&quot;:this._x=g*d*m-h*y*x,this._y=h*y*m+g*d*x,this._z=h*d*x+g*y*m,this._w=h*d*m-g*y*x;break;case&quot;ZYX&quot;:this._x=g*d*m-h*y*x,this._y=h*y*m+g*d*x,this._z=h*d*x-g*y*m,this._w=h*d*m+g*y*x;break;case&quot;YZX&quot;:this._x=g*d*m+h*y*x,this._y=h*y*m+g*d*x,this._z=h*d*x-g*y*m,this._w=h*d*m-g*y*x;break;case&quot;XZY&quot;:this._x=g*d*m-h*y*x,this._y=h*y*m-g*d*x,this._z=h*d*x+g*y*m,this._w=h*d*m+g*y*x;break;default:console.warn(&quot;THREE.Quaternion: .setFromEuler() encountered an unknown order: &quot;+o)}return e===!0&amp;&amp;this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,a=Math.sin(i);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],a=e[4],s=e[8],o=e[1],u=e[5],c=e[9],h=e[2],d=e[6],m=e[10],g=i+u+m;if(g&gt;0){let y=.5/Math.sqrt(g+1);this._w=.25/y,this._x=(d-c)*y,this._y=(s-h)*y,this._z=(o-a)*y}else if(i&gt;u&amp;&amp;i&gt;m){let y=2*Math.sqrt(1+i-u-m);this._w=(d-c)/y,this._x=.25*y,this._y=(a+o)/y,this._z=(s+h)/y}else if(u&gt;m){let y=2*Math.sqrt(1+u-i-m);this._w=(s-h)/y,this._x=(a+o)/y,this._y=.25*y,this._z=(c+d)/y}else{let y=2*Math.sqrt(1+m-i-u);this._w=(o-a)/y,this._x=(s+h)/y,this._y=(c+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i&lt;1e-8?(i=0,Math.abs(t.x)&gt;Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(le(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(i===0)return this;let a=Math.min(1,e/i);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,a=t._y,s=t._z,o=t._w,u=e._x,c=e._y,h=e._z,d=e._w;return this._x=i*d+o*u+a*h-s*c,this._y=a*d+o*c+s*u-i*h,this._z=s*d+o*h+i*c-a*u,this._w=o*d-i*u-a*c-s*h,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);let i=this._x,a=this._y,s=this._z,o=this._w,u=o*t._w+i*t._x+a*t._y+s*t._z;if(u&lt;0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,u=-u):this.copy(t),u&gt;=1)return this._w=o,this._x=i,this._y=a,this._z=s,this;let c=1-u*u;if(c&lt;=Number.EPSILON){let y=1-e;return this._w=y*o+e*this._w,this._x=y*i+e*this._x,this._y=y*a+e*this._y,this._z=y*s+e*this._z,this.normalize(),this}let h=Math.sqrt(c),d=Math.atan2(h,u),m=Math.sin((1-e)*d)/h,g=Math.sin(e*d)/h;return this._w=o*m+this._w*g,this._x=i*m+this._x*g,this._y=a*m+this._y*g,this._z=s*m+this._z*g,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(a*Math.sin(t),a*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&amp;&amp;t._y===this._y&amp;&amp;t._z===this._z&amp;&amp;t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},B=class n{constructor(t=0,e=0,i=0){n.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&amp;&amp;(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error(&quot;index is out of range: &quot;+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error(&quot;index is out of range: &quot;+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(bU.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(bU.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,a=this.z,s=t.elements;return this.x=s[0]*e+s[3]*i+s[6]*a,this.y=s[1]*e+s[4]*i+s[7]*a,this.z=s[2]*e+s[5]*i+s[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,a=this.z,s=t.elements,o=1/(s[3]*e+s[7]*i+s[11]*a+s[15]);return this.x=(s[0]*e+s[4]*i+s[8]*a+s[12])*o,this.y=(s[1]*e+s[5]*i+s[9]*a+s[13])*o,this.z=(s[2]*e+s[6]*i+s[10]*a+s[14])*o,this}applyQuaternion(t){let e=this.x,i=this.y,a=this.z,s=t.x,o=t.y,u=t.z,c=t.w,h=2*(o*a-u*i),d=2*(u*e-s*a),m=2*(s*i-o*e);return this.x=e+c*h+o*m-u*d,this.y=i+c*d+u*h-s*m,this.z=a+c*m+s*d-o*h,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,a=this.z,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*a,this.y=s[1]*e+s[5]*i+s[9]*a,this.z=s[2]*e+s[6]*i+s[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=le(this.x,t.x,e.x),this.y=le(this.y,t.y,e.y),this.z=le(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=le(this.x,t,e),this.y=le(this.y,t,e),this.z=le(this.z,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(le(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,a=t.y,s=t.z,o=e.x,u=e.y,c=e.z;return this.x=a*c-s*u,this.y=s*o-i*c,this.z=i*u-a*o,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return YE.copy(this).projectOnVector(t),this.sub(YE)}reflect(t){return this.sub(YE.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(le(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,a=this.z-t.z;return e*e+i*i+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let a=Math.sin(e)*t;return this.x=a*Math.sin(i),this.y=Math.cos(e)*t,this.z=a*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=a,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&amp;&amp;t.y===this.y&amp;&amp;t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},YE=new B,bU=new vi,ge=class n{constructor(t,e,i,a,s,o,u,c,h){n.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&amp;&amp;this.set(t,e,i,a,s,o,u,c,h)}set(t,e,i,a,s,o,u,c,h){let d=this.elements;return d[0]=t,d[1]=a,d[2]=u,d[3]=e,d[4]=s,d[5]=c,d[6]=i,d[7]=o,d[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,a=e.elements,s=this.elements,o=i[0],u=i[3],c=i[6],h=i[1],d=i[4],m=i[7],g=i[2],y=i[5],x=i[8],b=a[0],M=a[3],v=a[6],S=a[1],E=a[4],T=a[7],w=a[2],U=a[5],O=a[8];return s[0]=o*b+u*S+c*w,s[3]=o*M+u*E+c*U,s[6]=o*v+u*T+c*O,s[1]=h*b+d*S+m*w,s[4]=h*M+d*E+m*U,s[7]=h*v+d*T+m*O,s[2]=g*b+y*S+x*w,s[5]=g*M+y*E+x*U,s[8]=g*v+y*T+x*O,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=t[6],h=t[7],d=t[8];return e*o*d-e*u*h-i*s*d+i*u*c+a*s*h-a*o*c}invert(){let t=this.elements,e=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=t[6],h=t[7],d=t[8],m=d*o-u*h,g=u*c-d*s,y=h*s-o*c,x=e*m+i*g+a*y;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);let b=1/x;return t[0]=m*b,t[1]=(a*h-d*i)*b,t[2]=(u*i-a*o)*b,t[3]=g*b,t[4]=(d*e-a*c)*b,t[5]=(a*s-u*e)*b,t[6]=y*b,t[7]=(i*c-h*e)*b,t[8]=(o*e-i*s)*b,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,a,s,o,u){let c=Math.cos(s),h=Math.sin(s);return this.set(i*c,i*h,-i*(c*o+h*u)+o+t,-a*h,a*c,-a*(-h*o+c*u)+u+e,0,0,1),this}scale(t,e){return this.premultiply(WE.makeScale(t,e)),this}rotate(t){return this.premultiply(WE.makeRotation(-t)),this}translate(t,e){return this.premultiply(WE.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let a=0;a&lt;9;a++)if(e[a]!==i[a])return!1;return!0}fromArray(t,e=0){for(let i=0;i&lt;9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}},WE=new ge;function UT(n){for(let t=n.length-1;t&gt;=0;--t)if(n[t]&gt;=65535)return!0;return!1}var DH={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Lf(n,t){return new DH[n](t)}function Gf(n){return document.createElementNS(&quot;http://www.w3.org/1999/xhtml&quot;,n)}function NT(){let n=Gf(&quot;canvas&quot;);return n.style.display=&quot;block&quot;,n}var TU={};function _u(n){n in TU||(TU[n]=!0,console.warn(n))}function gO(n,t,e){return new Promise(function(i,a){function s(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(s,e);break;default:i()}}setTimeout(s,e)})}var AU=new ge().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),RU=new ge().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function UH(){let n={enabled:!0,workingColorSpace:er,spaces:{},convert:function(a,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===We&amp;&amp;(a.r=kr(a.r),a.g=kr(a.g),a.b=kr(a.b)),this.spaces[s].primaries!==this.spaces[o].primaries&amp;&amp;(a.applyMatrix3(this.spaces[s].toXYZ),a.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===We&amp;&amp;(a.r=zf(a.r),a.g=zf(a.g),a.b=zf(a.b))),a},workingToColorSpace:function(a,s){return this.convert(a,this.workingColorSpace,s)},colorSpaceToWorking:function(a,s){return this.convert(a,s,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===lr?Ff:this.spaces[a].transfer},getLuminanceCoefficients:function(a,s=this.workingColorSpace){return a.fromArray(this.spaces[s].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,s,o){return a.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,s){return _u(&quot;THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace().&quot;),n.workingToColorSpace(a,s)},toWorkingColorSpace:function(a,s){return _u(&quot;THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking().&quot;),n.colorSpaceToWorking(a,s)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[er]:{primaries:t,whitePoint:i,transfer:Ff,toXYZ:AU,fromXYZ:RU,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:ri},outputColorSpaceConfig:{drawingBufferColorSpace:ri}},[ri]:{primaries:t,whitePoint:i,transfer:We,toXYZ:AU,fromXYZ:RU,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:ri}}}),n}var we=UH();function kr(n){return n&lt;.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function zf(n){return n&lt;.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}var pf,Ip=class{static getDataURL(t,e=&quot;image/png&quot;){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement&gt;&quot;u&quot;)return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{pf===void 0&amp;&amp;(pf=Gf(&quot;canvas&quot;)),pf.width=t.width,pf.height=t.height;let a=pf.getContext(&quot;2d&quot;);t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height),i=pf}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;t instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;t instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;t instanceof ImageBitmap){let e=Gf(&quot;canvas&quot;);e.width=t.width,e.height=t.height;let i=e.getContext(&quot;2d&quot;);i.drawImage(t,0,0,t.width,t.height);let a=i.getImageData(0,0,t.width,t.height),s=a.data;for(let o=0;o&lt;s.length;o++)s[o]=kr(s[o]/255)*255;return i.putImageData(a,0,0),e}else if(t.data){let e=t.data.slice(0);for(let i=0;i&lt;e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(kr(e[i]/255)*255):e[i]=kr(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn(&quot;THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.&quot;),t}},NH=0,Ts=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,&quot;id&quot;,{value:NH++}),this.uuid=Na(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){let e=this.data;return e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&amp;&amp;this.version++}toJSON(t){let e=t===void 0||typeof t==&quot;string&quot;;if(!e&amp;&amp;t.images[this.uuid]!==void 0)return t.images[this.uuid];let i={uuid:this.uuid,url:&quot;&quot;},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let o=0,u=a.length;o&lt;u;o++)a[o].isDataTexture?s.push(kE(a[o].image)):s.push(kE(a[o]))}else s=kE(a);i.url=s}return e||(t.images[this.uuid]=i),i}};function kE(n){return typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;n instanceof ImageBitmap?Ip.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn(&quot;THREE.Texture: Unable to serialize Texture.&quot;),{})}var OH=0,ZE=new B,zn=class n extends La{constructor(t=n.DEFAULT_IMAGE,e=n.DEFAULT_MAPPING,i=Ua,a=Ua,s=Gn,o=Us,u=li,c=la,h=n.DEFAULT_ANISOTROPY,d=lr){super(),this.isTexture=!0,Object.defineProperty(this,&quot;id&quot;,{value:OH++}),this.uuid=Na(),this.name=&quot;&quot;,this.source=new Ts(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=s,this.minFilter=o,this.anisotropy=h,this.format=u,this.internalFormat=null,this.type=c,this.offset=new ct(0,0),this.repeat=new ct(1,1),this.center=new ct(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ge,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&amp;&amp;t.depth&amp;&amp;t.depth&gt;1),this.pmremVersion=0}get width(){return this.source.getSize(ZE).x}get height(){return this.source.getSize(ZE).y}get depth(){return this.source.getSize(ZE).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter &#39;${e}&#39; has value of undefined.`);continue}let a=this[e];if(a===void 0){console.warn(`THREE.Texture.setValues(): property &#39;${e}&#39; does not exist.`);continue}a&amp;&amp;i&amp;&amp;a.isVector2&amp;&amp;i.isVector2||a&amp;&amp;i&amp;&amp;a.isVector3&amp;&amp;i.isVector3||a&amp;&amp;i&amp;&amp;a.isMatrix3&amp;&amp;i.isMatrix3?a.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t==&quot;string&quot;;if(!e&amp;&amp;t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let i={metadata:{version:4.7,type:&quot;Texture&quot;,generator:&quot;Texture.toJSON&quot;},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length&gt;0&amp;&amp;(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}transformUv(t){if(this.mapping!==ig)return t;if(t.applyMatrix3(this.matrix),t.x&lt;0||t.x&gt;1)switch(this.wrapS){case Bf:t.x=t.x-Math.floor(t.x);break;case Ua:t.x=t.x&lt;0?0:1;break;case Pf:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y&lt;0||t.y&gt;1)switch(this.wrapT){case Bf:t.y=t.y-Math.floor(t.y);break;case Ua:t.y=t.y&lt;0?0:1;break;case Pf:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&amp;&amp;(t.y=1-t.y),t}set needsUpdate(t){t===!0&amp;&amp;(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&amp;&amp;this.pmremVersion++}};zn.DEFAULT_IMAGE=null;zn.DEFAULT_MAPPING=ig;zn.DEFAULT_ANISOTROPY=1;var Oe=class n{constructor(t=0,e=0,i=0,a=1){n.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,a){return this.x=t,this.y=e,this.z=i,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error(&quot;index is out of range: &quot;+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error(&quot;index is out of range: &quot;+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,a=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*a+o[12]*s,this.y=o[1]*e+o[5]*i+o[9]*a+o[13]*s,this.z=o[2]*e+o[6]*i+o[10]*a+o[14]*s,this.w=o[3]*e+o[7]*i+o[11]*a+o[15]*s,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e&lt;1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,a,s,c=t.elements,h=c[0],d=c[4],m=c[8],g=c[1],y=c[5],x=c[9],b=c[2],M=c[6],v=c[10];if(Math.abs(d-g)&lt;.01&amp;&amp;Math.abs(m-b)&lt;.01&amp;&amp;Math.abs(x-M)&lt;.01){if(Math.abs(d+g)&lt;.1&amp;&amp;Math.abs(m+b)&lt;.1&amp;&amp;Math.abs(x+M)&lt;.1&amp;&amp;Math.abs(h+y+v-3)&lt;.1)return this.set(1,0,0,0),this;e=Math.PI;let E=(h+1)/2,T=(y+1)/2,w=(v+1)/2,U=(d+g)/4,O=(m+b)/4,z=(x+M)/4;return E&gt;T&amp;&amp;E&gt;w?E&lt;.01?(i=0,a=.707106781,s=.707106781):(i=Math.sqrt(E),a=U/i,s=O/i):T&gt;w?T&lt;.01?(i=.707106781,a=0,s=.707106781):(a=Math.sqrt(T),i=U/a,s=z/a):w&lt;.01?(i=.707106781,a=.707106781,s=0):(s=Math.sqrt(w),i=O/s,a=z/s),this.set(i,a,s,e),this}let S=Math.sqrt((M-x)*(M-x)+(m-b)*(m-b)+(g-d)*(g-d));return Math.abs(S)&lt;.001&amp;&amp;(S=1),this.x=(M-x)/S,this.y=(m-b)/S,this.z=(g-d)/S,this.w=Math.acos((h+y+v-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=le(this.x,t.x,e.x),this.y=le(this.y,t.y,e.y),this.z=le(this.z,t.z,e.z),this.w=le(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=le(this.x,t,e),this.y=le(this.y,t,e),this.z=le(this.z,t,e),this.w=le(this.w,t,e),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(le(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&amp;&amp;t.y===this.y&amp;&amp;t.z===this.z&amp;&amp;t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Xf=class extends La{constructor(t=1,e=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Gn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=i.depth,this.scissor=new Oe(0,0,t,e),this.scissorTest=!1,this.viewport=new Oe(0,0,t,e);let a={width:t,height:e,depth:i.depth},s=new zn(a);this.textures=[];let o=i.count;for(let u=0;u&lt;o;u++)this.textures[u]=s.clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(t={}){let e={minFilter:Gn,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&amp;&amp;(e.mapping=t.mapping),t.wrapS!==void 0&amp;&amp;(e.wrapS=t.wrapS),t.wrapT!==void 0&amp;&amp;(e.wrapT=t.wrapT),t.wrapR!==void 0&amp;&amp;(e.wrapR=t.wrapR),t.magFilter!==void 0&amp;&amp;(e.magFilter=t.magFilter),t.minFilter!==void 0&amp;&amp;(e.minFilter=t.minFilter),t.format!==void 0&amp;&amp;(e.format=t.format),t.type!==void 0&amp;&amp;(e.type=t.type),t.anisotropy!==void 0&amp;&amp;(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&amp;&amp;(e.colorSpace=t.colorSpace),t.flipY!==void 0&amp;&amp;(e.flipY=t.flipY),t.generateMipmaps!==void 0&amp;&amp;(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&amp;&amp;(e.internalFormat=t.internalFormat);for(let i=0;i&lt;this.textures.length;i++)this.textures[i].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&amp;&amp;(this._depthTexture.renderTarget=null),t!==null&amp;&amp;(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let a=0,s=this.textures.length;a&lt;s;a++)this.textures[a].image.width=t,this.textures[a].image.height=e,this.textures[a].image.depth=i,this.textures[a].isArrayTexture=this.textures[a].image.depth&gt;1;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e&lt;i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;let a=Object.assign({},t.textures[e].image);this.textures[e].source=new Ts(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&amp;&amp;(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}},za=class extends Xf{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}},xu=class extends zn{constructor(t=null,e=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:a},this.magFilter=oi,this.minFilter=oi,this.wrapR=Ua,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}},Wy=class extends za{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new xu(null,t,e,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}},Su=class extends zn{constructor(t=null,e=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:a},this.magFilter=oi,this.minFilter=oi,this.wrapR=Ua,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},ky=class extends za{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Su(null,t,e,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}},Zn=class{constructor(t=new B(1/0,1/0,1/0),e=new B(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e&lt;i;e+=3)this.expandByPoint(xs.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e&lt;i;e++)this.expandByPoint(xs.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e&lt;i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=xs.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x&lt;this.min.x||this.max.y&lt;this.min.y||this.max.z&lt;this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let i=t.geometry;if(i!==void 0){let s=i.getAttribute(&quot;position&quot;);if(e===!0&amp;&amp;s!==void 0&amp;&amp;t.isInstancedMesh!==!0)for(let o=0,u=s.count;o&lt;u;o++)t.isMesh===!0?t.getVertexPosition(o,xs):xs.fromBufferAttribute(s,o),xs.applyMatrix4(t.matrixWorld),this.expandByPoint(xs);else t.boundingBox!==void 0?(t.boundingBox===null&amp;&amp;t.computeBoundingBox(),ny.copy(t.boundingBox)):(i.boundingBox===null&amp;&amp;i.computeBoundingBox(),ny.copy(i.boundingBox)),ny.applyMatrix4(t.matrixWorld),this.union(ny)}let a=t.children;for(let s=0,o=a.length;s&lt;o;s++)this.expandByObject(a[s],e);return this}containsPoint(t){return t.x&gt;=this.min.x&amp;&amp;t.x&lt;=this.max.x&amp;&amp;t.y&gt;=this.min.y&amp;&amp;t.y&lt;=this.max.y&amp;&amp;t.z&gt;=this.min.z&amp;&amp;t.z&lt;=this.max.z}containsBox(t){return this.min.x&lt;=t.min.x&amp;&amp;t.max.x&lt;=this.max.x&amp;&amp;this.min.y&lt;=t.min.y&amp;&amp;t.max.y&lt;=this.max.y&amp;&amp;this.min.z&lt;=t.min.z&amp;&amp;t.max.z&lt;=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x&gt;=this.min.x&amp;&amp;t.min.x&lt;=this.max.x&amp;&amp;t.max.y&gt;=this.min.y&amp;&amp;t.min.y&lt;=this.max.y&amp;&amp;t.max.z&gt;=this.min.z&amp;&amp;t.min.z&lt;=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,xs),xs.distanceToSquared(t.center)&lt;=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x&gt;0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y&gt;0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z&gt;0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e&lt;=-t.constant&amp;&amp;i&gt;=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(vp),iy.subVectors(this.max,vp),mf.subVectors(t.a,vp),gf.subVectors(t.b,vp),vf.subVectors(t.c,vp),Zo.subVectors(gf,mf),jo.subVectors(vf,gf),nu.subVectors(mf,vf);let e=[0,-Zo.z,Zo.y,0,-jo.z,jo.y,0,-nu.z,nu.y,Zo.z,0,-Zo.x,jo.z,0,-jo.x,nu.z,0,-nu.x,-Zo.y,Zo.x,0,-jo.y,jo.x,0,-nu.y,nu.x,0];return!jE(e,mf,gf,vf,iy)||(e=[1,0,0,0,1,0,0,0,1],!jE(e,mf,gf,vf,iy))?!1:(ay.crossVectors(Zo,jo),e=[ay.x,ay.y,ay.z],jE(e,mf,gf,vf,iy))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,xs).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(xs).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&amp;&amp;this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Hr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Hr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Hr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Hr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Hr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Hr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Hr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Hr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Hr),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&amp;&amp;t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}},Hr=[new B,new B,new B,new B,new B,new B,new B,new B],xs=new B,ny=new Zn,mf=new B,gf=new B,vf=new B,Zo=new B,jo=new B,nu=new B,vp=new B,iy=new B,ay=new B,iu=new B;function jE(n,t,e,i,a){for(let s=0,o=n.length-3;s&lt;=o;s+=3){iu.fromArray(n,s);let u=a.x*Math.abs(iu.x)+a.y*Math.abs(iu.y)+a.z*Math.abs(iu.z),c=t.dot(iu),h=e.dot(iu),d=i.dot(iu);if(Math.max(-Math.max(c,h,d),Math.min(c,h,d))&gt;u)return!1}return!0}var LH=new Zn,yp=new B,QE=new B,Xn=class{constructor(t=new B,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;e!==void 0?i.copy(e):LH.setFromPoints(t).getCenter(i);let a=0;for(let s=0,o=t.length;s&lt;o;s++)a=Math.max(a,i.distanceToSquared(t[s]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius&lt;0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)&lt;=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)&lt;=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))&lt;=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i&gt;this.radius*this.radius&amp;&amp;(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;yp.subVectors(t,this.center);let e=yp.lengthSq();if(e&gt;this.radius*this.radius){let i=Math.sqrt(e),a=(i-this.radius)*.5;this.center.addScaledVector(yp,a/i),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(QE.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(yp.copy(t.center).add(QE)),this.expandByPoint(yp.copy(t.center).sub(QE))),this)}equals(t){return t.center.equals(this.center)&amp;&amp;t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}},Fr=new B,KE=new B,sy=new B,Qo=new B,JE=new B,ry=new B,$E=new B,jr=class{constructor(t=new B,e=new B(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Fr)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i&lt;0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Fr.subVectors(t,this.origin).dot(this.direction);return e&lt;0?this.origin.distanceToSquared(t):(Fr.copy(this.origin).addScaledVector(this.direction,e),Fr.distanceToSquared(t))}distanceSqToSegment(t,e,i,a){KE.copy(t).add(e).multiplyScalar(.5),sy.copy(e).sub(t).normalize(),Qo.copy(this.origin).sub(KE);let s=t.distanceTo(e)*.5,o=-this.direction.dot(sy),u=Qo.dot(this.direction),c=-Qo.dot(sy),h=Qo.lengthSq(),d=Math.abs(1-o*o),m,g,y,x;if(d&gt;0)if(m=o*c-u,g=o*u-c,x=s*d,m&gt;=0)if(g&gt;=-x)if(g&lt;=x){let b=1/d;m*=b,g*=b,y=m*(m+o*g+2*u)+g*(o*m+g+2*c)+h}else g=s,m=Math.max(0,-(o*g+u)),y=-m*m+g*(g+2*c)+h;else g=-s,m=Math.max(0,-(o*g+u)),y=-m*m+g*(g+2*c)+h;else g&lt;=-x?(m=Math.max(0,-(-o*s+u)),g=m&gt;0?-s:Math.min(Math.max(-s,-c),s),y=-m*m+g*(g+2*c)+h):g&lt;=x?(m=0,g=Math.min(Math.max(-s,-c),s),y=g*(g+2*c)+h):(m=Math.max(0,-(o*s+u)),g=m&gt;0?s:Math.min(Math.max(-s,-c),s),y=-m*m+g*(g+2*c)+h);else g=o&gt;0?-s:s,m=Math.max(0,-(o*g+u)),y=-m*m+g*(g+2*c)+h;return i&amp;&amp;i.copy(this.origin).addScaledVector(this.direction,m),a&amp;&amp;a.copy(KE).addScaledVector(sy,g),y}intersectSphere(t,e){Fr.subVectors(t.center,this.origin);let i=Fr.dot(this.direction),a=Fr.dot(Fr)-i*i,s=t.radius*t.radius;if(a&gt;s)return null;let o=Math.sqrt(s-a),u=i-o,c=i+o;return c&lt;0?null:u&lt;0?this.at(c,e):this.at(u,e)}intersectsSphere(t){return t.radius&lt;0?!1:this.distanceSqToPoint(t.center)&lt;=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i&gt;=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e&lt;0}intersectBox(t,e){let i,a,s,o,u,c,h=1/this.direction.x,d=1/this.direction.y,m=1/this.direction.z,g=this.origin;return h&gt;=0?(i=(t.min.x-g.x)*h,a=(t.max.x-g.x)*h):(i=(t.max.x-g.x)*h,a=(t.min.x-g.x)*h),d&gt;=0?(s=(t.min.y-g.y)*d,o=(t.max.y-g.y)*d):(s=(t.max.y-g.y)*d,o=(t.min.y-g.y)*d),i&gt;o||s&gt;a||((s&gt;i||isNaN(i))&amp;&amp;(i=s),(o&lt;a||isNaN(a))&amp;&amp;(a=o),m&gt;=0?(u=(t.min.z-g.z)*m,c=(t.max.z-g.z)*m):(u=(t.max.z-g.z)*m,c=(t.min.z-g.z)*m),i&gt;c||u&gt;a)||((u&gt;i||i!==i)&amp;&amp;(i=u),(c&lt;a||a!==a)&amp;&amp;(a=c),a&lt;0)?null:this.at(i&gt;=0?i:a,e)}intersectsBox(t){return this.intersectBox(t,Fr)!==null}intersectTriangle(t,e,i,a,s){JE.subVectors(e,t),ry.subVectors(i,t),$E.crossVectors(JE,ry);let o=this.direction.dot($E),u;if(o&gt;0){if(a)return null;u=1}else if(o&lt;0)u=-1,o=-o;else return null;Qo.subVectors(this.origin,t);let c=u*this.direction.dot(ry.crossVectors(Qo,ry));if(c&lt;0)return null;let h=u*this.direction.dot(JE.cross(Qo));if(h&lt;0||c+h&gt;o)return null;let d=-u*Qo.dot($E);return d&lt;0?null:this.at(d/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&amp;&amp;t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},fe=class n{constructor(t,e,i,a,s,o,u,c,h,d,m,g,y,x,b,M){n.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&amp;&amp;this.set(t,e,i,a,s,o,u,c,h,d,m,g,y,x,b,M)}set(t,e,i,a,s,o,u,c,h,d,m,g,y,x,b,M){let v=this.elements;return v[0]=t,v[4]=e,v[8]=i,v[12]=a,v[1]=s,v[5]=o,v[9]=u,v[13]=c,v[2]=h,v[6]=d,v[10]=m,v[14]=g,v[3]=y,v[7]=x,v[11]=b,v[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new n().fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,a=1/yf.setFromMatrixColumn(t,0).length(),s=1/yf.setFromMatrixColumn(t,1).length(),o=1/yf.setFromMatrixColumn(t,2).length();return e[0]=i[0]*a,e[1]=i[1]*a,e[2]=i[2]*a,e[3]=0,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,a=t.y,s=t.z,o=Math.cos(i),u=Math.sin(i),c=Math.cos(a),h=Math.sin(a),d=Math.cos(s),m=Math.sin(s);if(t.order===&quot;XYZ&quot;){let g=o*d,y=o*m,x=u*d,b=u*m;e[0]=c*d,e[4]=-c*m,e[8]=h,e[1]=y+x*h,e[5]=g-b*h,e[9]=-u*c,e[2]=b-g*h,e[6]=x+y*h,e[10]=o*c}else if(t.order===&quot;YXZ&quot;){let g=c*d,y=c*m,x=h*d,b=h*m;e[0]=g+b*u,e[4]=x*u-y,e[8]=o*h,e[1]=o*m,e[5]=o*d,e[9]=-u,e[2]=y*u-x,e[6]=b+g*u,e[10]=o*c}else if(t.order===&quot;ZXY&quot;){let g=c*d,y=c*m,x=h*d,b=h*m;e[0]=g-b*u,e[4]=-o*m,e[8]=x+y*u,e[1]=y+x*u,e[5]=o*d,e[9]=b-g*u,e[2]=-o*h,e[6]=u,e[10]=o*c}else if(t.order===&quot;ZYX&quot;){let g=o*d,y=o*m,x=u*d,b=u*m;e[0]=c*d,e[4]=x*h-y,e[8]=g*h+b,e[1]=c*m,e[5]=b*h+g,e[9]=y*h-x,e[2]=-h,e[6]=u*c,e[10]=o*c}else if(t.order===&quot;YZX&quot;){let g=o*c,y=o*h,x=u*c,b=u*h;e[0]=c*d,e[4]=b-g*m,e[8]=x*m+y,e[1]=m,e[5]=o*d,e[9]=-u*d,e[2]=-h*d,e[6]=y*m+x,e[10]=g-b*m}else if(t.order===&quot;XZY&quot;){let g=o*c,y=o*h,x=u*c,b=u*h;e[0]=c*d,e[4]=-m,e[8]=h*d,e[1]=g*m+b,e[5]=o*d,e[9]=y*m-x,e[2]=x*m-y,e[6]=u*d,e[10]=b*m+g}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(zH,t,BH)}lookAt(t,e,i){let a=this.elements;return wa.subVectors(t,e),wa.lengthSq()===0&amp;&amp;(wa.z=1),wa.normalize(),Ko.crossVectors(i,wa),Ko.lengthSq()===0&amp;&amp;(Math.abs(i.z)===1?wa.x+=1e-4:wa.z+=1e-4,wa.normalize(),Ko.crossVectors(i,wa)),Ko.normalize(),oy.crossVectors(wa,Ko),a[0]=Ko.x,a[4]=oy.x,a[8]=wa.x,a[1]=Ko.y,a[5]=oy.y,a[9]=wa.y,a[2]=Ko.z,a[6]=oy.z,a[10]=wa.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,a=e.elements,s=this.elements,o=i[0],u=i[4],c=i[8],h=i[12],d=i[1],m=i[5],g=i[9],y=i[13],x=i[2],b=i[6],M=i[10],v=i[14],S=i[3],E=i[7],T=i[11],w=i[15],U=a[0],O=a[4],z=a[8],C=a[12],R=a[1],P=a[5],j=a[9],X=a[13],Z=a[2],st=a[6],et=a[10],mt=a[14],K=a[3],_t=a[7],Ut=a[11],xt=a[15];return s[0]=o*U+u*R+c*Z+h*K,s[4]=o*O+u*P+c*st+h*_t,s[8]=o*z+u*j+c*et+h*Ut,s[12]=o*C+u*X+c*mt+h*xt,s[1]=d*U+m*R+g*Z+y*K,s[5]=d*O+m*P+g*st+y*_t,s[9]=d*z+m*j+g*et+y*Ut,s[13]=d*C+m*X+g*mt+y*xt,s[2]=x*U+b*R+M*Z+v*K,s[6]=x*O+b*P+M*st+v*_t,s[10]=x*z+b*j+M*et+v*Ut,s[14]=x*C+b*X+M*mt+v*xt,s[3]=S*U+E*R+T*Z+w*K,s[7]=S*O+E*P+T*st+w*_t,s[11]=S*z+E*j+T*et+w*Ut,s[15]=S*C+E*X+T*mt+w*xt,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],a=t[8],s=t[12],o=t[1],u=t[5],c=t[9],h=t[13],d=t[2],m=t[6],g=t[10],y=t[14],x=t[3],b=t[7],M=t[11],v=t[15];return x*(+s*c*m-a*h*m-s*u*g+i*h*g+a*u*y-i*c*y)+b*(+e*c*y-e*h*g+s*o*g-a*o*y+a*h*d-s*c*d)+M*(+e*h*m-e*u*y-s*o*m+i*o*y+s*u*d-i*h*d)+v*(-a*u*d-e*c*m+e*u*g+a*o*m-i*o*g+i*c*d)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){let a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=e,a[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],a=t[2],s=t[3],o=t[4],u=t[5],c=t[6],h=t[7],d=t[8],m=t[9],g=t[10],y=t[11],x=t[12],b=t[13],M=t[14],v=t[15],S=m*M*h-b*g*h+b*c*y-u*M*y-m*c*v+u*g*v,E=x*g*h-d*M*h-x*c*y+o*M*y+d*c*v-o*g*v,T=d*b*h-x*m*h+x*u*y-o*b*y-d*u*v+o*m*v,w=x*m*c-d*b*c-x*u*g+o*b*g+d*u*M-o*m*M,U=e*S+i*E+a*T+s*w;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let O=1/U;return t[0]=S*O,t[1]=(b*g*s-m*M*s-b*a*y+i*M*y+m*a*v-i*g*v)*O,t[2]=(u*M*s-b*c*s+b*a*h-i*M*h-u*a*v+i*c*v)*O,t[3]=(m*c*s-u*g*s-m*a*h+i*g*h+u*a*y-i*c*y)*O,t[4]=E*O,t[5]=(d*M*s-x*g*s+x*a*y-e*M*y-d*a*v+e*g*v)*O,t[6]=(x*c*s-o*M*s-x*a*h+e*M*h+o*a*v-e*c*v)*O,t[7]=(o*g*s-d*c*s+d*a*h-e*g*h-o*a*y+e*c*y)*O,t[8]=T*O,t[9]=(x*m*s-d*b*s-x*i*y+e*b*y+d*i*v-e*m*v)*O,t[10]=(o*b*s-x*u*s+x*i*h-e*b*h-o*i*v+e*u*v)*O,t[11]=(d*u*s-o*m*s-d*i*h+e*m*h+o*i*y-e*u*y)*O,t[12]=w*O,t[13]=(d*b*a-x*m*a+x*i*g-e*b*g-d*i*M+e*m*M)*O,t[14]=(x*u*a-o*b*a-x*i*c+e*b*c+o*i*M-e*u*M)*O,t[15]=(o*m*a-d*u*a+d*i*c-e*m*c-o*i*g+e*u*g)*O,this}scale(t){let e=this.elements,i=t.x,a=t.y,s=t.z;return e[0]*=i,e[4]*=a,e[8]*=s,e[1]*=i,e[5]*=a,e[9]*=s,e[2]*=i,e[6]*=a,e[10]*=s,e[3]*=i,e[7]*=a,e[11]*=s,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,a))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),a=Math.sin(e),s=1-i,o=t.x,u=t.y,c=t.z,h=s*o,d=s*u;return this.set(h*o+i,h*u-a*c,h*c+a*u,0,h*u+a*c,d*u+i,d*c-a*o,0,h*c-a*u,d*c+a*o,s*c*c+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,a,s,o){return this.set(1,i,s,0,t,1,o,0,e,a,1,0,0,0,0,1),this}compose(t,e,i){let a=this.elements,s=e._x,o=e._y,u=e._z,c=e._w,h=s+s,d=o+o,m=u+u,g=s*h,y=s*d,x=s*m,b=o*d,M=o*m,v=u*m,S=c*h,E=c*d,T=c*m,w=i.x,U=i.y,O=i.z;return a[0]=(1-(b+v))*w,a[1]=(y+T)*w,a[2]=(x-E)*w,a[3]=0,a[4]=(y-T)*U,a[5]=(1-(g+v))*U,a[6]=(M+S)*U,a[7]=0,a[8]=(x+E)*O,a[9]=(M-S)*O,a[10]=(1-(g+b))*O,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,e,i){let a=this.elements,s=yf.set(a[0],a[1],a[2]).length(),o=yf.set(a[4],a[5],a[6]).length(),u=yf.set(a[8],a[9],a[10]).length();this.determinant()&lt;0&amp;&amp;(s=-s),t.x=a[12],t.y=a[13],t.z=a[14],Ss.copy(this);let h=1/s,d=1/o,m=1/u;return Ss.elements[0]*=h,Ss.elements[1]*=h,Ss.elements[2]*=h,Ss.elements[4]*=d,Ss.elements[5]*=d,Ss.elements[6]*=d,Ss.elements[8]*=m,Ss.elements[9]*=m,Ss.elements[10]*=m,e.setFromRotationMatrix(Ss),i.x=s,i.y=o,i.z=u,this}makePerspective(t,e,i,a,s,o,u=aa,c=!1){let h=this.elements,d=2*s/(e-t),m=2*s/(i-a),g=(e+t)/(e-t),y=(i+a)/(i-a),x,b;if(c)x=s/(o-s),b=o*s/(o-s);else if(u===aa)x=-(o+s)/(o-s),b=-2*o*s/(o-s);else if(u===vu)x=-o/(o-s),b=-o*s/(o-s);else throw new Error(&quot;THREE.Matrix4.makePerspective(): Invalid coordinate system: &quot;+u);return h[0]=d,h[4]=0,h[8]=g,h[12]=0,h[1]=0,h[5]=m,h[9]=y,h[13]=0,h[2]=0,h[6]=0,h[10]=x,h[14]=b,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(t,e,i,a,s,o,u=aa,c=!1){let h=this.elements,d=2/(e-t),m=2/(i-a),g=-(e+t)/(e-t),y=-(i+a)/(i-a),x,b;if(c)x=1/(o-s),b=o/(o-s);else if(u===aa)x=-2/(o-s),b=-(o+s)/(o-s);else if(u===vu)x=-1/(o-s),b=-s/(o-s);else throw new Error(&quot;THREE.Matrix4.makeOrthographic(): Invalid coordinate system: &quot;+u);return h[0]=d,h[4]=0,h[8]=0,h[12]=g,h[1]=0,h[5]=m,h[9]=0,h[13]=y,h[2]=0,h[6]=0,h[10]=x,h[14]=b,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let a=0;a&lt;16;a++)if(e[a]!==i[a])return!1;return!0}fromArray(t,e=0){for(let i=0;i&lt;16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}},yf=new B,Ss=new fe,zH=new B(0,0,0),BH=new B(1,1,1),Ko=new B,oy=new B,wa=new B,CU=new fe,wU=new vi,sa=class n{constructor(t=0,e=0,i=0,a=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,a=this._order){return this._x=t,this._y=e,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){let a=t.elements,s=a[0],o=a[4],u=a[8],c=a[1],h=a[5],d=a[9],m=a[2],g=a[6],y=a[10];switch(e){case&quot;XYZ&quot;:this._y=Math.asin(le(u,-1,1)),Math.abs(u)&lt;.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(g,h),this._z=0);break;case&quot;YXZ&quot;:this._x=Math.asin(-le(d,-1,1)),Math.abs(d)&lt;.9999999?(this._y=Math.atan2(u,y),this._z=Math.atan2(c,h)):(this._y=Math.atan2(-m,s),this._z=0);break;case&quot;ZXY&quot;:this._x=Math.asin(le(g,-1,1)),Math.abs(g)&lt;.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-o,h)):(this._y=0,this._z=Math.atan2(c,s));break;case&quot;ZYX&quot;:this._y=Math.asin(-le(m,-1,1)),Math.abs(m)&lt;.9999999?(this._x=Math.atan2(g,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,h));break;case&quot;YZX&quot;:this._z=Math.asin(le(c,-1,1)),Math.abs(c)&lt;.9999999?(this._x=Math.atan2(-d,h),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(u,y));break;case&quot;XZY&quot;:this._z=Math.asin(-le(o,-1,1)),Math.abs(o)&lt;.9999999?(this._x=Math.atan2(g,h),this._y=Math.atan2(u,s)):(this._x=Math.atan2(-d,y),this._y=0);break;default:console.warn(&quot;THREE.Euler: .setFromRotationMatrix() encountered an unknown order: &quot;+e)}return this._order=e,i===!0&amp;&amp;this._onChangeCallback(),this}setFromQuaternion(t,e,i){return CU.makeRotationFromQuaternion(t),this.setFromRotationMatrix(CU,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return wU.setFromEuler(this),this.setFromQuaternion(wU,t)}equals(t){return t._x===this._x&amp;&amp;t._y===this._y&amp;&amp;t._z===this._z&amp;&amp;t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&amp;&amp;(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};sa.DEFAULT_ORDER=&quot;XYZ&quot;;var nr=class{constructor(){this.mask=1}set(t){this.mask=(1&lt;&lt;t|0)&gt;&gt;&gt;0}enable(t){this.mask|=1&lt;&lt;t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1&lt;&lt;t|0}disable(t){this.mask&amp;=~(1&lt;&lt;t|0)}disableAll(){this.mask=0}test(t){return(this.mask&amp;t.mask)!==0}isEnabled(t){return(this.mask&amp;(1&lt;&lt;t|0))!==0}},PH=0,DU=new B,_f=new vi,Vr=new fe,ly=new B,_p=new B,IH=new B,HH=new vi,UU=new B(1,0,0),NU=new B(0,1,0),OU=new B(0,0,1),LU={type:&quot;added&quot;},FH={type:&quot;removed&quot;},xf={type:&quot;childadded&quot;,child:null},tb={type:&quot;childremoved&quot;,child:null},Ie=class n extends La{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,&quot;id&quot;,{value:PH++}),this.uuid=Na(),this.name=&quot;&quot;,this.type=&quot;Object3D&quot;,this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();let t=new B,e=new sa,i=new vi,a=new B(1,1,1);function s(){i.setFromEuler(e,!1)}function o(){e.setFromQuaternion(i,void 0,!1)}e._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new fe},normalMatrix:{value:new ge}}),this.matrix=new fe,this.matrixWorld=new fe,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new nr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return _f.setFromAxisAngle(t,e),this.quaternion.multiply(_f),this}rotateOnWorldAxis(t,e){return _f.setFromAxisAngle(t,e),this.quaternion.premultiply(_f),this}rotateX(t){return this.rotateOnAxis(UU,t)}rotateY(t){return this.rotateOnAxis(NU,t)}rotateZ(t){return this.rotateOnAxis(OU,t)}translateOnAxis(t,e){return DU.copy(t).applyQuaternion(this.quaternion),this.position.add(DU.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(UU,t)}translateY(t){return this.translateOnAxis(NU,t)}translateZ(t){return this.translateOnAxis(OU,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Vr.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?ly.copy(t):ly.set(t,e,i);let a=this.parent;this.updateWorldMatrix(!0,!1),_p.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vr.lookAt(_p,ly,this.up):Vr.lookAt(ly,_p,this.up),this.quaternion.setFromRotationMatrix(Vr),a&amp;&amp;(Vr.extractRotation(a.matrixWorld),_f.setFromRotationMatrix(Vr),this.quaternion.premultiply(_f.invert()))}add(t){if(arguments.length&gt;1){for(let e=0;e&lt;arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error(&quot;THREE.Object3D.add: object can&#39;t be added as a child of itself.&quot;,t),this):(t&amp;&amp;t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(LU),xf.child=t,this.dispatchEvent(xf),xf.child=null):console.error(&quot;THREE.Object3D.add: object not an instance of THREE.Object3D.&quot;,t),this)}remove(t){if(arguments.length&gt;1){for(let i=0;i&lt;arguments.length;i++)this.remove(arguments[i]);return this}let e=this.children.indexOf(t);return e!==-1&amp;&amp;(t.parent=null,this.children.splice(e,1),t.dispatchEvent(FH),tb.child=t,this.dispatchEvent(tb),tb.child=null),this}removeFromParent(){let t=this.parent;return t!==null&amp;&amp;t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Vr.copy(this.matrixWorld).invert(),t.parent!==null&amp;&amp;(t.parent.updateWorldMatrix(!0,!1),Vr.multiply(t.parent.matrixWorld)),t.applyMatrix4(Vr),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(LU),xf.child=t,this.dispatchEvent(xf),xf.child=null,this}getObjectById(t){return this.getObjectByProperty(&quot;id&quot;,t)}getObjectByName(t){return this.getObjectByProperty(&quot;name&quot;,t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,a=this.children.length;i&lt;a;i++){let o=this.children[i].getObjectByProperty(t,e);if(o!==void 0)return o}}getObjectsByProperty(t,e,i=[]){this[t]===e&amp;&amp;i.push(this);let a=this.children;for(let s=0,o=a.length;s&lt;o;s++)a[s].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_p,t,IH),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_p,HH,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);let e=this.children;for(let i=0,a=e.length;i&lt;a;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let e=this.children;for(let i=0,a=e.length;i&lt;a;i++)e[i].traverseVisible(t)}traverseAncestors(t){let e=this.parent;e!==null&amp;&amp;(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&amp;&amp;(this.matrixWorldAutoUpdate===!0&amp;&amp;(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);let e=this.children;for(let i=0,a=e.length;i&lt;a;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){let i=this.parent;if(t===!0&amp;&amp;i!==null&amp;&amp;i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&amp;&amp;this.updateMatrix(),this.matrixWorldAutoUpdate===!0&amp;&amp;(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){let a=this.children;for(let s=0,o=a.length;s&lt;o;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(t){let e=t===void 0||typeof t==&quot;string&quot;,i={};e&amp;&amp;(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:&quot;Object&quot;,generator:&quot;Object3D.toJSON&quot;});let a={};a.uuid=this.uuid,a.type=this.type,this.name!==&quot;&quot;&amp;&amp;(a.name=this.name),this.castShadow===!0&amp;&amp;(a.castShadow=!0),this.receiveShadow===!0&amp;&amp;(a.receiveShadow=!0),this.visible===!1&amp;&amp;(a.visible=!1),this.frustumCulled===!1&amp;&amp;(a.frustumCulled=!1),this.renderOrder!==0&amp;&amp;(a.renderOrder=this.renderOrder),Object.keys(this.userData).length&gt;0&amp;&amp;(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&amp;&amp;(a.matrixAutoUpdate=!1),this.isInstancedMesh&amp;&amp;(a.type=&quot;InstancedMesh&quot;,a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&amp;&amp;(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&amp;&amp;(a.type=&quot;BatchedMesh&quot;,a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(u=&gt;({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(u=&gt;({...u})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(t),a.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&amp;&amp;(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&amp;&amp;(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&amp;&amp;(a.boundingBox=this.boundingBox.toJSON()));function s(u,c){return u[c.uuid]===void 0&amp;&amp;(u[c.uuid]=c.toJSON(t)),c.uuid}if(this.isScene)this.background&amp;&amp;(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&amp;&amp;(a.background=this.background.toJSON(t).uuid)),this.environment&amp;&amp;this.environment.isTexture&amp;&amp;this.environment.isRenderTargetTexture!==!0&amp;&amp;(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(t.geometries,this.geometry);let u=this.geometry.parameters;if(u!==void 0&amp;&amp;u.shapes!==void 0){let c=u.shapes;if(Array.isArray(c))for(let h=0,d=c.length;h&lt;d;h++){let m=c[h];s(t.shapes,m)}else s(t.shapes,c)}}if(this.isSkinnedMesh&amp;&amp;(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&amp;&amp;(s(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let u=[];for(let c=0,h=this.material.length;c&lt;h;c++)u.push(s(t.materials,this.material[c]));a.material=u}else a.material=s(t.materials,this.material);if(this.children.length&gt;0){a.children=[];for(let u=0;u&lt;this.children.length;u++)a.children.push(this.children[u].toJSON(t).object)}if(this.animations.length&gt;0){a.animations=[];for(let u=0;u&lt;this.animations.length;u++){let c=this.animations[u];a.animations.push(s(t.animations,c))}}if(e){let u=o(t.geometries),c=o(t.materials),h=o(t.textures),d=o(t.images),m=o(t.shapes),g=o(t.skeletons),y=o(t.animations),x=o(t.nodes);u.length&gt;0&amp;&amp;(i.geometries=u),c.length&gt;0&amp;&amp;(i.materials=c),h.length&gt;0&amp;&amp;(i.textures=h),d.length&gt;0&amp;&amp;(i.images=d),m.length&gt;0&amp;&amp;(i.shapes=m),g.length&gt;0&amp;&amp;(i.skeletons=g),y.length&gt;0&amp;&amp;(i.animations=y),x.length&gt;0&amp;&amp;(i.nodes=x)}return i.object=a,i;function o(u){let c=[];for(let h in u){let d=u[h];delete d.metadata,c.push(d)}return c}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i&lt;t.children.length;i++){let a=t.children[i];this.add(a.clone())}return this}};Ie.DEFAULT_UP=new B(0,1,0);Ie.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ie.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Ms=new B,Gr=new B,eb=new B,Xr=new B,Sf=new B,Mf=new B,zU=new B,nb=new B,ib=new B,ab=new B,sb=new Oe,rb=new Oe,ob=new Oe,bs=class n{constructor(t=new B,e=new B,i=new B){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,a){a.subVectors(i,e),Ms.subVectors(t,e),a.cross(Ms);let s=a.lengthSq();return s&gt;0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(t,e,i,a,s){Ms.subVectors(a,e),Gr.subVectors(i,e),eb.subVectors(t,e);let o=Ms.dot(Ms),u=Ms.dot(Gr),c=Ms.dot(eb),h=Gr.dot(Gr),d=Gr.dot(eb),m=o*h-u*u;if(m===0)return s.set(0,0,0),null;let g=1/m,y=(h*c-u*d)*g,x=(o*d-u*c)*g;return s.set(1-y-x,x,y)}static containsPoint(t,e,i,a){return this.getBarycoord(t,e,i,a,Xr)===null?!1:Xr.x&gt;=0&amp;&amp;Xr.y&gt;=0&amp;&amp;Xr.x+Xr.y&lt;=1}static getInterpolation(t,e,i,a,s,o,u,c){return this.getBarycoord(t,e,i,a,Xr)===null?(c.x=0,c.y=0,&quot;z&quot;in c&amp;&amp;(c.z=0),&quot;w&quot;in c&amp;&amp;(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,Xr.x),c.addScaledVector(o,Xr.y),c.addScaledVector(u,Xr.z),c)}static getInterpolatedAttribute(t,e,i,a,s,o){return sb.setScalar(0),rb.setScalar(0),ob.setScalar(0),sb.fromBufferAttribute(t,e),rb.fromBufferAttribute(t,i),ob.fromBufferAttribute(t,a),o.setScalar(0),o.addScaledVector(sb,s.x),o.addScaledVector(rb,s.y),o.addScaledVector(ob,s.z),o}static isFrontFacing(t,e,i,a){return Ms.subVectors(i,e),Gr.subVectors(t,e),Ms.cross(Gr).dot(a)&lt;0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,a){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,e,i,a){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ms.subVectors(this.c,this.b),Gr.subVectors(this.a,this.b),Ms.cross(Gr).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return n.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return n.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,a,s){return n.getInterpolation(t,this.a,this.b,this.c,e,i,a,s)}containsPoint(t){return n.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return n.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i=this.a,a=this.b,s=this.c,o,u;Sf.subVectors(a,i),Mf.subVectors(s,i),nb.subVectors(t,i);let c=Sf.dot(nb),h=Mf.dot(nb);if(c&lt;=0&amp;&amp;h&lt;=0)return e.copy(i);ib.subVectors(t,a);let d=Sf.dot(ib),m=Mf.dot(ib);if(d&gt;=0&amp;&amp;m&lt;=d)return e.copy(a);let g=c*m-d*h;if(g&lt;=0&amp;&amp;c&gt;=0&amp;&amp;d&lt;=0)return o=c/(c-d),e.copy(i).addScaledVector(Sf,o);ab.subVectors(t,s);let y=Sf.dot(ab),x=Mf.dot(ab);if(x&gt;=0&amp;&amp;y&lt;=x)return e.copy(s);let b=y*h-c*x;if(b&lt;=0&amp;&amp;h&gt;=0&amp;&amp;x&lt;=0)return u=h/(h-x),e.copy(i).addScaledVector(Mf,u);let M=d*x-y*m;if(M&lt;=0&amp;&amp;m-d&gt;=0&amp;&amp;y-x&gt;=0)return zU.subVectors(s,a),u=(m-d)/(m-d+(y-x)),e.copy(a).addScaledVector(zU,u);let v=1/(M+b+g);return o=b*v,u=g*v,e.copy(i).addScaledVector(Sf,o).addScaledVector(Mf,u)}equals(t){return t.a.equals(this.a)&amp;&amp;t.b.equals(this.b)&amp;&amp;t.c.equals(this.c)}},vO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jo={h:0,s:0,l:0},uy={h:0,s:0,l:0};function lb(n,t,e){return e&lt;0&amp;&amp;(e+=1),e&gt;1&amp;&amp;(e-=1),e&lt;1/6?n+(t-n)*6*e:e&lt;1/2?t:e&lt;2/3?n+(t-n)*6*(2/3-e):n}var Bt=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&amp;&amp;i===void 0){let a=t;a&amp;&amp;a.isColor?this.copy(a):typeof a==&quot;number&quot;?this.setHex(a):typeof a==&quot;string&quot;&amp;&amp;this.setStyle(a)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=ri){return t=Math.floor(t),this.r=(t&gt;&gt;16&amp;255)/255,this.g=(t&gt;&gt;8&amp;255)/255,this.b=(t&amp;255)/255,we.colorSpaceToWorking(this,e),this}setRGB(t,e,i,a=we.workingColorSpace){return this.r=t,this.g=e,this.b=i,we.colorSpaceToWorking(this,a),this}setHSL(t,e,i,a=we.workingColorSpace){if(t=DT(t,1),e=le(e,0,1),i=le(i,0,1),e===0)this.r=this.g=this.b=i;else{let s=i&lt;=.5?i*(1+e):i+e-i*e,o=2*i-s;this.r=lb(o,s,t+1/3),this.g=lb(o,s,t),this.b=lb(o,s,t-1/3)}return we.colorSpaceToWorking(this,a),this}setStyle(t,e=ri){function i(s){s!==void 0&amp;&amp;parseFloat(s)&lt;1&amp;&amp;console.warn(&quot;THREE.Color: Alpha component of &quot;+t+&quot; will be ignored.&quot;)}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let s,o=a[1],u=a[2];switch(o){case&quot;rgb&quot;:case&quot;rgba&quot;:if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case&quot;hsl&quot;:case&quot;hsla&quot;:if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn(&quot;THREE.Color: Unknown color model &quot;+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){let s=a[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(s,16),e);console.warn(&quot;THREE.Color: Invalid hex color &quot;+t)}else if(t&amp;&amp;t.length&gt;0)return this.setColorName(t,e);return this}setColorName(t,e=ri){let i=vO[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn(&quot;THREE.Color: Unknown color &quot;+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=kr(t.r),this.g=kr(t.g),this.b=kr(t.b),this}copyLinearToSRGB(t){return this.r=zf(t.r),this.g=zf(t.g),this.b=zf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ri){return we.workingToColorSpace(Di.copy(this),t),Math.round(le(Di.r*255,0,255))*65536+Math.round(le(Di.g*255,0,255))*256+Math.round(le(Di.b*255,0,255))}getHexString(t=ri){return(&quot;000000&quot;+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=we.workingColorSpace){we.workingToColorSpace(Di.copy(this),e);let i=Di.r,a=Di.g,s=Di.b,o=Math.max(i,a,s),u=Math.min(i,a,s),c,h,d=(u+o)/2;if(u===o)c=0,h=0;else{let m=o-u;switch(h=d&lt;=.5?m/(o+u):m/(2-o-u),o){case i:c=(a-s)/m+(a&lt;s?6:0);break;case a:c=(s-i)/m+2;break;case s:c=(i-a)/m+4;break}c/=6}return t.h=c,t.s=h,t.l=d,t}getRGB(t,e=we.workingColorSpace){return we.workingToColorSpace(Di.copy(this),e),t.r=Di.r,t.g=Di.g,t.b=Di.b,t}getStyle(t=ri){we.workingToColorSpace(Di.copy(this),t);let e=Di.r,i=Di.g,a=Di.b;return t!==ri?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(t,e,i){return this.getHSL(Jo),this.setHSL(Jo.h+t,Jo.s+e,Jo.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Jo),t.getHSL(uy);let i=Np(Jo.h,uy.h,e),a=Np(Jo.s,uy.s,e),s=Np(Jo.l,uy.l,e);return this.setHSL(i,a,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,a=this.b,s=t.elements;return this.r=s[0]*e+s[3]*i+s[6]*a,this.g=s[1]*e+s[4]*i+s[7]*a,this.b=s[2]*e+s[5]*i+s[8]*a,this}equals(t){return t.r===this.r&amp;&amp;t.g===this.g&amp;&amp;t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Di=new Bt;Bt.NAMES=vO;var VH=0,jn=class extends La{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,&quot;id&quot;,{value:VH++}),this.uuid=Na(),this.name=&quot;&quot;,this.type=&quot;Material&quot;,this.blending=al,this.side=tr,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zp,this.blendDst=Bp,this.blendEquation=Zr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Bt(0,0,0),this.blendAlpha=0,this.depthFunc=sl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Yy,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=el,this.stencilZFail=el,this.stencilZPass=el,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest&gt;0!=t&gt;0&amp;&amp;this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter &#39;${e}&#39; has value of undefined.`);continue}let a=this[e];if(a===void 0){console.warn(`THREE.Material: &#39;${e}&#39; is not a property of THREE.${this.type}.`);continue}a&amp;&amp;a.isColor?a.set(i):a&amp;&amp;a.isVector3&amp;&amp;i&amp;&amp;i.isVector3?a.copy(i):this[e]=i}}toJSON(t){let e=t===void 0||typeof t==&quot;string&quot;;e&amp;&amp;(t={textures:{},images:{}});let i={metadata:{version:4.7,type:&quot;Material&quot;,generator:&quot;Material.toJSON&quot;}};i.uuid=this.uuid,i.type=this.type,this.name!==&quot;&quot;&amp;&amp;(i.name=this.name),this.color&amp;&amp;this.color.isColor&amp;&amp;(i.color=this.color.getHex()),this.roughness!==void 0&amp;&amp;(i.roughness=this.roughness),this.metalness!==void 0&amp;&amp;(i.metalness=this.metalness),this.sheen!==void 0&amp;&amp;(i.sheen=this.sheen),this.sheenColor&amp;&amp;this.sheenColor.isColor&amp;&amp;(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&amp;&amp;(i.sheenRoughness=this.sheenRoughness),this.emissive&amp;&amp;this.emissive.isColor&amp;&amp;(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&amp;&amp;this.emissiveIntensity!==1&amp;&amp;(i.emissiveIntensity=this.emissiveIntensity),this.specular&amp;&amp;this.specular.isColor&amp;&amp;(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&amp;&amp;(i.specularIntensity=this.specularIntensity),this.specularColor&amp;&amp;this.specularColor.isColor&amp;&amp;(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&amp;&amp;(i.shininess=this.shininess),this.clearcoat!==void 0&amp;&amp;(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&amp;&amp;(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&amp;&amp;this.clearcoatMap.isTexture&amp;&amp;(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&amp;&amp;this.clearcoatRoughnessMap.isTexture&amp;&amp;(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&amp;&amp;this.clearcoatNormalMap.isTexture&amp;&amp;(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&amp;&amp;(i.dispersion=this.dispersion),this.iridescence!==void 0&amp;&amp;(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&amp;&amp;(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&amp;&amp;(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&amp;&amp;this.iridescenceMap.isTexture&amp;&amp;(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&amp;&amp;this.iridescenceThicknessMap.isTexture&amp;&amp;(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&amp;&amp;(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&amp;&amp;(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&amp;&amp;this.anisotropyMap.isTexture&amp;&amp;(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&amp;&amp;this.map.isTexture&amp;&amp;(i.map=this.map.toJSON(t).uuid),this.matcap&amp;&amp;this.matcap.isTexture&amp;&amp;(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&amp;&amp;this.alphaMap.isTexture&amp;&amp;(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&amp;&amp;this.lightMap.isTexture&amp;&amp;(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&amp;&amp;this.aoMap.isTexture&amp;&amp;(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&amp;&amp;this.bumpMap.isTexture&amp;&amp;(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&amp;&amp;this.normalMap.isTexture&amp;&amp;(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&amp;&amp;this.displacementMap.isTexture&amp;&amp;(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&amp;&amp;this.roughnessMap.isTexture&amp;&amp;(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&amp;&amp;this.metalnessMap.isTexture&amp;&amp;(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&amp;&amp;this.emissiveMap.isTexture&amp;&amp;(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&amp;&amp;this.specularMap.isTexture&amp;&amp;(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&amp;&amp;this.specularIntensityMap.isTexture&amp;&amp;(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&amp;&amp;this.specularColorMap.isTexture&amp;&amp;(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&amp;&amp;this.envMap.isTexture&amp;&amp;(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&amp;&amp;(i.combine=this.combine)),this.envMapRotation!==void 0&amp;&amp;(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&amp;&amp;(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&amp;&amp;(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&amp;&amp;(i.refractionRatio=this.refractionRatio),this.gradientMap&amp;&amp;this.gradientMap.isTexture&amp;&amp;(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&amp;&amp;(i.transmission=this.transmission),this.transmissionMap&amp;&amp;this.transmissionMap.isTexture&amp;&amp;(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&amp;&amp;(i.thickness=this.thickness),this.thicknessMap&amp;&amp;this.thicknessMap.isTexture&amp;&amp;(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&amp;&amp;this.attenuationDistance!==1/0&amp;&amp;(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&amp;&amp;(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&amp;&amp;(i.size=this.size),this.shadowSide!==null&amp;&amp;(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&amp;&amp;(i.sizeAttenuation=this.sizeAttenuation),this.blending!==al&amp;&amp;(i.blending=this.blending),this.side!==tr&amp;&amp;(i.side=this.side),this.vertexColors===!0&amp;&amp;(i.vertexColors=!0),this.opacity&lt;1&amp;&amp;(i.opacity=this.opacity),this.transparent===!0&amp;&amp;(i.transparent=!0),this.blendSrc!==zp&amp;&amp;(i.blendSrc=this.blendSrc),this.blendDst!==Bp&amp;&amp;(i.blendDst=this.blendDst),this.blendEquation!==Zr&amp;&amp;(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&amp;&amp;(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&amp;&amp;(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&amp;&amp;(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&amp;&amp;this.blendColor.isColor&amp;&amp;(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&amp;&amp;(i.blendAlpha=this.blendAlpha),this.depthFunc!==sl&amp;&amp;(i.depthFunc=this.depthFunc),this.depthTest===!1&amp;&amp;(i.depthTest=this.depthTest),this.depthWrite===!1&amp;&amp;(i.depthWrite=this.depthWrite),this.colorWrite===!1&amp;&amp;(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&amp;&amp;(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Yy&amp;&amp;(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&amp;&amp;(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&amp;&amp;(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==el&amp;&amp;(i.stencilFail=this.stencilFail),this.stencilZFail!==el&amp;&amp;(i.stencilZFail=this.stencilZFail),this.stencilZPass!==el&amp;&amp;(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&amp;&amp;(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&amp;&amp;this.rotation!==0&amp;&amp;(i.rotation=this.rotation),this.polygonOffset===!0&amp;&amp;(i.polygonOffset=!0),this.polygonOffsetFactor!==0&amp;&amp;(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&amp;&amp;(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&amp;&amp;this.linewidth!==1&amp;&amp;(i.linewidth=this.linewidth),this.dashSize!==void 0&amp;&amp;(i.dashSize=this.dashSize),this.gapSize!==void 0&amp;&amp;(i.gapSize=this.gapSize),this.scale!==void 0&amp;&amp;(i.scale=this.scale),this.dithering===!0&amp;&amp;(i.dithering=!0),this.alphaTest&gt;0&amp;&amp;(i.alphaTest=this.alphaTest),this.alphaHash===!0&amp;&amp;(i.alphaHash=!0),this.alphaToCoverage===!0&amp;&amp;(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&amp;&amp;(i.premultipliedAlpha=!0),this.forceSinglePass===!0&amp;&amp;(i.forceSinglePass=!0),this.wireframe===!0&amp;&amp;(i.wireframe=!0),this.wireframeLinewidth&gt;1&amp;&amp;(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!==&quot;round&quot;&amp;&amp;(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!==&quot;round&quot;&amp;&amp;(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&amp;&amp;(i.flatShading=!0),this.visible===!1&amp;&amp;(i.visible=!1),this.toneMapped===!1&amp;&amp;(i.toneMapped=!1),this.fog===!1&amp;&amp;(i.fog=!1),Object.keys(this.userData).length&gt;0&amp;&amp;(i.userData=this.userData);function a(s){let o=[];for(let u in s){let c=s[u];delete c.metadata,o.push(c)}return o}if(e){let s=a(t.textures),o=a(t.images);s.length&gt;0&amp;&amp;(i.textures=s),o.length&gt;0&amp;&amp;(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(e!==null){let a=e.length;i=new Array(a);for(let s=0;s!==a;++s)i[s]=e[s].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}set needsUpdate(t){t===!0&amp;&amp;this.version++}},Rs=class extends jn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type=&quot;MeshBasicMaterial&quot;,this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sa,this.combine=gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},Yr=GH();function GH(){let n=new ArrayBuffer(4),t=new Float32Array(n),e=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let c=0;c&lt;256;++c){let h=c-127;h&lt;-27?(i[c]=0,i[c|256]=32768,a[c]=24,a[c|256]=24):h&lt;-14?(i[c]=1024&gt;&gt;-h-14,i[c|256]=1024&gt;&gt;-h-14|32768,a[c]=-h-1,a[c|256]=-h-1):h&lt;=15?(i[c]=h+15&lt;&lt;10,i[c|256]=h+15&lt;&lt;10|32768,a[c]=13,a[c|256]=13):h&lt;128?(i[c]=31744,i[c|256]=64512,a[c]=24,a[c|256]=24):(i[c]=31744,i[c|256]=64512,a[c]=13,a[c|256]=13)}let s=new Uint32Array(2048),o=new Uint32Array(64),u=new Uint32Array(64);for(let c=1;c&lt;1024;++c){let h=c&lt;&lt;13,d=0;for(;(h&amp;8388608)===0;)h&lt;&lt;=1,d-=8388608;h&amp;=-8388609,d+=947912704,s[c]=h|d}for(let c=1024;c&lt;2048;++c)s[c]=939524096+(c-1024&lt;&lt;13);for(let c=1;c&lt;31;++c)o[c]=c&lt;&lt;23;o[31]=1199570944,o[32]=2147483648;for(let c=33;c&lt;63;++c)o[c]=2147483648+(c-32&lt;&lt;23);o[63]=3347054592;for(let c=1;c&lt;64;++c)c!==32&amp;&amp;(u[c]=1024);return{floatView:t,uint32View:e,baseTable:i,shiftTable:a,mantissaTable:s,exponentTable:o,offsetTable:u}}function ia(n){Math.abs(n)&gt;65504&amp;&amp;console.warn(&quot;THREE.DataUtils.toHalfFloat(): Value out of range.&quot;),n=le(n,-65504,65504),Yr.floatView[0]=n;let t=Yr.uint32View[0],e=t&gt;&gt;23&amp;511;return Yr.baseTable[e]+((t&amp;8388607)&gt;&gt;Yr.shiftTable[e])}function wp(n){let t=n&gt;&gt;10;return Yr.uint32View[0]=Yr.mantissaTable[Yr.offsetTable[t]+(n&amp;1023)]+Yr.exponentTable[t],Yr.floatView[0]}var Zy=class{static toHalfFloat(t){return ia(t)}static fromHalfFloat(t){return wp(t)}},Vn=new B,cy=new ct,XH=0,Xe=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError(&quot;THREE.BufferAttribute: array should be a Typed Array.&quot;);this.isBufferAttribute=!0,Object.defineProperty(this,&quot;id&quot;,{value:XH++}),this.name=&quot;&quot;,this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=Vf,this.updateRanges=[],this.gpuType=qi,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&amp;&amp;this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let a=0,s=this.itemSize;a&lt;s;a++)this.array[t+a]=e.array[i+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e&lt;i;e++)cy.fromBufferAttribute(this,e),cy.applyMatrix3(t),this.setXY(e,cy.x,cy.y);else if(this.itemSize===3)for(let e=0,i=this.count;e&lt;i;e++)Vn.fromBufferAttribute(this,e),Vn.applyMatrix3(t),this.setXYZ(e,Vn.x,Vn.y,Vn.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e&lt;i;e++)Vn.fromBufferAttribute(this,e),Vn.applyMatrix4(t),this.setXYZ(e,Vn.x,Vn.y,Vn.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e&lt;i;e++)Vn.fromBufferAttribute(this,e),Vn.applyNormalMatrix(t),this.setXYZ(e,Vn.x,Vn.y,Vn.z);return this}transformDirection(t){for(let e=0,i=this.count;e&lt;i;e++)Vn.fromBufferAttribute(this,e),Vn.transformDirection(t),this.setXYZ(e,Vn.x,Vn.y,Vn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&amp;&amp;(i=Xi(i,this.array)),i}setComponent(t,e,i){return this.normalized&amp;&amp;(i=_e(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setX(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setY(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setZ(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setW(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,a){return t*=this.itemSize,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array),a=_e(a,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=a,this}setXYZW(t,e,i,a,s){return t*=this.itemSize,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array),a=_e(a,this.array),s=_e(s,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=a,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==&quot;&quot;&amp;&amp;(t.name=this.name),this.usage!==Vf&amp;&amp;(t.usage=this.usage),t}},jy=class extends Xe{constructor(t,e,i){super(new Int8Array(t),e,i)}},Qy=class extends Xe{constructor(t,e,i){super(new Uint8Array(t),e,i)}},Ky=class extends Xe{constructor(t,e,i){super(new Uint8ClampedArray(t),e,i)}},Jy=class extends Xe{constructor(t,e,i){super(new Int16Array(t),e,i)}},qf=class extends Xe{constructor(t,e,i){super(new Uint16Array(t),e,i)}},$y=class extends Xe{constructor(t,e,i){super(new Int32Array(t),e,i)}},Yf=class extends Xe{constructor(t,e,i){super(new Uint32Array(t),e,i)}},t_=class extends Xe{constructor(t,e,i){super(new Uint16Array(t),e,i),this.isFloat16BufferAttribute=!0}getX(t){let e=wp(this.array[t*this.itemSize]);return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setX(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.array[t*this.itemSize]=ia(e),this}getY(t){let e=wp(this.array[t*this.itemSize+1]);return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setY(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.array[t*this.itemSize+1]=ia(e),this}getZ(t){let e=wp(this.array[t*this.itemSize+2]);return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setZ(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.array[t*this.itemSize+2]=ia(e),this}getW(t){let e=wp(this.array[t*this.itemSize+3]);return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setW(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.array[t*this.itemSize+3]=ia(e),this}setXY(t,e,i){return t*=this.itemSize,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array)),this.array[t+0]=ia(e),this.array[t+1]=ia(i),this}setXYZ(t,e,i,a){return t*=this.itemSize,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array),a=_e(a,this.array)),this.array[t+0]=ia(e),this.array[t+1]=ia(i),this.array[t+2]=ia(a),this}setXYZW(t,e,i,a,s){return t*=this.itemSize,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array),a=_e(a,this.array),s=_e(s,this.array)),this.array[t+0]=ia(e),this.array[t+1]=ia(i),this.array[t+2]=ia(a),this.array[t+3]=ia(s),this}},Xt=class extends Xe{constructor(t,e,i){super(new Float32Array(t),e,i)}},qH=0,rs=new fe,ub=new Ie,Ef=new B,Da=new Zn,xp=new Zn,si=new B,ve=class n extends La{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,&quot;id&quot;,{value:qH++}),this.uuid=Na(),this.name=&quot;&quot;,this.type=&quot;BufferGeometry&quot;,this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(UT(t)?Yf:qf)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&amp;&amp;(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(i!==void 0){let s=new ge().getNormalMatrix(t);i.applyNormalMatrix(s),i.needsUpdate=!0}let a=this.attributes.tangent;return a!==void 0&amp;&amp;(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&amp;&amp;this.computeBoundingBox(),this.boundingSphere!==null&amp;&amp;this.computeBoundingSphere(),this}applyQuaternion(t){return rs.makeRotationFromQuaternion(t),this.applyMatrix4(rs),this}rotateX(t){return rs.makeRotationX(t),this.applyMatrix4(rs),this}rotateY(t){return rs.makeRotationY(t),this.applyMatrix4(rs),this}rotateZ(t){return rs.makeRotationZ(t),this.applyMatrix4(rs),this}translate(t,e,i){return rs.makeTranslation(t,e,i),this.applyMatrix4(rs),this}scale(t,e,i){return rs.makeScale(t,e,i),this.applyMatrix4(rs),this}lookAt(t){return ub.lookAt(t),ub.updateMatrix(),this.applyMatrix4(ub.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ef).negate(),this.translate(Ef.x,Ef.y,Ef.z),this}setFromPoints(t){let e=this.getAttribute(&quot;position&quot;);if(e===void 0){let i=[];for(let a=0,s=t.length;a&lt;s;a++){let o=t[a];i.push(o.x,o.y,o.z||0)}this.setAttribute(&quot;position&quot;,new Xt(i,3))}else{let i=Math.min(t.length,e.count);for(let a=0;a&lt;i;a++){let s=t[a];e.setXYZ(a,s.x,s.y,s.z||0)}t.length&gt;e.count&amp;&amp;console.warn(&quot;THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry.&quot;),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&amp;&amp;(this.boundingBox=new Zn);let t=this.attributes.position,e=this.morphAttributes.position;if(t&amp;&amp;t.isGLBufferAttribute){console.error(&quot;THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.&quot;,this),this.boundingBox.set(new B(-1/0,-1/0,-1/0),new B(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,a=e.length;i&lt;a;i++){let s=e[i];Da.setFromBufferAttribute(s),this.morphTargetsRelative?(si.addVectors(this.boundingBox.min,Da.min),this.boundingBox.expandByPoint(si),si.addVectors(this.boundingBox.max,Da.max),this.boundingBox.expandByPoint(si)):(this.boundingBox.expandByPoint(Da.min),this.boundingBox.expandByPoint(Da.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&amp;&amp;console.error(&#39;THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The &quot;position&quot; attribute is likely to have NaN values.&#39;,this)}computeBoundingSphere(){this.boundingSphere===null&amp;&amp;(this.boundingSphere=new Xn);let t=this.attributes.position,e=this.morphAttributes.position;if(t&amp;&amp;t.isGLBufferAttribute){console.error(&quot;THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.&quot;,this),this.boundingSphere.set(new B,1/0);return}if(t){let i=this.boundingSphere.center;if(Da.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s&lt;o;s++){let u=e[s];xp.setFromBufferAttribute(u),this.morphTargetsRelative?(si.addVectors(Da.min,xp.min),Da.expandByPoint(si),si.addVectors(Da.max,xp.max),Da.expandByPoint(si)):(Da.expandByPoint(xp.min),Da.expandByPoint(xp.max))}Da.getCenter(i);let a=0;for(let s=0,o=t.count;s&lt;o;s++)si.fromBufferAttribute(t,s),a=Math.max(a,i.distanceToSquared(si));if(e)for(let s=0,o=e.length;s&lt;o;s++){let u=e[s],c=this.morphTargetsRelative;for(let h=0,d=u.count;h&lt;d;h++)si.fromBufferAttribute(u,h),c&amp;&amp;(Ef.fromBufferAttribute(t,h),si.add(Ef)),a=Math.max(a,i.distanceToSquared(si))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&amp;&amp;console.error(&#39;THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The &quot;position&quot; attribute is likely to have NaN values.&#39;,this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error(&quot;THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)&quot;);return}let i=e.position,a=e.normal,s=e.uv;this.hasAttribute(&quot;tangent&quot;)===!1&amp;&amp;this.setAttribute(&quot;tangent&quot;,new Xe(new Float32Array(4*i.count),4));let o=this.getAttribute(&quot;tangent&quot;),u=[],c=[];for(let z=0;z&lt;i.count;z++)u[z]=new B,c[z]=new B;let h=new B,d=new B,m=new B,g=new ct,y=new ct,x=new ct,b=new B,M=new B;function v(z,C,R){h.fromBufferAttribute(i,z),d.fromBufferAttribute(i,C),m.fromBufferAttribute(i,R),g.fromBufferAttribute(s,z),y.fromBufferAttribute(s,C),x.fromBufferAttribute(s,R),d.sub(h),m.sub(h),y.sub(g),x.sub(g);let P=1/(y.x*x.y-x.x*y.y);isFinite(P)&amp;&amp;(b.copy(d).multiplyScalar(x.y).addScaledVector(m,-y.y).multiplyScalar(P),M.copy(m).multiplyScalar(y.x).addScaledVector(d,-x.x).multiplyScalar(P),u[z].add(b),u[C].add(b),u[R].add(b),c[z].add(M),c[C].add(M),c[R].add(M))}let S=this.groups;S.length===0&amp;&amp;(S=[{start:0,count:t.count}]);for(let z=0,C=S.length;z&lt;C;++z){let R=S[z],P=R.start,j=R.count;for(let X=P,Z=P+j;X&lt;Z;X+=3)v(t.getX(X+0),t.getX(X+1),t.getX(X+2))}let E=new B,T=new B,w=new B,U=new B;function O(z){w.fromBufferAttribute(a,z),U.copy(w);let C=u[z];E.copy(C),E.sub(w.multiplyScalar(w.dot(C))).normalize(),T.crossVectors(U,C);let P=T.dot(c[z])&lt;0?-1:1;o.setXYZW(z,E.x,E.y,E.z,P)}for(let z=0,C=S.length;z&lt;C;++z){let R=S[z],P=R.start,j=R.count;for(let X=P,Z=P+j;X&lt;Z;X+=3)O(t.getX(X+0)),O(t.getX(X+1)),O(t.getX(X+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute(&quot;position&quot;);if(e!==void 0){let i=this.getAttribute(&quot;normal&quot;);if(i===void 0)i=new Xe(new Float32Array(e.count*3),3),this.setAttribute(&quot;normal&quot;,i);else for(let g=0,y=i.count;g&lt;y;g++)i.setXYZ(g,0,0,0);let a=new B,s=new B,o=new B,u=new B,c=new B,h=new B,d=new B,m=new B;if(t)for(let g=0,y=t.count;g&lt;y;g+=3){let x=t.getX(g+0),b=t.getX(g+1),M=t.getX(g+2);a.fromBufferAttribute(e,x),s.fromBufferAttribute(e,b),o.fromBufferAttribute(e,M),d.subVectors(o,s),m.subVectors(a,s),d.cross(m),u.fromBufferAttribute(i,x),c.fromBufferAttribute(i,b),h.fromBufferAttribute(i,M),u.add(d),c.add(d),h.add(d),i.setXYZ(x,u.x,u.y,u.z),i.setXYZ(b,c.x,c.y,c.z),i.setXYZ(M,h.x,h.y,h.z)}else for(let g=0,y=e.count;g&lt;y;g+=3)a.fromBufferAttribute(e,g+0),s.fromBufferAttribute(e,g+1),o.fromBufferAttribute(e,g+2),d.subVectors(o,s),m.subVectors(a,s),d.cross(m),i.setXYZ(g+0,d.x,d.y,d.z),i.setXYZ(g+1,d.x,d.y,d.z),i.setXYZ(g+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e&lt;i;e++)si.fromBufferAttribute(t,e),si.normalize(),t.setXYZ(e,si.x,si.y,si.z)}toNonIndexed(){function t(u,c){let h=u.array,d=u.itemSize,m=u.normalized,g=new h.constructor(c.length*d),y=0,x=0;for(let b=0,M=c.length;b&lt;M;b++){u.isInterleavedBufferAttribute?y=c[b]*u.data.stride+u.offset:y=c[b]*d;for(let v=0;v&lt;d;v++)g[x++]=h[y++]}return new Xe(g,d,m)}if(this.index===null)return console.warn(&quot;THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.&quot;),this;let e=new n,i=this.index.array,a=this.attributes;for(let u in a){let c=a[u],h=t(c,i);e.setAttribute(u,h)}let s=this.morphAttributes;for(let u in s){let c=[],h=s[u];for(let d=0,m=h.length;d&lt;m;d++){let g=h[d],y=t(g,i);c.push(y)}e.morphAttributes[u]=c}e.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let u=0,c=o.length;u&lt;c;u++){let h=o[u];e.addGroup(h.start,h.count,h.materialIndex)}return e}toJSON(){let t={metadata:{version:4.7,type:&quot;BufferGeometry&quot;,generator:&quot;BufferGeometry.toJSON&quot;}};if(t.uuid=this.uuid,t.type=this.type,this.name!==&quot;&quot;&amp;&amp;(t.name=this.name),Object.keys(this.userData).length&gt;0&amp;&amp;(t.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let h in c)c[h]!==void 0&amp;&amp;(t[h]=c[h]);return t}t.data={attributes:{}};let e=this.index;e!==null&amp;&amp;(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let c in i){let h=i[c];t.data.attributes[c]=h.toJSON(t.data)}let a={},s=!1;for(let c in this.morphAttributes){let h=this.morphAttributes[c],d=[];for(let m=0,g=h.length;m&lt;g;m++){let y=h[m];d.push(y.toJSON(t.data))}d.length&gt;0&amp;&amp;(a[c]=d,s=!0)}s&amp;&amp;(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length&gt;0&amp;&amp;(t.data.groups=JSON.parse(JSON.stringify(o)));let u=this.boundingSphere;return u!==null&amp;&amp;(t.data.boundingSphere=u.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;i!==null&amp;&amp;this.setIndex(i.clone());let a=t.attributes;for(let h in a){let d=a[h];this.setAttribute(h,d.clone(e))}let s=t.morphAttributes;for(let h in s){let d=[],m=s[h];for(let g=0,y=m.length;g&lt;y;g++)d.push(m[g].clone(e));this.morphAttributes[h]=d}this.morphTargetsRelative=t.morphTargetsRelative;let o=t.groups;for(let h=0,d=o.length;h&lt;d;h++){let m=o[h];this.addGroup(m.start,m.count,m.materialIndex)}let u=t.boundingBox;u!==null&amp;&amp;(this.boundingBox=u.clone());let c=t.boundingSphere;return c!==null&amp;&amp;(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}},BU=new fe,au=new jr,fy=new Xn,PU=new B,hy=new B,dy=new B,py=new B,cb=new B,my=new B,IU=new B,gy=new B,En=class extends Ie{constructor(t=new ve,e=new Rs){super(),this.isMesh=!0,this.type=&quot;Mesh&quot;,this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&amp;&amp;(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&amp;&amp;(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length&gt;0){let a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s&lt;o;s++){let u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}getVertexPosition(t,e){let i=this.geometry,a=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(a,t);let u=this.morphTargetInfluences;if(s&amp;&amp;u){my.set(0,0,0);for(let c=0,h=s.length;c&lt;h;c++){let d=u[c],m=s[c];d!==0&amp;&amp;(cb.fromBufferAttribute(m,t),o?my.addScaledVector(cb,d):my.addScaledVector(cb.sub(e),d))}e.add(my)}return e}raycast(t,e){let i=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&amp;&amp;(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),fy.copy(i.boundingSphere),fy.applyMatrix4(s),au.copy(t.ray).recast(t.near),!(fy.containsPoint(au.origin)===!1&amp;&amp;(au.intersectSphere(fy,PU)===null||au.origin.distanceToSquared(PU)&gt;(t.far-t.near)**2))&amp;&amp;(BU.copy(s).invert(),au.copy(t.ray).applyMatrix4(BU),!(i.boundingBox!==null&amp;&amp;au.intersectsBox(i.boundingBox)===!1)&amp;&amp;this._computeIntersections(t,e,au)))}_computeIntersections(t,e,i){let a,s=this.geometry,o=this.material,u=s.index,c=s.attributes.position,h=s.attributes.uv,d=s.attributes.uv1,m=s.attributes.normal,g=s.groups,y=s.drawRange;if(u!==null)if(Array.isArray(o))for(let x=0,b=g.length;x&lt;b;x++){let M=g[x],v=o[M.materialIndex],S=Math.max(M.start,y.start),E=Math.min(u.count,Math.min(M.start+M.count,y.start+y.count));for(let T=S,w=E;T&lt;w;T+=3){let U=u.getX(T),O=u.getX(T+1),z=u.getX(T+2);a=vy(this,v,t,i,h,d,m,U,O,z),a&amp;&amp;(a.faceIndex=Math.floor(T/3),a.face.materialIndex=M.materialIndex,e.push(a))}}else{let x=Math.max(0,y.start),b=Math.min(u.count,y.start+y.count);for(let M=x,v=b;M&lt;v;M+=3){let S=u.getX(M),E=u.getX(M+1),T=u.getX(M+2);a=vy(this,o,t,i,h,d,m,S,E,T),a&amp;&amp;(a.faceIndex=Math.floor(M/3),e.push(a))}}else if(c!==void 0)if(Array.isArray(o))for(let x=0,b=g.length;x&lt;b;x++){let M=g[x],v=o[M.materialIndex],S=Math.max(M.start,y.start),E=Math.min(c.count,Math.min(M.start+M.count,y.start+y.count));for(let T=S,w=E;T&lt;w;T+=3){let U=T,O=T+1,z=T+2;a=vy(this,v,t,i,h,d,m,U,O,z),a&amp;&amp;(a.faceIndex=Math.floor(T/3),a.face.materialIndex=M.materialIndex,e.push(a))}}else{let x=Math.max(0,y.start),b=Math.min(c.count,y.start+y.count);for(let M=x,v=b;M&lt;v;M+=3){let S=M,E=M+1,T=M+2;a=vy(this,o,t,i,h,d,m,S,E,T),a&amp;&amp;(a.faceIndex=Math.floor(M/3),e.push(a))}}}};function YH(n,t,e,i,a,s,o,u){let c;if(t.side===Ni?c=i.intersectTriangle(o,s,a,!0,u):c=i.intersectTriangle(a,s,o,t.side===tr,u),c===null)return null;gy.copy(u),gy.applyMatrix4(n.matrixWorld);let h=e.ray.origin.distanceTo(gy);return h&lt;e.near||h&gt;e.far?null:{distance:h,point:gy.clone(),object:n}}function vy(n,t,e,i,a,s,o,u,c,h){n.getVertexPosition(u,hy),n.getVertexPosition(c,dy),n.getVertexPosition(h,py);let d=YH(n,t,e,i,hy,dy,py,IU);if(d){let m=new B;bs.getBarycoord(IU,hy,dy,py,m),a&amp;&amp;(d.uv=bs.getInterpolatedAttribute(a,u,c,h,m,new ct)),s&amp;&amp;(d.uv1=bs.getInterpolatedAttribute(s,u,c,h,m,new ct)),o&amp;&amp;(d.normal=bs.getInterpolatedAttribute(o,u,c,h,m,new B),d.normal.dot(i.direction)&gt;0&amp;&amp;d.normal.multiplyScalar(-1));let g={a:u,b:c,c:h,normal:new B,materialIndex:0};bs.getNormal(hy,dy,py,g.normal),d.face=g,d.barycoord=m}return d}var rl=class n extends ve{constructor(t=1,e=1,i=1,a=1,s=1,o=1){super(),this.type=&quot;BoxGeometry&quot;,this.parameters={width:t,height:e,depth:i,widthSegments:a,heightSegments:s,depthSegments:o};let u=this;a=Math.floor(a),s=Math.floor(s),o=Math.floor(o);let c=[],h=[],d=[],m=[],g=0,y=0;x(&quot;z&quot;,&quot;y&quot;,&quot;x&quot;,-1,-1,i,e,t,o,s,0),x(&quot;z&quot;,&quot;y&quot;,&quot;x&quot;,1,-1,i,e,-t,o,s,1),x(&quot;x&quot;,&quot;z&quot;,&quot;y&quot;,1,1,t,i,e,a,o,2),x(&quot;x&quot;,&quot;z&quot;,&quot;y&quot;,1,-1,t,i,-e,a,o,3),x(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,1,-1,t,e,i,a,s,4),x(&quot;x&quot;,&quot;y&quot;,&quot;z&quot;,-1,-1,t,e,-i,a,s,5),this.setIndex(c),this.setAttribute(&quot;position&quot;,new Xt(h,3)),this.setAttribute(&quot;normal&quot;,new Xt(d,3)),this.setAttribute(&quot;uv&quot;,new Xt(m,2));function x(b,M,v,S,E,T,w,U,O,z,C){let R=T/O,P=w/z,j=T/2,X=w/2,Z=U/2,st=O+1,et=z+1,mt=0,K=0,_t=new B;for(let Ut=0;Ut&lt;et;Ut++){let xt=Ut*P-X;for(let It=0;It&lt;st;It++){let se=It*R-j;_t[b]=se*S,_t[M]=xt*E,_t[v]=Z,h.push(_t.x,_t.y,_t.z),_t[b]=0,_t[M]=0,_t[v]=U&gt;0?1:-1,d.push(_t.x,_t.y,_t.z),m.push(It/O),m.push(1-Ut/z),mt+=1}}for(let Ut=0;Ut&lt;z;Ut++)for(let xt=0;xt&lt;O;xt++){let It=g+xt+st*Ut,se=g+xt+st*(Ut+1),Qt=g+(xt+1)+st*(Ut+1),it=g+(xt+1)+st*Ut;c.push(It,se,it),c.push(se,Qt,it),K+=6}u.addGroup(y,K,C),y+=K,g+=mt}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function Hu(n){let t={};for(let e in n){t[e]={};for(let i in n[e]){let a=n[e][i];a&amp;&amp;(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn(&quot;UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().&quot;),t[e][i]=null):t[e][i]=a.clone():Array.isArray(a)?t[e][i]=a.slice():t[e][i]=a}}return t}function Oi(n){let t={};for(let e=0;e&lt;n.length;e++){let i=Hu(n[e]);for(let a in i)t[a]=i[a]}return t}function WH(n){let t=[];for(let e=0;e&lt;n.length;e++)t.push(n[e].clone());return t}function OT(n){let t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:we.workingColorSpace}var LT={clone:Hu,merge:Oi},kH=`void main() {
<a href="#l21" class="line" id="l21">     21</a> 	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
<a href="#l22" class="line" id="l22">     22</a> }`,ZH=`void main() {
<a href="#l23" class="line" id="l23">     23</a> 	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
<a href="#l24" class="line" id="l24">     24</a> }`,ra=class extends jn{constructor(t){super(),this.isShaderMaterial=!0,this.type=&quot;ShaderMaterial&quot;,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=kH,this.fragmentShader=ZH,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&amp;&amp;this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Hu(t.uniforms),this.uniformsGroups=WH(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let a in this.uniforms){let o=this.uniforms[a].value;o&amp;&amp;o.isTexture?e.uniforms[a]={type:&quot;t&quot;,value:o.toJSON(t).uuid}:o&amp;&amp;o.isColor?e.uniforms[a]={type:&quot;c&quot;,value:o.getHex()}:o&amp;&amp;o.isVector2?e.uniforms[a]={type:&quot;v2&quot;,value:o.toArray()}:o&amp;&amp;o.isVector3?e.uniforms[a]={type:&quot;v3&quot;,value:o.toArray()}:o&amp;&amp;o.isVector4?e.uniforms[a]={type:&quot;v4&quot;,value:o.toArray()}:o&amp;&amp;o.isMatrix3?e.uniforms[a]={type:&quot;m3&quot;,value:o.toArray()}:o&amp;&amp;o.isMatrix4?e.uniforms[a]={type:&quot;m4&quot;,value:o.toArray()}:e.uniforms[a]={value:o}}Object.keys(this.defines).length&gt;0&amp;&amp;(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let i={};for(let a in this.extensions)this.extensions[a]===!0&amp;&amp;(i[a]=!0);return Object.keys(i).length&gt;0&amp;&amp;(e.extensions=i),e}},Mu=class extends Ie{constructor(){super(),this.isCamera=!0,this.type=&quot;Camera&quot;,this.matrixWorldInverse=new fe,this.projectionMatrix=new fe,this.projectionMatrixInverse=new fe,this.coordinateSystem=aa,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},$o=new B,HU=new ct,FU=new ct,Un=class extends Mu{constructor(t=50,e=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type=&quot;PerspectiveCamera&quot;,this.fov=t,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=yu*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(mu*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return yu*2*Math.atan(Math.tan(mu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){$o.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set($o.x,$o.y).multiplyScalar(-t/$o.z),$o.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set($o.x,$o.y).multiplyScalar(-t/$o.z)}getViewSize(t,e){return this.getViewBounds(t,HU,FU),e.subVectors(FU,HU)}setViewOffset(t,e,i,a,s,o){this.aspect=t/e,this.view===null&amp;&amp;(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&amp;&amp;(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(mu*.5*this.fov)/this.zoom,i=2*e,a=this.aspect*i,s=-.5*a,o=this.view;if(this.view!==null&amp;&amp;this.view.enabled){let c=o.fullWidth,h=o.fullHeight;s+=o.offsetX*a/c,e-=o.offsetY*i/h,a*=o.width/c,i*=o.height/h}let u=this.filmOffset;u!==0&amp;&amp;(s+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,e,e-i,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&amp;&amp;(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},bf=-90,Tf=1,Hp=class extends Ie{constructor(t,e,i){super(),this.type=&quot;CubeCamera&quot;,this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;let a=new Un(bf,Tf,t,e);a.layers=this.layers,this.add(a);let s=new Un(bf,Tf,t,e);s.layers=this.layers,this.add(s);let o=new Un(bf,Tf,t,e);o.layers=this.layers,this.add(o);let u=new Un(bf,Tf,t,e);u.layers=this.layers,this.add(u);let c=new Un(bf,Tf,t,e);c.layers=this.layers,this.add(c);let h=new Un(bf,Tf,t,e);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[i,a,s,o,u,c]=e;for(let h of e)this.remove(h);if(t===aa)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),u.up.set(0,1,0),u.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(t===vu)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),u.up.set(0,-1,0),u.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error(&quot;THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: &quot;+t);for(let h of e)this.add(h),h.updateMatrixWorld()}update(t,e){this.parent===null&amp;&amp;this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&amp;&amp;(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[s,o,u,c,h,d]=this.children,m=t.getRenderTarget(),g=t.getActiveCubeFace(),y=t.getActiveMipmapLevel(),x=t.xr.enabled;t.xr.enabled=!1;let b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,a),t.render(e,s),t.setRenderTarget(i,1,a),t.render(e,o),t.setRenderTarget(i,2,a),t.render(e,u),t.setRenderTarget(i,3,a),t.render(e,c),t.setRenderTarget(i,4,a),t.render(e,h),i.texture.generateMipmaps=b,t.setRenderTarget(i,5,a),t.render(e,d),t.setRenderTarget(m,g,y),t.xr.enabled=x,i.texture.needsPMREMUpdate=!0}},ol=class extends zn{constructor(t=[],e=rr,i,a,s,o,u,c,h,d){super(t,e,i,a,s,o,u,c,h,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},Fp=class extends za{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},a=[i,i,i,i,i,i];this.texture=new ol(a),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`
<a href="#l25" class="line" id="l25">     25</a> 
<a href="#l26" class="line" id="l26">     26</a> 				varying vec3 vWorldDirection;
<a href="#l27" class="line" id="l27">     27</a> 
<a href="#l28" class="line" id="l28">     28</a> 				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
<a href="#l29" class="line" id="l29">     29</a> 
<a href="#l30" class="line" id="l30">     30</a> 					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
<a href="#l31" class="line" id="l31">     31</a> 
<a href="#l32" class="line" id="l32">     32</a> 				}
<a href="#l33" class="line" id="l33">     33</a> 
<a href="#l34" class="line" id="l34">     34</a> 				void main() {
<a href="#l35" class="line" id="l35">     35</a> 
<a href="#l36" class="line" id="l36">     36</a> 					vWorldDirection = transformDirection( position, modelMatrix );
<a href="#l37" class="line" id="l37">     37</a> 
<a href="#l38" class="line" id="l38">     38</a> 					#include &lt;begin_vertex&gt;
<a href="#l39" class="line" id="l39">     39</a> 					#include &lt;project_vertex&gt;
<a href="#l40" class="line" id="l40">     40</a> 
<a href="#l41" class="line" id="l41">     41</a> 				}
<a href="#l42" class="line" id="l42">     42</a> 			`,fragmentShader:`
<a href="#l43" class="line" id="l43">     43</a> 
<a href="#l44" class="line" id="l44">     44</a> 				uniform sampler2D tEquirect;
<a href="#l45" class="line" id="l45">     45</a> 
<a href="#l46" class="line" id="l46">     46</a> 				varying vec3 vWorldDirection;
<a href="#l47" class="line" id="l47">     47</a> 
<a href="#l48" class="line" id="l48">     48</a> 				#include &lt;common&gt;
<a href="#l49" class="line" id="l49">     49</a> 
<a href="#l50" class="line" id="l50">     50</a> 				void main() {
<a href="#l51" class="line" id="l51">     51</a> 
<a href="#l52" class="line" id="l52">     52</a> 					vec3 direction = normalize( vWorldDirection );
<a href="#l53" class="line" id="l53">     53</a> 
<a href="#l54" class="line" id="l54">     54</a> 					vec2 sampleUV = equirectUv( direction );
<a href="#l55" class="line" id="l55">     55</a> 
<a href="#l56" class="line" id="l56">     56</a> 					gl_FragColor = texture2D( tEquirect, sampleUV );
<a href="#l57" class="line" id="l57">     57</a> 
<a href="#l58" class="line" id="l58">     58</a> 				}
<a href="#l59" class="line" id="l59">     59</a> 			`},a=new rl(5,5,5),s=new ra({name:&quot;CubemapFromEquirect&quot;,uniforms:Hu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ni,blending:sr});s.uniforms.tEquirect.value=e;let o=new En(a,s),u=e.minFilter;return e.minFilter===Us&amp;&amp;(e.minFilter=Gn),new Hp(1,10,this).update(t,o),e.minFilter=u,o.geometry.dispose(),o.material.dispose(),this}clear(t,e=!0,i=!0,a=!0){let s=t.getRenderTarget();for(let o=0;o&lt;6;o++)t.setRenderTarget(this,o),t.clear(e,i,a);t.setRenderTarget(s)}},Wr=class extends Ie{constructor(){super(),this.isGroup=!0,this.type=&quot;Group&quot;}},jH={type:&quot;move&quot;},Eu=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&amp;&amp;(this._hand=new Wr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&amp;&amp;(this._targetRay=new Wr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new B,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new B),this._targetRay}getGripSpace(){return this._grip===null&amp;&amp;(this._grip=new Wr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new B,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new B),this._grip}dispatchEvent(t){return this._targetRay!==null&amp;&amp;this._targetRay.dispatchEvent(t),this._grip!==null&amp;&amp;this._grip.dispatchEvent(t),this._hand!==null&amp;&amp;this._hand.dispatchEvent(t),this}connect(t){if(t&amp;&amp;t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:&quot;connected&quot;,data:t}),this}disconnect(t){return this.dispatchEvent({type:&quot;disconnected&quot;,data:t}),this._targetRay!==null&amp;&amp;(this._targetRay.visible=!1),this._grip!==null&amp;&amp;(this._grip.visible=!1),this._hand!==null&amp;&amp;(this._hand.visible=!1),this}update(t,e,i){let a=null,s=null,o=null,u=this._targetRay,c=this._grip,h=this._hand;if(t&amp;&amp;e.session.visibilityState!==&quot;visible-blurred&quot;){if(h&amp;&amp;t.hand){o=!0;for(let b of t.hand.values()){let M=e.getJointPose(b,i),v=this._getHandJoint(h,b);M!==null&amp;&amp;(v.matrix.fromArray(M.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=M.radius),v.visible=M!==null}let d=h.joints[&quot;index-finger-tip&quot;],m=h.joints[&quot;thumb-tip&quot;],g=d.position.distanceTo(m.position),y=.02,x=.005;h.inputState.pinching&amp;&amp;g&gt;y+x?(h.inputState.pinching=!1,this.dispatchEvent({type:&quot;pinchend&quot;,handedness:t.handedness,target:this})):!h.inputState.pinching&amp;&amp;g&lt;=y-x&amp;&amp;(h.inputState.pinching=!0,this.dispatchEvent({type:&quot;pinchstart&quot;,handedness:t.handedness,target:this}))}else c!==null&amp;&amp;t.gripSpace&amp;&amp;(s=e.getPose(t.gripSpace,i),s!==null&amp;&amp;(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));u!==null&amp;&amp;(a=e.getPose(t.targetRaySpace,i),a===null&amp;&amp;s!==null&amp;&amp;(a=s),a!==null&amp;&amp;(u.matrix.fromArray(a.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,a.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(a.linearVelocity)):u.hasLinearVelocity=!1,a.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(a.angularVelocity)):u.hasAngularVelocity=!1,this.dispatchEvent(jH)))}return u!==null&amp;&amp;(u.visible=a!==null),c!==null&amp;&amp;(c.visible=s!==null),h!==null&amp;&amp;(h.visible=o!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let i=new Wr;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}},Vp=class n{constructor(t,e=25e-5){this.isFogExp2=!0,this.name=&quot;&quot;,this.color=new Bt(t),this.density=e}clone(){return new n(this.color,this.density)}toJSON(){return{type:&quot;FogExp2&quot;,name:this.name,color:this.color.getHex(),density:this.density}}},Gp=class n{constructor(t,e=1,i=1e3){this.isFog=!0,this.name=&quot;&quot;,this.color=new Bt(t),this.near=e,this.far=i}clone(){return new n(this.color,this.near,this.far)}toJSON(){return{type:&quot;Fog&quot;,name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}},bu=class extends Ie{constructor(){super(),this.isScene=!0,this.type=&quot;Scene&quot;,this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new sa,this.environmentIntensity=1,this.environmentRotation=new sa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;observe&quot;,{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&amp;&amp;(this.background=t.background.clone()),t.environment!==null&amp;&amp;(this.environment=t.environment.clone()),t.fog!==null&amp;&amp;(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&amp;&amp;(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&amp;&amp;(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness&gt;0&amp;&amp;(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&amp;&amp;(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&amp;&amp;(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}},Tu=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Vf,this.updateRanges=[],this.version=0,this.uuid=Na()}onUploadCallback(){}set needsUpdate(t){t===!0&amp;&amp;this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let a=0,s=this.stride;a&lt;s;a++)this.array[t+a]=e.array[i+a];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&amp;&amp;(t.arrayBuffers={}),this.array.buffer._uuid===void 0&amp;&amp;(this.array.buffer._uuid=Na()),t.arrayBuffers[this.array.buffer._uuid]===void 0&amp;&amp;(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&amp;&amp;(t.arrayBuffers={}),this.array.buffer._uuid===void 0&amp;&amp;(this.array.buffer._uuid=Na()),t.arrayBuffers[this.array.buffer._uuid]===void 0&amp;&amp;(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Gi=new B,ll=class n{constructor(t,e,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name=&quot;&quot;,this.data=t,this.itemSize=e,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e&lt;i;e++)Gi.fromBufferAttribute(this,e),Gi.applyMatrix4(t),this.setXYZ(e,Gi.x,Gi.y,Gi.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e&lt;i;e++)Gi.fromBufferAttribute(this,e),Gi.applyNormalMatrix(t),this.setXYZ(e,Gi.x,Gi.y,Gi.z);return this}transformDirection(t){for(let e=0,i=this.count;e&lt;i;e++)Gi.fromBufferAttribute(this,e),Gi.transformDirection(t),this.setXYZ(e,Gi.x,Gi.y,Gi.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&amp;&amp;(i=Xi(i,this.array)),i}setComponent(t,e,i){return this.normalized&amp;&amp;(i=_e(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&amp;&amp;(e=_e(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&amp;&amp;(e=Xi(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,a){return t=t*this.data.stride+this.offset,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array),a=_e(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=a,this}setXYZW(t,e,i,a,s){return t=t*this.data.stride+this.offset,this.normalized&amp;&amp;(e=_e(e,this.array),i=_e(i,this.array),a=_e(a,this.array),s=_e(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=a,this.data.array[t+3]=s,this}clone(t){if(t===void 0){console.log(&quot;THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.&quot;);let e=[];for(let i=0;i&lt;this.count;i++){let a=i*this.data.stride+this.offset;for(let s=0;s&lt;this.itemSize;s++)e.push(this.data.array[a+s])}return new Xe(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&amp;&amp;(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&amp;&amp;(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new n(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log(&quot;THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.&quot;);let e=[];for(let i=0;i&lt;this.count;i++){let a=i*this.data.stride+this.offset;for(let s=0;s&lt;this.itemSize;s++)e.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&amp;&amp;(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&amp;&amp;(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},Wf=class extends jn{constructor(t){super(),this.isSpriteMaterial=!0,this.type=&quot;SpriteMaterial&quot;,this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},Af,Sp=new B,Rf=new B,Cf=new B,wf=new ct,Mp=new ct,yO=new fe,yy=new B,Ep=new B,_y=new B,VU=new ct,fb=new ct,GU=new ct,Xp=class extends Ie{constructor(t=new Wf){if(super(),this.isSprite=!0,this.type=&quot;Sprite&quot;,Af===void 0){Af=new ve;let e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Tu(e,5);Af.setIndex([0,1,2,0,2,3]),Af.setAttribute(&quot;position&quot;,new ll(i,3,0,!1)),Af.setAttribute(&quot;uv&quot;,new ll(i,2,3,!1))}this.geometry=Af,this.material=t,this.center=new ct(.5,.5),this.count=1}raycast(t,e){t.camera===null&amp;&amp;console.error(&#39;THREE.Sprite: &quot;Raycaster.camera&quot; needs to be set in order to raycast against sprites.&#39;),Rf.setFromMatrixScale(this.matrixWorld),yO.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Cf.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&amp;&amp;this.material.sizeAttenuation===!1&amp;&amp;Rf.multiplyScalar(-Cf.z);let i=this.material.rotation,a,s;i!==0&amp;&amp;(s=Math.cos(i),a=Math.sin(i));let o=this.center;xy(yy.set(-.5,-.5,0),Cf,o,Rf,a,s),xy(Ep.set(.5,-.5,0),Cf,o,Rf,a,s),xy(_y.set(.5,.5,0),Cf,o,Rf,a,s),VU.set(0,0),fb.set(1,0),GU.set(1,1);let u=t.ray.intersectTriangle(yy,Ep,_y,!1,Sp);if(u===null&amp;&amp;(xy(Ep.set(-.5,.5,0),Cf,o,Rf,a,s),fb.set(0,1),u=t.ray.intersectTriangle(yy,_y,Ep,!1,Sp),u===null))return;let c=t.ray.origin.distanceTo(Sp);c&lt;t.near||c&gt;t.far||e.push({distance:c,point:Sp.clone(),uv:bs.getInterpolation(Sp,yy,Ep,_y,VU,fb,GU,new ct),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&amp;&amp;this.center.copy(t.center),this.material=t.material,this}};function xy(n,t,e,i,a,s){wf.subVectors(n,e).addScalar(.5).multiply(i),a!==void 0?(Mp.x=s*wf.x-a*wf.y,Mp.y=a*wf.x+s*wf.y):Mp.copy(wf),n.copy(t),n.x+=Mp.x,n.y+=Mp.y,n.applyMatrix4(yO)}var Sy=new B,XU=new B,qp=class extends Ie{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type=&quot;LOD&quot;,Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);let e=t.levels;for(let i=0,a=e.length;i&lt;a;i++){let s=e[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,i=0){e=Math.abs(e);let a=this.levels,s;for(s=0;s&lt;a.length&amp;&amp;!(e&lt;a[s].distance);s++);return a.splice(s,0,{distance:e,hysteresis:i,object:t}),this.add(t),this}removeLevel(t){let e=this.levels;for(let i=0;i&lt;e.length;i++)if(e[i].distance===t){let a=e.splice(i,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){let e=this.levels;if(e.length&gt;0){let i,a;for(i=1,a=e.length;i&lt;a;i++){let s=e[i].distance;if(e[i].object.visible&amp;&amp;(s-=s*e[i].hysteresis),t&lt;s)break}return e[i-1].object}return null}raycast(t,e){if(this.levels.length&gt;0){Sy.setFromMatrixPosition(this.matrixWorld);let a=t.ray.origin.distanceTo(Sy);this.getObjectForDistance(a).raycast(t,e)}}update(t){let e=this.levels;if(e.length&gt;1){Sy.setFromMatrixPosition(t.matrixWorld),XU.setFromMatrixPosition(this.matrixWorld);let i=Sy.distanceTo(XU)/t.zoom;e[0].object.visible=!0;let a,s;for(a=1,s=e.length;a&lt;s;a++){let o=e[a].distance;if(e[a].object.visible&amp;&amp;(o-=o*e[a].hysteresis),i&gt;=o)e[a-1].object.visible=!1,e[a].object.visible=!0;else break}for(this._currentLevel=a-1;a&lt;s;a++)e[a].object.visible=!1}}toJSON(t){let e=super.toJSON(t);this.autoUpdate===!1&amp;&amp;(e.object.autoUpdate=!1),e.object.levels=[];let i=this.levels;for(let a=0,s=i.length;a&lt;s;a++){let o=i[a];e.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return e}},qU=new B,YU=new Oe,WU=new Oe,QH=new B,kU=new fe,My=new B,hb=new Xn,ZU=new fe,db=new jr,Yp=class extends En{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type=&quot;SkinnedMesh&quot;,this.bindMode=qy,this.bindMatrix=new fe,this.bindMatrixInverse=new fe,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let t=this.geometry;this.boundingBox===null&amp;&amp;(this.boundingBox=new Zn),this.boundingBox.makeEmpty();let e=t.getAttribute(&quot;position&quot;);for(let i=0;i&lt;e.count;i++)this.getVertexPosition(i,My),this.boundingBox.expandByPoint(My)}computeBoundingSphere(){let t=this.geometry;this.boundingSphere===null&amp;&amp;(this.boundingSphere=new Xn),this.boundingSphere.makeEmpty();let e=t.getAttribute(&quot;position&quot;);for(let i=0;i&lt;e.count;i++)this.getVertexPosition(i,My),this.boundingSphere.expandByPoint(My)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&amp;&amp;(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&amp;&amp;(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){let i=this.material,a=this.matrixWorld;i!==void 0&amp;&amp;(this.boundingSphere===null&amp;&amp;this.computeBoundingSphere(),hb.copy(this.boundingSphere),hb.applyMatrix4(a),t.ray.intersectsSphere(hb)!==!1&amp;&amp;(ZU.copy(a).invert(),db.copy(t.ray).applyMatrix4(ZU),!(this.boundingBox!==null&amp;&amp;db.intersectsBox(this.boundingBox)===!1)&amp;&amp;this._computeIntersections(t,e,db)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&amp;&amp;(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let t=new Oe,e=this.geometry.attributes.skinWeight;for(let i=0,a=e.count;i&lt;a;i++){t.fromBufferAttribute(e,i);let s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===qy?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gT?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn(&quot;THREE.SkinnedMesh: Unrecognized bindMode: &quot;+this.bindMode)}applyBoneTransform(t,e){let i=this.skeleton,a=this.geometry;YU.fromBufferAttribute(a.attributes.skinIndex,t),WU.fromBufferAttribute(a.attributes.skinWeight,t),qU.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s&lt;4;s++){let o=WU.getComponent(s);if(o!==0){let u=YU.getComponent(s);kU.multiplyMatrices(i.bones[u].matrixWorld,i.boneInverses[u]),e.addScaledVector(QH.copy(qU).applyMatrix4(kU),o)}}return e.applyMatrix4(this.bindMatrixInverse)}},kf=class extends Ie{constructor(){super(),this.isBone=!0,this.type=&quot;Bone&quot;}},Oa=class extends zn{constructor(t=null,e=1,i=1,a,s,o,u,c,h=oi,d=oi,m,g){super(null,o,u,c,h,d,a,s,m,g),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},jU=new fe,KH=new fe,Wp=class n{constructor(t=[],e=[]){this.uuid=Na(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn(&quot;THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.&quot;),this.boneInverses=[];for(let i=0,a=this.bones.length;i&lt;a;i++)this.boneInverses.push(new fe)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t&lt;e;t++){let i=new fe;this.bones[t]&amp;&amp;i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t&lt;e;t++){let i=this.bones[t];i&amp;&amp;i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t&lt;e;t++){let i=this.bones[t];i&amp;&amp;(i.parent&amp;&amp;i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){let t=this.bones,e=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let s=0,o=t.length;s&lt;o;s++){let u=t[s]?t[s].matrixWorld:KH;jU.multiplyMatrices(u,e[s]),jU.toArray(i,s*16)}a!==null&amp;&amp;(a.needsUpdate=!0)}clone(){return new n(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4);e.set(this.boneMatrices);let i=new Oa(e,t,t,li,qi);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e&lt;i;e++){let a=this.bones[e];if(a.name===t)return a}}dispose(){this.boneTexture!==null&amp;&amp;(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,a=t.bones.length;i&lt;a;i++){let s=t.bones[i],o=e[s];o===void 0&amp;&amp;(console.warn(&quot;THREE.Skeleton: No bone found with UUID:&quot;,s),o=new kf),this.bones.push(o),this.boneInverses.push(new fe().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){let t={metadata:{version:4.7,type:&quot;Skeleton&quot;,generator:&quot;Skeleton.toJSON&quot;},bones:[],boneInverses:[]};t.uuid=this.uuid;let e=this.bones,i=this.boneInverses;for(let a=0,s=e.length;a&lt;s;a++){let o=e[a];t.bones.push(o.uuid);let u=i[a];t.boneInverses.push(u.toArray())}return t}},Qr=class extends Xe{constructor(t,e,i,a=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},Df=new fe,QU=new fe,Ey=[],KU=new Zn,JH=new fe,bp=new En,Tp=new Xn,kp=class extends En{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Qr(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a&lt;i;a++)this.setMatrixAt(a,JH)}computeBoundingBox(){let t=this.geometry,e=this.count;this.boundingBox===null&amp;&amp;(this.boundingBox=new Zn),t.boundingBox===null&amp;&amp;t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i&lt;e;i++)this.getMatrixAt(i,Df),KU.copy(t.boundingBox).applyMatrix4(Df),this.boundingBox.union(KU)}computeBoundingSphere(){let t=this.geometry,e=this.count;this.boundingSphere===null&amp;&amp;(this.boundingSphere=new Xn),t.boundingSphere===null&amp;&amp;t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i&lt;e;i++)this.getMatrixAt(i,Df),Tp.copy(t.boundingSphere).applyMatrix4(Df),this.boundingSphere.union(Tp)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&amp;&amp;(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&amp;&amp;(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&amp;&amp;(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&amp;&amp;(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){let i=e.morphTargetInfluences,a=this.morphTexture.source.data.data,s=i.length+1,o=t*s+1;for(let u=0;u&lt;i.length;u++)i[u]=a[o+u]}raycast(t,e){let i=this.matrixWorld,a=this.count;if(bp.geometry=this.geometry,bp.material=this.material,bp.material!==void 0&amp;&amp;(this.boundingSphere===null&amp;&amp;this.computeBoundingSphere(),Tp.copy(this.boundingSphere),Tp.applyMatrix4(i),t.ray.intersectsSphere(Tp)!==!1))for(let s=0;s&lt;a;s++){this.getMatrixAt(s,Df),QU.multiplyMatrices(i,Df),bp.matrixWorld=QU,bp.raycast(t,Ey);for(let o=0,u=Ey.length;o&lt;u;o++){let c=Ey[o];c.instanceId=s,c.object=this,e.push(c)}Ey.length=0}}setColorAt(t,e){this.instanceColor===null&amp;&amp;(this.instanceColor=new Qr(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){let i=e.morphTargetInfluences,a=i.length+1;this.morphTexture===null&amp;&amp;(this.morphTexture=new Oa(new Float32Array(a*this.count),a,this.count,og,qi));let s=this.morphTexture.source.data.data,o=0;for(let h=0;h&lt;i.length;h++)o+=i[h];let u=this.geometry.morphTargetsRelative?1:1-o,c=a*t;s[c]=u,s.set(i,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:&quot;dispose&quot;}),this.morphTexture!==null&amp;&amp;(this.morphTexture.dispose(),this.morphTexture=null)}},pb=new B,$H=new B,t5=new ge,Es=class{constructor(t=new B(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,a){return this.normal.set(t,e,i),this.constant=a,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let a=pb.subVectors(i,e).cross($H.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(pb),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let s=-(t.start.dot(this.normal)+this.constant)/a;return s&lt;0||s&gt;1?null:e.copy(t.start).addScaledVector(i,s)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e&lt;0&amp;&amp;i&gt;0||i&lt;0&amp;&amp;e&gt;0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||t5.getNormalMatrix(t),a=this.coplanarPoint(pb).applyMatrix4(t),s=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&amp;&amp;t.constant===this.constant}clone(){return new this.constructor().copy(this)}},su=new Xn,e5=new ct(.5,.5),by=new B,Kr=class{constructor(t=new Es,e=new Es,i=new Es,a=new Es,s=new Es,o=new Es){this.planes=[t,e,i,a,s,o]}set(t,e,i,a,s,o){let u=this.planes;return u[0].copy(t),u[1].copy(e),u[2].copy(i),u[3].copy(a),u[4].copy(s),u[5].copy(o),this}copy(t){let e=this.planes;for(let i=0;i&lt;6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=aa,i=!1){let a=this.planes,s=t.elements,o=s[0],u=s[1],c=s[2],h=s[3],d=s[4],m=s[5],g=s[6],y=s[7],x=s[8],b=s[9],M=s[10],v=s[11],S=s[12],E=s[13],T=s[14],w=s[15];if(a[0].setComponents(h-o,y-d,v-x,w-S).normalize(),a[1].setComponents(h+o,y+d,v+x,w+S).normalize(),a[2].setComponents(h+u,y+m,v+b,w+E).normalize(),a[3].setComponents(h-u,y-m,v-b,w-E).normalize(),i)a[4].setComponents(c,g,M,T).normalize(),a[5].setComponents(h-c,y-g,v-M,w-T).normalize();else if(a[4].setComponents(h-c,y-g,v-M,w-T).normalize(),e===aa)a[5].setComponents(h+c,y+g,v+M,w+T).normalize();else if(e===vu)a[5].setComponents(c,g,M,T).normalize();else throw new Error(&quot;THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: &quot;+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&amp;&amp;t.computeBoundingSphere(),su.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&amp;&amp;e.computeBoundingSphere(),su.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(su)}intersectsSprite(t){su.center.set(0,0,0);let e=e5.distanceTo(t.center);return su.radius=.7071067811865476+e,su.applyMatrix4(t.matrixWorld),this.intersectsSphere(su)}intersectsSphere(t){let e=this.planes,i=t.center,a=-t.radius;for(let s=0;s&lt;6;s++)if(e[s].distanceToPoint(i)&lt;a)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i&lt;6;i++){let a=e[i];if(by.x=a.normal.x&gt;0?t.max.x:t.min.x,by.y=a.normal.y&gt;0?t.max.y:t.min.y,by.z=a.normal.z&gt;0?t.max.z:t.min.z,a.distanceToPoint(by)&lt;0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i&lt;6;i++)if(e[i].distanceToPoint(t)&lt;0)return!1;return!0}clone(){return new this.constructor().copy(this)}},Ks=new fe,Js=new Kr,Zp=class n{constructor(){this.coordinateSystem=aa}intersectsObject(t,e){if(!e.isArrayCamera||e.cameras.length===0)return!1;for(let i=0;i&lt;e.cameras.length;i++){let a=e.cameras[i];if(Ks.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Js.setFromProjectionMatrix(Ks,a.coordinateSystem,a.reversedDepth),Js.intersectsObject(t))return!0}return!1}intersectsSprite(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let i=0;i&lt;e.cameras.length;i++){let a=e.cameras[i];if(Ks.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Js.setFromProjectionMatrix(Ks,a.coordinateSystem,a.reversedDepth),Js.intersectsSprite(t))return!0}return!1}intersectsSphere(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let i=0;i&lt;e.cameras.length;i++){let a=e.cameras[i];if(Ks.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Js.setFromProjectionMatrix(Ks,a.coordinateSystem,a.reversedDepth),Js.intersectsSphere(t))return!0}return!1}intersectsBox(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let i=0;i&lt;e.cameras.length;i++){let a=e.cameras[i];if(Ks.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Js.setFromProjectionMatrix(Ks,a.coordinateSystem,a.reversedDepth),Js.intersectsBox(t))return!0}return!1}containsPoint(t,e){if(!e||!e.cameras||e.cameras.length===0)return!1;for(let i=0;i&lt;e.cameras.length;i++){let a=e.cameras[i];if(Ks.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Js.setFromProjectionMatrix(Ks,a.coordinateSystem,a.reversedDepth),Js.containsPoint(t))return!0}return!1}clone(){return new n}};function mb(n,t){return n-t}function n5(n,t){return n.z-t.z}function i5(n,t){return t.z-n.z}var wb=class{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,i,a){let s=this.pool,o=this.list;this.index&gt;=s.length&amp;&amp;s.push({start:-1,count:-1,z:-1,index:-1});let u=s[this.index];o.push(u),this.index++,u.start=t,u.count=e,u.z=i,u.index=a}reset(){this.list.length=0,this.index=0}},na=new fe,a5=new Bt(1,1,1),JU=new Kr,s5=new Zp,Ty=new Zn,ru=new Xn,Ap=new B,$U=new B,r5=new B,gb=new wb,Ui=new En,Ay=[];function o5(n,t,e=0){let i=t.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==t.array.constructor){let a=n.count;for(let s=0;s&lt;a;s++)for(let o=0;o&lt;i;o++)t.setComponent(s+e,o,n.getComponent(s,o))}else t.array.set(n.array,e*i);t.needsUpdate=!0}function ou(n,t){if(n.constructor!==t.constructor){let e=Math.min(n.length,t.length);for(let i=0;i&lt;e;i++)t[i]=n[i]}else{let e=Math.min(n.length,t.length);t.set(new n.constructor(n.buffer,0,e))}}var jp=class extends En{constructor(t,e,i=e*2,a){super(new ve,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);let e=new Float32Array(t*t*4),i=new Oa(e,t,t,li,qi);this._matricesTexture=i}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);let e=new Uint32Array(t*t),i=new Oa(e,t,t,xh,or);this._indirectTexture=i}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);let e=new Float32Array(t*t*4).fill(1),i=new Oa(e,t,t,li,qi);i.colorSpace=we.workingColorSpace,this._colorsTexture=i}_initializeGeometry(t){let e=this.geometry,i=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(let s in t.attributes){let o=t.getAttribute(s),{array:u,itemSize:c,normalized:h}=o,d=new u.constructor(i*c),m=new Xe(d,c,h);e.setAttribute(s,m)}if(t.getIndex()!==null){let s=i&gt;65535?new Uint32Array(a):new Uint16Array(a);e.setIndex(new Xe(s,1))}this._geometryInitialized=!0}}_validateGeometry(t){let e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error(&#39;THREE.BatchedMesh: All geometries must consistently have &quot;index&quot;.&#39;);for(let i in e.attributes){if(!t.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing &quot;${i}&quot;. All geometries must have consistent attributes.`);let a=t.getAttribute(i),s=e.getAttribute(i);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error(&quot;THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.&quot;)}}validateInstanceId(t){let e=this._instanceInfo;if(t&lt;0||t&gt;=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){let e=this._geometryInfo;if(t&lt;0||t&gt;=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&amp;&amp;(this.boundingBox=new Zn);let t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let i=0,a=e.length;i&lt;a;i++){if(e[i].active===!1)continue;let s=e[i].geometryIndex;this.getMatrixAt(i,na),this.getBoundingBoxAt(s,Ty).applyMatrix4(na),t.union(Ty)}}computeBoundingSphere(){this.boundingSphere===null&amp;&amp;(this.boundingSphere=new Xn);let t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let i=0,a=e.length;i&lt;a;i++){if(e[i].active===!1)continue;let s=e[i].geometryIndex;this.getMatrixAt(i,na),this.getBoundingSphereAt(s,ru).applyMatrix4(na),t.union(ru)}}addInstance(t){if(this._instanceInfo.length&gt;=this.maxInstanceCount&amp;&amp;this._availableInstanceIds.length===0)throw new Error(&quot;THREE.BatchedMesh: Maximum item count reached.&quot;);let i={visible:!0,active:!0,geometryIndex:t},a=null;this._availableInstanceIds.length&gt;0?(this._availableInstanceIds.sort(mb),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=i):(a=this._instanceInfo.length,this._instanceInfo.push(i));let s=this._matricesTexture;na.identity().toArray(s.image.data,a*16),s.needsUpdate=!0;let o=this._colorsTexture;return o&amp;&amp;(a5.toArray(o.image.data,a*4),o.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(t,e=-1,i=-1){this._initializeGeometry(t),this._validateGeometry(t);let a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=e===-1?t.getAttribute(&quot;position&quot;).count:e;let o=t.getIndex();if(o!==null&amp;&amp;(a.indexStart=this._nextIndexStart,a.reservedIndexCount=i===-1?o.count:i),a.indexStart!==-1&amp;&amp;a.indexStart+a.reservedIndexCount&gt;this._maxIndexCount||a.vertexStart+a.reservedVertexCount&gt;this._maxVertexCount)throw new Error(&quot;THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.&quot;);let c;return this._availableGeometryIds.length&gt;0?(this._availableGeometryIds.sort(mb),c=this._availableGeometryIds.shift(),s[c]=a):(c=this._geometryCount,this._geometryCount++,s.push(a)),this.setGeometryAt(c,t),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,c}setGeometryAt(t,e){if(t&gt;=this._geometryCount)throw new Error(&quot;THREE.BatchedMesh: Maximum geometry count reached.&quot;);this._validateGeometry(e);let i=this.geometry,a=i.getIndex()!==null,s=i.getIndex(),o=e.getIndex(),u=this._geometryInfo[t];if(a&amp;&amp;o.count&gt;u.reservedIndexCount||e.attributes.position.count&gt;u.reservedVertexCount)throw new Error(&quot;THREE.BatchedMesh: Reserved space not large enough for provided geometry.&quot;);let c=u.vertexStart,h=u.reservedVertexCount;u.vertexCount=e.getAttribute(&quot;position&quot;).count;for(let d in i.attributes){let m=e.getAttribute(d),g=i.getAttribute(d);o5(m,g,c);let y=m.itemSize;for(let x=m.count,b=h;x&lt;b;x++){let M=c+x;for(let v=0;v&lt;y;v++)g.setComponent(M,v,0)}g.needsUpdate=!0,g.addUpdateRange(c*y,h*y)}if(a){let d=u.indexStart,m=u.reservedIndexCount;u.indexCount=e.getIndex().count;for(let g=0;g&lt;o.count;g++)s.setX(d+g,c+o.getX(g));for(let g=o.count,y=m;g&lt;y;g++)s.setX(d+g,c);s.needsUpdate=!0,s.addUpdateRange(d,u.reservedIndexCount)}return u.start=a?u.indexStart:u.vertexStart,u.count=a?u.indexCount:u.vertexCount,u.boundingBox=null,e.boundingBox!==null&amp;&amp;(u.boundingBox=e.boundingBox.clone()),u.boundingSphere=null,e.boundingSphere!==null&amp;&amp;(u.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){let e=this._geometryInfo;if(t&gt;=e.length||e[t].active===!1)return this;let i=this._instanceInfo;for(let a=0,s=i.length;a&lt;s;a++)i[a].active&amp;&amp;i[a].geometryIndex===t&amp;&amp;this.deleteInstance(a);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0,i=this._geometryInfo,a=i.map((o,u)=&gt;u).sort((o,u)=&gt;i[o].vertexStart-i[u].vertexStart),s=this.geometry;for(let o=0,u=i.length;o&lt;u;o++){let c=a[o],h=i[c];if(h.active!==!1){if(s.index!==null){if(h.indexStart!==e){let{indexStart:d,vertexStart:m,reservedIndexCount:g}=h,y=s.index,x=y.array,b=t-m;for(let M=d;M&lt;d+g;M++)x[M]=x[M]+b;y.array.copyWithin(e,d,d+g),y.addUpdateRange(e,g),h.indexStart=e}e+=h.reservedIndexCount}if(h.vertexStart!==t){let{vertexStart:d,reservedVertexCount:m}=h,g=s.attributes;for(let y in g){let x=g[y],{array:b,itemSize:M}=x;b.copyWithin(t*M,d*M,(d+m)*M),x.addUpdateRange(t*M,m*M)}h.vertexStart=t}t+=h.reservedVertexCount,h.start=s.index?h.indexStart:h.vertexStart,this._nextIndexStart=s.index?h.indexStart+h.reservedIndexCount:0,this._nextVertexStart=h.vertexStart+h.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t&gt;=this._geometryCount)return null;let i=this.geometry,a=this._geometryInfo[t];if(a.boundingBox===null){let s=new Zn,o=i.index,u=i.attributes.position;for(let c=a.start,h=a.start+a.count;c&lt;h;c++){let d=c;o&amp;&amp;(d=o.getX(d)),s.expandByPoint(Ap.fromBufferAttribute(u,d))}a.boundingBox=s}return e.copy(a.boundingBox),e}getBoundingSphereAt(t,e){if(t&gt;=this._geometryCount)return null;let i=this.geometry,a=this._geometryInfo[t];if(a.boundingSphere===null){let s=new Xn;this.getBoundingBoxAt(t,Ty),Ty.getCenter(s.center);let o=i.index,u=i.attributes.position,c=0;for(let h=a.start,d=a.start+a.count;h&lt;d;h++){let m=h;o&amp;&amp;(m=o.getX(m)),Ap.fromBufferAttribute(u,m),c=Math.max(c,s.center.distanceToSquared(Ap))}s.radius=Math.sqrt(c),a.boundingSphere=s}return e.copy(a.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);let i=this._matricesTexture,a=this._matricesTexture.image.data;return e.toArray(a,t*16),i.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&amp;&amp;this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);let i=this._geometryInfo[t];return e.vertexStart=i.vertexStart,e.vertexCount=i.vertexCount,e.reservedVertexCount=i.reservedVertexCount,e.indexStart=i.indexStart,e.indexCount=i.indexCount,e.reservedIndexCount=i.reservedIndexCount,e.start=i.start,e.count=i.count,e}setInstanceCount(t){let e=this._availableInstanceIds,i=this._instanceInfo;for(e.sort(mb);e[e.length-1]===i.length-1;)i.pop(),e.pop();if(t&lt;i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);let a=new Int32Array(t),s=new Int32Array(t);ou(this._multiDrawCounts,a),ou(this._multiDrawStarts,s),this._multiDrawCounts=a,this._multiDrawStarts=s,this._maxInstanceCount=t;let o=this._indirectTexture,u=this._matricesTexture,c=this._colorsTexture;o.dispose(),this._initIndirectTexture(),ou(o.image.data,this._indirectTexture.image.data),u.dispose(),this._initMatricesTexture(),ou(u.image.data,this._matricesTexture.image.data),c&amp;&amp;(c.dispose(),this._initColorsTexture(),ou(c.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){let i=[...this._geometryInfo].filter(u=&gt;u.active);if(Math.max(...i.map(u=&gt;u.vertexStart+u.reservedVertexCount))&gt;t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&amp;&amp;Math.max(...i.map(c=&gt;c.indexStart+c.reservedIndexCount))&gt;e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);let s=this.geometry;s.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&amp;&amp;(this._geometryInitialized=!1,this.geometry=new ve,this._initializeGeometry(s));let o=this.geometry;s.index&amp;&amp;ou(s.index.array,o.index.array);for(let u in s.attributes)ou(s.attributes[u].array,o.attributes[u].array)}raycast(t,e){let i=this._instanceInfo,a=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Ui.material=this.material,Ui.geometry.index=o.index,Ui.geometry.attributes=o.attributes,Ui.geometry.boundingBox===null&amp;&amp;(Ui.geometry.boundingBox=new Zn),Ui.geometry.boundingSphere===null&amp;&amp;(Ui.geometry.boundingSphere=new Xn);for(let u=0,c=i.length;u&lt;c;u++){if(!i[u].visible||!i[u].active)continue;let h=i[u].geometryIndex,d=a[h];Ui.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(u,Ui.matrixWorld).premultiply(s),this.getBoundingBoxAt(h,Ui.geometry.boundingBox),this.getBoundingSphereAt(h,Ui.geometry.boundingSphere),Ui.raycast(t,Ay);for(let m=0,g=Ay.length;m&lt;g;m++){let y=Ay[m];y.object=this,y.batchId=u,e.push(y)}Ay.length=0}Ui.material=null,Ui.geometry.index=null,Ui.geometry.attributes={},Ui.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=&gt;({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=&gt;({...e})),this._availableInstanceIds=t._availableInstanceIds.slice(),this._availableGeometryIds=t._availableGeometryIds.slice(),this._nextIndexStart=t._nextIndexStart,this._nextVertexStart=t._nextVertexStart,this._geometryCount=t._geometryCount,this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._indirectTexture=t._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&amp;&amp;(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&amp;&amp;(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,i,a,s){if(!this._visibilityChanged&amp;&amp;!this.perObjectFrustumCulled&amp;&amp;!this.sortObjects)return;let o=a.getIndex(),u=o===null?1:o.array.BYTES_PER_ELEMENT,c=this._instanceInfo,h=this._multiDrawStarts,d=this._multiDrawCounts,m=this._geometryInfo,g=this.perObjectFrustumCulled,y=this._indirectTexture,x=y.image.data,b=i.isArrayCamera?s5:JU;g&amp;&amp;!i.isArrayCamera&amp;&amp;(na.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),JU.setFromProjectionMatrix(na,i.coordinateSystem,i.reversedDepth));let M=0;if(this.sortObjects){na.copy(this.matrixWorld).invert(),Ap.setFromMatrixPosition(i.matrixWorld).applyMatrix4(na),$U.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(na);for(let E=0,T=c.length;E&lt;T;E++)if(c[E].visible&amp;&amp;c[E].active){let w=c[E].geometryIndex;this.getMatrixAt(E,na),this.getBoundingSphereAt(w,ru).applyMatrix4(na);let U=!1;if(g&amp;&amp;(U=!b.intersectsSphere(ru,i)),!U){let O=m[w],z=r5.subVectors(ru.center,Ap).dot($U);gb.push(O.start,O.count,z,E)}}let v=gb.list,S=this.customSort;S===null?v.sort(s.transparent?i5:n5):S.call(this,v,i);for(let E=0,T=v.length;E&lt;T;E++){let w=v[E];h[M]=w.start*u,d[M]=w.count,x[M]=w.index,M++}gb.reset()}else for(let v=0,S=c.length;v&lt;S;v++)if(c[v].visible&amp;&amp;c[v].active){let E=c[v].geometryIndex,T=!1;if(g&amp;&amp;(this.getMatrixAt(v,na),this.getBoundingSphereAt(E,ru).applyMatrix4(na),T=!b.intersectsSphere(ru,i)),!T){let w=m[E];h[M]=w.start*u,d[M]=w.count,x[M]=v,M++}}y.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(t,e,i,a,s,o){this.onBeforeRender(t,null,a,s,o)}},ui=class extends jn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type=&quot;LineBasicMaterial&quot;,this.color=new Bt(16777215),this.map=null,this.linewidth=1,this.linecap=&quot;round&quot;,this.linejoin=&quot;round&quot;,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},e_=new B,n_=new B,tN=new fe,Rp=new jr,Ry=new Xn,vb=new B,eN=new B,Cs=class extends Ie{constructor(t=new ve,e=new ui){super(),this.isLine=!0,this.type=&quot;Line&quot;,this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[0];for(let a=1,s=e.count;a&lt;s;a++)e_.fromBufferAttribute(e,a-1),n_.fromBufferAttribute(e,a),i[a]=i[a-1],i[a]+=e_.distanceTo(n_);t.setAttribute(&quot;lineDistance&quot;,new Xt(i,1))}else console.warn(&quot;THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.&quot;);return this}raycast(t,e){let i=this.geometry,a=this.matrixWorld,s=t.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),Ry.copy(i.boundingSphere),Ry.applyMatrix4(a),Ry.radius+=s,t.ray.intersectsSphere(Ry)===!1)return;tN.copy(a).invert(),Rp.copy(t.ray).applyMatrix4(tN);let u=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,h=this.isLineSegments?2:1,d=i.index,g=i.attributes.position;if(d!==null){let y=Math.max(0,o.start),x=Math.min(d.count,o.start+o.count);for(let b=y,M=x-1;b&lt;M;b+=h){let v=d.getX(b),S=d.getX(b+1),E=Cy(this,t,Rp,c,v,S,b);E&amp;&amp;e.push(E)}if(this.isLineLoop){let b=d.getX(x-1),M=d.getX(y),v=Cy(this,t,Rp,c,b,M,x-1);v&amp;&amp;e.push(v)}}else{let y=Math.max(0,o.start),x=Math.min(g.count,o.start+o.count);for(let b=y,M=x-1;b&lt;M;b+=h){let v=Cy(this,t,Rp,c,b,b+1,b);v&amp;&amp;e.push(v)}if(this.isLineLoop){let b=Cy(this,t,Rp,c,x-1,y,x-1);b&amp;&amp;e.push(b)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length&gt;0){let a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s&lt;o;s++){let u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}};function Cy(n,t,e,i,a,s,o){let u=n.geometry.attributes.position;if(e_.fromBufferAttribute(u,a),n_.fromBufferAttribute(u,s),e.distanceSqToSegment(e_,n_,vb,eN)&gt;i)return;vb.applyMatrix4(n.matrixWorld);let h=t.ray.origin.distanceTo(vb);if(!(h&lt;t.near||h&gt;t.far))return{distance:h,point:eN.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}var nN=new B,iN=new B,Ba=class extends Cs{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type=&quot;LineSegments&quot;}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,i=[];for(let a=0,s=e.count;a&lt;s;a+=2)nN.fromBufferAttribute(e,a),iN.fromBufferAttribute(e,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+nN.distanceTo(iN);t.setAttribute(&quot;lineDistance&quot;,new Xt(i,1))}else console.warn(&quot;THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.&quot;);return this}},Qp=class extends Cs{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type=&quot;LineLoop&quot;}},Zf=class extends jn{constructor(t){super(),this.isPointsMaterial=!0,this.type=&quot;PointsMaterial&quot;,this.color=new Bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}},aN=new fe,Db=new jr,wy=new Xn,Dy=new B,Kp=class extends Ie{constructor(t=new ve,e=new Zf){super(),this.isPoints=!0,this.type=&quot;Points&quot;,this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){let i=this.geometry,a=this.matrixWorld,s=t.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&amp;&amp;i.computeBoundingSphere(),wy.copy(i.boundingSphere),wy.applyMatrix4(a),wy.radius+=s,t.ray.intersectsSphere(wy)===!1)return;aN.copy(a).invert(),Db.copy(t.ray).applyMatrix4(aN);let u=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,h=i.index,m=i.attributes.position;if(h!==null){let g=Math.max(0,o.start),y=Math.min(h.count,o.start+o.count);for(let x=g,b=y;x&lt;b;x++){let M=h.getX(x);Dy.fromBufferAttribute(m,M),sN(Dy,M,c,a,t,e,this)}}else{let g=Math.max(0,o.start),y=Math.min(m.count,o.start+o.count);for(let x=g,b=y;x&lt;b;x++)Dy.fromBufferAttribute(m,x),sN(Dy,x,c,a,t,e,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length&gt;0){let a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=a.length;s&lt;o;s++){let u=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=s}}}}};function sN(n,t,e,i,a,s,o){let u=Db.distanceSqToPoint(n);if(u&lt;e){let c=new B;Db.closestPointToPoint(n,c),c.applyMatrix4(i);let h=a.ray.origin.distanceTo(c);if(h&lt;a.near||h&gt;a.far)return;s.push({distance:h,distanceToRay:Math.sqrt(u),point:c,index:t,face:null,faceIndex:null,barycoord:null,object:o})}}var Jp=class extends zn{constructor(t,e,i,a,s=Gn,o=Gn,u,c,h){super(t,e,i,a,s,o,u,c,h),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;let d=this;function m(){d.needsUpdate=!0,d._requestVideoFrameCallbackId=t.requestVideoFrameCallback(m)}&quot;requestVideoFrameCallback&quot;in t&amp;&amp;(this._requestVideoFrameCallbackId=t.requestVideoFrameCallback(m))}clone(){return new this.constructor(this.image).copy(this)}update(){let t=this.image;&quot;requestVideoFrameCallback&quot;in t===!1&amp;&amp;t.readyState&gt;=t.HAVE_CURRENT_DATA&amp;&amp;(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&amp;&amp;this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}},i_=class extends Jp{constructor(t,e,i,a,s,o,u,c){super({},t,e,i,a,s,o,u,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}},a_=class extends zn{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=oi,this.minFilter=oi,this.generateMipmaps=!1,this.needsUpdate=!0}},Au=class extends zn{constructor(t,e,i,a,s,o,u,c,h,d,m,g){super(null,o,u,c,h,d,a,s,m,g),this.isCompressedTexture=!0,this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}},s_=class extends Au{constructor(t,e,i,a,s,o){super(t,e,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=Ua,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}},r_=class extends Au{constructor(t,e,i){super(void 0,t[0].width,t[0].height,e,i,rr),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}},o_=class extends zn{constructor(t,e,i,a,s,o,u,c,h){super(t,e,i,a,s,o,u,c,h),this.isCanvasTexture=!0,this.needsUpdate=!0}},jf=class extends zn{constructor(t,e,i=or,a,s,o,u=oi,c=oi,h,d=gu,m=1){if(d!==gu&amp;&amp;d!==Iu)throw new Error(&quot;DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat&quot;);let g={width:t,height:e,depth:m};super(g,a,s,o,u,c,d,i,h),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new Ts(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&amp;&amp;(e.compareFunction=this.compareFunction),e}},$p=class n extends ve{constructor(t=1,e=1,i=4,a=8,s=1){super(),this.type=&quot;CapsuleGeometry&quot;,this.parameters={radius:t,height:e,capSegments:i,radialSegments:a,heightSegments:s},e=Math.max(0,e),i=Math.max(1,Math.floor(i)),a=Math.max(3,Math.floor(a)),s=Math.max(1,Math.floor(s));let o=[],u=[],c=[],h=[],d=e/2,m=Math.PI/2*t,g=e,y=2*m+g,x=i*2+s,b=a+1,M=new B,v=new B;for(let S=0;S&lt;=x;S++){let E=0,T=0,w=0,U=0;if(S&lt;=i){let C=S/i,R=C*Math.PI/2;T=-d-t*Math.cos(R),w=t*Math.sin(R),U=-t*Math.cos(R),E=C*m}else if(S&lt;=i+s){let C=(S-i)/s;T=-d+C*e,w=t,U=0,E=m+C*g}else{let C=(S-i-s)/i,R=C*Math.PI/2;T=d+t*Math.sin(R),w=t*Math.cos(R),U=t*Math.sin(R),E=m+g+C*m}let O=Math.max(0,Math.min(1,E/y)),z=0;S===0?z=.5/a:S===x&amp;&amp;(z=-.5/a);for(let C=0;C&lt;=a;C++){let R=C/a,P=R*Math.PI*2,j=Math.sin(P),X=Math.cos(P);v.x=-w*X,v.y=T,v.z=w*j,u.push(v.x,v.y,v.z),M.set(-w*X,U,w*j),M.normalize(),c.push(M.x,M.y,M.z),h.push(R+z,O)}if(S&gt;0){let C=(S-1)*b;for(let R=0;R&lt;a;R++){let P=C+R,j=C+R+1,X=S*b+R,Z=S*b+R+1;o.push(P,j,X),o.push(j,Z,X)}}}this.setIndex(o),this.setAttribute(&quot;position&quot;,new Xt(u,3)),this.setAttribute(&quot;normal&quot;,new Xt(c,3)),this.setAttribute(&quot;uv&quot;,new Xt(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.height,t.capSegments,t.radialSegments,t.heightSegments)}},tm=class n extends ve{constructor(t=1,e=32,i=0,a=Math.PI*2){super(),this.type=&quot;CircleGeometry&quot;,this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:a},e=Math.max(3,e);let s=[],o=[],u=[],c=[],h=new B,d=new ct;o.push(0,0,0),u.push(0,0,1),c.push(.5,.5);for(let m=0,g=3;m&lt;=e;m++,g+=3){let y=i+m/e*a;h.x=t*Math.cos(y),h.y=t*Math.sin(y),o.push(h.x,h.y,h.z),u.push(0,0,1),d.x=(o[g]/t+1)/2,d.y=(o[g+1]/t+1)/2,c.push(d.x,d.y)}for(let m=1;m&lt;=e;m++)s.push(m,m+1,0);this.setIndex(s),this.setAttribute(&quot;position&quot;,new Xt(o,3)),this.setAttribute(&quot;normal&quot;,new Xt(u,3)),this.setAttribute(&quot;uv&quot;,new Xt(c,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.segments,t.thetaStart,t.thetaLength)}},Qf=class n extends ve{constructor(t=1,e=1,i=1,a=32,s=1,o=!1,u=0,c=Math.PI*2){super(),this.type=&quot;CylinderGeometry&quot;,this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:a,heightSegments:s,openEnded:o,thetaStart:u,thetaLength:c};let h=this;a=Math.floor(a),s=Math.floor(s);let d=[],m=[],g=[],y=[],x=0,b=[],M=i/2,v=0;S(),o===!1&amp;&amp;(t&gt;0&amp;&amp;E(!0),e&gt;0&amp;&amp;E(!1)),this.setIndex(d),this.setAttribute(&quot;position&quot;,new Xt(m,3)),this.setAttribute(&quot;normal&quot;,new Xt(g,3)),this.setAttribute(&quot;uv&quot;,new Xt(y,2));function S(){let T=new B,w=new B,U=0,O=(e-t)/i;for(let z=0;z&lt;=s;z++){let C=[],R=z/s,P=R*(e-t)+t;for(let j=0;j&lt;=a;j++){let X=j/a,Z=X*c+u,st=Math.sin(Z),et=Math.cos(Z);w.x=P*st,w.y=-R*i+M,w.z=P*et,m.push(w.x,w.y,w.z),T.set(st,O,et).normalize(),g.push(T.x,T.y,T.z),y.push(X,1-R),C.push(x++)}b.push(C)}for(let z=0;z&lt;a;z++)for(let C=0;C&lt;s;C++){let R=b[C][z],P=b[C+1][z],j=b[C+1][z+1],X=b[C][z+1];(t&gt;0||C!==0)&amp;&amp;(d.push(R,P,X),U+=3),(e&gt;0||C!==s-1)&amp;&amp;(d.push(P,j,X),U+=3)}h.addGroup(v,U,0),v+=U}function E(T){let w=x,U=new ct,O=new B,z=0,C=T===!0?t:e,R=T===!0?1:-1;for(let j=1;j&lt;=a;j++)m.push(0,M*R,0),g.push(0,R,0),y.push(.5,.5),x++;let P=x;for(let j=0;j&lt;=a;j++){let Z=j/a*c+u,st=Math.cos(Z),et=Math.sin(Z);O.x=C*et,O.y=M*R,O.z=C*st,m.push(O.x,O.y,O.z),g.push(0,R,0),U.x=st*.5+.5,U.y=et*.5*R+.5,y.push(U.x,U.y),x++}for(let j=0;j&lt;a;j++){let X=w+j,Z=P+j;T===!0?d.push(Z,Z+1,X):d.push(Z+1,Z,X),z+=3}h.addGroup(v,z,T===!0?1:2),v+=z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},Kf=class n extends Qf{constructor(t=1,e=1,i=32,a=1,s=!1,o=0,u=Math.PI*2){super(0,t,e,i,a,s,o,u),this.type=&quot;ConeGeometry&quot;,this.parameters={radius:t,height:e,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:o,thetaLength:u}}static fromJSON(t){return new n(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},Jr=class n extends ve{constructor(t=[],e=[],i=1,a=0){super(),this.type=&quot;PolyhedronGeometry&quot;,this.parameters={vertices:t,indices:e,radius:i,detail:a};let s=[],o=[];u(a),h(i),d(),this.setAttribute(&quot;position&quot;,new Xt(s,3)),this.setAttribute(&quot;normal&quot;,new Xt(s.slice(),3)),this.setAttribute(&quot;uv&quot;,new Xt(o,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function u(S){let E=new B,T=new B,w=new B;for(let U=0;U&lt;e.length;U+=3)y(e[U+0],E),y(e[U+1],T),y(e[U+2],w),c(E,T,w,S)}function c(S,E,T,w){let U=w+1,O=[];for(let z=0;z&lt;=U;z++){O[z]=[];let C=S.clone().lerp(T,z/U),R=E.clone().lerp(T,z/U),P=U-z;for(let j=0;j&lt;=P;j++)j===0&amp;&amp;z===U?O[z][j]=C:O[z][j]=C.clone().lerp(R,j/P)}for(let z=0;z&lt;U;z++)for(let C=0;C&lt;2*(U-z)-1;C++){let R=Math.floor(C/2);C%2===0?(g(O[z][R+1]),g(O[z+1][R]),g(O[z][R])):(g(O[z][R+1]),g(O[z+1][R+1]),g(O[z+1][R]))}}function h(S){let E=new B;for(let T=0;T&lt;s.length;T+=3)E.x=s[T+0],E.y=s[T+1],E.z=s[T+2],E.normalize().multiplyScalar(S),s[T+0]=E.x,s[T+1]=E.y,s[T+2]=E.z}function d(){let S=new B;for(let E=0;E&lt;s.length;E+=3){S.x=s[E+0],S.y=s[E+1],S.z=s[E+2];let T=M(S)/2/Math.PI+.5,w=v(S)/Math.PI+.5;o.push(T,1-w)}x(),m()}function m(){for(let S=0;S&lt;o.length;S+=6){let E=o[S+0],T=o[S+2],w=o[S+4],U=Math.max(E,T,w),O=Math.min(E,T,w);U&gt;.9&amp;&amp;O&lt;.1&amp;&amp;(E&lt;.2&amp;&amp;(o[S+0]+=1),T&lt;.2&amp;&amp;(o[S+2]+=1),w&lt;.2&amp;&amp;(o[S+4]+=1))}}function g(S){s.push(S.x,S.y,S.z)}function y(S,E){let T=S*3;E.x=t[T+0],E.y=t[T+1],E.z=t[T+2]}function x(){let S=new B,E=new B,T=new B,w=new B,U=new ct,O=new ct,z=new ct;for(let C=0,R=0;C&lt;s.length;C+=9,R+=6){S.set(s[C+0],s[C+1],s[C+2]),E.set(s[C+3],s[C+4],s[C+5]),T.set(s[C+6],s[C+7],s[C+8]),U.set(o[R+0],o[R+1]),O.set(o[R+2],o[R+3]),z.set(o[R+4],o[R+5]),w.copy(S).add(E).add(T).divideScalar(3);let P=M(w);b(U,R+0,S,P),b(O,R+2,E,P),b(z,R+4,T,P)}}function b(S,E,T,w){w&lt;0&amp;&amp;S.x===1&amp;&amp;(o[E]=S.x-1),T.x===0&amp;&amp;T.z===0&amp;&amp;(o[E]=w/2/Math.PI+.5)}function M(S){return Math.atan2(S.z,-S.x)}function v(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.vertices,t.indices,t.radius,t.details)}},em=class n extends Jr{constructor(t=1,e=0){let i=(1+Math.sqrt(5))/2,a=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,t,e),this.type=&quot;DodecahedronGeometry&quot;,this.parameters={radius:t,detail:e}}static fromJSON(t){return new n(t.radius,t.detail)}},Uy=new B,Ny=new B,yb=new B,Oy=new bs,nm=class extends ve{constructor(t=null,e=1){if(super(),this.type=&quot;EdgesGeometry&quot;,this.parameters={geometry:t,thresholdAngle:e},t!==null){let a=Math.pow(10,4),s=Math.cos(mu*e),o=t.getIndex(),u=t.getAttribute(&quot;position&quot;),c=o?o.count:u.count,h=[0,0,0],d=[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;],m=new Array(3),g={},y=[];for(let x=0;x&lt;c;x+=3){o?(h[0]=o.getX(x),h[1]=o.getX(x+1),h[2]=o.getX(x+2)):(h[0]=x,h[1]=x+1,h[2]=x+2);let{a:b,b:M,c:v}=Oy;if(b.fromBufferAttribute(u,h[0]),M.fromBufferAttribute(u,h[1]),v.fromBufferAttribute(u,h[2]),Oy.getNormal(yb),m[0]=`${Math.round(b.x*a)},${Math.round(b.y*a)},${Math.round(b.z*a)}`,m[1]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,m[2]=`${Math.round(v.x*a)},${Math.round(v.y*a)},${Math.round(v.z*a)}`,!(m[0]===m[1]||m[1]===m[2]||m[2]===m[0]))for(let S=0;S&lt;3;S++){let E=(S+1)%3,T=m[S],w=m[E],U=Oy[d[S]],O=Oy[d[E]],z=`${T}_${w}`,C=`${w}_${T}`;C in g&amp;&amp;g[C]?(yb.dot(g[C].normal)&lt;=s&amp;&amp;(y.push(U.x,U.y,U.z),y.push(O.x,O.y,O.z)),g[C]=null):z in g||(g[z]={index0:h[S],index1:h[E],normal:yb.clone()})}}for(let x in g)if(g[x]){let{index0:b,index1:M}=g[x];Uy.fromBufferAttribute(u,b),Ny.fromBufferAttribute(u,M),y.push(Uy.x,Uy.y,Uy.z),y.push(Ny.x,Ny.y,Ny.z)}this.setAttribute(&quot;position&quot;,new Xt(y,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}},oa=class{constructor(){this.type=&quot;Curve&quot;,this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn(&quot;THREE.Curve: .getPoint() not implemented.&quot;)}getPointAt(t,e){let i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){let e=[];for(let i=0;i&lt;=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){let e=[];for(let i=0;i&lt;=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&amp;&amp;this.cacheArcLengths.length===t+1&amp;&amp;!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let e=[],i,a=this.getPoint(0),s=0;e.push(0);for(let o=1;o&lt;=t;o++)i=this.getPoint(o/t),s+=i.distanceTo(a),e.push(s),a=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){let i=this.getLengths(),a=0,s=i.length,o;e?o=e:o=t*i[s-1];let u=0,c=s-1,h;for(;u&lt;=c;)if(a=Math.floor(u+(c-u)/2),h=i[a]-o,h&lt;0)u=a+1;else if(h&gt;0)c=a-1;else{c=a;break}if(a=c,i[a]===o)return a/(s-1);let d=i[a],g=i[a+1]-d,y=(o-d)/g;return(a+y)/(s-1)}getTangent(t,e){let a=t-1e-4,s=t+1e-4;a&lt;0&amp;&amp;(a=0),s&gt;1&amp;&amp;(s=1);let o=this.getPoint(a),u=this.getPoint(s),c=e||(o.isVector2?new ct:new B);return c.copy(u).sub(o).normalize(),c}getTangentAt(t,e){let i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e=!1){let i=new B,a=[],s=[],o=[],u=new B,c=new fe;for(let y=0;y&lt;=t;y++){let x=y/t;a[y]=this.getTangentAt(x,new B)}s[0]=new B,o[0]=new B;let h=Number.MAX_VALUE,d=Math.abs(a[0].x),m=Math.abs(a[0].y),g=Math.abs(a[0].z);d&lt;=h&amp;&amp;(h=d,i.set(1,0,0)),m&lt;=h&amp;&amp;(h=m,i.set(0,1,0)),g&lt;=h&amp;&amp;i.set(0,0,1),u.crossVectors(a[0],i).normalize(),s[0].crossVectors(a[0],u),o[0].crossVectors(a[0],s[0]);for(let y=1;y&lt;=t;y++){if(s[y]=s[y-1].clone(),o[y]=o[y-1].clone(),u.crossVectors(a[y-1],a[y]),u.length()&gt;Number.EPSILON){u.normalize();let x=Math.acos(le(a[y-1].dot(a[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(u,x))}o[y].crossVectors(a[y],s[y])}if(e===!0){let y=Math.acos(le(s[0].dot(s[t]),-1,1));y/=t,a[0].dot(u.crossVectors(s[0],s[t]))&gt;0&amp;&amp;(y=-y);for(let x=1;x&lt;=t;x++)s[x].applyMatrix4(c.makeRotationAxis(a[x],y*x)),o[x].crossVectors(a[x],s[x])}return{tangents:a,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.7,type:&quot;Curve&quot;,generator:&quot;Curve.toJSON&quot;}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},Ru=class extends oa{constructor(t=0,e=0,i=1,a=1,s=0,o=Math.PI*2,u=!1,c=0){super(),this.isEllipseCurve=!0,this.type=&quot;EllipseCurve&quot;,this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=u,this.aRotation=c}getPoint(t,e=new ct){let i=e,a=Math.PI*2,s=this.aEndAngle-this.aStartAngle,o=Math.abs(s)&lt;Number.EPSILON;for(;s&lt;0;)s+=a;for(;s&gt;a;)s-=a;s&lt;Number.EPSILON&amp;&amp;(o?s=0:s=a),this.aClockwise===!0&amp;&amp;!o&amp;&amp;(s===a?s=-a:s=s-a);let u=this.aStartAngle+t*s,c=this.aX+this.xRadius*Math.cos(u),h=this.aY+this.yRadius*Math.sin(u);if(this.aRotation!==0){let d=Math.cos(this.aRotation),m=Math.sin(this.aRotation),g=c-this.aX,y=h-this.aY;c=g*d-y*m+this.aX,h=g*m+y*d+this.aY}return i.set(c,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},im=class extends Ru{constructor(t,e,i,a,s,o){super(t,e,i,i,a,s,o),this.isArcCurve=!0,this.type=&quot;ArcCurve&quot;}};function zT(){let n=0,t=0,e=0,i=0;function a(s,o,u,c){n=s,t=u,e=-3*s+3*o-2*u-c,i=2*s-2*o+u+c}return{initCatmullRom:function(s,o,u,c,h){a(o,u,h*(u-s),h*(c-o))},initNonuniformCatmullRom:function(s,o,u,c,h,d,m){let g=(o-s)/h-(u-s)/(h+d)+(u-o)/d,y=(u-o)/d-(c-o)/(d+m)+(c-u)/m;g*=d,y*=d,a(o,u,g,y)},calc:function(s){let o=s*s,u=o*s;return n+t*s+e*o+i*u}}}var Ly=new B,_b=new zT,xb=new zT,Sb=new zT,am=class extends oa{constructor(t=[],e=!1,i=&quot;centripetal&quot;,a=.5){super(),this.isCatmullRomCurve3=!0,this.type=&quot;CatmullRomCurve3&quot;,this.points=t,this.closed=e,this.curveType=i,this.tension=a}getPoint(t,e=new B){let i=e,a=this.points,s=a.length,o=(s-(this.closed?0:1))*t,u=Math.floor(o),c=o-u;this.closed?u+=u&gt;0?0:(Math.floor(Math.abs(u)/s)+1)*s:c===0&amp;&amp;u===s-1&amp;&amp;(u=s-2,c=1);let h,d;this.closed||u&gt;0?h=a[(u-1)%s]:(Ly.subVectors(a[0],a[1]).add(a[0]),h=Ly);let m=a[u%s],g=a[(u+1)%s];if(this.closed||u+2&lt;s?d=a[(u+2)%s]:(Ly.subVectors(a[s-1],a[s-2]).add(a[s-1]),d=Ly),this.curveType===&quot;centripetal&quot;||this.curveType===&quot;chordal&quot;){let y=this.curveType===&quot;chordal&quot;?.5:.25,x=Math.pow(h.distanceToSquared(m),y),b=Math.pow(m.distanceToSquared(g),y),M=Math.pow(g.distanceToSquared(d),y);b&lt;1e-4&amp;&amp;(b=1),x&lt;1e-4&amp;&amp;(x=b),M&lt;1e-4&amp;&amp;(M=b),_b.initNonuniformCatmullRom(h.x,m.x,g.x,d.x,x,b,M),xb.initNonuniformCatmullRom(h.y,m.y,g.y,d.y,x,b,M),Sb.initNonuniformCatmullRom(h.z,m.z,g.z,d.z,x,b,M)}else this.curveType===&quot;catmullrom&quot;&amp;&amp;(_b.initCatmullRom(h.x,m.x,g.x,d.x,this.tension),xb.initCatmullRom(h.y,m.y,g.y,d.y,this.tension),Sb.initCatmullRom(h.z,m.z,g.z,d.z,this.tension));return i.set(_b.calc(c),xb.calc(c),Sb.calc(c)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e&lt;i;e++){let a=t.points[e];this.points.push(a.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e&lt;i;e++){let a=this.points[e];t.points.push(a.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e&lt;i;e++){let a=t.points[e];this.points.push(new B().fromArray(a))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}};function rN(n,t,e,i,a){let s=(i-t)*.5,o=(a-e)*.5,u=n*n,c=n*u;return(2*e-2*i+s+o)*c+(-3*e+3*i-2*s-o)*u+s*n+e}function l5(n,t){let e=1-n;return e*e*t}function u5(n,t){return 2*(1-n)*n*t}function c5(n,t){return n*n*t}function Op(n,t,e,i){return l5(n,t)+u5(n,e)+c5(n,i)}function f5(n,t){let e=1-n;return e*e*e*t}function h5(n,t){let e=1-n;return 3*e*e*n*t}function d5(n,t){return 3*(1-n)*n*n*t}function p5(n,t){return n*n*n*t}function Lp(n,t,e,i,a){return f5(n,t)+h5(n,e)+d5(n,i)+p5(n,a)}var Jf=class extends oa{constructor(t=new ct,e=new ct,i=new ct,a=new ct){super(),this.isCubicBezierCurve=!0,this.type=&quot;CubicBezierCurve&quot;,this.v0=t,this.v1=e,this.v2=i,this.v3=a}getPoint(t,e=new ct){let i=e,a=this.v0,s=this.v1,o=this.v2,u=this.v3;return i.set(Lp(t,a.x,s.x,o.x,u.x),Lp(t,a.y,s.y,o.y,u.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},sm=class extends oa{constructor(t=new B,e=new B,i=new B,a=new B){super(),this.isCubicBezierCurve3=!0,this.type=&quot;CubicBezierCurve3&quot;,this.v0=t,this.v1=e,this.v2=i,this.v3=a}getPoint(t,e=new B){let i=e,a=this.v0,s=this.v1,o=this.v2,u=this.v3;return i.set(Lp(t,a.x,s.x,o.x,u.x),Lp(t,a.y,s.y,o.y,u.y),Lp(t,a.z,s.z,o.z,u.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},$f=class extends oa{constructor(t=new ct,e=new ct){super(),this.isLineCurve=!0,this.type=&quot;LineCurve&quot;,this.v1=t,this.v2=e}getPoint(t,e=new ct){let i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new ct){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},rm=class extends oa{constructor(t=new B,e=new B){super(),this.isLineCurve3=!0,this.type=&quot;LineCurve3&quot;,this.v1=t,this.v2=e}getPoint(t,e=new B){let i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new B){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},th=class extends oa{constructor(t=new ct,e=new ct,i=new ct){super(),this.isQuadraticBezierCurve=!0,this.type=&quot;QuadraticBezierCurve&quot;,this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new ct){let i=e,a=this.v0,s=this.v1,o=this.v2;return i.set(Op(t,a.x,s.x,o.x),Op(t,a.y,s.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},eh=class extends oa{constructor(t=new B,e=new B,i=new B){super(),this.isQuadraticBezierCurve3=!0,this.type=&quot;QuadraticBezierCurve3&quot;,this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new B){let i=e,a=this.v0,s=this.v1,o=this.v2;return i.set(Op(t,a.x,s.x,o.x),Op(t,a.y,s.y,o.y),Op(t,a.z,s.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},nh=class extends oa{constructor(t=[]){super(),this.isSplineCurve=!0,this.type=&quot;SplineCurve&quot;,this.points=t}getPoint(t,e=new ct){let i=e,a=this.points,s=(a.length-1)*t,o=Math.floor(s),u=s-o,c=a[o===0?o:o-1],h=a[o],d=a[o&gt;a.length-2?a.length-1:o+1],m=a[o&gt;a.length-3?a.length-1:o+2];return i.set(rN(u,c.x,h.x,d.x,m.x),rN(u,c.y,h.y,d.y,m.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e&lt;i;e++){let a=t.points[e];this.points.push(a.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e&lt;i;e++){let a=this.points[e];t.points.push(a.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e&lt;i;e++){let a=t.points[e];this.points.push(new ct().fromArray(a))}return this}},l_=Object.freeze({__proto__:null,ArcCurve:im,CatmullRomCurve3:am,CubicBezierCurve:Jf,CubicBezierCurve3:sm,EllipseCurve:Ru,LineCurve:$f,LineCurve3:rm,QuadraticBezierCurve:th,QuadraticBezierCurve3:eh,SplineCurve:nh}),om=class extends oa{constructor(){super(),this.type=&quot;CurvePath&quot;,this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){let i=t.isVector2===!0?&quot;LineCurve&quot;:&quot;LineCurve3&quot;;this.curves.push(new l_[i](e,t))}return this}getPoint(t,e){let i=t*this.getLength(),a=this.getCurveLengths(),s=0;for(;s&lt;a.length;){if(a[s]&gt;=i){let o=a[s]-i,u=this.curves[s],c=u.getLength(),h=c===0?0:1-o/c;return u.getPointAt(h,e)}s++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&amp;&amp;this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],e=0;for(let i=0,a=this.curves.length;i&lt;a;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){let e=[];for(let i=0;i&lt;=t;i++)e.push(this.getPoint(i/t));return this.autoClose&amp;&amp;e.push(e[0]),e}getPoints(t=12){let e=[],i;for(let a=0,s=this.curves;a&lt;s.length;a++){let o=s[a],u=o.isEllipseCurve?t*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,c=o.getPoints(u);for(let h=0;h&lt;c.length;h++){let d=c[h];i&amp;&amp;i.equals(d)||(e.push(d),i=d)}}return this.autoClose&amp;&amp;e.length&gt;1&amp;&amp;!e[e.length-1].equals(e[0])&amp;&amp;e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e&lt;i;e++){let a=t.curves[e];this.curves.push(a.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e&lt;i;e++){let a=this.curves[e];t.curves.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e&lt;i;e++){let a=t.curves[e];this.curves.push(new l_[a.type]().fromJSON(a))}return this}},Cu=class extends om{constructor(t){super(),this.type=&quot;Path&quot;,this.currentPoint=new ct,t&amp;&amp;this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e&lt;i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){let i=new $f(this.currentPoint.clone(),new ct(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,a){let s=new th(this.currentPoint.clone(),new ct(t,e),new ct(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}bezierCurveTo(t,e,i,a,s,o){let u=new Jf(this.currentPoint.clone(),new ct(t,e),new ct(i,a),new ct(s,o));return this.curves.push(u),this.currentPoint.set(s,o),this}splineThru(t){let e=[this.currentPoint.clone()].concat(t),i=new nh(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,a,s,o){let u=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(t+u,e+c,i,a,s,o),this}absarc(t,e,i,a,s,o){return this.absellipse(t,e,i,i,a,s,o),this}ellipse(t,e,i,a,s,o,u,c){let h=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(t+h,e+d,i,a,s,o,u,c),this}absellipse(t,e,i,a,s,o,u,c){let h=new Ru(t,e,i,a,s,o,u,c);if(this.curves.length&gt;0){let m=h.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(h);let d=h.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}},$s=class extends Cu{constructor(t){super(t),this.uuid=Na(),this.type=&quot;Shape&quot;,this.holes=[]}getPointsHoles(t){let e=[];for(let i=0,a=this.holes.length;i&lt;a;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e&lt;i;e++){let a=t.holes[e];this.holes.push(a.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e&lt;i;e++){let a=this.holes[e];t.holes.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e&lt;i;e++){let a=t.holes[e];this.holes.push(new Cu().fromJSON(a))}return this}};function m5(n,t,e=2){let i=t&amp;&amp;t.length,a=i?t[0]*e:n.length,s=_O(n,0,a,e,!0),o=[];if(!s||s.next===s.prev)return o;let u,c,h;if(i&amp;&amp;(s=x5(n,t,s,e)),n.length&gt;80*e){u=1/0,c=1/0;let d=-1/0,m=-1/0;for(let g=e;g&lt;a;g+=e){let y=n[g],x=n[g+1];y&lt;u&amp;&amp;(u=y),x&lt;c&amp;&amp;(c=x),y&gt;d&amp;&amp;(d=y),x&gt;m&amp;&amp;(m=x)}h=Math.max(d-u,m-c),h=h!==0?32767/h:0}return lm(s,o,e,u,c,h,0),o}function _O(n,t,e,i,a){let s;if(a===U5(n,t,e,i)&gt;0)for(let o=t;o&lt;e;o+=i)s=oN(o/i|0,n[o],n[o+1],s);else for(let o=e-i;o&gt;=t;o-=i)s=oN(o/i|0,n[o],n[o+1],s);return s&amp;&amp;ih(s,s.next)&amp;&amp;(cm(s),s=s.next),s}function wu(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&amp;&amp;(ih(e,e.next)||Mn(e.prev,e,e.next)===0)){if(cm(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function lm(n,t,e,i,a,s,o){if(!n)return;!o&amp;&amp;s&amp;&amp;T5(n,i,a,s);let u=n;for(;n.prev!==n.next;){let c=n.prev,h=n.next;if(s?v5(n,i,a,s):g5(n)){t.push(c.i,n.i,h.i),cm(n),n=h.next,u=h.next;continue}if(n=h,n===u){o?o===1?(n=y5(wu(n),t),lm(n,t,e,i,a,s,2)):o===2&amp;&amp;_5(n,t,e,i,a,s):lm(wu(n),t,e,i,a,s,1);break}}}function g5(n){let t=n.prev,e=n,i=n.next;if(Mn(t,e,i)&gt;=0)return!1;let a=t.x,s=e.x,o=i.x,u=t.y,c=e.y,h=i.y,d=Math.min(a,s,o),m=Math.min(u,c,h),g=Math.max(a,s,o),y=Math.max(u,c,h),x=i.next;for(;x!==t;){if(x.x&gt;=d&amp;&amp;x.x&lt;=g&amp;&amp;x.y&gt;=m&amp;&amp;x.y&lt;=y&amp;&amp;Dp(a,u,s,c,o,h,x.x,x.y)&amp;&amp;Mn(x.prev,x,x.next)&gt;=0)return!1;x=x.next}return!0}function v5(n,t,e,i){let a=n.prev,s=n,o=n.next;if(Mn(a,s,o)&gt;=0)return!1;let u=a.x,c=s.x,h=o.x,d=a.y,m=s.y,g=o.y,y=Math.min(u,c,h),x=Math.min(d,m,g),b=Math.max(u,c,h),M=Math.max(d,m,g),v=Ub(y,x,t,e,i),S=Ub(b,M,t,e,i),E=n.prevZ,T=n.nextZ;for(;E&amp;&amp;E.z&gt;=v&amp;&amp;T&amp;&amp;T.z&lt;=S;){if(E.x&gt;=y&amp;&amp;E.x&lt;=b&amp;&amp;E.y&gt;=x&amp;&amp;E.y&lt;=M&amp;&amp;E!==a&amp;&amp;E!==o&amp;&amp;Dp(u,d,c,m,h,g,E.x,E.y)&amp;&amp;Mn(E.prev,E,E.next)&gt;=0||(E=E.prevZ,T.x&gt;=y&amp;&amp;T.x&lt;=b&amp;&amp;T.y&gt;=x&amp;&amp;T.y&lt;=M&amp;&amp;T!==a&amp;&amp;T!==o&amp;&amp;Dp(u,d,c,m,h,g,T.x,T.y)&amp;&amp;Mn(T.prev,T,T.next)&gt;=0))return!1;T=T.nextZ}for(;E&amp;&amp;E.z&gt;=v;){if(E.x&gt;=y&amp;&amp;E.x&lt;=b&amp;&amp;E.y&gt;=x&amp;&amp;E.y&lt;=M&amp;&amp;E!==a&amp;&amp;E!==o&amp;&amp;Dp(u,d,c,m,h,g,E.x,E.y)&amp;&amp;Mn(E.prev,E,E.next)&gt;=0)return!1;E=E.prevZ}for(;T&amp;&amp;T.z&lt;=S;){if(T.x&gt;=y&amp;&amp;T.x&lt;=b&amp;&amp;T.y&gt;=x&amp;&amp;T.y&lt;=M&amp;&amp;T!==a&amp;&amp;T!==o&amp;&amp;Dp(u,d,c,m,h,g,T.x,T.y)&amp;&amp;Mn(T.prev,T,T.next)&gt;=0)return!1;T=T.nextZ}return!0}function y5(n,t){let e=n;do{let i=e.prev,a=e.next.next;!ih(i,a)&amp;&amp;SO(i,e,e.next,a)&amp;&amp;um(i,a)&amp;&amp;um(a,i)&amp;&amp;(t.push(i.i,e.i,a.i),cm(e),cm(e.next),e=n=a),e=e.next}while(e!==n);return wu(e)}function _5(n,t,e,i,a,s){let o=n;do{let u=o.next.next;for(;u!==o.prev;){if(o.i!==u.i&amp;&amp;C5(o,u)){let c=MO(o,u);o=wu(o,o.next),c=wu(c,c.next),lm(o,t,e,i,a,s,0),lm(c,t,e,i,a,s,0);return}u=u.next}o=o.next}while(o!==n)}function x5(n,t,e,i){let a=[];for(let s=0,o=t.length;s&lt;o;s++){let u=t[s]*i,c=s&lt;o-1?t[s+1]*i:n.length,h=_O(n,u,c,i,!1);h===h.next&amp;&amp;(h.steiner=!0),a.push(R5(h))}a.sort(S5);for(let s=0;s&lt;a.length;s++)e=M5(a[s],e);return e}function S5(n,t){let e=n.x-t.x;if(e===0&amp;&amp;(e=n.y-t.y,e===0)){let i=(n.next.y-n.y)/(n.next.x-n.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=i-a}return e}function M5(n,t){let e=E5(n,t);if(!e)return t;let i=MO(e,n);return wu(i,i.next),wu(e,e.next)}function E5(n,t){let e=t,i=n.x,a=n.y,s=-1/0,o;if(ih(n,e))return e;do{if(ih(n,e.next))return e.next;if(a&lt;=e.y&amp;&amp;a&gt;=e.next.y&amp;&amp;e.next.y!==e.y){let m=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(m&lt;=i&amp;&amp;m&gt;s&amp;&amp;(s=m,o=e.x&lt;e.next.x?e:e.next,m===i))return o}e=e.next}while(e!==t);if(!o)return null;let u=o,c=o.x,h=o.y,d=1/0;e=o;do{if(i&gt;=e.x&amp;&amp;e.x&gt;=c&amp;&amp;i!==e.x&amp;&amp;xO(a&lt;h?i:s,a,c,h,a&lt;h?s:i,a,e.x,e.y)){let m=Math.abs(a-e.y)/(i-e.x);um(e,n)&amp;&amp;(m&lt;d||m===d&amp;&amp;(e.x&gt;o.x||e.x===o.x&amp;&amp;b5(o,e)))&amp;&amp;(o=e,d=m)}e=e.next}while(e!==u);return o}function b5(n,t){return Mn(n.prev,n,t.prev)&lt;0&amp;&amp;Mn(t.next,n,n.next)&lt;0}function T5(n,t,e,i){let a=n;do a.z===0&amp;&amp;(a.z=Ub(a.x,a.y,t,e,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,A5(a)}function A5(n){let t,e=1;do{let i=n,a;n=null;let s=null;for(t=0;i;){t++;let o=i,u=0;for(let h=0;h&lt;e&amp;&amp;(u++,o=o.nextZ,!!o);h++);let c=e;for(;u&gt;0||c&gt;0&amp;&amp;o;)u!==0&amp;&amp;(c===0||!o||i.z&lt;=o.z)?(a=i,i=i.nextZ,u--):(a=o,o=o.nextZ,c--),s?s.nextZ=a:n=a,a.prevZ=s,s=a;i=o}s.nextZ=null,e*=2}while(t&gt;1);return n}function Ub(n,t,e,i,a){return n=(n-e)*a|0,t=(t-i)*a|0,n=(n|n&lt;&lt;8)&amp;16711935,n=(n|n&lt;&lt;4)&amp;252645135,n=(n|n&lt;&lt;2)&amp;858993459,n=(n|n&lt;&lt;1)&amp;1431655765,t=(t|t&lt;&lt;8)&amp;16711935,t=(t|t&lt;&lt;4)&amp;252645135,t=(t|t&lt;&lt;2)&amp;858993459,t=(t|t&lt;&lt;1)&amp;1431655765,n|t&lt;&lt;1}function R5(n){let t=n,e=n;do(t.x&lt;e.x||t.x===e.x&amp;&amp;t.y&lt;e.y)&amp;&amp;(e=t),t=t.next;while(t!==n);return e}function xO(n,t,e,i,a,s,o,u){return(a-o)*(t-u)&gt;=(n-o)*(s-u)&amp;&amp;(n-o)*(i-u)&gt;=(e-o)*(t-u)&amp;&amp;(e-o)*(s-u)&gt;=(a-o)*(i-u)}function Dp(n,t,e,i,a,s,o,u){return!(n===o&amp;&amp;t===u)&amp;&amp;xO(n,t,e,i,a,s,o,u)}function C5(n,t){return n.next.i!==t.i&amp;&amp;n.prev.i!==t.i&amp;&amp;!w5(n,t)&amp;&amp;(um(n,t)&amp;&amp;um(t,n)&amp;&amp;D5(n,t)&amp;&amp;(Mn(n.prev,n,t.prev)||Mn(n,t.prev,t))||ih(n,t)&amp;&amp;Mn(n.prev,n,n.next)&gt;0&amp;&amp;Mn(t.prev,t,t.next)&gt;0)}function Mn(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function ih(n,t){return n.x===t.x&amp;&amp;n.y===t.y}function SO(n,t,e,i){let a=By(Mn(n,t,e)),s=By(Mn(n,t,i)),o=By(Mn(e,i,n)),u=By(Mn(e,i,t));return!!(a!==s&amp;&amp;o!==u||a===0&amp;&amp;zy(n,e,t)||s===0&amp;&amp;zy(n,i,t)||o===0&amp;&amp;zy(e,n,i)||u===0&amp;&amp;zy(e,t,i))}function zy(n,t,e){return t.x&lt;=Math.max(n.x,e.x)&amp;&amp;t.x&gt;=Math.min(n.x,e.x)&amp;&amp;t.y&lt;=Math.max(n.y,e.y)&amp;&amp;t.y&gt;=Math.min(n.y,e.y)}function By(n){return n&gt;0?1:n&lt;0?-1:0}function w5(n,t){let e=n;do{if(e.i!==n.i&amp;&amp;e.next.i!==n.i&amp;&amp;e.i!==t.i&amp;&amp;e.next.i!==t.i&amp;&amp;SO(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function um(n,t){return Mn(n.prev,n,n.next)&lt;0?Mn(n,t,n.next)&gt;=0&amp;&amp;Mn(n,n.prev,t)&gt;=0:Mn(n,t,n.prev)&lt;0||Mn(n,n.next,t)&lt;0}function D5(n,t){let e=n,i=!1,a=(n.x+t.x)/2,s=(n.y+t.y)/2;do e.y&gt;s!=e.next.y&gt;s&amp;&amp;e.next.y!==e.y&amp;&amp;a&lt;(e.next.x-e.x)*(s-e.y)/(e.next.y-e.y)+e.x&amp;&amp;(i=!i),e=e.next;while(e!==n);return i}function MO(n,t){let e=Nb(n.i,n.x,n.y),i=Nb(t.i,t.x,t.y),a=n.next,s=t.prev;return n.next=t,t.prev=n,e.next=a,a.prev=e,i.next=e,e.prev=i,s.next=i,i.prev=s,i}function oN(n,t,e,i){let a=Nb(n,t,e);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function cm(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&amp;&amp;(n.prevZ.nextZ=n.nextZ),n.nextZ&amp;&amp;(n.nextZ.prevZ=n.prevZ)}function Nb(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function U5(n,t,e,i){let a=0;for(let s=t,o=e-i;s&lt;e;s+=i)a+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return a}var Ob=class{static triangulate(t,e,i=2){return m5(t,e,i)}},os=class n{static area(t){let e=t.length,i=0;for(let a=e-1,s=0;s&lt;e;a=s++)i+=t[a].x*t[s].y-t[s].x*t[a].y;return i*.5}static isClockWise(t){return n.area(t)&lt;0}static triangulateShape(t,e){let i=[],a=[],s=[];lN(t),uN(i,t);let o=t.length;e.forEach(lN);for(let c=0;c&lt;e.length;c++)a.push(o),o+=e[c].length,uN(i,e[c]);let u=Ob.triangulate(i,a);for(let c=0;c&lt;u.length;c+=3)s.push(u.slice(c,c+3));return s}};function lN(n){let t=n.length;t&gt;2&amp;&amp;n[t-1].equals(n[0])&amp;&amp;n.pop()}function uN(n,t){for(let e=0;e&lt;t.length;e++)n.push(t[e].x),n.push(t[e].y)}var fm=class n extends ve{constructor(t=new $s([new ct(.5,.5),new ct(-.5,.5),new ct(-.5,-.5),new ct(.5,-.5)]),e={}){super(),this.type=&quot;ExtrudeGeometry&quot;,this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];let i=this,a=[],s=[];for(let u=0,c=t.length;u&lt;c;u++){let h=t[u];o(h)}this.setAttribute(&quot;position&quot;,new Xt(a,3)),this.setAttribute(&quot;uv&quot;,new Xt(s,2)),this.computeVertexNormals();function o(u){let c=[],h=e.curveSegments!==void 0?e.curveSegments:12,d=e.steps!==void 0?e.steps:1,m=e.depth!==void 0?e.depth:1,g=e.bevelEnabled!==void 0?e.bevelEnabled:!0,y=e.bevelThickness!==void 0?e.bevelThickness:.2,x=e.bevelSize!==void 0?e.bevelSize:y-.1,b=e.bevelOffset!==void 0?e.bevelOffset:0,M=e.bevelSegments!==void 0?e.bevelSegments:3,v=e.extrudePath,S=e.UVGenerator!==void 0?e.UVGenerator:N5,E,T=!1,w,U,O,z;v&amp;&amp;(E=v.getSpacedPoints(d),T=!0,g=!1,w=v.computeFrenetFrames(d,!1),U=new B,O=new B,z=new B),g||(M=0,y=0,x=0,b=0);let C=u.extractPoints(h),R=C.shape,P=C.holes;if(!os.isClockWise(R)){R=R.reverse();for(let ht=0,rt=P.length;ht&lt;rt;ht++){let pt=P[ht];os.isClockWise(pt)&amp;&amp;(P[ht]=pt.reverse())}}function X(ht){let pt=10000000000000001e-36,lt=ht[0];for(let Ct=1;Ct&lt;=ht.length;Ct++){let dt=Ct%ht.length,Rt=ht[dt],de=Rt.x-lt.x,ue=Rt.y-lt.y,I=de*de+ue*ue,D=Math.max(Math.abs(Rt.x),Math.abs(Rt.y),Math.abs(lt.x),Math.abs(lt.y)),k=pt*D*D;if(I&lt;=k){ht.splice(dt,1),Ct--;continue}lt=Rt}}X(R),P.forEach(X);let Z=P.length,st=R;for(let ht=0;ht&lt;Z;ht++){let rt=P[ht];R=R.concat(rt)}function et(ht,rt,pt){return rt||console.error(&quot;THREE.ExtrudeGeometry: vec does not exist&quot;),ht.clone().addScaledVector(rt,pt)}let mt=R.length;function K(ht,rt,pt){let lt,Ct,dt,Rt=ht.x-rt.x,de=ht.y-rt.y,ue=pt.x-ht.x,I=pt.y-ht.y,D=Rt*Rt+de*de,k=Rt*I-de*ue;if(Math.abs(k)&gt;Number.EPSILON){let nt=Math.sqrt(D),gt=Math.sqrt(ue*ue+I*I),at=rt.x-de/nt,jt=rt.y+Rt/nt,Tt=pt.x-I/gt,Wt=pt.y+ue/gt,Ft=((Tt-at)*I-(Wt-jt)*ue)/(Rt*I-de*ue);lt=at+Rt*Ft-ht.x,Ct=jt+de*Ft-ht.y;let vt=lt*lt+Ct*Ct;if(vt&lt;=2)return new ct(lt,Ct);dt=Math.sqrt(vt/2)}else{let nt=!1;Rt&gt;Number.EPSILON?ue&gt;Number.EPSILON&amp;&amp;(nt=!0):Rt&lt;-Number.EPSILON?ue&lt;-Number.EPSILON&amp;&amp;(nt=!0):Math.sign(de)===Math.sign(I)&amp;&amp;(nt=!0),nt?(lt=-de,Ct=Rt,dt=Math.sqrt(D)):(lt=Rt,Ct=de,dt=Math.sqrt(D/2))}return new ct(lt/dt,Ct/dt)}let _t=[];for(let ht=0,rt=st.length,pt=rt-1,lt=ht+1;ht&lt;rt;ht++,pt++,lt++)pt===rt&amp;&amp;(pt=0),lt===rt&amp;&amp;(lt=0),_t[ht]=K(st[ht],st[pt],st[lt]);let Ut=[],xt,It=_t.concat();for(let ht=0,rt=Z;ht&lt;rt;ht++){let pt=P[ht];xt=[];for(let lt=0,Ct=pt.length,dt=Ct-1,Rt=lt+1;lt&lt;Ct;lt++,dt++,Rt++)dt===Ct&amp;&amp;(dt=0),Rt===Ct&amp;&amp;(Rt=0),xt[lt]=K(pt[lt],pt[dt],pt[Rt]);Ut.push(xt),It=It.concat(xt)}let se;if(M===0)se=os.triangulateShape(st,P);else{let ht=[],rt=[];for(let pt=0;pt&lt;M;pt++){let lt=pt/M,Ct=y*Math.cos(lt*Math.PI/2),dt=x*Math.sin(lt*Math.PI/2)+b;for(let Rt=0,de=st.length;Rt&lt;de;Rt++){let ue=et(st[Rt],_t[Rt],dt);Zt(ue.x,ue.y,-Ct),lt===0&amp;&amp;ht.push(ue)}for(let Rt=0,de=Z;Rt&lt;de;Rt++){let ue=P[Rt];xt=Ut[Rt];let I=[];for(let D=0,k=ue.length;D&lt;k;D++){let nt=et(ue[D],xt[D],dt);Zt(nt.x,nt.y,-Ct),lt===0&amp;&amp;I.push(nt)}lt===0&amp;&amp;rt.push(I)}}se=os.triangulateShape(ht,rt)}let Qt=se.length,it=x+b;for(let ht=0;ht&lt;mt;ht++){let rt=g?et(R[ht],It[ht],it):R[ht];T?(O.copy(w.normals[0]).multiplyScalar(rt.x),U.copy(w.binormals[0]).multiplyScalar(rt.y),z.copy(E[0]).add(O).add(U),Zt(z.x,z.y,z.z)):Zt(rt.x,rt.y,0)}for(let ht=1;ht&lt;=d;ht++)for(let rt=0;rt&lt;mt;rt++){let pt=g?et(R[rt],It[rt],it):R[rt];T?(O.copy(w.normals[ht]).multiplyScalar(pt.x),U.copy(w.binormals[ht]).multiplyScalar(pt.y),z.copy(E[ht]).add(O).add(U),Zt(z.x,z.y,z.z)):Zt(pt.x,pt.y,m/d*ht)}for(let ht=M-1;ht&gt;=0;ht--){let rt=ht/M,pt=y*Math.cos(rt*Math.PI/2),lt=x*Math.sin(rt*Math.PI/2)+b;for(let Ct=0,dt=st.length;Ct&lt;dt;Ct++){let Rt=et(st[Ct],_t[Ct],lt);Zt(Rt.x,Rt.y,m+pt)}for(let Ct=0,dt=P.length;Ct&lt;dt;Ct++){let Rt=P[Ct];xt=Ut[Ct];for(let de=0,ue=Rt.length;de&lt;ue;de++){let I=et(Rt[de],xt[de],lt);T?Zt(I.x,I.y+E[d-1].y,E[d-1].x+pt):Zt(I.x,I.y,m+pt)}}}wt(),bt();function wt(){let ht=a.length/3;if(g){let rt=0,pt=mt*rt;for(let lt=0;lt&lt;Qt;lt++){let Ct=se[lt];te(Ct[2]+pt,Ct[1]+pt,Ct[0]+pt)}rt=d+M*2,pt=mt*rt;for(let lt=0;lt&lt;Qt;lt++){let Ct=se[lt];te(Ct[0]+pt,Ct[1]+pt,Ct[2]+pt)}}else{for(let rt=0;rt&lt;Qt;rt++){let pt=se[rt];te(pt[2],pt[1],pt[0])}for(let rt=0;rt&lt;Qt;rt++){let pt=se[rt];te(pt[0]+mt*d,pt[1]+mt*d,pt[2]+mt*d)}}i.addGroup(ht,a.length/3-ht,0)}function bt(){let ht=a.length/3,rt=0;Jt(st,rt),rt+=st.length;for(let pt=0,lt=P.length;pt&lt;lt;pt++){let Ct=P[pt];Jt(Ct,rt),rt+=Ct.length}i.addGroup(ht,a.length/3-ht,1)}function Jt(ht,rt){let pt=ht.length;for(;--pt&gt;=0;){let lt=pt,Ct=pt-1;Ct&lt;0&amp;&amp;(Ct=ht.length-1);for(let dt=0,Rt=d+M*2;dt&lt;Rt;dt++){let de=mt*dt,ue=mt*(dt+1),I=rt+lt+de,D=rt+Ct+de,k=rt+Ct+ue,nt=rt+lt+ue;ke(I,D,k,nt)}}}function Zt(ht,rt,pt){c.push(ht),c.push(rt),c.push(pt)}function te(ht,rt,pt){re(ht),re(rt),re(pt);let lt=a.length/3,Ct=S.generateTopUV(i,a,lt-3,lt-2,lt-1);H(Ct[0]),H(Ct[1]),H(Ct[2])}function ke(ht,rt,pt,lt){re(ht),re(rt),re(lt),re(rt),re(pt),re(lt);let Ct=a.length/3,dt=S.generateSideWallUV(i,a,Ct-6,Ct-3,Ct-2,Ct-1);H(dt[0]),H(dt[1]),H(dt[3]),H(dt[1]),H(dt[2]),H(dt[3])}function re(ht){a.push(c[ht*3+0]),a.push(c[ht*3+1]),a.push(c[ht*3+2])}function H(ht){s.push(ht.x),s.push(ht.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return O5(e,i,t)}static fromJSON(t,e){let i=[];for(let s=0,o=t.shapes.length;s&lt;o;s++){let u=e[t.shapes[s]];i.push(u)}let a=t.options.extrudePath;return a!==void 0&amp;&amp;(t.options.extrudePath=new l_[a.type]().fromJSON(a)),new n(i,t.options)}},N5={generateTopUV:function(n,t,e,i,a){let s=t[e*3],o=t[e*3+1],u=t[i*3],c=t[i*3+1],h=t[a*3],d=t[a*3+1];return[new ct(s,o),new ct(u,c),new ct(h,d)]},generateSideWallUV:function(n,t,e,i,a,s){let o=t[e*3],u=t[e*3+1],c=t[e*3+2],h=t[i*3],d=t[i*3+1],m=t[i*3+2],g=t[a*3],y=t[a*3+1],x=t[a*3+2],b=t[s*3],M=t[s*3+1],v=t[s*3+2];return Math.abs(u-d)&lt;Math.abs(o-h)?[new ct(o,1-c),new ct(h,1-m),new ct(g,1-x),new ct(b,1-v)]:[new ct(u,1-c),new ct(d,1-m),new ct(y,1-x),new ct(M,1-v)]}};function O5(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,a=n.length;i&lt;a;i++){let s=n[i];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&amp;&amp;(e.options.extrudePath=t.extrudePath.toJSON()),e}var hm=class n extends Jr{constructor(t=1,e=0){let i=(1+Math.sqrt(5))/2,a=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,t,e),this.type=&quot;IcosahedronGeometry&quot;,this.parameters={radius:t,detail:e}}static fromJSON(t){return new n(t.radius,t.detail)}},dm=class n extends ve{constructor(t=[new ct(0,-.5),new ct(.5,0),new ct(0,.5)],e=12,i=0,a=Math.PI*2){super(),this.type=&quot;LatheGeometry&quot;,this.parameters={points:t,segments:e,phiStart:i,phiLength:a},e=Math.floor(e),a=le(a,0,Math.PI*2);let s=[],o=[],u=[],c=[],h=[],d=1/e,m=new B,g=new ct,y=new B,x=new B,b=new B,M=0,v=0;for(let S=0;S&lt;=t.length-1;S++)switch(S){case 0:M=t[S+1].x-t[S].x,v=t[S+1].y-t[S].y,y.x=v*1,y.y=-M,y.z=v*0,b.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case t.length-1:c.push(b.x,b.y,b.z);break;default:M=t[S+1].x-t[S].x,v=t[S+1].y-t[S].y,y.x=v*1,y.y=-M,y.z=v*0,x.copy(y),y.x+=b.x,y.y+=b.y,y.z+=b.z,y.normalize(),c.push(y.x,y.y,y.z),b.copy(x)}for(let S=0;S&lt;=e;S++){let E=i+S*d*a,T=Math.sin(E),w=Math.cos(E);for(let U=0;U&lt;=t.length-1;U++){m.x=t[U].x*T,m.y=t[U].y,m.z=t[U].x*w,o.push(m.x,m.y,m.z),g.x=S/e,g.y=U/(t.length-1),u.push(g.x,g.y);let O=c[3*U+0]*T,z=c[3*U+1],C=c[3*U+0]*w;h.push(O,z,C)}}for(let S=0;S&lt;e;S++)for(let E=0;E&lt;t.length-1;E++){let T=E+S*t.length,w=T,U=T+t.length,O=T+t.length+1,z=T+1;s.push(w,U,z),s.push(O,z,U)}this.setIndex(s),this.setAttribute(&quot;position&quot;,new Xt(o,3)),this.setAttribute(&quot;uv&quot;,new Xt(u,2)),this.setAttribute(&quot;normal&quot;,new Xt(h,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.points,t.segments,t.phiStart,t.phiLength)}},ah=class n extends Jr{constructor(t=1,e=0){let i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,a,t,e),this.type=&quot;OctahedronGeometry&quot;,this.parameters={radius:t,detail:e}}static fromJSON(t){return new n(t.radius,t.detail)}},Du=class n extends ve{constructor(t=1,e=1,i=1,a=1){super(),this.type=&quot;PlaneGeometry&quot;,this.parameters={width:t,height:e,widthSegments:i,heightSegments:a};let s=t/2,o=e/2,u=Math.floor(i),c=Math.floor(a),h=u+1,d=c+1,m=t/u,g=e/c,y=[],x=[],b=[],M=[];for(let v=0;v&lt;d;v++){let S=v*g-o;for(let E=0;E&lt;h;E++){let T=E*m-s;x.push(T,-S,0),b.push(0,0,1),M.push(E/u),M.push(1-v/c)}}for(let v=0;v&lt;c;v++)for(let S=0;S&lt;u;S++){let E=S+h*v,T=S+h*(v+1),w=S+1+h*(v+1),U=S+1+h*v;y.push(E,T,U),y.push(T,w,U)}this.setIndex(y),this.setAttribute(&quot;position&quot;,new Xt(x,3)),this.setAttribute(&quot;normal&quot;,new Xt(b,3)),this.setAttribute(&quot;uv&quot;,new Xt(M,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}},pm=class n extends ve{constructor(t=.5,e=1,i=32,a=1,s=0,o=Math.PI*2){super(),this.type=&quot;RingGeometry&quot;,this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:a,thetaStart:s,thetaLength:o},i=Math.max(3,i),a=Math.max(1,a);let u=[],c=[],h=[],d=[],m=t,g=(e-t)/a,y=new B,x=new ct;for(let b=0;b&lt;=a;b++){for(let M=0;M&lt;=i;M++){let v=s+M/i*o;y.x=m*Math.cos(v),y.y=m*Math.sin(v),c.push(y.x,y.y,y.z),h.push(0,0,1),x.x=(y.x/e+1)/2,x.y=(y.y/e+1)/2,d.push(x.x,x.y)}m+=g}for(let b=0;b&lt;a;b++){let M=b*(i+1);for(let v=0;v&lt;i;v++){let S=v+M,E=S,T=S+i+1,w=S+i+2,U=S+1;u.push(E,T,U),u.push(T,w,U)}}this.setIndex(u),this.setAttribute(&quot;position&quot;,new Xt(c,3)),this.setAttribute(&quot;normal&quot;,new Xt(h,3)),this.setAttribute(&quot;uv&quot;,new Xt(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}},mm=class n extends ve{constructor(t=new $s([new ct(0,.5),new ct(-.5,-.5),new ct(.5,-.5)]),e=12){super(),this.type=&quot;ShapeGeometry&quot;,this.parameters={shapes:t,curveSegments:e};let i=[],a=[],s=[],o=[],u=0,c=0;if(Array.isArray(t)===!1)h(t);else for(let d=0;d&lt;t.length;d++)h(t[d]),this.addGroup(u,c,d),u+=c,c=0;this.setIndex(i),this.setAttribute(&quot;position&quot;,new Xt(a,3)),this.setAttribute(&quot;normal&quot;,new Xt(s,3)),this.setAttribute(&quot;uv&quot;,new Xt(o,2));function h(d){let m=a.length/3,g=d.extractPoints(e),y=g.shape,x=g.holes;os.isClockWise(y)===!1&amp;&amp;(y=y.reverse());for(let M=0,v=x.length;M&lt;v;M++){let S=x[M];os.isClockWise(S)===!0&amp;&amp;(x[M]=S.reverse())}let b=os.triangulateShape(y,x);for(let M=0,v=x.length;M&lt;v;M++){let S=x[M];y=y.concat(S)}for(let M=0,v=y.length;M&lt;v;M++){let S=y[M];a.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let M=0,v=b.length;M&lt;v;M++){let S=b[M],E=S[0]+m,T=S[1]+m,w=S[2]+m;i.push(E,T,w),c+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON(),e=this.parameters.shapes;return L5(e,t)}static fromJSON(t,e){let i=[];for(let a=0,s=t.shapes.length;a&lt;s;a++){let o=e[t.shapes[a]];i.push(o)}return new n(i,t.curveSegments)}};function L5(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e&lt;i;e++){let a=n[e];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t}var sh=class n extends ve{constructor(t=1,e=32,i=16,a=0,s=Math.PI*2,o=0,u=Math.PI){super(),this.type=&quot;SphereGeometry&quot;,this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:a,phiLength:s,thetaStart:o,thetaLength:u},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));let c=Math.min(o+u,Math.PI),h=0,d=[],m=new B,g=new B,y=[],x=[],b=[],M=[];for(let v=0;v&lt;=i;v++){let S=[],E=v/i,T=0;v===0&amp;&amp;o===0?T=.5/e:v===i&amp;&amp;c===Math.PI&amp;&amp;(T=-.5/e);for(let w=0;w&lt;=e;w++){let U=w/e;m.x=-t*Math.cos(a+U*s)*Math.sin(o+E*u),m.y=t*Math.cos(o+E*u),m.z=t*Math.sin(a+U*s)*Math.sin(o+E*u),x.push(m.x,m.y,m.z),g.copy(m).normalize(),b.push(g.x,g.y,g.z),M.push(U+T,1-E),S.push(h++)}d.push(S)}for(let v=0;v&lt;i;v++)for(let S=0;S&lt;e;S++){let E=d[v][S+1],T=d[v][S],w=d[v+1][S],U=d[v+1][S+1];(v!==0||o&gt;0)&amp;&amp;y.push(E,T,U),(v!==i-1||c&lt;Math.PI)&amp;&amp;y.push(T,w,U)}this.setIndex(y),this.setAttribute(&quot;position&quot;,new Xt(x,3)),this.setAttribute(&quot;normal&quot;,new Xt(b,3)),this.setAttribute(&quot;uv&quot;,new Xt(M,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}},gm=class n extends Jr{constructor(t=1,e=0){let i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,a,t,e),this.type=&quot;TetrahedronGeometry&quot;,this.parameters={radius:t,detail:e}}static fromJSON(t){return new n(t.radius,t.detail)}},vm=class n extends ve{constructor(t=1,e=.4,i=12,a=48,s=Math.PI*2){super(),this.type=&quot;TorusGeometry&quot;,this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:a,arc:s},i=Math.floor(i),a=Math.floor(a);let o=[],u=[],c=[],h=[],d=new B,m=new B,g=new B;for(let y=0;y&lt;=i;y++)for(let x=0;x&lt;=a;x++){let b=x/a*s,M=y/i*Math.PI*2;m.x=(t+e*Math.cos(M))*Math.cos(b),m.y=(t+e*Math.cos(M))*Math.sin(b),m.z=e*Math.sin(M),u.push(m.x,m.y,m.z),d.x=t*Math.cos(b),d.y=t*Math.sin(b),g.subVectors(m,d).normalize(),c.push(g.x,g.y,g.z),h.push(x/a),h.push(y/i)}for(let y=1;y&lt;=i;y++)for(let x=1;x&lt;=a;x++){let b=(a+1)*y+x-1,M=(a+1)*(y-1)+x-1,v=(a+1)*(y-1)+x,S=(a+1)*y+x;o.push(b,M,S),o.push(M,v,S)}this.setIndex(o),this.setAttribute(&quot;position&quot;,new Xt(u,3)),this.setAttribute(&quot;normal&quot;,new Xt(c,3)),this.setAttribute(&quot;uv&quot;,new Xt(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}},ym=class n extends ve{constructor(t=1,e=.4,i=64,a=8,s=2,o=3){super(),this.type=&quot;TorusKnotGeometry&quot;,this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:a,p:s,q:o},i=Math.floor(i),a=Math.floor(a);let u=[],c=[],h=[],d=[],m=new B,g=new B,y=new B,x=new B,b=new B,M=new B,v=new B;for(let E=0;E&lt;=i;++E){let T=E/i*s*Math.PI*2;S(T,s,o,t,y),S(T+.01,s,o,t,x),M.subVectors(x,y),v.addVectors(x,y),b.crossVectors(M,v),v.crossVectors(b,M),b.normalize(),v.normalize();for(let w=0;w&lt;=a;++w){let U=w/a*Math.PI*2,O=-e*Math.cos(U),z=e*Math.sin(U);m.x=y.x+(O*v.x+z*b.x),m.y=y.y+(O*v.y+z*b.y),m.z=y.z+(O*v.z+z*b.z),c.push(m.x,m.y,m.z),g.subVectors(m,y).normalize(),h.push(g.x,g.y,g.z),d.push(E/i),d.push(w/a)}}for(let E=1;E&lt;=i;E++)for(let T=1;T&lt;=a;T++){let w=(a+1)*(E-1)+(T-1),U=(a+1)*E+(T-1),O=(a+1)*E+T,z=(a+1)*(E-1)+T;u.push(w,U,z),u.push(U,O,z)}this.setIndex(u),this.setAttribute(&quot;position&quot;,new Xt(c,3)),this.setAttribute(&quot;normal&quot;,new Xt(h,3)),this.setAttribute(&quot;uv&quot;,new Xt(d,2));function S(E,T,w,U,O){let z=Math.cos(E),C=Math.sin(E),R=w/T*E,P=Math.cos(R);O.x=U*(2+P)*.5*z,O.y=U*(2+P)*C*.5,O.z=U*Math.sin(R)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new n(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}},_m=class n extends ve{constructor(t=new eh(new B(-1,-1,0),new B(-1,1,0),new B(1,1,0)),e=64,i=1,a=8,s=!1){super(),this.type=&quot;TubeGeometry&quot;,this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:a,closed:s};let o=t.computeFrenetFrames(e,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;let u=new B,c=new B,h=new ct,d=new B,m=[],g=[],y=[],x=[];b(),this.setIndex(x),this.setAttribute(&quot;position&quot;,new Xt(m,3)),this.setAttribute(&quot;normal&quot;,new Xt(g,3)),this.setAttribute(&quot;uv&quot;,new Xt(y,2));function b(){for(let E=0;E&lt;e;E++)M(E);M(s===!1?e:0),S(),v()}function M(E){d=t.getPointAt(E/e,d);let T=o.normals[E],w=o.binormals[E];for(let U=0;U&lt;=a;U++){let O=U/a*Math.PI*2,z=Math.sin(O),C=-Math.cos(O);c.x=C*T.x+z*w.x,c.y=C*T.y+z*w.y,c.z=C*T.z+z*w.z,c.normalize(),g.push(c.x,c.y,c.z),u.x=d.x+i*c.x,u.y=d.y+i*c.y,u.z=d.z+i*c.z,m.push(u.x,u.y,u.z)}}function v(){for(let E=1;E&lt;=e;E++)for(let T=1;T&lt;=a;T++){let w=(a+1)*(E-1)+(T-1),U=(a+1)*E+(T-1),O=(a+1)*E+T,z=(a+1)*(E-1)+T;x.push(w,U,z),x.push(U,O,z)}}function S(){for(let E=0;E&lt;=e;E++)for(let T=0;T&lt;=a;T++)h.x=E/e,h.y=T/a,y.push(h.x,h.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new n(new l_[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}},xm=class extends ve{constructor(t=null){if(super(),this.type=&quot;WireframeGeometry&quot;,this.parameters={geometry:t},t!==null){let e=[],i=new Set,a=new B,s=new B;if(t.index!==null){let o=t.attributes.position,u=t.index,c=t.groups;c.length===0&amp;&amp;(c=[{start:0,count:u.count,materialIndex:0}]);for(let h=0,d=c.length;h&lt;d;++h){let m=c[h],g=m.start,y=m.count;for(let x=g,b=g+y;x&lt;b;x+=3)for(let M=0;M&lt;3;M++){let v=u.getX(x+M),S=u.getX(x+(M+1)%3);a.fromBufferAttribute(o,v),s.fromBufferAttribute(o,S),cN(a,s,i)===!0&amp;&amp;(e.push(a.x,a.y,a.z),e.push(s.x,s.y,s.z))}}}else{let o=t.attributes.position;for(let u=0,c=o.count/3;u&lt;c;u++)for(let h=0;h&lt;3;h++){let d=3*u+h,m=3*u+(h+1)%3;a.fromBufferAttribute(o,d),s.fromBufferAttribute(o,m),cN(a,s,i)===!0&amp;&amp;(e.push(a.x,a.y,a.z),e.push(s.x,s.y,s.z))}}this.setAttribute(&quot;position&quot;,new Xt(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}};function cN(n,t,e){let i=`${n.x},${n.y},${n.z}-${t.x},${t.y},${t.z}`,a=`${t.x},${t.y},${t.z}-${n.x},${n.y},${n.z}`;return e.has(i)===!0||e.has(a)===!0?!1:(e.add(i),e.add(a),!0)}var fN=Object.freeze({__proto__:null,BoxGeometry:rl,CapsuleGeometry:$p,CircleGeometry:tm,ConeGeometry:Kf,CylinderGeometry:Qf,DodecahedronGeometry:em,EdgesGeometry:nm,ExtrudeGeometry:fm,IcosahedronGeometry:hm,LatheGeometry:dm,OctahedronGeometry:ah,PlaneGeometry:Du,PolyhedronGeometry:Jr,RingGeometry:pm,ShapeGeometry:mm,SphereGeometry:sh,TetrahedronGeometry:gm,TorusGeometry:vm,TorusKnotGeometry:ym,TubeGeometry:_m,WireframeGeometry:xm}),Sm=class extends jn{constructor(t){super(),this.isShadowMaterial=!0,this.type=&quot;ShadowMaterial&quot;,this.color=new Bt(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}},Mm=class extends ra{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type=&quot;RawShaderMaterial&quot;}},rh=class extends jn{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type=&quot;MeshStandardMaterial&quot;,this.defines={STANDARD:&quot;&quot;},this.color=new Bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eo,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sa,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:&quot;&quot;},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Em=class extends rh{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:&quot;&quot;,PHYSICAL:&quot;&quot;},this.type=&quot;MeshPhysicalMaterial&quot;,this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ct(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,&quot;reflectivity&quot;,{get:function(){return le(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy&gt;0!=t&gt;0&amp;&amp;this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat&gt;0!=t&gt;0&amp;&amp;this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence&gt;0!=t&gt;0&amp;&amp;this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion&gt;0!=t&gt;0&amp;&amp;this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen&gt;0!=t&gt;0&amp;&amp;this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission&gt;0!=t&gt;0&amp;&amp;this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:&quot;&quot;,PHYSICAL:&quot;&quot;},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}},bm=class extends jn{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type=&quot;MeshPhongMaterial&quot;,this.color=new Bt(16777215),this.specular=new Bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eo,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sa,this.combine=gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},Tm=class extends jn{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:&quot;&quot;},this.type=&quot;MeshToonMaterial&quot;,this.color=new Bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eo,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},Am=class extends jn{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type=&quot;MeshNormalMaterial&quot;,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eo,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}},Rm=class extends jn{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type=&quot;MeshLambertMaterial&quot;,this.color=new Bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eo,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new sa,this.combine=gh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap=&quot;round&quot;,this.wireframeLinejoin=&quot;round&quot;,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}},oh=class extends jn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type=&quot;MeshDepthMaterial&quot;,this.depthPacking=xT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},lh=class extends jn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type=&quot;MeshDistanceMaterial&quot;,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},Cm=class extends jn{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:&quot;&quot;},this.type=&quot;MeshMatcapMaterial&quot;,this.color=new Bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=eo,this.normalScale=new ct(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:&quot;&quot;},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}},wm=class extends ui{constructor(t){super(),this.isLineDashedMaterial=!0,this.type=&quot;LineDashedMaterial&quot;,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}};function pu(n,t){return!n||n.constructor===t?n:typeof t.BYTES_PER_ELEMENT==&quot;number&quot;?new t(n):Array.prototype.slice.call(n)}function EO(n){return ArrayBuffer.isView(n)&amp;&amp;!(n instanceof DataView)}function bO(n){function t(a,s){return n[a]-n[s]}let e=n.length,i=new Array(e);for(let a=0;a!==e;++a)i[a]=a;return i.sort(t),i}function Lb(n,t,e){let i=n.length,a=new n.constructor(i);for(let s=0,o=0;o!==i;++s){let u=e[s]*t;for(let c=0;c!==t;++c)a[o++]=n[u+c]}return a}function BT(n,t,e,i){let a=1,s=n[0];for(;s!==void 0&amp;&amp;s[i]===void 0;)s=n[a++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&amp;&amp;(t.push(s.time),e.push(...o)),s=n[a++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&amp;&amp;(t.push(s.time),o.toArray(e,e.length)),s=n[a++];while(s!==void 0);else do o=s[i],o!==void 0&amp;&amp;(t.push(s.time),e.push(o)),s=n[a++];while(s!==void 0)}function z5(n,t,e,i,a=30){let s=n.clone();s.name=t;let o=[];for(let c=0;c&lt;s.tracks.length;++c){let h=s.tracks[c],d=h.getValueSize(),m=[],g=[];for(let y=0;y&lt;h.times.length;++y){let x=h.times[y]*a;if(!(x&lt;e||x&gt;=i)){m.push(h.times[y]);for(let b=0;b&lt;d;++b)g.push(h.values[y*d+b])}}m.length!==0&amp;&amp;(h.times=pu(m,h.times.constructor),h.values=pu(g,h.values.constructor),o.push(h))}s.tracks=o;let u=1/0;for(let c=0;c&lt;s.tracks.length;++c)u&gt;s.tracks[c].times[0]&amp;&amp;(u=s.tracks[c].times[0]);for(let c=0;c&lt;s.tracks.length;++c)s.tracks[c].shift(-1*u);return s.resetDuration(),s}function B5(n,t=0,e=n,i=30){i&lt;=0&amp;&amp;(i=30);let a=e.tracks.length,s=t/i;for(let o=0;o&lt;a;++o){let u=e.tracks[o],c=u.ValueTypeName;if(c===&quot;bool&quot;||c===&quot;string&quot;)continue;let h=n.tracks.find(function(v){return v.name===u.name&amp;&amp;v.ValueTypeName===c});if(h===void 0)continue;let d=0,m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&amp;&amp;(d=m/3);let g=0,y=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&amp;&amp;(g=y/3);let x=u.times.length-1,b;if(s&lt;=u.times[0]){let v=d,S=m-d;b=u.values.slice(v,S)}else if(s&gt;=u.times[x]){let v=x*m+d,S=v+m-d;b=u.values.slice(v,S)}else{let v=u.createInterpolant(),S=d,E=m-d;v.evaluate(s),b=v.resultBuffer.slice(S,E)}c===&quot;quaternion&quot;&amp;&amp;new vi().fromArray(b).normalize().conjugate().toArray(b);let M=h.times.length;for(let v=0;v&lt;M;++v){let S=v*y+g;if(c===&quot;quaternion&quot;)vi.multiplyQuaternionsFlat(h.values,S,b,0,h.values,S);else{let E=y-g*2;for(let T=0;T&lt;E;++T)h.values[S+T]-=b[T]}}}return n.blendMode=cx,n}var u_=class{static convertArray(t,e){return pu(t,e)}static isTypedArray(t){return EO(t)}static getKeyframeOrder(t){return bO(t)}static sortedArray(t,e,i){return Lb(t,e,i)}static flattenJSON(t,e,i,a){BT(t,e,i,a)}static subclip(t,e,i,a,s=30){return z5(t,e,i,a,s)}static makeClipAdditive(t,e=0,i=t,a=30){return B5(t,e,i,a)}},ul=class{constructor(t,e,i,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,a=e[i],s=e[i-1];t:{e:{let o;n:{i:if(!(t&lt;a)){for(let u=i+2;;){if(a===void 0){if(t&lt;s)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===u)break;if(s=a,a=e[++i],t&lt;a)break e}o=e.length;break n}if(!(t&gt;=s)){let u=e[1];t&lt;u&amp;&amp;(i=2,s=u);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(a=s,s=e[--i-1],t&gt;=s)break e}o=i,i=0;break n}break t}for(;i&lt;o;){let u=i+o&gt;&gt;&gt;1;t&lt;e[u]?o=u:i=u+1}if(a=e[i],s=e[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,a)}return this.interpolate_(i,s,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=t*a;for(let o=0;o!==a;++o)e[o]=i[s+o];return e}interpolate_(){throw new Error(&quot;call to abstract method&quot;)}intervalChanged_(){}},Dm=class extends ul{constructor(t,e,i,a){super(t,e,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:nl,endingEnd:nl}}intervalChanged_(t,e,i){let a=this.parameterPositions,s=t-2,o=t+1,u=a[s],c=a[o];if(u===void 0)switch(this.getSettings_().endingStart){case il:s=t,u=2*e-i;break;case Hf:s=a.length-2,u=e+a[s]-a[s+1];break;default:s=t,u=i}if(c===void 0)switch(this.getSettings_().endingEnd){case il:o=t,c=2*i-e;break;case Hf:o=1,c=i+a[1]-a[0];break;default:o=t-1,c=e}let h=(i-e)*.5,d=this.valueSize;this._weightPrev=h/(e-u),this._weightNext=h/(c-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(t,e,i,a){let s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,c=t*u,h=c-u,d=this._offsetPrev,m=this._offsetNext,g=this._weightPrev,y=this._weightNext,x=(i-e)/(a-e),b=x*x,M=b*x,v=-g*M+2*g*b-g*x,S=(1+g)*M+(-1.5-2*g)*b+(-.5+g)*x+1,E=(-1-y)*M+(1.5+y)*b+.5*x,T=y*M-y*b;for(let w=0;w!==u;++w)s[w]=v*o[d+w]+S*o[h+w]+E*o[c+w]+T*o[m+w];return s}},uh=class extends ul{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t,e,i,a){let s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,c=t*u,h=c-u,d=(i-e)/(a-e),m=1-d;for(let g=0;g!==u;++g)s[g]=o[h+g]*m+o[c+g]*d;return s}},Um=class extends ul{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t){return this.copySampleValue_(t-1)}},Yi=class{constructor(t,e,i,a){if(t===void 0)throw new Error(&quot;THREE.KeyframeTrack: track name is undefined&quot;);if(e===void 0||e.length===0)throw new Error(&quot;THREE.KeyframeTrack: no keyframes in track named &quot;+t);this.name=t,this.times=pu(e,this.TimeBufferType),this.values=pu(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:pu(t.times,Array),values:pu(t.values,Array)};let a=t.getInterpolation();a!==t.DefaultInterpolation&amp;&amp;(i.interpolation=a)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new Um(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new uh(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Dm(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case If:e=this.InterpolantFactoryMethodDiscrete;break;case Pp:e=this.InterpolantFactoryMethodLinear;break;case Up:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let i=&quot;unsupported interpolation for &quot;+this.ValueTypeName+&quot; keyframe track named &quot;+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn(&quot;THREE.KeyframeTrack:&quot;,i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return If;case this.InterpolantFactoryMethodLinear:return Pp;case this.InterpolantFactoryMethodSmooth:return Up}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let i=0,a=e.length;i!==a;++i)e[i]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let i=0,a=e.length;i!==a;++i)e[i]*=t}return this}trim(t,e){let i=this.times,a=i.length,s=0,o=a-1;for(;s!==a&amp;&amp;i[s]&lt;t;)++s;for(;o!==-1&amp;&amp;i[o]&gt;e;)--o;if(++o,s!==0||o!==a){s&gt;=o&amp;&amp;(o=Math.max(o,1),s=o-1);let u=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*u,o*u)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&amp;&amp;(console.error(&quot;THREE.KeyframeTrack: Invalid value size in track.&quot;,this),t=!1);let i=this.times,a=this.values,s=i.length;s===0&amp;&amp;(console.error(&quot;THREE.KeyframeTrack: Track is empty.&quot;,this),t=!1);let o=null;for(let u=0;u!==s;u++){let c=i[u];if(typeof c==&quot;number&quot;&amp;&amp;isNaN(c)){console.error(&quot;THREE.KeyframeTrack: Time is not a valid number.&quot;,this,u,c),t=!1;break}if(o!==null&amp;&amp;o&gt;c){console.error(&quot;THREE.KeyframeTrack: Out of order keys.&quot;,this,u,c,o),t=!1;break}o=c}if(a!==void 0&amp;&amp;EO(a))for(let u=0,c=a.length;u!==c;++u){let h=a[u];if(isNaN(h)){console.error(&quot;THREE.KeyframeTrack: Value is not a valid number.&quot;,this,u,h),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===Up,s=t.length-1,o=1;for(let u=1;u&lt;s;++u){let c=!1,h=t[u],d=t[u+1];if(h!==d&amp;&amp;(u!==1||h!==t[0]))if(a)c=!0;else{let m=u*i,g=m-i,y=m+i;for(let x=0;x!==i;++x){let b=e[m+x];if(b!==e[g+x]||b!==e[y+x]){c=!0;break}}}if(c){if(u!==o){t[o]=t[u];let m=u*i,g=o*i;for(let y=0;y!==i;++y)e[g+y]=e[m+y]}++o}}if(s&gt;0){t[o]=t[s];for(let u=s*i,c=o*i,h=0;h!==i;++h)e[c+h]=e[u+h];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*i)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),i=this.constructor,a=new i(this.name,t,e);return a.createInterpolant=this.createInterpolant,a}};Yi.prototype.ValueTypeName=&quot;&quot;;Yi.prototype.TimeBufferType=Float32Array;Yi.prototype.ValueBufferType=Float32Array;Yi.prototype.DefaultInterpolation=Pp;var ir=class extends Yi{constructor(t,e,i){super(t,e,i)}};ir.prototype.ValueTypeName=&quot;bool&quot;;ir.prototype.ValueBufferType=Array;ir.prototype.DefaultInterpolation=If;ir.prototype.InterpolantFactoryMethodLinear=void 0;ir.prototype.InterpolantFactoryMethodSmooth=void 0;var ch=class extends Yi{constructor(t,e,i,a){super(t,e,i,a)}};ch.prototype.ValueTypeName=&quot;color&quot;;var cl=class extends Yi{constructor(t,e,i,a){super(t,e,i,a)}};cl.prototype.ValueTypeName=&quot;number&quot;;var Nm=class extends ul{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t,e,i,a){let s=this.resultBuffer,o=this.sampleValues,u=this.valueSize,c=(i-e)/(a-e),h=t*u;for(let d=h+u;h!==d;h+=4)vi.slerpFlat(s,0,o,h-u,o,h,c);return s}},fl=class extends Yi{constructor(t,e,i,a){super(t,e,i,a)}InterpolantFactoryMethodLinear(t){return new Nm(this.times,this.values,this.getValueSize(),t)}};fl.prototype.ValueTypeName=&quot;quaternion&quot;;fl.prototype.InterpolantFactoryMethodSmooth=void 0;var ar=class extends Yi{constructor(t,e,i){super(t,e,i)}};ar.prototype.ValueTypeName=&quot;string&quot;;ar.prototype.ValueBufferType=Array;ar.prototype.DefaultInterpolation=If;ar.prototype.InterpolantFactoryMethodLinear=void 0;ar.prototype.InterpolantFactoryMethodSmooth=void 0;var hl=class extends Yi{constructor(t,e,i,a){super(t,e,i,a)}};hl.prototype.ValueTypeName=&quot;vector&quot;;var dl=class{constructor(t=&quot;&quot;,e=-1,i=[],a=Bg){this.name=t,this.tracks=i,this.duration=e,this.blendMode=a,this.uuid=Na(),this.duration&lt;0&amp;&amp;this.resetDuration()}static parse(t){let e=[],i=t.tracks,a=1/(t.fps||1);for(let o=0,u=i.length;o!==u;++o)e.push(I5(i[o]).scale(a));let s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){let e=[],i=t.tracks,a={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=i.length;s!==o;++s)e.push(Yi.toJSON(i[s]));return a}static CreateFromMorphTargetSequence(t,e,i,a){let s=e.length,o=[];for(let u=0;u&lt;s;u++){let c=[],h=[];c.push((u+s-1)%s,u,(u+1)%s),h.push(0,1,0);let d=bO(c);c=Lb(c,1,d),h=Lb(h,1,d),!a&amp;&amp;c[0]===0&amp;&amp;(c.push(s),h.push(h[0])),o.push(new cl(&quot;.morphTargetInfluences[&quot;+e[u].name+&quot;]&quot;,c,h).scale(1/i))}return new this(t,-1,o)}static findByName(t,e){let i=t;if(!Array.isArray(t)){let a=t;i=a.geometry&amp;&amp;a.geometry.animations||a.animations}for(let a=0;a&lt;i.length;a++)if(i[a].name===e)return i[a];return null}static CreateClipsFromMorphTargetSequences(t,e,i){let a={},s=/^([\w-]*?)([\d]+)$/;for(let u=0,c=t.length;u&lt;c;u++){let h=t[u],d=h.name.match(s);if(d&amp;&amp;d.length&gt;1){let m=d[1],g=a[m];g||(a[m]=g=[]),g.push(h)}}let o=[];for(let u in a)o.push(this.CreateFromMorphTargetSequence(u,a[u],e,i));return o}static parseAnimation(t,e){if(console.warn(&quot;THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185&quot;),!t)return console.error(&quot;THREE.AnimationClip: No animation in JSONLoader data.&quot;),null;let i=function(m,g,y,x,b){if(y.length!==0){let M=[],v=[];BT(y,M,v,x),M.length!==0&amp;&amp;b.push(new m(g,M,v))}},a=[],s=t.name||&quot;default&quot;,o=t.fps||30,u=t.blendMode,c=t.length||-1,h=t.hierarchy||[];for(let m=0;m&lt;h.length;m++){let g=h[m].keys;if(!(!g||g.length===0))if(g[0].morphTargets){let y={},x;for(x=0;x&lt;g.length;x++)if(g[x].morphTargets)for(let b=0;b&lt;g[x].morphTargets.length;b++)y[g[x].morphTargets[b]]=-1;for(let b in y){let M=[],v=[];for(let S=0;S!==g[x].morphTargets.length;++S){let E=g[x];M.push(E.time),v.push(E.morphTarget===b?1:0)}a.push(new cl(&quot;.morphTargetInfluence[&quot;+b+&quot;]&quot;,M,v))}c=y.length*o}else{let y=&quot;.bones[&quot;+e[m].name+&quot;]&quot;;i(hl,y+&quot;.position&quot;,g,&quot;pos&quot;,a),i(fl,y+&quot;.quaternion&quot;,g,&quot;rot&quot;,a),i(hl,y+&quot;.scale&quot;,g,&quot;scl&quot;,a)}}return a.length===0?null:new this(s,c,a,u)}resetDuration(){let t=this.tracks,e=0;for(let i=0,a=t.length;i!==a;++i){let s=this.tracks[i];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t&lt;this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e&lt;this.tracks.length;e++)t=t&amp;&amp;this.tracks[e].validate();return t}optimize(){for(let t=0;t&lt;this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let e=0;e&lt;this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function P5(n){switch(n.toLowerCase()){case&quot;scalar&quot;:case&quot;double&quot;:case&quot;float&quot;:case&quot;number&quot;:case&quot;integer&quot;:return cl;case&quot;vector&quot;:case&quot;vector2&quot;:case&quot;vector3&quot;:case&quot;vector4&quot;:return hl;case&quot;color&quot;:return ch;case&quot;quaternion&quot;:return fl;case&quot;bool&quot;:case&quot;boolean&quot;:return ir;case&quot;string&quot;:return ar}throw new Error(&quot;THREE.KeyframeTrack: Unsupported typeName: &quot;+n)}function I5(n){if(n.type===void 0)throw new Error(&quot;THREE.KeyframeTrack: track type undefined, can not parse&quot;);let t=P5(n.type);if(n.times===void 0){let e=[],i=[];BT(n.keys,e,i,&quot;value&quot;),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}var As={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&amp;&amp;(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}},fh=class{constructor(t,e,i){let a=this,s=!1,o=0,u=0,c,h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.abortController=new AbortController,this.itemStart=function(d){u++,s===!1&amp;&amp;a.onStart!==void 0&amp;&amp;a.onStart(d,o,u),s=!0},this.itemEnd=function(d){o++,a.onProgress!==void 0&amp;&amp;a.onProgress(d,o,u),o===u&amp;&amp;(s=!1,a.onLoad!==void 0&amp;&amp;a.onLoad())},this.itemError=function(d){a.onError!==void 0&amp;&amp;a.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,m){return h.push(d,m),this},this.removeHandler=function(d){let m=h.indexOf(d);return m!==-1&amp;&amp;h.splice(m,2),this},this.getHandler=function(d){for(let m=0,g=h.length;m&lt;g;m+=2){let y=h[m],x=h[m+1];if(y.global&amp;&amp;(y.lastIndex=0),y.test(d))return x}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}},PT=new fh,yi=class{constructor(t){this.manager=t!==void 0?t:PT,this.crossOrigin=&quot;anonymous&quot;,this.withCredentials=!1,this.path=&quot;&quot;,this.resourcePath=&quot;&quot;,this.requestHeader={}}load(){}loadAsync(t,e){let i=this;return new Promise(function(a,s){i.load(t,a,e,s)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}};yi.DEFAULT_MATERIAL_NAME=&quot;__DEFAULT&quot;;var qr={},zb=class extends Error{constructor(t,e){super(t),this.response=e}},ls=class extends yi{constructor(t){super(t),this.mimeType=&quot;&quot;,this.responseType=&quot;&quot;,this._abortController=new AbortController}load(t,e,i,a){t===void 0&amp;&amp;(t=&quot;&quot;),this.path!==void 0&amp;&amp;(t=this.path+t),t=this.manager.resolveURL(t);let s=As.get(`file:${t}`);if(s!==void 0)return this.manager.itemStart(t),setTimeout(()=&gt;{e&amp;&amp;e(s),this.manager.itemEnd(t)},0),s;if(qr[t]!==void 0){qr[t].push({onLoad:e,onProgress:i,onError:a});return}qr[t]=[],qr[t].push({onLoad:e,onProgress:i,onError:a});let o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?&quot;include&quot;:&quot;same-origin&quot;,signal:typeof AbortSignal.any==&quot;function&quot;?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),u=this.mimeType,c=this.responseType;fetch(o).then(h=&gt;{if(h.status===200||h.status===0){if(h.status===0&amp;&amp;console.warn(&quot;THREE.FileLoader: HTTP Status 0 received.&quot;),typeof ReadableStream&gt;&quot;u&quot;||h.body===void 0||h.body.getReader===void 0)return h;let d=qr[t],m=h.body.getReader(),g=h.headers.get(&quot;X-File-Size&quot;)||h.headers.get(&quot;Content-Length&quot;),y=g?parseInt(g):0,x=y!==0,b=0,M=new ReadableStream({start(v){S();function S(){m.read().then(({done:E,value:T})=&gt;{if(E)v.close();else{b+=T.byteLength;let w=new ProgressEvent(&quot;progress&quot;,{lengthComputable:x,loaded:b,total:y});for(let U=0,O=d.length;U&lt;O;U++){let z=d[U];z.onProgress&amp;&amp;z.onProgress(w)}v.enqueue(T),S()}},E=&gt;{v.error(E)})}}});return new Response(M)}else throw new zb(`fetch for &quot;${h.url}&quot; responded with ${h.status}: ${h.statusText}`,h)}).then(h=&gt;{switch(c){case&quot;arraybuffer&quot;:return h.arrayBuffer();case&quot;blob&quot;:return h.blob();case&quot;document&quot;:return h.text().then(d=&gt;new DOMParser().parseFromString(d,u));case&quot;json&quot;:return h.json();default:if(u===&quot;&quot;)return h.text();{let m=/charset=&quot;?([^;&quot;\s]*)&quot;?/i.exec(u),g=m&amp;&amp;m[1]?m[1].toLowerCase():void 0,y=new TextDecoder(g);return h.arrayBuffer().then(x=&gt;y.decode(x))}}}).then(h=&gt;{As.add(`file:${t}`,h);let d=qr[t];delete qr[t];for(let m=0,g=d.length;m&lt;g;m++){let y=d[m];y.onLoad&amp;&amp;y.onLoad(h)}}).catch(h=&gt;{let d=qr[t];if(d===void 0)throw this.manager.itemError(t),h;delete qr[t];for(let m=0,g=d.length;m&lt;g;m++){let y=d[m];y.onError&amp;&amp;y.onError(h)}this.manager.itemError(t)}).finally(()=&gt;{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}},c_=class extends yi{constructor(t){super(t)}load(t,e,i,a){let s=this,o=new ls(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(u){try{e(s.parse(JSON.parse(u)))}catch(c){a?a(c):console.error(c),s.manager.itemError(t)}},i,a)}parse(t){let e=[];for(let i=0;i&lt;t.length;i++){let a=dl.parse(t[i]);e.push(a)}return e}},f_=class extends yi{constructor(t){super(t)}load(t,e,i,a){let s=this,o=[],u=new Au,c=new ls(this.manager);c.setPath(this.path),c.setResponseType(&quot;arraybuffer&quot;),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let h=0;function d(m){c.load(t[m],function(g){let y=s.parse(g,!0);o[m]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},h+=1,h===6&amp;&amp;(y.mipmapCount===1&amp;&amp;(u.minFilter=Gn),u.image=o,u.format=y.format,u.needsUpdate=!0,e&amp;&amp;e(u))},i,a)}if(Array.isArray(t))for(let m=0,g=t.length;m&lt;g;++m)d(m);else c.load(t,function(m){let g=s.parse(m,!0);if(g.isCubemap){let y=g.mipmaps.length/g.mipmapCount;for(let x=0;x&lt;y;x++){o[x]={mipmaps:[]};for(let b=0;b&lt;g.mipmapCount;b++)o[x].mipmaps.push(g.mipmaps[x*g.mipmapCount+b]),o[x].format=g.format,o[x].width=g.width,o[x].height=g.height}u.image=o}else u.image.width=g.width,u.image.height=g.height,u.mipmaps=g.mipmaps;g.mipmapCount===1&amp;&amp;(u.minFilter=Gn),u.format=g.format,u.needsUpdate=!0,e&amp;&amp;e(u)},i,a);return u}},Uf=new WeakMap,pl=class extends yi{constructor(t){super(t)}load(t,e,i,a){this.path!==void 0&amp;&amp;(t=this.path+t),t=this.manager.resolveURL(t);let s=this,o=As.get(`image:${t}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(t),setTimeout(function(){e&amp;&amp;e(o),s.manager.itemEnd(t)},0);else{let m=Uf.get(o);m===void 0&amp;&amp;(m=[],Uf.set(o,m)),m.push({onLoad:e,onError:a})}return o}let u=Gf(&quot;img&quot;);function c(){d(),e&amp;&amp;e(this);let m=Uf.get(this)||[];for(let g=0;g&lt;m.length;g++){let y=m[g];y.onLoad&amp;&amp;y.onLoad(this)}Uf.delete(this),s.manager.itemEnd(t)}function h(m){d(),a&amp;&amp;a(m),As.remove(`image:${t}`);let g=Uf.get(this)||[];for(let y=0;y&lt;g.length;y++){let x=g[y];x.onError&amp;&amp;x.onError(m)}Uf.delete(this),s.manager.itemError(t),s.manager.itemEnd(t)}function d(){u.removeEventListener(&quot;load&quot;,c,!1),u.removeEventListener(&quot;error&quot;,h,!1)}return u.addEventListener(&quot;load&quot;,c,!1),u.addEventListener(&quot;error&quot;,h,!1),t.slice(0,5)!==&quot;data:&quot;&amp;&amp;this.crossOrigin!==void 0&amp;&amp;(u.crossOrigin=this.crossOrigin),As.add(`image:${t}`,u),s.manager.itemStart(t),u.src=t,u}},h_=class extends yi{constructor(t){super(t)}load(t,e,i,a){let s=new ol;s.colorSpace=ri;let o=new pl(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let u=0;function c(h){o.load(t[h],function(d){s.images[h]=d,u++,u===6&amp;&amp;(s.needsUpdate=!0,e&amp;&amp;e(s))},void 0,a)}for(let h=0;h&lt;t.length;++h)c(h);return s}},d_=class extends yi{constructor(t){super(t)}load(t,e,i,a){let s=this,o=new Oa,u=new ls(this.manager);return u.setResponseType(&quot;arraybuffer&quot;),u.setRequestHeader(this.requestHeader),u.setPath(this.path),u.setWithCredentials(s.withCredentials),u.load(t,function(c){let h;try{h=s.parse(c)}catch(d){if(a!==void 0)a(d);else{console.error(d);return}}h.image!==void 0?o.image=h.image:h.data!==void 0&amp;&amp;(o.image.width=h.width,o.image.height=h.height,o.image.data=h.data),o.wrapS=h.wrapS!==void 0?h.wrapS:Ua,o.wrapT=h.wrapT!==void 0?h.wrapT:Ua,o.magFilter=h.magFilter!==void 0?h.magFilter:Gn,o.minFilter=h.minFilter!==void 0?h.minFilter:Gn,o.anisotropy=h.anisotropy!==void 0?h.anisotropy:1,h.colorSpace!==void 0&amp;&amp;(o.colorSpace=h.colorSpace),h.flipY!==void 0&amp;&amp;(o.flipY=h.flipY),h.format!==void 0&amp;&amp;(o.format=h.format),h.type!==void 0&amp;&amp;(o.type=h.type),h.mipmaps!==void 0&amp;&amp;(o.mipmaps=h.mipmaps,o.minFilter=Us),h.mipmapCount===1&amp;&amp;(o.minFilter=Gn),h.generateMipmaps!==void 0&amp;&amp;(o.generateMipmaps=h.generateMipmaps),o.needsUpdate=!0,e&amp;&amp;e(o,h)},i,a),o}},p_=class extends yi{constructor(t){super(t)}load(t,e,i,a){let s=new zn,o=new pl(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(u){s.image=u,s.needsUpdate=!0,e!==void 0&amp;&amp;e(s)},i,a),s}},ws=class extends Ie{constructor(t,e=1){super(),this.isLight=!0,this.type=&quot;Light&quot;,this.color=new Bt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&amp;&amp;(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&amp;&amp;(e.object.distance=this.distance),this.angle!==void 0&amp;&amp;(e.object.angle=this.angle),this.decay!==void 0&amp;&amp;(e.object.decay=this.decay),this.penumbra!==void 0&amp;&amp;(e.object.penumbra=this.penumbra),this.shadow!==void 0&amp;&amp;(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&amp;&amp;(e.object.target=this.target.uuid),e}},Om=class extends ws{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type=&quot;HemisphereLight&quot;,this.position.copy(Ie.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Bt(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}},Mb=new fe,hN=new B,dN=new B,Lm=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ct(512,512),this.mapType=la,this.map=null,this.mapPass=null,this.matrix=new fe,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kr,this._frameExtents=new ct(1,1),this._viewportCount=1,this._viewports=[new Oe(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;hN.setFromMatrixPosition(t.matrixWorld),e.position.copy(hN),dN.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(dN),e.updateMatrixWorld(),Mb.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mb,e.coordinateSystem,e.reversedDepth),e.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Mb)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&amp;&amp;this.map.dispose(),this.mapPass&amp;&amp;this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&amp;&amp;(t.intensity=this.intensity),this.bias!==0&amp;&amp;(t.bias=this.bias),this.normalBias!==0&amp;&amp;(t.normalBias=this.normalBias),this.radius!==1&amp;&amp;(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&amp;&amp;(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},Bb=class extends Lm{constructor(){super(new Un(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){let e=this.camera,i=yu*2*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,s=t.distance||e.far;(i!==e.fov||a!==e.aspect||s!==e.far)&amp;&amp;(e.fov=i,e.aspect=a,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},zm=class extends ws{constructor(t,e,i=0,a=Math.PI/3,s=0,o=2){super(t,e),this.isSpotLight=!0,this.type=&quot;SpotLight&quot;,this.position.copy(Ie.DEFAULT_UP),this.updateMatrix(),this.target=new Ie,this.distance=i,this.angle=a,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Bb}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},pN=new fe,Cp=new B,Eb=new B,Pb=class extends Lm{constructor(){super(new Un(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ct(4,2),this._viewportCount=6,this._viewports=[new Oe(2,1,1,1),new Oe(0,1,1,1),new Oe(3,1,1,1),new Oe(1,1,1,1),new Oe(3,0,1,1),new Oe(1,0,1,1)],this._cubeDirections=[new B(1,0,0),new B(-1,0,0),new B(0,0,1),new B(0,0,-1),new B(0,1,0),new B(0,-1,0)],this._cubeUps=[new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,0,1),new B(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,a=this.matrix,s=t.distance||i.far;s!==i.far&amp;&amp;(i.far=s,i.updateProjectionMatrix()),Cp.setFromMatrixPosition(t.matrixWorld),i.position.copy(Cp),Eb.copy(i.position),Eb.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(Eb),i.updateMatrixWorld(),a.makeTranslation(-Cp.x,-Cp.y,-Cp.z),pN.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(pN,i.coordinateSystem,i.reversedDepth)}},Bm=class extends ws{constructor(t,e,i=0,a=2){super(t,e),this.isPointLight=!0,this.type=&quot;PointLight&quot;,this.distance=i,this.decay=a,this.shadow=new Pb}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},$r=class extends Mu{constructor(t=-1,e=1,i=1,a=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type=&quot;OrthographicCamera&quot;,this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=a,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,a,s,o){this.view===null&amp;&amp;(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&amp;&amp;(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2,s=i-t,o=i+t,u=a+e,c=a-e;if(this.view!==null&amp;&amp;this.view.enabled){let h=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=h*this.view.offsetX,o=s+h*this.view.width,u-=d*this.view.offsetY,c=u-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,u,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&amp;&amp;(e.object.view=Object.assign({},this.view)),e}},Ib=class extends Lm{constructor(){super(new $r(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Pm=class extends ws{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type=&quot;DirectionalLight&quot;,this.position.copy(Ie.DEFAULT_UP),this.updateMatrix(),this.target=new Ie,this.shadow=new Ib}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},Im=class extends ws{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type=&quot;AmbientLight&quot;}},Hm=class extends ws{constructor(t,e,i=10,a=10){super(t,e),this.isRectAreaLight=!0,this.type=&quot;RectAreaLight&quot;,this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){let e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}},Fm=class{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t&lt;9;t++)this.coefficients.push(new B)}set(t){for(let e=0;e&lt;9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t&lt;9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){let i=t.x,a=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*a),e.addScaledVector(o[2],.488603*s),e.addScaledVector(o[3],.488603*i),e.addScaledVector(o[4],1.092548*(i*a)),e.addScaledVector(o[5],1.092548*(a*s)),e.addScaledVector(o[6],.315392*(3*s*s-1)),e.addScaledVector(o[7],1.092548*(i*s)),e.addScaledVector(o[8],.546274*(i*i-a*a)),e}getIrradianceAt(t,e){let i=t.x,a=t.y,s=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],2*.511664*a),e.addScaledVector(o[2],2*.511664*s),e.addScaledVector(o[3],2*.511664*i),e.addScaledVector(o[4],2*.429043*i*a),e.addScaledVector(o[5],2*.429043*a*s),e.addScaledVector(o[6],.743125*s*s-.247708),e.addScaledVector(o[7],2*.429043*i*s),e.addScaledVector(o[8],.429043*(i*i-a*a)),e}add(t){for(let e=0;e&lt;9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i&lt;9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e&lt;9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i&lt;9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e&lt;9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){let i=this.coefficients;for(let a=0;a&lt;9;a++)i[a].fromArray(t,e+a*3);return this}toArray(t=[],e=0){let i=this.coefficients;for(let a=0;a&lt;9;a++)i[a].toArray(t,e+a*3);return t}static getBasisAt(t,e){let i=t.x,a=t.y,s=t.z;e[0]=.282095,e[1]=.488603*a,e[2]=.488603*s,e[3]=.488603*i,e[4]=1.092548*i*a,e[5]=1.092548*a*s,e[6]=.315392*(3*s*s-1),e[7]=1.092548*i*s,e[8]=.546274*(i*i-a*a)}},Vm=class extends ws{constructor(t=new Fm,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){let e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}},Gm=class n extends yi{constructor(t){super(t),this.textures={}}load(t,e,i,a){let s=this,o=new ls(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(t,function(u){try{e(s.parse(JSON.parse(u)))}catch(c){a?a(c):console.error(c),s.manager.itemError(t)}},i,a)}parse(t){let e=this.textures;function i(s){return e[s]===void 0&amp;&amp;console.warn(&quot;THREE.MaterialLoader: Undefined texture&quot;,s),e[s]}let a=this.createMaterialFromType(t.type);if(t.uuid!==void 0&amp;&amp;(a.uuid=t.uuid),t.name!==void 0&amp;&amp;(a.name=t.name),t.color!==void 0&amp;&amp;a.color!==void 0&amp;&amp;a.color.setHex(t.color),t.roughness!==void 0&amp;&amp;(a.roughness=t.roughness),t.metalness!==void 0&amp;&amp;(a.metalness=t.metalness),t.sheen!==void 0&amp;&amp;(a.sheen=t.sheen),t.sheenColor!==void 0&amp;&amp;(a.sheenColor=new Bt().setHex(t.sheenColor)),t.sheenRoughness!==void 0&amp;&amp;(a.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&amp;&amp;a.emissive!==void 0&amp;&amp;a.emissive.setHex(t.emissive),t.specular!==void 0&amp;&amp;a.specular!==void 0&amp;&amp;a.specular.setHex(t.specular),t.specularIntensity!==void 0&amp;&amp;(a.specularIntensity=t.specularIntensity),t.specularColor!==void 0&amp;&amp;a.specularColor!==void 0&amp;&amp;a.specularColor.setHex(t.specularColor),t.shininess!==void 0&amp;&amp;(a.shininess=t.shininess),t.clearcoat!==void 0&amp;&amp;(a.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&amp;&amp;(a.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&amp;&amp;(a.dispersion=t.dispersion),t.iridescence!==void 0&amp;&amp;(a.iridescence=t.iridescence),t.iridescenceIOR!==void 0&amp;&amp;(a.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&amp;&amp;(a.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&amp;&amp;(a.transmission=t.transmission),t.thickness!==void 0&amp;&amp;(a.thickness=t.thickness),t.attenuationDistance!==void 0&amp;&amp;(a.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&amp;&amp;a.attenuationColor!==void 0&amp;&amp;a.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&amp;&amp;(a.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&amp;&amp;(a.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&amp;&amp;(a.fog=t.fog),t.flatShading!==void 0&amp;&amp;(a.flatShading=t.flatShading),t.blending!==void 0&amp;&amp;(a.blending=t.blending),t.combine!==void 0&amp;&amp;(a.combine=t.combine),t.side!==void 0&amp;&amp;(a.side=t.side),t.shadowSide!==void 0&amp;&amp;(a.shadowSide=t.shadowSide),t.opacity!==void 0&amp;&amp;(a.opacity=t.opacity),t.transparent!==void 0&amp;&amp;(a.transparent=t.transparent),t.alphaTest!==void 0&amp;&amp;(a.alphaTest=t.alphaTest),t.alphaHash!==void 0&amp;&amp;(a.alphaHash=t.alphaHash),t.depthFunc!==void 0&amp;&amp;(a.depthFunc=t.depthFunc),t.depthTest!==void 0&amp;&amp;(a.depthTest=t.depthTest),t.depthWrite!==void 0&amp;&amp;(a.depthWrite=t.depthWrite),t.colorWrite!==void 0&amp;&amp;(a.colorWrite=t.colorWrite),t.blendSrc!==void 0&amp;&amp;(a.blendSrc=t.blendSrc),t.blendDst!==void 0&amp;&amp;(a.blendDst=t.blendDst),t.blendEquation!==void 0&amp;&amp;(a.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&amp;&amp;(a.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&amp;&amp;(a.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&amp;&amp;(a.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&amp;&amp;a.blendColor!==void 0&amp;&amp;a.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&amp;&amp;(a.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&amp;&amp;(a.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&amp;&amp;(a.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&amp;&amp;(a.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&amp;&amp;(a.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&amp;&amp;(a.stencilFail=t.stencilFail),t.stencilZFail!==void 0&amp;&amp;(a.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&amp;&amp;(a.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&amp;&amp;(a.stencilWrite=t.stencilWrite),t.wireframe!==void 0&amp;&amp;(a.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&amp;&amp;(a.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&amp;&amp;(a.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&amp;&amp;(a.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&amp;&amp;(a.rotation=t.rotation),t.linewidth!==void 0&amp;&amp;(a.linewidth=t.linewidth),t.dashSize!==void 0&amp;&amp;(a.dashSize=t.dashSize),t.gapSize!==void 0&amp;&amp;(a.gapSize=t.gapSize),t.scale!==void 0&amp;&amp;(a.scale=t.scale),t.polygonOffset!==void 0&amp;&amp;(a.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&amp;&amp;(a.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&amp;&amp;(a.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&amp;&amp;(a.dithering=t.dithering),t.alphaToCoverage!==void 0&amp;&amp;(a.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&amp;&amp;(a.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&amp;&amp;(a.forceSinglePass=t.forceSinglePass),t.visible!==void 0&amp;&amp;(a.visible=t.visible),t.toneMapped!==void 0&amp;&amp;(a.toneMapped=t.toneMapped),t.userData!==void 0&amp;&amp;(a.userData=t.userData),t.vertexColors!==void 0&amp;&amp;(typeof t.vertexColors==&quot;number&quot;?a.vertexColors=t.vertexColors&gt;0:a.vertexColors=t.vertexColors),t.uniforms!==void 0)for(let s in t.uniforms){let o=t.uniforms[s];switch(a.uniforms[s]={},o.type){case&quot;t&quot;:a.uniforms[s].value=i(o.value);break;case&quot;c&quot;:a.uniforms[s].value=new Bt().setHex(o.value);break;case&quot;v2&quot;:a.uniforms[s].value=new ct().fromArray(o.value);break;case&quot;v3&quot;:a.uniforms[s].value=new B().fromArray(o.value);break;case&quot;v4&quot;:a.uniforms[s].value=new Oe().fromArray(o.value);break;case&quot;m3&quot;:a.uniforms[s].value=new ge().fromArray(o.value);break;case&quot;m4&quot;:a.uniforms[s].value=new fe().fromArray(o.value);break;default:a.uniforms[s].value=o.value}}if(t.defines!==void 0&amp;&amp;(a.defines=t.defines),t.vertexShader!==void 0&amp;&amp;(a.vertexShader=t.vertexShader),t.fragmentShader!==void 0&amp;&amp;(a.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&amp;&amp;(a.glslVersion=t.glslVersion),t.extensions!==void 0)for(let s in t.extensions)a.extensions[s]=t.extensions[s];if(t.lights!==void 0&amp;&amp;(a.lights=t.lights),t.clipping!==void 0&amp;&amp;(a.clipping=t.clipping),t.size!==void 0&amp;&amp;(a.size=t.size),t.sizeAttenuation!==void 0&amp;&amp;(a.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&amp;&amp;(a.map=i(t.map)),t.matcap!==void 0&amp;&amp;(a.matcap=i(t.matcap)),t.alphaMap!==void 0&amp;&amp;(a.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&amp;&amp;(a.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&amp;&amp;(a.bumpScale=t.bumpScale),t.normalMap!==void 0&amp;&amp;(a.normalMap=i(t.normalMap)),t.normalMapType!==void 0&amp;&amp;(a.normalMapType=t.normalMapType),t.normalScale!==void 0){let s=t.normalScale;Array.isArray(s)===!1&amp;&amp;(s=[s,s]),a.normalScale=new ct().fromArray(s)}return t.displacementMap!==void 0&amp;&amp;(a.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&amp;&amp;(a.displacementScale=t.displacementScale),t.displacementBias!==void 0&amp;&amp;(a.displacementBias=t.displacementBias),t.roughnessMap!==void 0&amp;&amp;(a.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&amp;&amp;(a.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&amp;&amp;(a.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&amp;&amp;(a.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&amp;&amp;(a.specularMap=i(t.specularMap)),t.specularIntensityMap!==void 0&amp;&amp;(a.specularIntensityMap=i(t.specularIntensityMap)),t.specularColorMap!==void 0&amp;&amp;(a.specularColorMap=i(t.specularColorMap)),t.envMap!==void 0&amp;&amp;(a.envMap=i(t.envMap)),t.envMapRotation!==void 0&amp;&amp;a.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&amp;&amp;(a.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&amp;&amp;(a.reflectivity=t.reflectivity),t.refractionRatio!==void 0&amp;&amp;(a.refractionRatio=t.refractionRatio),t.lightMap!==void 0&amp;&amp;(a.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&amp;&amp;(a.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&amp;&amp;(a.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&amp;&amp;(a.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&amp;&amp;(a.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&amp;&amp;(a.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&amp;&amp;(a.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&amp;&amp;(a.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&amp;&amp;(a.clearcoatNormalScale=new ct().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&amp;&amp;(a.iridescenceMap=i(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&amp;&amp;(a.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&amp;&amp;(a.transmissionMap=i(t.transmissionMap)),t.thicknessMap!==void 0&amp;&amp;(a.thicknessMap=i(t.thicknessMap)),t.anisotropyMap!==void 0&amp;&amp;(a.anisotropyMap=i(t.anisotropyMap)),t.sheenColorMap!==void 0&amp;&amp;(a.sheenColorMap=i(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&amp;&amp;(a.sheenRoughnessMap=i(t.sheenRoughnessMap)),a}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return n.createMaterialFromType(t)}static createMaterialFromType(t){let e={ShadowMaterial:Sm,SpriteMaterial:Wf,RawShaderMaterial:Mm,ShaderMaterial:ra,PointsMaterial:Zf,MeshPhysicalMaterial:Em,MeshStandardMaterial:rh,MeshPhongMaterial:bm,MeshToonMaterial:Tm,MeshNormalMaterial:Am,MeshLambertMaterial:Rm,MeshDepthMaterial:oh,MeshDistanceMaterial:lh,MeshBasicMaterial:Rs,MeshMatcapMaterial:Cm,LineDashedMaterial:wm,LineBasicMaterial:ui,Material:jn};return new e[t]}},hh=class{static extractUrlBase(t){let e=t.lastIndexOf(&quot;/&quot;);return e===-1?&quot;./&quot;:t.slice(0,e+1)}static resolveURL(t,e){return typeof t!=&quot;string&quot;||t===&quot;&quot;?&quot;&quot;:(/^https?:\/\//i.test(e)&amp;&amp;/^\//.test(t)&amp;&amp;(e=e.replace(/(^https?:\/\/[^\/]+).*/i,&quot;$1&quot;)),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}},Xm=class extends ve{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type=&quot;InstancedBufferGeometry&quot;,this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}},qm=class extends yi{constructor(t){super(t)}load(t,e,i,a){let s=this,o=new ls(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(t,function(u){try{e(s.parse(JSON.parse(u)))}catch(c){a?a(c):console.error(c),s.manager.itemError(t)}},i,a)}parse(t){let e={},i={};function a(y,x){if(e[x]!==void 0)return e[x];let M=y.interleavedBuffers[x],v=s(y,M.buffer),S=Lf(M.type,v),E=new Tu(S,M.stride);return E.uuid=M.uuid,e[x]=E,E}function s(y,x){if(i[x]!==void 0)return i[x];let M=y.arrayBuffers[x],v=new Uint32Array(M).buffer;return i[x]=v,v}let o=t.isInstancedBufferGeometry?new Xm:new ve,u=t.data.index;if(u!==void 0){let y=Lf(u.type,u.array);o.setIndex(new Xe(y,1))}let c=t.data.attributes;for(let y in c){let x=c[y],b;if(x.isInterleavedBufferAttribute){let M=a(t.data,x.data);b=new ll(M,x.itemSize,x.offset,x.normalized)}else{let M=Lf(x.type,x.array),v=x.isInstancedBufferAttribute?Qr:Xe;b=new v(M,x.itemSize,x.normalized)}x.name!==void 0&amp;&amp;(b.name=x.name),x.usage!==void 0&amp;&amp;b.setUsage(x.usage),o.setAttribute(y,b)}let h=t.data.morphAttributes;if(h)for(let y in h){let x=h[y],b=[];for(let M=0,v=x.length;M&lt;v;M++){let S=x[M],E;if(S.isInterleavedBufferAttribute){let T=a(t.data,S.data);E=new ll(T,S.itemSize,S.offset,S.normalized)}else{let T=Lf(S.type,S.array);E=new Xe(T,S.itemSize,S.normalized)}S.name!==void 0&amp;&amp;(E.name=S.name),b.push(E)}o.morphAttributes[y]=b}t.data.morphTargetsRelative&amp;&amp;(o.morphTargetsRelative=!0);let m=t.data.groups||t.data.drawcalls||t.data.offsets;if(m!==void 0)for(let y=0,x=m.length;y!==x;++y){let b=m[y];o.addGroup(b.start,b.count,b.materialIndex)}let g=t.data.boundingSphere;return g!==void 0&amp;&amp;(o.boundingSphere=new Xn().fromJSON(g)),t.name&amp;&amp;(o.name=t.name),t.userData&amp;&amp;(o.userData=t.userData),o}},m_=class extends yi{constructor(t){super(t)}load(t,e,i,a){let s=this,o=this.path===&quot;&quot;?hh.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;let u=new ls(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(c){let h=null;try{h=JSON.parse(c)}catch(m){a!==void 0&amp;&amp;a(m),console.error(&quot;THREE:ObjectLoader: Can&#39;t parse &quot;+t+&quot;.&quot;,m.message);return}let d=h.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()===&quot;geometry&quot;){a!==void 0&amp;&amp;a(new Error(&quot;THREE.ObjectLoader: Can&#39;t load &quot;+t)),console.error(&quot;THREE.ObjectLoader: Can&#39;t load &quot;+t);return}s.parse(h,e)},i,a)}async loadAsync(t,e){let i=this,a=this.path===&quot;&quot;?hh.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;let s=new ls(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);let o=await s.loadAsync(t,e),u=JSON.parse(o),c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()===&quot;geometry&quot;)throw new Error(&quot;THREE.ObjectLoader: Can&#39;t load &quot;+t);return await i.parseAsync(u)}parse(t,e){let i=this.parseAnimations(t.animations),a=this.parseShapes(t.shapes),s=this.parseGeometries(t.geometries,a),o=this.parseImages(t.images,function(){e!==void 0&amp;&amp;e(h)}),u=this.parseTextures(t.textures,o),c=this.parseMaterials(t.materials,u),h=this.parseObject(t.object,s,c,u,i),d=this.parseSkeletons(t.skeletons,h);if(this.bindSkeletons(h,d),this.bindLightTargets(h),e!==void 0){let m=!1;for(let g in o)if(o[g].data instanceof HTMLImageElement){m=!0;break}m===!1&amp;&amp;e(h)}return h}async parseAsync(t){let e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,i),s=await this.parseImagesAsync(t.images),o=this.parseTextures(t.textures,s),u=this.parseMaterials(t.materials,o),c=this.parseObject(t.object,a,u,o,e),h=this.parseSkeletons(t.skeletons,c);return this.bindSkeletons(c,h),this.bindLightTargets(c),c}parseShapes(t){let e={};if(t!==void 0)for(let i=0,a=t.length;i&lt;a;i++){let s=new $s().fromJSON(t[i]);e[s.uuid]=s}return e}parseSkeletons(t,e){let i={},a={};if(e.traverse(function(s){s.isBone&amp;&amp;(a[s.uuid]=s)}),t!==void 0)for(let s=0,o=t.length;s&lt;o;s++){let u=new Wp().fromJSON(t[s],a);i[u.uuid]=u}return i}parseGeometries(t,e){let i={};if(t!==void 0){let a=new qm;for(let s=0,o=t.length;s&lt;o;s++){let u,c=t[s];switch(c.type){case&quot;BufferGeometry&quot;:case&quot;InstancedBufferGeometry&quot;:u=a.parse(c);break;default:c.type in fN?u=fN[c.type].fromJSON(c,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type &quot;${c.type}&quot;`)}u.uuid=c.uuid,c.name!==void 0&amp;&amp;(u.name=c.name),c.userData!==void 0&amp;&amp;(u.userData=c.userData),i[c.uuid]=u}}return i}parseMaterials(t,e){let i={},a={};if(t!==void 0){let s=new Gm;s.setTextures(e);for(let o=0,u=t.length;o&lt;u;o++){let c=t[o];i[c.uuid]===void 0&amp;&amp;(i[c.uuid]=s.parse(c)),a[c.uuid]=i[c.uuid]}}return a}parseAnimations(t){let e={};if(t!==void 0)for(let i=0;i&lt;t.length;i++){let a=t[i],s=dl.parse(a);e[s.uuid]=s}return e}parseImages(t,e){let i=this,a={},s;function o(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function u(c){if(typeof c==&quot;string&quot;){let h=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:i.resourcePath+h;return o(d)}else return c.data?{data:Lf(c.type,c.data),width:c.width,height:c.height}:null}if(t!==void 0&amp;&amp;t.length&gt;0){let c=new fh(e);s=new pl(c),s.setCrossOrigin(this.crossOrigin);for(let h=0,d=t.length;h&lt;d;h++){let m=t[h],g=m.url;if(Array.isArray(g)){let y=[];for(let x=0,b=g.length;x&lt;b;x++){let M=g[x],v=u(M);v!==null&amp;&amp;(v instanceof HTMLImageElement?y.push(v):y.push(new Oa(v.data,v.width,v.height)))}a[m.uuid]=new Ts(y)}else{let y=u(m.url);a[m.uuid]=new Ts(y)}}}return a}async parseImagesAsync(t){let e=this,i={},a;async function s(o){if(typeof o==&quot;string&quot;){let u=o,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:e.resourcePath+u;return await a.loadAsync(c)}else return o.data?{data:Lf(o.type,o.data),width:o.width,height:o.height}:null}if(t!==void 0&amp;&amp;t.length&gt;0){a=new pl(this.manager),a.setCrossOrigin(this.crossOrigin);for(let o=0,u=t.length;o&lt;u;o++){let c=t[o],h=c.url;if(Array.isArray(h)){let d=[];for(let m=0,g=h.length;m&lt;g;m++){let y=h[m],x=await s(y);x!==null&amp;&amp;(x instanceof HTMLImageElement?d.push(x):d.push(new Oa(x.data,x.width,x.height)))}i[c.uuid]=new Ts(d)}else{let d=await s(c.url);i[c.uuid]=new Ts(d)}}}return i}parseTextures(t,e){function i(s,o){return typeof s==&quot;number&quot;?s:(console.warn(&quot;THREE.ObjectLoader.parseTexture: Constant should be in numeric form.&quot;,s),o[s])}let a={};if(t!==void 0)for(let s=0,o=t.length;s&lt;o;s++){let u=t[s];u.image===void 0&amp;&amp;console.warn(&#39;THREE.ObjectLoader: No &quot;image&quot; specified for&#39;,u.uuid),e[u.image]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined image&quot;,u.image);let c=e[u.image],h=c.data,d;Array.isArray(h)?(d=new ol,h.length===6&amp;&amp;(d.needsUpdate=!0)):(h&amp;&amp;h.data?d=new Oa:d=new zn,h&amp;&amp;(d.needsUpdate=!0)),d.source=c,d.uuid=u.uuid,u.name!==void 0&amp;&amp;(d.name=u.name),u.mapping!==void 0&amp;&amp;(d.mapping=i(u.mapping,H5)),u.channel!==void 0&amp;&amp;(d.channel=u.channel),u.offset!==void 0&amp;&amp;d.offset.fromArray(u.offset),u.repeat!==void 0&amp;&amp;d.repeat.fromArray(u.repeat),u.center!==void 0&amp;&amp;d.center.fromArray(u.center),u.rotation!==void 0&amp;&amp;(d.rotation=u.rotation),u.wrap!==void 0&amp;&amp;(d.wrapS=i(u.wrap[0],mN),d.wrapT=i(u.wrap[1],mN)),u.format!==void 0&amp;&amp;(d.format=u.format),u.internalFormat!==void 0&amp;&amp;(d.internalFormat=u.internalFormat),u.type!==void 0&amp;&amp;(d.type=u.type),u.colorSpace!==void 0&amp;&amp;(d.colorSpace=u.colorSpace),u.minFilter!==void 0&amp;&amp;(d.minFilter=i(u.minFilter,gN)),u.magFilter!==void 0&amp;&amp;(d.magFilter=i(u.magFilter,gN)),u.anisotropy!==void 0&amp;&amp;(d.anisotropy=u.anisotropy),u.flipY!==void 0&amp;&amp;(d.flipY=u.flipY),u.generateMipmaps!==void 0&amp;&amp;(d.generateMipmaps=u.generateMipmaps),u.premultiplyAlpha!==void 0&amp;&amp;(d.premultiplyAlpha=u.premultiplyAlpha),u.unpackAlignment!==void 0&amp;&amp;(d.unpackAlignment=u.unpackAlignment),u.compareFunction!==void 0&amp;&amp;(d.compareFunction=u.compareFunction),u.userData!==void 0&amp;&amp;(d.userData=u.userData),a[u.uuid]=d}return a}parseObject(t,e,i,a,s){let o;function u(g){return e[g]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined geometry&quot;,g),e[g]}function c(g){if(g!==void 0){if(Array.isArray(g)){let y=[];for(let x=0,b=g.length;x&lt;b;x++){let M=g[x];i[M]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined material&quot;,M),y.push(i[M])}return y}return i[g]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined material&quot;,g),i[g]}}function h(g){return a[g]===void 0&amp;&amp;console.warn(&quot;THREE.ObjectLoader: Undefined texture&quot;,g),a[g]}let d,m;switch(t.type){case&quot;Scene&quot;:o=new bu,t.background!==void 0&amp;&amp;(Number.isInteger(t.background)?o.background=new Bt(t.background):o.background=h(t.background)),t.environment!==void 0&amp;&amp;(o.environment=h(t.environment)),t.fog!==void 0&amp;&amp;(t.fog.type===&quot;Fog&quot;?o.fog=new Gp(t.fog.color,t.fog.near,t.fog.far):t.fog.type===&quot;FogExp2&quot;&amp;&amp;(o.fog=new Vp(t.fog.color,t.fog.density)),t.fog.name!==&quot;&quot;&amp;&amp;(o.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&amp;&amp;(o.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&amp;&amp;(o.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&amp;&amp;o.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&amp;&amp;(o.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&amp;&amp;o.environmentRotation.fromArray(t.environmentRotation);break;case&quot;PerspectiveCamera&quot;:o=new Un(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&amp;&amp;(o.focus=t.focus),t.zoom!==void 0&amp;&amp;(o.zoom=t.zoom),t.filmGauge!==void 0&amp;&amp;(o.filmGauge=t.filmGauge),t.filmOffset!==void 0&amp;&amp;(o.filmOffset=t.filmOffset),t.view!==void 0&amp;&amp;(o.view=Object.assign({},t.view));break;case&quot;OrthographicCamera&quot;:o=new $r(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&amp;&amp;(o.zoom=t.zoom),t.view!==void 0&amp;&amp;(o.view=Object.assign({},t.view));break;case&quot;AmbientLight&quot;:o=new Im(t.color,t.intensity);break;case&quot;DirectionalLight&quot;:o=new Pm(t.color,t.intensity),o.target=t.target||&quot;&quot;;break;case&quot;PointLight&quot;:o=new Bm(t.color,t.intensity,t.distance,t.decay);break;case&quot;RectAreaLight&quot;:o=new Hm(t.color,t.intensity,t.width,t.height);break;case&quot;SpotLight&quot;:o=new zm(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),o.target=t.target||&quot;&quot;;break;case&quot;HemisphereLight&quot;:o=new Om(t.color,t.groundColor,t.intensity);break;case&quot;LightProbe&quot;:o=new Vm().fromJSON(t);break;case&quot;SkinnedMesh&quot;:d=u(t.geometry),m=c(t.material),o=new Yp(d,m),t.bindMode!==void 0&amp;&amp;(o.bindMode=t.bindMode),t.bindMatrix!==void 0&amp;&amp;o.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&amp;&amp;(o.skeleton=t.skeleton);break;case&quot;Mesh&quot;:d=u(t.geometry),m=c(t.material),o=new En(d,m);break;case&quot;InstancedMesh&quot;:d=u(t.geometry),m=c(t.material);let g=t.count,y=t.instanceMatrix,x=t.instanceColor;o=new kp(d,m,g),o.instanceMatrix=new Qr(new Float32Array(y.array),16),x!==void 0&amp;&amp;(o.instanceColor=new Qr(new Float32Array(x.array),x.itemSize));break;case&quot;BatchedMesh&quot;:d=u(t.geometry),m=c(t.material),o=new jp(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,m),o.geometry=d,o.perObjectFrustumCulled=t.perObjectFrustumCulled,o.sortObjects=t.sortObjects,o._drawRanges=t.drawRanges,o._reservedRanges=t.reservedRanges,o._geometryInfo=t.geometryInfo.map(b=&gt;{let M=null,v=null;return b.boundingBox!==void 0&amp;&amp;(M=new Zn().fromJSON(b.boundingBox)),b.boundingSphere!==void 0&amp;&amp;(v=new Xn().fromJSON(b.boundingSphere)),{...b,boundingBox:M,boundingSphere:v}}),o._instanceInfo=t.instanceInfo,o._availableInstanceIds=t._availableInstanceIds,o._availableGeometryIds=t._availableGeometryIds,o._nextIndexStart=t.nextIndexStart,o._nextVertexStart=t.nextVertexStart,o._geometryCount=t.geometryCount,o._maxInstanceCount=t.maxInstanceCount,o._maxVertexCount=t.maxVertexCount,o._maxIndexCount=t.maxIndexCount,o._geometryInitialized=t.geometryInitialized,o._matricesTexture=h(t.matricesTexture.uuid),o._indirectTexture=h(t.indirectTexture.uuid),t.colorsTexture!==void 0&amp;&amp;(o._colorsTexture=h(t.colorsTexture.uuid)),t.boundingSphere!==void 0&amp;&amp;(o.boundingSphere=new Xn().fromJSON(t.boundingSphere)),t.boundingBox!==void 0&amp;&amp;(o.boundingBox=new Zn().fromJSON(t.boundingBox));break;case&quot;LOD&quot;:o=new qp;break;case&quot;Line&quot;:o=new Cs(u(t.geometry),c(t.material));break;case&quot;LineLoop&quot;:o=new Qp(u(t.geometry),c(t.material));break;case&quot;LineSegments&quot;:o=new Ba(u(t.geometry),c(t.material));break;case&quot;PointCloud&quot;:case&quot;Points&quot;:o=new Kp(u(t.geometry),c(t.material));break;case&quot;Sprite&quot;:o=new Xp(c(t.material));break;case&quot;Group&quot;:o=new Wr;break;case&quot;Bone&quot;:o=new kf;break;default:o=new Ie}if(o.uuid=t.uuid,t.name!==void 0&amp;&amp;(o.name=t.name),t.matrix!==void 0?(o.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&amp;&amp;(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&amp;&amp;o.matrix.decompose(o.position,o.quaternion,o.scale)):(t.position!==void 0&amp;&amp;o.position.fromArray(t.position),t.rotation!==void 0&amp;&amp;o.rotation.fromArray(t.rotation),t.quaternion!==void 0&amp;&amp;o.quaternion.fromArray(t.quaternion),t.scale!==void 0&amp;&amp;o.scale.fromArray(t.scale)),t.up!==void 0&amp;&amp;o.up.fromArray(t.up),t.castShadow!==void 0&amp;&amp;(o.castShadow=t.castShadow),t.receiveShadow!==void 0&amp;&amp;(o.receiveShadow=t.receiveShadow),t.shadow&amp;&amp;(t.shadow.intensity!==void 0&amp;&amp;(o.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&amp;&amp;(o.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&amp;&amp;(o.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&amp;&amp;(o.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&amp;&amp;o.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&amp;&amp;(o.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&amp;&amp;(o.visible=t.visible),t.frustumCulled!==void 0&amp;&amp;(o.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&amp;&amp;(o.renderOrder=t.renderOrder),t.userData!==void 0&amp;&amp;(o.userData=t.userData),t.layers!==void 0&amp;&amp;(o.layers.mask=t.layers),t.children!==void 0){let g=t.children;for(let y=0;y&lt;g.length;y++)o.add(this.parseObject(g[y],e,i,a,s))}if(t.animations!==void 0){let g=t.animations;for(let y=0;y&lt;g.length;y++){let x=g[y];o.animations.push(s[x])}}if(t.type===&quot;LOD&quot;){t.autoUpdate!==void 0&amp;&amp;(o.autoUpdate=t.autoUpdate);let g=t.levels;for(let y=0;y&lt;g.length;y++){let x=g[y],b=o.getObjectByProperty(&quot;uuid&quot;,x.object);b!==void 0&amp;&amp;o.addLevel(b,x.distance,x.hysteresis)}}return o}bindSkeletons(t,e){Object.keys(e).length!==0&amp;&amp;t.traverse(function(i){if(i.isSkinnedMesh===!0&amp;&amp;i.skeleton!==void 0){let a=e[i.skeleton];a===void 0?console.warn(&quot;THREE.ObjectLoader: No skeleton found with UUID:&quot;,i.skeleton):i.bind(a,i.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){let i=e.target,a=t.getObjectByProperty(&quot;uuid&quot;,i);a!==void 0?e.target=a:e.target=new Ie}})}},H5={UVMapping:ig,CubeReflectionMapping:rr,CubeRefractionMapping:to,EquirectangularReflectionMapping:vh,EquirectangularRefractionMapping:yh,CubeUVReflectionMapping:Ou},mN={RepeatWrapping:Bf,ClampToEdgeWrapping:Ua,MirroredRepeatWrapping:Pf},gN={NearestFilter:oi,NearestMipmapNearestFilter:nx,NearestMipmapLinearFilter:Lu,LinearFilter:Gn,LinearMipmapNearestFilter:_h,LinearMipmapLinearFilter:Us},bb=new WeakMap,g_=class extends yi{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap&gt;&quot;u&quot;&amp;&amp;console.warn(&quot;THREE.ImageBitmapLoader: createImageBitmap() not supported.&quot;),typeof fetch&gt;&quot;u&quot;&amp;&amp;console.warn(&quot;THREE.ImageBitmapLoader: fetch() not supported.&quot;),this.options={premultiplyAlpha:&quot;none&quot;},this._abortController=new AbortController}setOptions(t){return this.options=t,this}load(t,e,i,a){t===void 0&amp;&amp;(t=&quot;&quot;),this.path!==void 0&amp;&amp;(t=this.path+t),t=this.manager.resolveURL(t);let s=this,o=As.get(`image-bitmap:${t}`);if(o!==void 0){if(s.manager.itemStart(t),o.then){o.then(h=&gt;{if(bb.has(o)===!0)a&amp;&amp;a(bb.get(o)),s.manager.itemError(t),s.manager.itemEnd(t);else return e&amp;&amp;e(h),s.manager.itemEnd(t),h});return}return setTimeout(function(){e&amp;&amp;e(o),s.manager.itemEnd(t)},0),o}let u={};u.credentials=this.crossOrigin===&quot;anonymous&quot;?&quot;same-origin&quot;:&quot;include&quot;,u.headers=this.requestHeader,u.signal=typeof AbortSignal.any==&quot;function&quot;?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;let c=fetch(t,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(s.options,{colorSpaceConversion:&quot;none&quot;}))}).then(function(h){return As.add(`image-bitmap:${t}`,h),e&amp;&amp;e(h),s.manager.itemEnd(t),h}).catch(function(h){a&amp;&amp;a(h),bb.set(c,h),As.remove(`image-bitmap:${t}`),s.manager.itemError(t),s.manager.itemEnd(t)});As.add(`image-bitmap:${t}`,c),s.manager.itemStart(t)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}},Py,dh=class{static getContext(){return Py===void 0&amp;&amp;(Py=new(window.AudioContext||window.webkitAudioContext)),Py}static setContext(t){Py=t}},v_=class extends yi{constructor(t){super(t)}load(t,e,i,a){let s=this,o=new ls(this.manager);o.setResponseType(&quot;arraybuffer&quot;),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(c){try{let h=c.slice(0);dh.getContext().decodeAudioData(h,function(m){e(m)}).catch(u)}catch(h){u(h)}},i,a);function u(c){a?a(c):console.error(c),s.manager.itemError(t)}}},vN=new fe,yN=new fe,lu=new fe,y_=class{constructor(){this.type=&quot;StereoCamera&quot;,this.aspect=1,this.eyeSep=.064,this.cameraL=new Un,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Un,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){let e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,lu.copy(t.projectionMatrix);let a=e.eyeSep/2,s=a*e.near/e.focus,o=e.near*Math.tan(mu*e.fov*.5)/e.zoom,u,c;yN.elements[12]=-a,vN.elements[12]=a,u=-o*e.aspect+s,c=o*e.aspect+s,lu.elements[0]=2*e.near/(c-u),lu.elements[8]=(c+u)/(c-u),this.cameraL.projectionMatrix.copy(lu),u=-o*e.aspect-s,c=o*e.aspect-s,lu.elements[0]=2*e.near/(c-u),lu.elements[8]=(c+u)/(c-u),this.cameraR.projectionMatrix.copy(lu)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(yN),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(vN)}},Ym=class extends Un{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}},Uu=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&amp;&amp;!this.running)return this.start(),0;if(this.running){let e=performance.now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}},uu=new B,Tb=new vi,F5=new B,cu=new B,fu=new B,__=class extends Ie{constructor(){super(),this.type=&quot;AudioListener&quot;,this.context=dh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Uu}getInput(){return this.gain}removeFilter(){return this.filter!==null&amp;&amp;(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);let e=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(uu,Tb,F5),cu.set(0,0,-1).applyQuaternion(Tb),fu.set(0,1,0).applyQuaternion(Tb),e.positionX){let i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(uu.x,i),e.positionY.linearRampToValueAtTime(uu.y,i),e.positionZ.linearRampToValueAtTime(uu.z,i),e.forwardX.linearRampToValueAtTime(cu.x,i),e.forwardY.linearRampToValueAtTime(cu.y,i),e.forwardZ.linearRampToValueAtTime(cu.z,i),e.upX.linearRampToValueAtTime(fu.x,i),e.upY.linearRampToValueAtTime(fu.y,i),e.upZ.linearRampToValueAtTime(fu.z,i)}else e.setPosition(uu.x,uu.y,uu.z),e.setOrientation(cu.x,cu.y,cu.z,fu.x,fu.y,fu.z)}},Wm=class extends Ie{constructor(t){super(),this.type=&quot;Audio&quot;,this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType=&quot;empty&quot;,this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType=&quot;audioNode&quot;,this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType=&quot;mediaNode&quot;,this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType=&quot;mediaStreamNode&quot;,this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType=&quot;buffer&quot;,this.autoplay&amp;&amp;this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn(&quot;THREE.Audio: Audio is already playing.&quot;);return}if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}this._startedAt=this.context.currentTime+t;let e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.isPlaying===!0&amp;&amp;(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&amp;&amp;(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this._progress=0,this.source!==null&amp;&amp;(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length&gt;0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t&lt;e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length&gt;0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t&lt;e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&amp;&amp;this.source.detune!==void 0&amp;&amp;this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.playbackRate=t,this.isPlaying===!0&amp;&amp;this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn(&quot;THREE.Audio: this Audio has no playback control.&quot;);return}return this.loop=t,this.isPlaying===!0&amp;&amp;(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!==&quot;buffer&quot;?(console.warn(&quot;THREE.Audio: Audio source type cannot be copied.&quot;),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}},hu=new B,_N=new vi,V5=new B,du=new B,x_=class extends Wm{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel=&quot;HRTF&quot;,this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&amp;&amp;this.isPlaying===!1)return;this.matrixWorld.decompose(hu,_N,V5),du.set(0,0,1).applyQuaternion(_N);let e=this.panner;if(e.positionX){let i=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(hu.x,i),e.positionY.linearRampToValueAtTime(hu.y,i),e.positionZ.linearRampToValueAtTime(hu.z,i),e.orientationX.linearRampToValueAtTime(du.x,i),e.orientationY.linearRampToValueAtTime(du.y,i),e.orientationZ.linearRampToValueAtTime(du.z,i)}else e.setPosition(hu.x,hu.y,hu.z),e.setOrientation(du.x,du.y,du.z)}},S_=class{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0,e=this.getFrequencyData();for(let i=0;i&lt;e.length;i++)t+=e[i];return t/e.length}},km=class{constructor(t,e,i){this.binding=t,this.valueSize=i;let a,s,o;switch(e){case&quot;quaternion&quot;:a=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case&quot;string&quot;:case&quot;bool&quot;:a=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:a=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){let i=this.buffer,a=this.valueSize,s=t*a+a,o=this.cumulativeWeight;if(o===0){for(let u=0;u!==a;++u)i[s+u]=i[u];o=e}else{o+=e;let u=e/o;this._mixBufferRegion(i,s,0,u,a)}this.cumulativeWeight=o}accumulateAdditive(t){let e=this.buffer,i=this.valueSize,a=i*this._addIndex;this.cumulativeWeightAdditive===0&amp;&amp;this._setIdentity(),this._mixBufferRegionAdditive(e,a,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){let e=this.valueSize,i=this.buffer,a=t*e+e,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,u=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s&lt;1){let c=e*this._origIndex;this._mixBufferRegion(i,a,c,1-s,e)}o&gt;0&amp;&amp;this._mixBufferRegionAdditive(i,a,this._addIndex*e,1,e);for(let c=e,h=e+e;c!==h;++c)if(i[c]!==i[c+e]){u.setValue(i,a);break}}saveOriginalState(){let t=this.binding,e=this.buffer,i=this.valueSize,a=i*this._origIndex;t.getValue(e,a);for(let s=i,o=a;s!==o;++s)e[s]=e[a+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){let t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i&lt;e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i&lt;this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,a,s){if(a&gt;=.5)for(let o=0;o!==s;++o)t[e+o]=t[i+o]}_slerp(t,e,i,a){vi.slerpFlat(t,e,t,e,t,i,a)}_slerpAdditive(t,e,i,a,s){let o=this._workIndex*s;vi.multiplyQuaternionsFlat(t,o,t,e,t,i),vi.slerpFlat(t,e,t,e,t,o,a)}_lerp(t,e,i,a,s){let o=1-a;for(let u=0;u!==s;++u){let c=e+u;t[c]=t[c]*o+t[i+u]*a}}_lerpAdditive(t,e,i,a,s){for(let o=0;o!==s;++o){let u=e+o;t[u]=t[u]+t[i+o]*a}}},IT=&quot;\\[\\]\\.:\\/&quot;,G5=new RegExp(&quot;[&quot;+IT+&quot;]&quot;,&quot;g&quot;),HT=&quot;[^&quot;+IT+&quot;]&quot;,X5=&quot;[^&quot;+IT.replace(&quot;\\.&quot;,&quot;&quot;)+&quot;]&quot;,q5=/((?:WC+[\/:])*)/.source.replace(&quot;WC&quot;,HT),Y5=/(WCOD+)?/.source.replace(&quot;WCOD&quot;,X5),W5=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace(&quot;WC&quot;,HT),k5=/\.(WC+)(?:\[(.+)\])?/.source.replace(&quot;WC&quot;,HT),Z5=new RegExp(&quot;^&quot;+q5+Y5+W5+k5+&quot;$&quot;),j5=[&quot;material&quot;,&quot;materials&quot;,&quot;bones&quot;,&quot;map&quot;],Hb=class{constructor(t,e,i){let a=i||Ye.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,a)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&amp;&amp;a.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=i.length;a!==s;++a)i[a].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Ye=class n{constructor(t,e,i){this.path=e,this.parsedPath=i||n.parseTrackName(e),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&amp;&amp;t.isAnimationObjectGroup?new n.Composite(t,e,i):new n(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,&quot;_&quot;).replace(G5,&quot;&quot;)}static parseTrackName(t){let e=Z5.exec(t);if(e===null)throw new Error(&quot;PropertyBinding: Cannot parse trackName: &quot;+t);let i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},a=i.nodeName&amp;&amp;i.nodeName.lastIndexOf(&quot;.&quot;);if(a!==void 0&amp;&amp;a!==-1){let s=i.nodeName.substring(a+1);j5.indexOf(s)!==-1&amp;&amp;(i.nodeName=i.nodeName.substring(0,a),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error(&quot;PropertyBinding: can not parse propertyName from trackName: &quot;+t);return i}static findNode(t,e){if(e===void 0||e===&quot;&quot;||e===&quot;.&quot;||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){let i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){let i=function(s){for(let o=0;o&lt;s.length;o++){let u=s[o];if(u.name===e||u.uuid===e)return u;let c=i(u.children);if(c)return c}return null},a=i(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){let i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)t[e++]=i[a]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){let i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=t[e++]}_setValue_array_setNeedsUpdate(t,e){let i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){let i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node,e=this.parsedPath,i=e.objectName,a=e.propertyName,s=e.propertyIndex;if(t||(t=n.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn(&quot;THREE.PropertyBinding: No target node found for track: &quot;+this.path+&quot;.&quot;);return}if(i){let h=e.objectIndex;switch(i){case&quot;materials&quot;:if(!t.material){console.error(&quot;THREE.PropertyBinding: Can not bind to material as node does not have a material.&quot;,this);return}if(!t.material.materials){console.error(&quot;THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.&quot;,this);return}t=t.material.materials;break;case&quot;bones&quot;:if(!t.skeleton){console.error(&quot;THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.&quot;,this);return}t=t.skeleton.bones;for(let d=0;d&lt;t.length;d++)if(t[d].name===h){h=d;break}break;case&quot;map&quot;:if(&quot;map&quot;in t){t=t.map;break}if(!t.material){console.error(&quot;THREE.PropertyBinding: Can not bind to material as node does not have a material.&quot;,this);return}if(!t.material.map){console.error(&quot;THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.&quot;,this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error(&quot;THREE.PropertyBinding: Can not bind to objectName of node undefined.&quot;,this);return}t=t[i]}if(h!==void 0){if(t[h]===void 0){console.error(&quot;THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.&quot;,this,t);return}t=t[h]}}let o=t[a];if(o===void 0){let h=e.nodeName;console.error(&quot;THREE.PropertyBinding: Trying to update property for track: &quot;+h+&quot;.&quot;+a+&quot; but it wasn&#39;t found.&quot;,t);return}let u=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?u=this.Versioning.NeedsUpdate:t.isObject3D===!0&amp;&amp;(u=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(a===&quot;morphTargetInfluences&quot;){if(!t.geometry){console.error(&quot;THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.&quot;,this);return}if(!t.geometry.morphAttributes){console.error(&quot;THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.&quot;,this);return}t.morphTargetDictionary[s]!==void 0&amp;&amp;(s=t.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&amp;&amp;o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=a;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Ye.Composite=Hb;Ye.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ye.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ye.prototype.GetterByBindingType=[Ye.prototype._getValue_direct,Ye.prototype._getValue_array,Ye.prototype._getValue_arrayElement,Ye.prototype._getValue_toArray];Ye.prototype.SetterByBindingTypeAndVersioning=[[Ye.prototype._setValue_direct,Ye.prototype._setValue_direct_setNeedsUpdate,Ye.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ye.prototype._setValue_array,Ye.prototype._setValue_array_setNeedsUpdate,Ye.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ye.prototype._setValue_arrayElement,Ye.prototype._setValue_arrayElement_setNeedsUpdate,Ye.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ye.prototype._setValue_fromArray,Ye.prototype._setValue_fromArray_setNeedsUpdate,Ye.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var M_=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Na(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;let t={};this._indicesByUUID=t;for(let i=0,a=arguments.length;i!==a;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};let e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){let t=this._objects,e=this._indicesByUUID,i=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length,u,c=t.length,h=this.nCachedObjects_;for(let d=0,m=arguments.length;d!==m;++d){let g=arguments[d],y=g.uuid,x=e[y];if(x===void 0){x=c++,e[y]=x,t.push(g);for(let b=0,M=o;b!==M;++b)s[b].push(new Ye(g,i[b],a[b]))}else if(x&lt;h){u=t[x];let b=--h,M=t[b];e[M.uuid]=x,t[x]=M,e[y]=b,t[b]=g;for(let v=0,S=o;v!==S;++v){let E=s[v],T=E[b],w=E[x];E[x]=T,w===void 0&amp;&amp;(w=new Ye(g,i[v],a[v])),E[b]=w}}else t[x]!==u&amp;&amp;console.error(&quot;THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.&quot;)}this.nCachedObjects_=h}remove(){let t=this._objects,e=this._indicesByUUID,i=this._bindings,a=i.length,s=this.nCachedObjects_;for(let o=0,u=arguments.length;o!==u;++o){let c=arguments[o],h=c.uuid,d=e[h];if(d!==void 0&amp;&amp;d&gt;=s){let m=s++,g=t[m];e[g.uuid]=d,t[d]=g,e[h]=m,t[m]=c;for(let y=0,x=a;y!==x;++y){let b=i[y],M=b[m],v=b[d];b[d]=M,b[m]=v}}}this.nCachedObjects_=s}uncache(){let t=this._objects,e=this._indicesByUUID,i=this._bindings,a=i.length,s=this.nCachedObjects_,o=t.length;for(let u=0,c=arguments.length;u!==c;++u){let h=arguments[u],d=h.uuid,m=e[d];if(m!==void 0)if(delete e[d],m&lt;s){let g=--s,y=t[g],x=--o,b=t[x];e[y.uuid]=m,t[m]=y,e[b.uuid]=g,t[g]=b,t.pop();for(let M=0,v=a;M!==v;++M){let S=i[M],E=S[g],T=S[x];S[m]=E,S[g]=T,S.pop()}}else{let g=--o,y=t[g];g&gt;0&amp;&amp;(e[y.uuid]=m),t[m]=y,t.pop();for(let x=0,b=a;x!==b;++x){let M=i[x];M[m]=M[g],M.pop()}}}this.nCachedObjects_=s}subscribe_(t,e){let i=this._bindingsIndicesByPath,a=i[t],s=this._bindings;if(a!==void 0)return s[a];let o=this._paths,u=this._parsedPaths,c=this._objects,h=c.length,d=this.nCachedObjects_,m=new Array(h);a=s.length,i[t]=a,o.push(t),u.push(e),s.push(m);for(let g=d,y=c.length;g!==y;++g){let x=c[g];m[g]=new Ye(x,t,e)}return m}unsubscribe_(t){let e=this._bindingsIndicesByPath,i=e[t];if(i!==void 0){let a=this._paths,s=this._parsedPaths,o=this._bindings,u=o.length-1,c=o[u],h=t[u];e[h]=i,o[i]=c,o.pop(),s[i]=s[u],s.pop(),a[i]=a[u],a.pop()}}},Zm=class{constructor(t,e,i=null,a=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=a;let s=e.tracks,o=s.length,u=new Array(o),c={endingStart:nl,endingEnd:nl};for(let h=0;h!==o;++h){let d=s[h].createInterpolant(null);u[h]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=u,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=yT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&amp;&amp;!this.paused&amp;&amp;this.timeScale!==0&amp;&amp;this._startTime===null&amp;&amp;this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i=!1){if(t.fadeOut(e),this.fadeIn(e),i===!0){let a=this._clip.duration,s=t._clip.duration,o=s/a,u=a/s;t.warp(1,o,e),this.warp(u,1,e)}return this}crossFadeTo(t,e,i=!1){return t.crossFadeFrom(this,e,i)}stopFading(){let t=this._weightInterpolant;return t!==null&amp;&amp;(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){let a=this._mixer,s=a.time,o=this.timeScale,u=this._timeScaleInterpolant;u===null&amp;&amp;(u=a._lendControlInterpolant(),this._timeScaleInterpolant=u);let c=u.parameterPositions,h=u.sampleValues;return c[0]=s,c[1]=s+i,h[0]=t/o,h[1]=e/o,this}stopWarping(){let t=this._timeScaleInterpolant;return t!==null&amp;&amp;(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,a){if(!this.enabled){this._updateWeight(t);return}let s=this._startTime;if(s!==null){let c=(t-s)*i;c&lt;0||i===0?e=0:(this._startTime=null,e=i*c)}e*=this._updateTimeScale(t);let o=this._updateTime(e),u=this._updateWeight(t);if(u&gt;0){let c=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case cx:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(o),h[d].accumulateAdditive(u);break;case Bg:default:for(let d=0,m=c.length;d!==m;++d)c[d].evaluate(o),h[d].accumulate(a,u)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;let i=this._weightInterpolant;if(i!==null){let a=i.evaluate(t)[0];e*=a,t&gt;i.parameterPositions[1]&amp;&amp;(this.stopFading(),a===0&amp;&amp;(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;let i=this._timeScaleInterpolant;if(i!==null){let a=i.evaluate(t)[0];e*=a,t&gt;i.parameterPositions[1]&amp;&amp;(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){let e=this._clip.duration,i=this.loop,a=this.time+t,s=this._loopCount,o=i===_T;if(t===0)return s===-1?a:o&amp;&amp;(s&amp;1)===1?e-a:a;if(i===vT){s===-1&amp;&amp;(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(a&gt;=e)a=e;else if(a&lt;0)a=0;else{this.time=a;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:&quot;finished&quot;,action:this,direction:t&lt;0?-1:1})}}else{if(s===-1&amp;&amp;(t&gt;=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),a&gt;=e||a&lt;0){let u=Math.floor(a/e);a-=e*u,s+=Math.abs(u);let c=this.repetitions-s;if(c&lt;=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t&gt;0?e:0,this.time=a,this._mixer.dispatchEvent({type:&quot;finished&quot;,action:this,direction:t&gt;0?1:-1});else{if(c===1){let h=t&lt;0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:&quot;loop&quot;,action:this,loopDelta:u})}}else this.time=a;if(o&amp;&amp;(s&amp;1)===1)return e-a}return a}_setEndings(t,e,i){let a=this._interpolantSettings;i?(a.endingStart=il,a.endingEnd=il):(t?a.endingStart=this.zeroSlopeAtStart?il:nl:a.endingStart=Hf,e?a.endingEnd=this.zeroSlopeAtEnd?il:nl:a.endingEnd=Hf)}_scheduleFading(t,e,i){let a=this._mixer,s=a.time,o=this._weightInterpolant;o===null&amp;&amp;(o=a._lendControlInterpolant(),this._weightInterpolant=o);let u=o.parameterPositions,c=o.sampleValues;return u[0]=s,c[0]=e,u[1]=s+t,c[1]=i,this}},Q5=new Float32Array(1),E_=class extends La{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){let i=t._localRoot||this._root,a=t._clip.tracks,s=a.length,o=t._propertyBindings,u=t._interpolants,c=i.uuid,h=this._bindingsByRootAndName,d=h[c];d===void 0&amp;&amp;(d={},h[c]=d);for(let m=0;m!==s;++m){let g=a[m],y=g.name,x=d[y];if(x!==void 0)++x.referenceCount,o[m]=x;else{if(x=o[m],x!==void 0){x._cacheIndex===null&amp;&amp;(++x.referenceCount,this._addInactiveBinding(x,c,y));continue}let b=e&amp;&amp;e._propertyBindings[m].binding.parsedPath;x=new km(Ye.create(i,y,b),g.ValueTypeName,g.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,c,y),o[m]=x}u[m].resultBuffer=x.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){let i=(t._localRoot||this._root).uuid,a=t._clip.uuid,s=this._actionsByClip[a];this._bindAction(t,s&amp;&amp;s.knownActions[0]),this._addInactiveAction(t,a,i)}let e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){let s=e[i];s.useCount++===0&amp;&amp;(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){let e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){let s=e[i];--s.useCount===0&amp;&amp;(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){let e=t._cacheIndex;return e!==null&amp;&amp;e&lt;this._nActiveActions}_addInactiveAction(t,e,i){let a=this._actions,s=this._actionsByClip,o=s[e];if(o===void 0)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,s[e]=o;else{let u=o.knownActions;t._byClipCacheIndex=u.length,u.push(t)}t._cacheIndex=a.length,a.push(t),o.actionByRoot[i]=t}_removeInactiveAction(t){let e=this._actions,i=e[e.length-1],a=t._cacheIndex;i._cacheIndex=a,e[a]=i,e.pop(),t._cacheIndex=null;let s=t._clip.uuid,o=this._actionsByClip,u=o[s],c=u.knownActions,h=c[c.length-1],d=t._byClipCacheIndex;h._byClipCacheIndex=d,c[d]=h,c.pop(),t._byClipCacheIndex=null;let m=u.actionByRoot,g=(t._localRoot||this._root).uuid;delete m[g],c.length===0&amp;&amp;delete o[s],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){let e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){let s=e[i];--s.referenceCount===0&amp;&amp;this._removeInactiveBinding(s)}}_lendAction(t){let e=this._actions,i=t._cacheIndex,a=this._nActiveActions++,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=i,e[i]=s}_takeBackAction(t){let e=this._actions,i=t._cacheIndex,a=--this._nActiveActions,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=i,e[i]=s}_addInactiveBinding(t,e,i){let a=this._bindingsByRootAndName,s=this._bindings,o=a[e];o===void 0&amp;&amp;(o={},a[e]=o),o[i]=t,t._cacheIndex=s.length,s.push(t)}_removeInactiveBinding(t){let e=this._bindings,i=t.binding,a=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,u=o[a],c=e[e.length-1],h=t._cacheIndex;c._cacheIndex=h,e[h]=c,e.pop(),delete u[s],Object.keys(u).length===0&amp;&amp;delete o[a]}_lendBinding(t){let e=this._bindings,i=t._cacheIndex,a=this._nActiveBindings++,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=i,e[i]=s}_takeBackBinding(t){let e=this._bindings,i=t._cacheIndex,a=--this._nActiveBindings,s=e[a];t._cacheIndex=a,e[a]=t,s._cacheIndex=i,e[i]=s}_lendControlInterpolant(){let t=this._controlInterpolants,e=this._nActiveControlInterpolants++,i=t[e];return i===void 0&amp;&amp;(i=new uh(new Float32Array(2),new Float32Array(2),1,Q5),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){let e=this._controlInterpolants,i=t.__cacheIndex,a=--this._nActiveControlInterpolants,s=e[a];t.__cacheIndex=a,e[a]=t,s.__cacheIndex=i,e[i]=s}clipAction(t,e,i){let a=e||this._root,s=a.uuid,o=typeof t==&quot;string&quot;?dl.findByName(a,t):t,u=o!==null?o.uuid:t,c=this._actionsByClip[u],h=null;if(i===void 0&amp;&amp;(o!==null?i=o.blendMode:i=Bg),c!==void 0){let m=c.actionByRoot[s];if(m!==void 0&amp;&amp;m.blendMode===i)return m;h=c.knownActions[0],o===null&amp;&amp;(o=h._clip)}if(o===null)return null;let d=new Zm(this,o,e,i);return this._bindAction(d,h),this._addInactiveAction(d,u,s),d}existingAction(t,e){let i=e||this._root,a=i.uuid,s=typeof t==&quot;string&quot;?dl.findByName(i,t):t,o=s?s.uuid:t,u=this._actionsByClip[o];return u!==void 0&amp;&amp;u.actionByRoot[a]||null}stopAllAction(){let t=this._actions,e=this._nActiveActions;for(let i=e-1;i&gt;=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;let e=this._actions,i=this._nActiveActions,a=this.time+=t,s=Math.sign(t),o=this._accuIndex^=1;for(let h=0;h!==i;++h)e[h]._update(a,t,s,o);let u=this._bindings,c=this._nActiveBindings;for(let h=0;h!==c;++h)u[h].apply(o);return this}setTime(t){this.time=0;for(let e=0;e&lt;this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){let e=this._actions,i=t.uuid,a=this._actionsByClip,s=a[i];if(s!==void 0){let o=s.knownActions;for(let u=0,c=o.length;u!==c;++u){let h=o[u];this._deactivateAction(h);let d=h._cacheIndex,m=e[e.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,m._cacheIndex=d,e[d]=m,e.pop(),this._removeInactiveBindingsForAction(h)}delete a[i]}}uncacheRoot(t){let e=t.uuid,i=this._actionsByClip;for(let o in i){let u=i[o].actionByRoot,c=u[e];c!==void 0&amp;&amp;(this._deactivateAction(c),this._removeInactiveAction(c))}let a=this._bindingsByRootAndName,s=a[e];if(s!==void 0)for(let o in s){let u=s[o];u.restoreOriginalState(),this._removeInactiveBinding(u)}}uncacheAction(t,e){let i=this.existingAction(t,e);i!==null&amp;&amp;(this._deactivateAction(i),this._removeInactiveAction(i))}},b_=class extends Xf{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Su(null,t,e,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}},T_=class n{constructor(t){this.value=t}clone(){return new n(this.value.clone===void 0?this.value:this.value.clone())}},K5=0,A_=class extends La{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,&quot;id&quot;,{value:K5++}),this.name=&quot;&quot;,this.usage=Vf,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){let e=this.uniforms.indexOf(t);return e!==-1&amp;&amp;this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:&quot;dispose&quot;})}copy(t){this.name=t.name,this.usage=t.usage;let e=t.uniforms;this.uniforms.length=0;for(let i=0,a=e.length;i&lt;a;i++){let s=Array.isArray(e[i])?e[i]:[e[i]];for(let o=0;o&lt;s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}},R_=class extends Tu{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){let e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){let e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}},C_=class{constructor(t,e,i,a,s,o=!1){this.isGLBufferAttribute=!0,this.name=&quot;&quot;,this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=a,this.count=s,this.normalized=o,this.version=0}set needsUpdate(t){t===!0&amp;&amp;this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}},xN=new fe,ph=class{constructor(t,e,i=0,a=1/0){this.ray=new jr(t,e),this.near=i,this.far=a,this.camera=null,this.layers=new nr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error(&quot;THREE.Raycaster: Unsupported camera type: &quot;+e.type)}setFromXRController(t){return xN.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(xN),this}intersectObject(t,e=!0,i=[]){return Fb(t,this,i,e),i.sort(SN),i}intersectObjects(t,e=!0,i=[]){for(let a=0,s=t.length;a&lt;s;a++)Fb(t[a],this,i,e);return i.sort(SN),i}};function SN(n,t){return n.distance-t.distance}function Fb(n,t,e,i){let a=!0;if(n.layers.test(t.layers)&amp;&amp;n.raycast(t,e)===!1&amp;&amp;(a=!1),a===!0&amp;&amp;i===!0){let s=n.children;for(let o=0,u=s.length;o&lt;u;o++)Fb(s[o],t,e,!0)}}var w_=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(t){this._document=t,t.hidden!==void 0&amp;&amp;(this._pageVisibilityHandler=J5.bind(this),t.addEventListener(&quot;visibilitychange&quot;,this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&amp;&amp;(this._document.removeEventListener(&quot;visibilitychange&quot;,this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(t){return this._timescale=t,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(t){return this._pageVisibilityHandler!==null&amp;&amp;this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(t!==void 0?t:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function J5(){this._document.hidden===!1&amp;&amp;this.reset()}var D_=class{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=le(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(le(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},U_=class{constructor(t=1,e=0,i=0){this.radius=t,this.theta=e,this.y=i}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return new this.constructor().copy(this)}},N_=class n{constructor(t,e,i,a){n.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&amp;&amp;this.set(t,e,i,a)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let i=0;i&lt;4;i++)this.elements[i]=t[i+e];return this}set(t,e,i,a){let s=this.elements;return s[0]=t,s[2]=e,s[1]=i,s[3]=a,this}},MN=new ct,O_=class{constructor(t=new ct(1/0,1/0),e=new ct(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e&lt;i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=MN.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x&lt;this.min.x||this.max.y&lt;this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x&gt;=this.min.x&amp;&amp;t.x&lt;=this.max.x&amp;&amp;t.y&gt;=this.min.y&amp;&amp;t.y&lt;=this.max.y}containsBox(t){return this.min.x&lt;=t.min.x&amp;&amp;t.max.x&lt;=this.max.x&amp;&amp;this.min.y&lt;=t.min.y&amp;&amp;t.max.y&lt;=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x&gt;=this.min.x&amp;&amp;t.min.x&lt;=this.max.x&amp;&amp;t.max.y&gt;=this.min.y&amp;&amp;t.min.y&lt;=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,MN).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&amp;&amp;this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&amp;&amp;t.max.equals(this.max)}},EN=new B,Iy=new B,Nf=new B,Of=new B,Ab=new B,$5=new B,tF=new B,L_=class{constructor(t=new B,e=new B){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){EN.subVectors(t,this.start),Iy.subVectors(this.end,this.start);let i=Iy.dot(Iy),s=Iy.dot(EN)/i;return e&amp;&amp;(s=le(s,0,1)),s}closestPointToPoint(t,e,i){let a=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(a).add(this.start)}distanceSqToLine3(t,e=$5,i=tF){let a=10000000000000001e-32,s,o,u=this.start,c=t.start,h=this.end,d=t.end;Nf.subVectors(h,u),Of.subVectors(d,c),Ab.subVectors(u,c);let m=Nf.dot(Nf),g=Of.dot(Of),y=Of.dot(Ab);if(m&lt;=a&amp;&amp;g&lt;=a)return e.copy(u),i.copy(c),e.sub(i),e.dot(e);if(m&lt;=a)s=0,o=y/g,o=le(o,0,1);else{let x=Nf.dot(Ab);if(g&lt;=a)o=0,s=le(-x/m,0,1);else{let b=Nf.dot(Of),M=m*g-b*b;M!==0?s=le((b*y-x*g)/M,0,1):s=0,o=(b*s+y)/g,o&lt;0?(o=0,s=le(-x/m,0,1)):o&gt;1&amp;&amp;(o=1,s=le((b-x)/m,0,1))}}return e.copy(u).add(Nf.multiplyScalar(s)),i.copy(c).add(Of.multiplyScalar(o)),e.sub(i),e.dot(e)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&amp;&amp;t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},bN=new B,z_=class extends Ie{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type=&quot;SpotLightHelper&quot;;let i=new ve,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,u=1,c=32;o&lt;c;o++,u++){let h=o/c*Math.PI*2,d=u/c*Math.PI*2;a.push(Math.cos(h),Math.sin(h),1,Math.cos(d),Math.sin(d),1)}i.setAttribute(&quot;position&quot;,new Xt(a,3));let s=new ui({fog:!1,toneMapped:!1});this.cone=new Ba(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),bN.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(bN),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},tl=new B,Hy=new fe,Rb=new fe,B_=class extends Ba{constructor(t){let e=TO(t),i=new ve,a=[],s=[];for(let h=0;h&lt;e.length;h++){let d=e[h];d.parent&amp;&amp;d.parent.isBone&amp;&amp;(a.push(0,0,0),a.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}i.setAttribute(&quot;position&quot;,new Xt(a,3)),i.setAttribute(&quot;color&quot;,new Xt(s,3));let o=new ui({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,o),this.isSkeletonHelper=!0,this.type=&quot;SkeletonHelper&quot;,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1;let u=new Bt(255),c=new Bt(65280);this.setColors(u,c)}updateMatrixWorld(t){let e=this.bones,i=this.geometry,a=i.getAttribute(&quot;position&quot;);Rb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s&lt;e.length;s++){let u=e[s];u.parent&amp;&amp;u.parent.isBone&amp;&amp;(Hy.multiplyMatrices(Rb,u.matrixWorld),tl.setFromMatrixPosition(Hy),a.setXYZ(o,tl.x,tl.y,tl.z),Hy.multiplyMatrices(Rb,u.parent.matrixWorld),tl.setFromMatrixPosition(Hy),a.setXYZ(o+1,tl.x,tl.y,tl.z),o+=2)}i.getAttribute(&quot;position&quot;).needsUpdate=!0,super.updateMatrixWorld(t)}setColors(t,e){let a=this.geometry.getAttribute(&quot;color&quot;);for(let s=0;s&lt;a.count;s+=2)a.setXYZ(s,t.r,t.g,t.b),a.setXYZ(s+1,e.r,e.g,e.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}};function TO(n){let t=[];n.isBone===!0&amp;&amp;t.push(n);for(let e=0;e&lt;n.children.length;e++)t.push(...TO(n.children[e]));return t}var P_=class extends En{constructor(t,e,i){let a=new sh(e,4,2),s=new Rs({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=t,this.color=i,this.type=&quot;PointLightHelper&quot;,this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},eF=new B,TN=new Bt,AN=new Bt,I_=class extends Ie{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type=&quot;HemisphereLightHelper&quot;;let a=new ah(e);a.rotateY(Math.PI*.5),this.material=new Rs({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&amp;&amp;(this.material.vertexColors=!0);let s=a.getAttribute(&quot;position&quot;),o=new Float32Array(s.count*3);a.setAttribute(&quot;color&quot;,new Xe(o,3)),this.add(new En(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{let e=t.geometry.getAttribute(&quot;color&quot;);TN.copy(this.light.color),AN.copy(this.light.groundColor);for(let i=0,a=e.count;i&lt;a;i++){let s=i&lt;a/2?TN:AN;e.setXYZ(i,s.r,s.g,s.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(eF.setFromMatrixPosition(this.light.matrixWorld).negate())}},H_=class extends Ba{constructor(t=10,e=10,i=4473924,a=8947848){i=new Bt(i),a=new Bt(a);let s=e/2,o=t/e,u=t/2,c=[],h=[];for(let g=0,y=0,x=-u;g&lt;=e;g++,x+=o){c.push(-u,0,x,u,0,x),c.push(x,0,-u,x,0,u);let b=g===s?i:a;b.toArray(h,y),y+=3,b.toArray(h,y),y+=3,b.toArray(h,y),y+=3,b.toArray(h,y),y+=3}let d=new ve;d.setAttribute(&quot;position&quot;,new Xt(c,3)),d.setAttribute(&quot;color&quot;,new Xt(h,3));let m=new ui({vertexColors:!0,toneMapped:!1});super(d,m),this.type=&quot;GridHelper&quot;}dispose(){this.geometry.dispose(),this.material.dispose()}},F_=class extends Ba{constructor(t=10,e=16,i=8,a=64,s=4473924,o=8947848){s=new Bt(s),o=new Bt(o);let u=[],c=[];if(e&gt;1)for(let m=0;m&lt;e;m++){let g=m/e*(Math.PI*2),y=Math.sin(g)*t,x=Math.cos(g)*t;u.push(0,0,0),u.push(y,0,x);let b=m&amp;1?s:o;c.push(b.r,b.g,b.b),c.push(b.r,b.g,b.b)}for(let m=0;m&lt;i;m++){let g=m&amp;1?s:o,y=t-t/i*m;for(let x=0;x&lt;a;x++){let b=x/a*(Math.PI*2),M=Math.sin(b)*y,v=Math.cos(b)*y;u.push(M,0,v),c.push(g.r,g.g,g.b),b=(x+1)/a*(Math.PI*2),M=Math.sin(b)*y,v=Math.cos(b)*y,u.push(M,0,v),c.push(g.r,g.g,g.b)}}let h=new ve;h.setAttribute(&quot;position&quot;,new Xt(u,3)),h.setAttribute(&quot;color&quot;,new Xt(c,3));let d=new ui({vertexColors:!0,toneMapped:!1});super(h,d),this.type=&quot;PolarGridHelper&quot;}dispose(){this.geometry.dispose(),this.material.dispose()}},RN=new B,Fy=new B,CN=new B,V_=class extends Ie{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type=&quot;DirectionalLightHelper&quot;,e===void 0&amp;&amp;(e=1);let a=new ve;a.setAttribute(&quot;position&quot;,new Xt([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));let s=new ui({fog:!1,toneMapped:!1});this.lightPlane=new Cs(a,s),this.add(this.lightPlane),a=new ve,a.setAttribute(&quot;position&quot;,new Xt([0,0,0,0,0,1],3)),this.targetLine=new Cs(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),RN.setFromMatrixPosition(this.light.matrixWorld),Fy.setFromMatrixPosition(this.light.target.matrixWorld),CN.subVectors(Fy,RN),this.lightPlane.lookAt(Fy),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Fy),this.targetLine.scale.z=CN.length()}},Vy=new B,Dn=new Mu,G_=class extends Ba{constructor(t){let e=new ve,i=new ui({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],o={};u(&quot;n1&quot;,&quot;n2&quot;),u(&quot;n2&quot;,&quot;n4&quot;),u(&quot;n4&quot;,&quot;n3&quot;),u(&quot;n3&quot;,&quot;n1&quot;),u(&quot;f1&quot;,&quot;f2&quot;),u(&quot;f2&quot;,&quot;f4&quot;),u(&quot;f4&quot;,&quot;f3&quot;),u(&quot;f3&quot;,&quot;f1&quot;),u(&quot;n1&quot;,&quot;f1&quot;),u(&quot;n2&quot;,&quot;f2&quot;),u(&quot;n3&quot;,&quot;f3&quot;),u(&quot;n4&quot;,&quot;f4&quot;),u(&quot;p&quot;,&quot;n1&quot;),u(&quot;p&quot;,&quot;n2&quot;),u(&quot;p&quot;,&quot;n3&quot;),u(&quot;p&quot;,&quot;n4&quot;),u(&quot;u1&quot;,&quot;u2&quot;),u(&quot;u2&quot;,&quot;u3&quot;),u(&quot;u3&quot;,&quot;u1&quot;),u(&quot;c&quot;,&quot;t&quot;),u(&quot;p&quot;,&quot;c&quot;),u(&quot;cn1&quot;,&quot;cn2&quot;),u(&quot;cn3&quot;,&quot;cn4&quot;),u(&quot;cf1&quot;,&quot;cf2&quot;),u(&quot;cf3&quot;,&quot;cf4&quot;);function u(x,b){c(x),c(b)}function c(x){a.push(0,0,0),s.push(0,0,0),o[x]===void 0&amp;&amp;(o[x]=[]),o[x].push(a.length/3-1)}e.setAttribute(&quot;position&quot;,new Xt(a,3)),e.setAttribute(&quot;color&quot;,new Xt(s,3)),super(e,i),this.type=&quot;CameraHelper&quot;,this.camera=t,this.camera.updateProjectionMatrix&amp;&amp;this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();let h=new Bt(16755200),d=new Bt(16711680),m=new Bt(43775),g=new Bt(16777215),y=new Bt(3355443);this.setColors(h,d,m,g,y)}setColors(t,e,i,a,s){let u=this.geometry.getAttribute(&quot;color&quot;);return u.setXYZ(0,t.r,t.g,t.b),u.setXYZ(1,t.r,t.g,t.b),u.setXYZ(2,t.r,t.g,t.b),u.setXYZ(3,t.r,t.g,t.b),u.setXYZ(4,t.r,t.g,t.b),u.setXYZ(5,t.r,t.g,t.b),u.setXYZ(6,t.r,t.g,t.b),u.setXYZ(7,t.r,t.g,t.b),u.setXYZ(8,t.r,t.g,t.b),u.setXYZ(9,t.r,t.g,t.b),u.setXYZ(10,t.r,t.g,t.b),u.setXYZ(11,t.r,t.g,t.b),u.setXYZ(12,t.r,t.g,t.b),u.setXYZ(13,t.r,t.g,t.b),u.setXYZ(14,t.r,t.g,t.b),u.setXYZ(15,t.r,t.g,t.b),u.setXYZ(16,t.r,t.g,t.b),u.setXYZ(17,t.r,t.g,t.b),u.setXYZ(18,t.r,t.g,t.b),u.setXYZ(19,t.r,t.g,t.b),u.setXYZ(20,t.r,t.g,t.b),u.setXYZ(21,t.r,t.g,t.b),u.setXYZ(22,t.r,t.g,t.b),u.setXYZ(23,t.r,t.g,t.b),u.setXYZ(24,e.r,e.g,e.b),u.setXYZ(25,e.r,e.g,e.b),u.setXYZ(26,e.r,e.g,e.b),u.setXYZ(27,e.r,e.g,e.b),u.setXYZ(28,e.r,e.g,e.b),u.setXYZ(29,e.r,e.g,e.b),u.setXYZ(30,e.r,e.g,e.b),u.setXYZ(31,e.r,e.g,e.b),u.setXYZ(32,i.r,i.g,i.b),u.setXYZ(33,i.r,i.g,i.b),u.setXYZ(34,i.r,i.g,i.b),u.setXYZ(35,i.r,i.g,i.b),u.setXYZ(36,i.r,i.g,i.b),u.setXYZ(37,i.r,i.g,i.b),u.setXYZ(38,a.r,a.g,a.b),u.setXYZ(39,a.r,a.g,a.b),u.setXYZ(40,s.r,s.g,s.b),u.setXYZ(41,s.r,s.g,s.b),u.setXYZ(42,s.r,s.g,s.b),u.setXYZ(43,s.r,s.g,s.b),u.setXYZ(44,s.r,s.g,s.b),u.setXYZ(45,s.r,s.g,s.b),u.setXYZ(46,s.r,s.g,s.b),u.setXYZ(47,s.r,s.g,s.b),u.setXYZ(48,s.r,s.g,s.b),u.setXYZ(49,s.r,s.g,s.b),u.needsUpdate=!0,this}update(){let t=this.geometry,e=this.pointMap,i=1,a=1,s,o;if(Dn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===aa)s=-1,o=1;else if(this.camera.coordinateSystem===vu)s=0,o=1;else throw new Error(&quot;THREE.CameraHelper.update(): Invalid coordinate system: &quot;+this.camera.coordinateSystem);Ln(&quot;c&quot;,e,t,Dn,0,0,s),Ln(&quot;t&quot;,e,t,Dn,0,0,o),Ln(&quot;n1&quot;,e,t,Dn,-i,-a,s),Ln(&quot;n2&quot;,e,t,Dn,i,-a,s),Ln(&quot;n3&quot;,e,t,Dn,-i,a,s),Ln(&quot;n4&quot;,e,t,Dn,i,a,s),Ln(&quot;f1&quot;,e,t,Dn,-i,-a,o),Ln(&quot;f2&quot;,e,t,Dn,i,-a,o),Ln(&quot;f3&quot;,e,t,Dn,-i,a,o),Ln(&quot;f4&quot;,e,t,Dn,i,a,o),Ln(&quot;u1&quot;,e,t,Dn,i*.7,a*1.1,s),Ln(&quot;u2&quot;,e,t,Dn,-i*.7,a*1.1,s),Ln(&quot;u3&quot;,e,t,Dn,0,a*2,s),Ln(&quot;cf1&quot;,e,t,Dn,-i,0,o),Ln(&quot;cf2&quot;,e,t,Dn,i,0,o),Ln(&quot;cf3&quot;,e,t,Dn,0,-a,o),Ln(&quot;cf4&quot;,e,t,Dn,0,a,o),Ln(&quot;cn1&quot;,e,t,Dn,-i,0,s),Ln(&quot;cn2&quot;,e,t,Dn,i,0,s),Ln(&quot;cn3&quot;,e,t,Dn,0,-a,s),Ln(&quot;cn4&quot;,e,t,Dn,0,a,s),t.getAttribute(&quot;position&quot;).needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Ln(n,t,e,i,a,s,o){Vy.set(a,s,o).unproject(i);let u=t[n];if(u!==void 0){let c=e.getAttribute(&quot;position&quot;);for(let h=0,d=u.length;h&lt;d;h++)c.setXYZ(u[h],Vy.x,Vy.y,Vy.z)}}var Gy=new Zn,X_=class extends Ba{constructor(t,e=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new ve;s.setIndex(new Xe(i,1)),s.setAttribute(&quot;position&quot;,new Xe(a,3)),super(s,new ui({color:e,toneMapped:!1})),this.object=t,this.type=&quot;BoxHelper&quot;,this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&amp;&amp;Gy.setFromObject(this.object),Gy.isEmpty())return;let t=Gy.min,e=Gy.max,i=this.geometry.attributes.position,a=i.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=t.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=e.z,a[9]=e.x,a[10]=t.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=t.z,a[15]=t.x,a[16]=e.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=e.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},q_=class extends Ba{constructor(t,e=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new ve;s.setIndex(new Xe(i,1)),s.setAttribute(&quot;position&quot;,new Xt(a,3)),super(s,new ui({color:e,toneMapped:!1})),this.box=t,this.type=&quot;Box3Helper&quot;,this.geometry.computeBoundingSphere()}updateMatrixWorld(t){let e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}},Y_=class extends Cs{constructor(t,e=1,i=16776960){let a=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new ve;o.setAttribute(&quot;position&quot;,new Xt(s,3)),o.computeBoundingSphere(),super(o,new ui({color:a,toneMapped:!1})),this.type=&quot;PlaneHelper&quot;,this.plane=t,this.size=e;let u=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new ve;c.setAttribute(&quot;position&quot;,new Xt(u,3)),c.computeBoundingSphere(),this.add(new En(c,new Rs({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},wN=new B,Xy,Cb,W_=class extends Ie{constructor(t=new B(0,0,1),e=new B(0,0,0),i=1,a=16776960,s=i*.2,o=s*.2){super(),this.type=&quot;ArrowHelper&quot;,Xy===void 0&amp;&amp;(Xy=new ve,Xy.setAttribute(&quot;position&quot;,new Xt([0,0,0,0,1,0],3)),Cb=new Kf(.5,1,5,1),Cb.translate(0,-.5,0)),this.position.copy(e),this.line=new Cs(Xy,new ui({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new En(Cb,new Rs({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,s,o)}setDirection(t){if(t.y&gt;.99999)this.quaternion.set(0,0,0,1);else if(t.y&lt;-.99999)this.quaternion.set(1,0,0,0);else{wN.set(t.z,0,-t.x).normalize();let e=Math.acos(t.y);this.quaternion.setFromAxisAngle(wN,e)}}setLength(t,e=t*.2,i=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},k_=class extends Ba{constructor(t=1){let e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new ve;a.setAttribute(&quot;position&quot;,new Xt(e,3)),a.setAttribute(&quot;color&quot;,new Xt(i,3));let s=new ui({vertexColors:!0,toneMapped:!1});super(a,s),this.type=&quot;AxesHelper&quot;}setColors(t,e,i){let a=new Bt,s=this.geometry.attributes.color.array;return a.set(t),a.toArray(s,0),a.toArray(s,3),a.set(e),a.toArray(s,6),a.toArray(s,9),a.set(i),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},Z_=class{constructor(){this.type=&quot;ShapePath&quot;,this.color=new Bt,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Cu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,a){return this.currentPath.quadraticCurveTo(t,e,i,a),this}bezierCurveTo(t,e,i,a,s,o){return this.currentPath.bezierCurveTo(t,e,i,a,s,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(v){let S=[];for(let E=0,T=v.length;E&lt;T;E++){let w=v[E],U=new $s;U.curves=w.curves,S.push(U)}return S}function i(v,S){let E=S.length,T=!1;for(let w=E-1,U=0;U&lt;E;w=U++){let O=S[w],z=S[U],C=z.x-O.x,R=z.y-O.y;if(Math.abs(R)&gt;Number.EPSILON){if(R&lt;0&amp;&amp;(O=S[U],C=-C,z=S[w],R=-R),v.y&lt;O.y||v.y&gt;z.y)continue;if(v.y===O.y){if(v.x===O.x)return!0}else{let P=R*(v.x-O.x)-C*(v.y-O.y);if(P===0)return!0;if(P&lt;0)continue;T=!T}}else{if(v.y!==O.y)continue;if(z.x&lt;=v.x&amp;&amp;v.x&lt;=O.x||O.x&lt;=v.x&amp;&amp;v.x&lt;=z.x)return!0}}return T}let a=os.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,u,c,h=[];if(s.length===1)return u=s[0],c=new $s,c.curves=u.curves,h.push(c),h;let d=!a(s[0].getPoints());d=t?!d:d;let m=[],g=[],y=[],x=0,b;g[x]=void 0,y[x]=[];for(let v=0,S=s.length;v&lt;S;v++)u=s[v],b=u.getPoints(),o=a(b),o=t?!o:o,o?(!d&amp;&amp;g[x]&amp;&amp;x++,g[x]={s:new $s,p:b},g[x].s.curves=u.curves,d&amp;&amp;x++,y[x]=[]):y[x].push({h:u,p:b[0]});if(!g[0])return e(s);if(g.length&gt;1){let v=!1,S=0;for(let E=0,T=g.length;E&lt;T;E++)m[E]=[];for(let E=0,T=g.length;E&lt;T;E++){let w=y[E];for(let U=0;U&lt;w.length;U++){let O=w[U],z=!0;for(let C=0;C&lt;g.length;C++)i(O.p,g[C].p)&amp;&amp;(E!==C&amp;&amp;S++,z?(z=!1,m[C].push(O)):v=!0);z&amp;&amp;m[E].push(O)}}S&gt;0&amp;&amp;v===!1&amp;&amp;(y=m)}let M;for(let v=0,S=g.length;v&lt;S;v++){c=g[v].s,h.push(c),M=y[v];for(let E=0,T=M.length;E&lt;T;E++)c.holes.push(M[E].h)}return h}},j_=class extends La{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn(&quot;THREE.Controls: connect() now requires an element.&quot;);return}this.domElement!==null&amp;&amp;this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}};function nF(n,t){let e=n.image&amp;&amp;n.image.width?n.image.width/n.image.height:1;return e&gt;t?(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function iF(n,t){let e=n.image&amp;&amp;n.image.width?n.image.width/n.image.height:1;return e&gt;t?(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function aF(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function dx(n,t,e,i){let a=sF(i);switch(e){case rx:return n*t;case og:return n*t/a.components*a.byteLength;case xh:return n*t/a.components*a.byteLength;case lx:return n*t*2/a.components*a.byteLength;case lg:return n*t*2/a.components*a.byteLength;case ox:return n*t*3/a.components*a.byteLength;case li:return n*t*4/a.components*a.byteLength;case ug:return n*t*4/a.components*a.byteLength;case Sh:case Mh:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case Eh:case bh:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case fg:case dg:return Math.max(n,16)*Math.max(t,8)/4;case cg:case hg:return Math.max(n,8)*Math.max(t,8)/2;case pg:case mg:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case gg:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case vg:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case yg:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case _g:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case xg:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case Sg:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case Mg:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case Eg:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case bg:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case Tg:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case Ag:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case Rg:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case Cg:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case wg:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case Dg:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case Th:case Ug:case Ng:return Math.ceil(n/4)*Math.ceil(t/4)*16;case ux:case Og:return Math.ceil(n/4)*Math.ceil(t/4)*8;case Lg:case zg:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function sF(n){switch(n){case la:case ix:return{byteLength:1,components:1};case zu:case ax:case Bu:return{byteLength:2,components:1};case sg:case rg:return{byteLength:2,components:4};case or:case ag:case qi:return{byteLength:4,components:1};case sx:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}var Q_=class{static contain(t,e){return nF(t,e)}static cover(t,e){return iF(t,e)}static fill(t){return aF(t)}static getByteLength(t,e,i,a){return dx(t,e,i,a)}};typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;register&quot;,{detail:{revision:&quot;179&quot;}}));typeof window&lt;&quot;u&quot;&amp;&amp;(window.__THREE__?console.warn(&quot;WARNING: Multiple instances of Three.js being imported.&quot;):window.__THREE__=&quot;179&quot;);function jO(){let n=null,t=!1,e=null,i=null;function a(s,o){e(s,o),i=n.requestAnimationFrame(a)}return{start:function(){t!==!0&amp;&amp;e!==null&amp;&amp;(i=n.requestAnimationFrame(a),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){n=s}}}function rF(n){let t=new WeakMap;function e(u,c){let h=u.array,d=u.usage,m=h.byteLength,g=n.createBuffer();n.bindBuffer(c,g),n.bufferData(c,h,d),u.onUploadCallback();let y;if(h instanceof Float32Array)y=n.FLOAT;else if(typeof Float16Array&lt;&quot;u&quot;&amp;&amp;h instanceof Float16Array)y=n.HALF_FLOAT;else if(h instanceof Uint16Array)u.isFloat16BufferAttribute?y=n.HALF_FLOAT:y=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)y=n.SHORT;else if(h instanceof Uint32Array)y=n.UNSIGNED_INT;else if(h instanceof Int32Array)y=n.INT;else if(h instanceof Int8Array)y=n.BYTE;else if(h instanceof Uint8Array)y=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)y=n.UNSIGNED_BYTE;else throw new Error(&quot;THREE.WebGLAttributes: Unsupported buffer data format: &quot;+h);return{buffer:g,type:y,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version,size:m}}function i(u,c,h){let d=c.array,m=c.updateRanges;if(n.bindBuffer(h,u),m.length===0)n.bufferSubData(h,0,d);else{m.sort((y,x)=&gt;y.start-x.start);let g=0;for(let y=1;y&lt;m.length;y++){let x=m[g],b=m[y];b.start&lt;=x.start+x.count+1?x.count=Math.max(x.count,b.start+b.count-x.start):(++g,m[g]=b)}m.length=g+1;for(let y=0,x=m.length;y&lt;x;y++){let b=m[y];n.bufferSubData(h,b.start*d.BYTES_PER_ELEMENT,d,b.start,b.count)}c.clearUpdateRanges()}c.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&amp;&amp;(u=u.data),t.get(u)}function s(u){u.isInterleavedBufferAttribute&amp;&amp;(u=u.data);let c=t.get(u);c&amp;&amp;(n.deleteBuffer(c.buffer),t.delete(u))}function o(u,c){if(u.isInterleavedBufferAttribute&amp;&amp;(u=u.data),u.isGLBufferAttribute){let d=t.get(u);(!d||d.version&lt;u.version)&amp;&amp;t.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}let h=t.get(u);if(h===void 0)t.set(u,e(u,c));else if(h.version&lt;u.version){if(h.size!==u.array.byteLength)throw new Error(&quot;THREE.WebGLAttributes: The size of the buffer attribute&#39;s array buffer does not match the original size. Resizing buffer attributes is not supported.&quot;);i(h.buffer,u,c),h.version=u.version}}return{get:a,remove:s,update:o}}var oF=`#ifdef USE_ALPHAHASH
<a href="#l60" class="line" id="l60">     60</a> 	if ( diffuseColor.a &lt; getAlphaHashThreshold( vPosition ) ) discard;
<a href="#l61" class="line" id="l61">     61</a> #endif`,lF=`#ifdef USE_ALPHAHASH
<a href="#l62" class="line" id="l62">     62</a> 	const float ALPHA_HASH_SCALE = 0.05;
<a href="#l63" class="line" id="l63">     63</a> 	float hash2D( vec2 value ) {
<a href="#l64" class="line" id="l64">     64</a> 		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
<a href="#l65" class="line" id="l65">     65</a> 	}
<a href="#l66" class="line" id="l66">     66</a> 	float hash3D( vec3 value ) {
<a href="#l67" class="line" id="l67">     67</a> 		return hash2D( vec2( hash2D( value.xy ), value.z ) );
<a href="#l68" class="line" id="l68">     68</a> 	}
<a href="#l69" class="line" id="l69">     69</a> 	float getAlphaHashThreshold( vec3 position ) {
<a href="#l70" class="line" id="l70">     70</a> 		float maxDeriv = max(
<a href="#l71" class="line" id="l71">     71</a> 			length( dFdx( position.xyz ) ),
<a href="#l72" class="line" id="l72">     72</a> 			length( dFdy( position.xyz ) )
<a href="#l73" class="line" id="l73">     73</a> 		);
<a href="#l74" class="line" id="l74">     74</a> 		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
<a href="#l75" class="line" id="l75">     75</a> 		vec2 pixScales = vec2(
<a href="#l76" class="line" id="l76">     76</a> 			exp2( floor( log2( pixScale ) ) ),
<a href="#l77" class="line" id="l77">     77</a> 			exp2( ceil( log2( pixScale ) ) )
<a href="#l78" class="line" id="l78">     78</a> 		);
<a href="#l79" class="line" id="l79">     79</a> 		vec2 alpha = vec2(
<a href="#l80" class="line" id="l80">     80</a> 			hash3D( floor( pixScales.x * position.xyz ) ),
<a href="#l81" class="line" id="l81">     81</a> 			hash3D( floor( pixScales.y * position.xyz ) )
<a href="#l82" class="line" id="l82">     82</a> 		);
<a href="#l83" class="line" id="l83">     83</a> 		float lerpFactor = fract( log2( pixScale ) );
<a href="#l84" class="line" id="l84">     84</a> 		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
<a href="#l85" class="line" id="l85">     85</a> 		float a = min( lerpFactor, 1.0 - lerpFactor );
<a href="#l86" class="line" id="l86">     86</a> 		vec3 cases = vec3(
<a href="#l87" class="line" id="l87">     87</a> 			x * x / ( 2.0 * a * ( 1.0 - a ) ),
<a href="#l88" class="line" id="l88">     88</a> 			( x - 0.5 * a ) / ( 1.0 - a ),
<a href="#l89" class="line" id="l89">     89</a> 			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
<a href="#l90" class="line" id="l90">     90</a> 		);
<a href="#l91" class="line" id="l91">     91</a> 		float threshold = ( x &lt; ( 1.0 - a ) )
<a href="#l92" class="line" id="l92">     92</a> 			? ( ( x &lt; a ) ? cases.x : cases.y )
<a href="#l93" class="line" id="l93">     93</a> 			: cases.z;
<a href="#l94" class="line" id="l94">     94</a> 		return clamp( threshold , 1.0e-6, 1.0 );
<a href="#l95" class="line" id="l95">     95</a> 	}
<a href="#l96" class="line" id="l96">     96</a> #endif`,uF=`#ifdef USE_ALPHAMAP
<a href="#l97" class="line" id="l97">     97</a> 	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
<a href="#l98" class="line" id="l98">     98</a> #endif`,cF=`#ifdef USE_ALPHAMAP
<a href="#l99" class="line" id="l99">     99</a> 	uniform sampler2D alphaMap;
<a href="#l100" class="line" id="l100">    100</a> #endif`,fF=`#ifdef USE_ALPHATEST
<a href="#l101" class="line" id="l101">    101</a> 	#ifdef ALPHA_TO_COVERAGE
<a href="#l102" class="line" id="l102">    102</a> 	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
<a href="#l103" class="line" id="l103">    103</a> 	if ( diffuseColor.a == 0.0 ) discard;
<a href="#l104" class="line" id="l104">    104</a> 	#else
<a href="#l105" class="line" id="l105">    105</a> 	if ( diffuseColor.a &lt; alphaTest ) discard;
<a href="#l106" class="line" id="l106">    106</a> 	#endif
<a href="#l107" class="line" id="l107">    107</a> #endif`,hF=`#ifdef USE_ALPHATEST
<a href="#l108" class="line" id="l108">    108</a> 	uniform float alphaTest;
<a href="#l109" class="line" id="l109">    109</a> #endif`,dF=`#ifdef USE_AOMAP
<a href="#l110" class="line" id="l110">    110</a> 	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
<a href="#l111" class="line" id="l111">    111</a> 	reflectedLight.indirectDiffuse *= ambientOcclusion;
<a href="#l112" class="line" id="l112">    112</a> 	#if defined( USE_CLEARCOAT ) 
<a href="#l113" class="line" id="l113">    113</a> 		clearcoatSpecularIndirect *= ambientOcclusion;
<a href="#l114" class="line" id="l114">    114</a> 	#endif
<a href="#l115" class="line" id="l115">    115</a> 	#if defined( USE_SHEEN ) 
<a href="#l116" class="line" id="l116">    116</a> 		sheenSpecularIndirect *= ambientOcclusion;
<a href="#l117" class="line" id="l117">    117</a> 	#endif
<a href="#l118" class="line" id="l118">    118</a> 	#if defined( USE_ENVMAP ) &amp;&amp; defined( STANDARD )
<a href="#l119" class="line" id="l119">    119</a> 		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
<a href="#l120" class="line" id="l120">    120</a> 		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
<a href="#l121" class="line" id="l121">    121</a> 	#endif
<a href="#l122" class="line" id="l122">    122</a> #endif`,pF=`#ifdef USE_AOMAP
<a href="#l123" class="line" id="l123">    123</a> 	uniform sampler2D aoMap;
<a href="#l124" class="line" id="l124">    124</a> 	uniform float aoMapIntensity;
<a href="#l125" class="line" id="l125">    125</a> #endif`,mF=`#ifdef USE_BATCHING
<a href="#l126" class="line" id="l126">    126</a> 	#if ! defined( GL_ANGLE_multi_draw )
<a href="#l127" class="line" id="l127">    127</a> 	#define gl_DrawID _gl_DrawID
<a href="#l128" class="line" id="l128">    128</a> 	uniform int _gl_DrawID;
<a href="#l129" class="line" id="l129">    129</a> 	#endif
<a href="#l130" class="line" id="l130">    130</a> 	uniform highp sampler2D batchingTexture;
<a href="#l131" class="line" id="l131">    131</a> 	uniform highp usampler2D batchingIdTexture;
<a href="#l132" class="line" id="l132">    132</a> 	mat4 getBatchingMatrix( const in float i ) {
<a href="#l133" class="line" id="l133">    133</a> 		int size = textureSize( batchingTexture, 0 ).x;
<a href="#l134" class="line" id="l134">    134</a> 		int j = int( i ) * 4;
<a href="#l135" class="line" id="l135">    135</a> 		int x = j % size;
<a href="#l136" class="line" id="l136">    136</a> 		int y = j / size;
<a href="#l137" class="line" id="l137">    137</a> 		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
<a href="#l138" class="line" id="l138">    138</a> 		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
<a href="#l139" class="line" id="l139">    139</a> 		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
<a href="#l140" class="line" id="l140">    140</a> 		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
<a href="#l141" class="line" id="l141">    141</a> 		return mat4( v1, v2, v3, v4 );
<a href="#l142" class="line" id="l142">    142</a> 	}
<a href="#l143" class="line" id="l143">    143</a> 	float getIndirectIndex( const in int i ) {
<a href="#l144" class="line" id="l144">    144</a> 		int size = textureSize( batchingIdTexture, 0 ).x;
<a href="#l145" class="line" id="l145">    145</a> 		int x = i % size;
<a href="#l146" class="line" id="l146">    146</a> 		int y = i / size;
<a href="#l147" class="line" id="l147">    147</a> 		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
<a href="#l148" class="line" id="l148">    148</a> 	}
<a href="#l149" class="line" id="l149">    149</a> #endif
<a href="#l150" class="line" id="l150">    150</a> #ifdef USE_BATCHING_COLOR
<a href="#l151" class="line" id="l151">    151</a> 	uniform sampler2D batchingColorTexture;
<a href="#l152" class="line" id="l152">    152</a> 	vec3 getBatchingColor( const in float i ) {
<a href="#l153" class="line" id="l153">    153</a> 		int size = textureSize( batchingColorTexture, 0 ).x;
<a href="#l154" class="line" id="l154">    154</a> 		int j = int( i );
<a href="#l155" class="line" id="l155">    155</a> 		int x = j % size;
<a href="#l156" class="line" id="l156">    156</a> 		int y = j / size;
<a href="#l157" class="line" id="l157">    157</a> 		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
<a href="#l158" class="line" id="l158">    158</a> 	}
<a href="#l159" class="line" id="l159">    159</a> #endif`,gF=`#ifdef USE_BATCHING
<a href="#l160" class="line" id="l160">    160</a> 	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
<a href="#l161" class="line" id="l161">    161</a> #endif`,vF=`vec3 transformed = vec3( position );
<a href="#l162" class="line" id="l162">    162</a> #ifdef USE_ALPHAHASH
<a href="#l163" class="line" id="l163">    163</a> 	vPosition = vec3( position );
<a href="#l164" class="line" id="l164">    164</a> #endif`,yF=`vec3 objectNormal = vec3( normal );
<a href="#l165" class="line" id="l165">    165</a> #ifdef USE_TANGENT
<a href="#l166" class="line" id="l166">    166</a> 	vec3 objectTangent = vec3( tangent.xyz );
<a href="#l167" class="line" id="l167">    167</a> #endif`,_F=`float G_BlinnPhong_Implicit( ) {
<a href="#l168" class="line" id="l168">    168</a> 	return 0.25;
<a href="#l169" class="line" id="l169">    169</a> }
<a href="#l170" class="line" id="l170">    170</a> float D_BlinnPhong( const in float shininess, const in float dotNH ) {
<a href="#l171" class="line" id="l171">    171</a> 	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
<a href="#l172" class="line" id="l172">    172</a> }
<a href="#l173" class="line" id="l173">    173</a> vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
<a href="#l174" class="line" id="l174">    174</a> 	vec3 halfDir = normalize( lightDir + viewDir );
<a href="#l175" class="line" id="l175">    175</a> 	float dotNH = saturate( dot( normal, halfDir ) );
<a href="#l176" class="line" id="l176">    176</a> 	float dotVH = saturate( dot( viewDir, halfDir ) );
<a href="#l177" class="line" id="l177">    177</a> 	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
<a href="#l178" class="line" id="l178">    178</a> 	float G = G_BlinnPhong_Implicit( );
<a href="#l179" class="line" id="l179">    179</a> 	float D = D_BlinnPhong( shininess, dotNH );
<a href="#l180" class="line" id="l180">    180</a> 	return F * ( G * D );
<a href="#l181" class="line" id="l181">    181</a> } // validated`,xF=`#ifdef USE_IRIDESCENCE
<a href="#l182" class="line" id="l182">    182</a> 	const mat3 XYZ_TO_REC709 = mat3(
<a href="#l183" class="line" id="l183">    183</a> 		 3.2404542, -0.9692660,  0.0556434,
<a href="#l184" class="line" id="l184">    184</a> 		-1.5371385,  1.8760108, -0.2040259,
<a href="#l185" class="line" id="l185">    185</a> 		-0.4985314,  0.0415560,  1.0572252
<a href="#l186" class="line" id="l186">    186</a> 	);
<a href="#l187" class="line" id="l187">    187</a> 	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
<a href="#l188" class="line" id="l188">    188</a> 		vec3 sqrtF0 = sqrt( fresnel0 );
<a href="#l189" class="line" id="l189">    189</a> 		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
<a href="#l190" class="line" id="l190">    190</a> 	}
<a href="#l191" class="line" id="l191">    191</a> 	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
<a href="#l192" class="line" id="l192">    192</a> 		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
<a href="#l193" class="line" id="l193">    193</a> 	}
<a href="#l194" class="line" id="l194">    194</a> 	float IorToFresnel0( float transmittedIor, float incidentIor ) {
<a href="#l195" class="line" id="l195">    195</a> 		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
<a href="#l196" class="line" id="l196">    196</a> 	}
<a href="#l197" class="line" id="l197">    197</a> 	vec3 evalSensitivity( float OPD, vec3 shift ) {
<a href="#l198" class="line" id="l198">    198</a> 		float phase = 2.0 * PI * OPD * 1.0e-9;
<a href="#l199" class="line" id="l199">    199</a> 		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
<a href="#l200" class="line" id="l200">    200</a> 		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
<a href="#l201" class="line" id="l201">    201</a> 		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
<a href="#l202" class="line" id="l202">    202</a> 		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
<a href="#l203" class="line" id="l203">    203</a> 		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
<a href="#l204" class="line" id="l204">    204</a> 		xyz /= 1.0685e-7;
<a href="#l205" class="line" id="l205">    205</a> 		vec3 rgb = XYZ_TO_REC709 * xyz;
<a href="#l206" class="line" id="l206">    206</a> 		return rgb;
<a href="#l207" class="line" id="l207">    207</a> 	}
<a href="#l208" class="line" id="l208">    208</a> 	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
<a href="#l209" class="line" id="l209">    209</a> 		vec3 I;
<a href="#l210" class="line" id="l210">    210</a> 		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
<a href="#l211" class="line" id="l211">    211</a> 		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
<a href="#l212" class="line" id="l212">    212</a> 		float cosTheta2Sq = 1.0 - sinTheta2Sq;
<a href="#l213" class="line" id="l213">    213</a> 		if ( cosTheta2Sq &lt; 0.0 ) {
<a href="#l214" class="line" id="l214">    214</a> 			return vec3( 1.0 );
<a href="#l215" class="line" id="l215">    215</a> 		}
<a href="#l216" class="line" id="l216">    216</a> 		float cosTheta2 = sqrt( cosTheta2Sq );
<a href="#l217" class="line" id="l217">    217</a> 		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
<a href="#l218" class="line" id="l218">    218</a> 		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
<a href="#l219" class="line" id="l219">    219</a> 		float T121 = 1.0 - R12;
<a href="#l220" class="line" id="l220">    220</a> 		float phi12 = 0.0;
<a href="#l221" class="line" id="l221">    221</a> 		if ( iridescenceIOR &lt; outsideIOR ) phi12 = PI;
<a href="#l222" class="line" id="l222">    222</a> 		float phi21 = PI - phi12;
<a href="#l223" class="line" id="l223">    223</a> 		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
<a href="#l224" class="line" id="l224">    224</a> 		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
<a href="#l225" class="line" id="l225">    225</a> 		vec3 phi23 = vec3( 0.0 );
<a href="#l226" class="line" id="l226">    226</a> 		if ( baseIOR[ 0 ] &lt; iridescenceIOR ) phi23[ 0 ] = PI;
<a href="#l227" class="line" id="l227">    227</a> 		if ( baseIOR[ 1 ] &lt; iridescenceIOR ) phi23[ 1 ] = PI;
<a href="#l228" class="line" id="l228">    228</a> 		if ( baseIOR[ 2 ] &lt; iridescenceIOR ) phi23[ 2 ] = PI;
<a href="#l229" class="line" id="l229">    229</a> 		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
<a href="#l230" class="line" id="l230">    230</a> 		vec3 phi = vec3( phi21 ) + phi23;
<a href="#l231" class="line" id="l231">    231</a> 		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
<a href="#l232" class="line" id="l232">    232</a> 		vec3 r123 = sqrt( R123 );
<a href="#l233" class="line" id="l233">    233</a> 		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
<a href="#l234" class="line" id="l234">    234</a> 		vec3 C0 = R12 + Rs;
<a href="#l235" class="line" id="l235">    235</a> 		I = C0;
<a href="#l236" class="line" id="l236">    236</a> 		vec3 Cm = Rs - T121;
<a href="#l237" class="line" id="l237">    237</a> 		for ( int m = 1; m &lt;= 2; ++ m ) {
<a href="#l238" class="line" id="l238">    238</a> 			Cm *= r123;
<a href="#l239" class="line" id="l239">    239</a> 			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
<a href="#l240" class="line" id="l240">    240</a> 			I += Cm * Sm;
<a href="#l241" class="line" id="l241">    241</a> 		}
<a href="#l242" class="line" id="l242">    242</a> 		return max( I, vec3( 0.0 ) );
<a href="#l243" class="line" id="l243">    243</a> 	}
<a href="#l244" class="line" id="l244">    244</a> #endif`,SF=`#ifdef USE_BUMPMAP
<a href="#l245" class="line" id="l245">    245</a> 	uniform sampler2D bumpMap;
<a href="#l246" class="line" id="l246">    246</a> 	uniform float bumpScale;
<a href="#l247" class="line" id="l247">    247</a> 	vec2 dHdxy_fwd() {
<a href="#l248" class="line" id="l248">    248</a> 		vec2 dSTdx = dFdx( vBumpMapUv );
<a href="#l249" class="line" id="l249">    249</a> 		vec2 dSTdy = dFdy( vBumpMapUv );
<a href="#l250" class="line" id="l250">    250</a> 		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
<a href="#l251" class="line" id="l251">    251</a> 		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
<a href="#l252" class="line" id="l252">    252</a> 		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
<a href="#l253" class="line" id="l253">    253</a> 		return vec2( dBx, dBy );
<a href="#l254" class="line" id="l254">    254</a> 	}
<a href="#l255" class="line" id="l255">    255</a> 	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
<a href="#l256" class="line" id="l256">    256</a> 		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
<a href="#l257" class="line" id="l257">    257</a> 		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
<a href="#l258" class="line" id="l258">    258</a> 		vec3 vN = surf_norm;
<a href="#l259" class="line" id="l259">    259</a> 		vec3 R1 = cross( vSigmaY, vN );
<a href="#l260" class="line" id="l260">    260</a> 		vec3 R2 = cross( vN, vSigmaX );
<a href="#l261" class="line" id="l261">    261</a> 		float fDet = dot( vSigmaX, R1 ) * faceDirection;
<a href="#l262" class="line" id="l262">    262</a> 		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
<a href="#l263" class="line" id="l263">    263</a> 		return normalize( abs( fDet ) * surf_norm - vGrad );
<a href="#l264" class="line" id="l264">    264</a> 	}
<a href="#l265" class="line" id="l265">    265</a> #endif`,MF=`#if NUM_CLIPPING_PLANES &gt; 0
<a href="#l266" class="line" id="l266">    266</a> 	vec4 plane;
<a href="#l267" class="line" id="l267">    267</a> 	#ifdef ALPHA_TO_COVERAGE
<a href="#l268" class="line" id="l268">    268</a> 		float distanceToPlane, distanceGradient;
<a href="#l269" class="line" id="l269">    269</a> 		float clipOpacity = 1.0;
<a href="#l270" class="line" id="l270">    270</a> 		#pragma unroll_loop_start
<a href="#l271" class="line" id="l271">    271</a> 		for ( int i = 0; i &lt; UNION_CLIPPING_PLANES; i ++ ) {
<a href="#l272" class="line" id="l272">    272</a> 			plane = clippingPlanes[ i ];
<a href="#l273" class="line" id="l273">    273</a> 			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
<a href="#l274" class="line" id="l274">    274</a> 			distanceGradient = fwidth( distanceToPlane ) / 2.0;
<a href="#l275" class="line" id="l275">    275</a> 			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
<a href="#l276" class="line" id="l276">    276</a> 			if ( clipOpacity == 0.0 ) discard;
<a href="#l277" class="line" id="l277">    277</a> 		}
<a href="#l278" class="line" id="l278">    278</a> 		#pragma unroll_loop_end
<a href="#l279" class="line" id="l279">    279</a> 		#if UNION_CLIPPING_PLANES &lt; NUM_CLIPPING_PLANES
<a href="#l280" class="line" id="l280">    280</a> 			float unionClipOpacity = 1.0;
<a href="#l281" class="line" id="l281">    281</a> 			#pragma unroll_loop_start
<a href="#l282" class="line" id="l282">    282</a> 			for ( int i = UNION_CLIPPING_PLANES; i &lt; NUM_CLIPPING_PLANES; i ++ ) {
<a href="#l283" class="line" id="l283">    283</a> 				plane = clippingPlanes[ i ];
<a href="#l284" class="line" id="l284">    284</a> 				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
<a href="#l285" class="line" id="l285">    285</a> 				distanceGradient = fwidth( distanceToPlane ) / 2.0;
<a href="#l286" class="line" id="l286">    286</a> 				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
<a href="#l287" class="line" id="l287">    287</a> 			}
<a href="#l288" class="line" id="l288">    288</a> 			#pragma unroll_loop_end
<a href="#l289" class="line" id="l289">    289</a> 			clipOpacity *= 1.0 - unionClipOpacity;
<a href="#l290" class="line" id="l290">    290</a> 		#endif
<a href="#l291" class="line" id="l291">    291</a> 		diffuseColor.a *= clipOpacity;
<a href="#l292" class="line" id="l292">    292</a> 		if ( diffuseColor.a == 0.0 ) discard;
<a href="#l293" class="line" id="l293">    293</a> 	#else
<a href="#l294" class="line" id="l294">    294</a> 		#pragma unroll_loop_start
<a href="#l295" class="line" id="l295">    295</a> 		for ( int i = 0; i &lt; UNION_CLIPPING_PLANES; i ++ ) {
<a href="#l296" class="line" id="l296">    296</a> 			plane = clippingPlanes[ i ];
<a href="#l297" class="line" id="l297">    297</a> 			if ( dot( vClipPosition, plane.xyz ) &gt; plane.w ) discard;
<a href="#l298" class="line" id="l298">    298</a> 		}
<a href="#l299" class="line" id="l299">    299</a> 		#pragma unroll_loop_end
<a href="#l300" class="line" id="l300">    300</a> 		#if UNION_CLIPPING_PLANES &lt; NUM_CLIPPING_PLANES
<a href="#l301" class="line" id="l301">    301</a> 			bool clipped = true;
<a href="#l302" class="line" id="l302">    302</a> 			#pragma unroll_loop_start
<a href="#l303" class="line" id="l303">    303</a> 			for ( int i = UNION_CLIPPING_PLANES; i &lt; NUM_CLIPPING_PLANES; i ++ ) {
<a href="#l304" class="line" id="l304">    304</a> 				plane = clippingPlanes[ i ];
<a href="#l305" class="line" id="l305">    305</a> 				clipped = ( dot( vClipPosition, plane.xyz ) &gt; plane.w ) &amp;&amp; clipped;
<a href="#l306" class="line" id="l306">    306</a> 			}
<a href="#l307" class="line" id="l307">    307</a> 			#pragma unroll_loop_end
<a href="#l308" class="line" id="l308">    308</a> 			if ( clipped ) discard;
<a href="#l309" class="line" id="l309">    309</a> 		#endif
<a href="#l310" class="line" id="l310">    310</a> 	#endif
<a href="#l311" class="line" id="l311">    311</a> #endif`,EF=`#if NUM_CLIPPING_PLANES &gt; 0
<a href="#l312" class="line" id="l312">    312</a> 	varying vec3 vClipPosition;
<a href="#l313" class="line" id="l313">    313</a> 	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
<a href="#l314" class="line" id="l314">    314</a> #endif`,bF=`#if NUM_CLIPPING_PLANES &gt; 0
<a href="#l315" class="line" id="l315">    315</a> 	varying vec3 vClipPosition;
<a href="#l316" class="line" id="l316">    316</a> #endif`,TF=`#if NUM_CLIPPING_PLANES &gt; 0
<a href="#l317" class="line" id="l317">    317</a> 	vClipPosition = - mvPosition.xyz;
<a href="#l318" class="line" id="l318">    318</a> #endif`,AF=`#if defined( USE_COLOR_ALPHA )
<a href="#l319" class="line" id="l319">    319</a> 	diffuseColor *= vColor;
<a href="#l320" class="line" id="l320">    320</a> #elif defined( USE_COLOR )
<a href="#l321" class="line" id="l321">    321</a> 	diffuseColor.rgb *= vColor;
<a href="#l322" class="line" id="l322">    322</a> #endif`,RF=`#if defined( USE_COLOR_ALPHA )
<a href="#l323" class="line" id="l323">    323</a> 	varying vec4 vColor;
<a href="#l324" class="line" id="l324">    324</a> #elif defined( USE_COLOR )
<a href="#l325" class="line" id="l325">    325</a> 	varying vec3 vColor;
<a href="#l326" class="line" id="l326">    326</a> #endif`,CF=`#if defined( USE_COLOR_ALPHA )
<a href="#l327" class="line" id="l327">    327</a> 	varying vec4 vColor;
<a href="#l328" class="line" id="l328">    328</a> #elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
<a href="#l329" class="line" id="l329">    329</a> 	varying vec3 vColor;
<a href="#l330" class="line" id="l330">    330</a> #endif`,wF=`#if defined( USE_COLOR_ALPHA )
<a href="#l331" class="line" id="l331">    331</a> 	vColor = vec4( 1.0 );
<a href="#l332" class="line" id="l332">    332</a> #elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
<a href="#l333" class="line" id="l333">    333</a> 	vColor = vec3( 1.0 );
<a href="#l334" class="line" id="l334">    334</a> #endif
<a href="#l335" class="line" id="l335">    335</a> #ifdef USE_COLOR
<a href="#l336" class="line" id="l336">    336</a> 	vColor *= color;
<a href="#l337" class="line" id="l337">    337</a> #endif
<a href="#l338" class="line" id="l338">    338</a> #ifdef USE_INSTANCING_COLOR
<a href="#l339" class="line" id="l339">    339</a> 	vColor.xyz *= instanceColor.xyz;
<a href="#l340" class="line" id="l340">    340</a> #endif
<a href="#l341" class="line" id="l341">    341</a> #ifdef USE_BATCHING_COLOR
<a href="#l342" class="line" id="l342">    342</a> 	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
<a href="#l343" class="line" id="l343">    343</a> 	vColor.xyz *= batchingColor.xyz;
<a href="#l344" class="line" id="l344">    344</a> #endif`,DF=`#define PI 3.141592653589793
<a href="#l345" class="line" id="l345">    345</a> #define PI2 6.283185307179586
<a href="#l346" class="line" id="l346">    346</a> #define PI_HALF 1.5707963267948966
<a href="#l347" class="line" id="l347">    347</a> #define RECIPROCAL_PI 0.3183098861837907
<a href="#l348" class="line" id="l348">    348</a> #define RECIPROCAL_PI2 0.15915494309189535
<a href="#l349" class="line" id="l349">    349</a> #define EPSILON 1e-6
<a href="#l350" class="line" id="l350">    350</a> #ifndef saturate
<a href="#l351" class="line" id="l351">    351</a> #define saturate( a ) clamp( a, 0.0, 1.0 )
<a href="#l352" class="line" id="l352">    352</a> #endif
<a href="#l353" class="line" id="l353">    353</a> #define whiteComplement( a ) ( 1.0 - saturate( a ) )
<a href="#l354" class="line" id="l354">    354</a> float pow2( const in float x ) { return x*x; }
<a href="#l355" class="line" id="l355">    355</a> vec3 pow2( const in vec3 x ) { return x*x; }
<a href="#l356" class="line" id="l356">    356</a> float pow3( const in float x ) { return x*x*x; }
<a href="#l357" class="line" id="l357">    357</a> float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
<a href="#l358" class="line" id="l358">    358</a> float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
<a href="#l359" class="line" id="l359">    359</a> float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
<a href="#l360" class="line" id="l360">    360</a> highp float rand( const in vec2 uv ) {
<a href="#l361" class="line" id="l361">    361</a> 	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
<a href="#l362" class="line" id="l362">    362</a> 	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
<a href="#l363" class="line" id="l363">    363</a> 	return fract( sin( sn ) * c );
<a href="#l364" class="line" id="l364">    364</a> }
<a href="#l365" class="line" id="l365">    365</a> #ifdef HIGH_PRECISION
<a href="#l366" class="line" id="l366">    366</a> 	float precisionSafeLength( vec3 v ) { return length( v ); }
<a href="#l367" class="line" id="l367">    367</a> #else
<a href="#l368" class="line" id="l368">    368</a> 	float precisionSafeLength( vec3 v ) {
<a href="#l369" class="line" id="l369">    369</a> 		float maxComponent = max3( abs( v ) );
<a href="#l370" class="line" id="l370">    370</a> 		return length( v / maxComponent ) * maxComponent;
<a href="#l371" class="line" id="l371">    371</a> 	}
<a href="#l372" class="line" id="l372">    372</a> #endif
<a href="#l373" class="line" id="l373">    373</a> struct IncidentLight {
<a href="#l374" class="line" id="l374">    374</a> 	vec3 color;
<a href="#l375" class="line" id="l375">    375</a> 	vec3 direction;
<a href="#l376" class="line" id="l376">    376</a> 	bool visible;
<a href="#l377" class="line" id="l377">    377</a> };
<a href="#l378" class="line" id="l378">    378</a> struct ReflectedLight {
<a href="#l379" class="line" id="l379">    379</a> 	vec3 directDiffuse;
<a href="#l380" class="line" id="l380">    380</a> 	vec3 directSpecular;
<a href="#l381" class="line" id="l381">    381</a> 	vec3 indirectDiffuse;
<a href="#l382" class="line" id="l382">    382</a> 	vec3 indirectSpecular;
<a href="#l383" class="line" id="l383">    383</a> };
<a href="#l384" class="line" id="l384">    384</a> #ifdef USE_ALPHAHASH
<a href="#l385" class="line" id="l385">    385</a> 	varying vec3 vPosition;
<a href="#l386" class="line" id="l386">    386</a> #endif
<a href="#l387" class="line" id="l387">    387</a> vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
<a href="#l388" class="line" id="l388">    388</a> 	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
<a href="#l389" class="line" id="l389">    389</a> }
<a href="#l390" class="line" id="l390">    390</a> vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
<a href="#l391" class="line" id="l391">    391</a> 	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
<a href="#l392" class="line" id="l392">    392</a> }
<a href="#l393" class="line" id="l393">    393</a> mat3 transposeMat3( const in mat3 m ) {
<a href="#l394" class="line" id="l394">    394</a> 	mat3 tmp;
<a href="#l395" class="line" id="l395">    395</a> 	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
<a href="#l396" class="line" id="l396">    396</a> 	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
<a href="#l397" class="line" id="l397">    397</a> 	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
<a href="#l398" class="line" id="l398">    398</a> 	return tmp;
<a href="#l399" class="line" id="l399">    399</a> }
<a href="#l400" class="line" id="l400">    400</a> bool isPerspectiveMatrix( mat4 m ) {
<a href="#l401" class="line" id="l401">    401</a> 	return m[ 2 ][ 3 ] == - 1.0;
<a href="#l402" class="line" id="l402">    402</a> }
<a href="#l403" class="line" id="l403">    403</a> vec2 equirectUv( in vec3 dir ) {
<a href="#l404" class="line" id="l404">    404</a> 	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
<a href="#l405" class="line" id="l405">    405</a> 	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
<a href="#l406" class="line" id="l406">    406</a> 	return vec2( u, v );
<a href="#l407" class="line" id="l407">    407</a> }
<a href="#l408" class="line" id="l408">    408</a> vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
<a href="#l409" class="line" id="l409">    409</a> 	return RECIPROCAL_PI * diffuseColor;
<a href="#l410" class="line" id="l410">    410</a> }
<a href="#l411" class="line" id="l411">    411</a> vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
<a href="#l412" class="line" id="l412">    412</a> 	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
<a href="#l413" class="line" id="l413">    413</a> 	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
<a href="#l414" class="line" id="l414">    414</a> }
<a href="#l415" class="line" id="l415">    415</a> float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
<a href="#l416" class="line" id="l416">    416</a> 	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
<a href="#l417" class="line" id="l417">    417</a> 	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
<a href="#l418" class="line" id="l418">    418</a> } // validated`,UF=`#ifdef ENVMAP_TYPE_CUBE_UV
<a href="#l419" class="line" id="l419">    419</a> 	#define cubeUV_minMipLevel 4.0
<a href="#l420" class="line" id="l420">    420</a> 	#define cubeUV_minTileSize 16.0
<a href="#l421" class="line" id="l421">    421</a> 	float getFace( vec3 direction ) {
<a href="#l422" class="line" id="l422">    422</a> 		vec3 absDirection = abs( direction );
<a href="#l423" class="line" id="l423">    423</a> 		float face = - 1.0;
<a href="#l424" class="line" id="l424">    424</a> 		if ( absDirection.x &gt; absDirection.z ) {
<a href="#l425" class="line" id="l425">    425</a> 			if ( absDirection.x &gt; absDirection.y )
<a href="#l426" class="line" id="l426">    426</a> 				face = direction.x &gt; 0.0 ? 0.0 : 3.0;
<a href="#l427" class="line" id="l427">    427</a> 			else
<a href="#l428" class="line" id="l428">    428</a> 				face = direction.y &gt; 0.0 ? 1.0 : 4.0;
<a href="#l429" class="line" id="l429">    429</a> 		} else {
<a href="#l430" class="line" id="l430">    430</a> 			if ( absDirection.z &gt; absDirection.y )
<a href="#l431" class="line" id="l431">    431</a> 				face = direction.z &gt; 0.0 ? 2.0 : 5.0;
<a href="#l432" class="line" id="l432">    432</a> 			else
<a href="#l433" class="line" id="l433">    433</a> 				face = direction.y &gt; 0.0 ? 1.0 : 4.0;
<a href="#l434" class="line" id="l434">    434</a> 		}
<a href="#l435" class="line" id="l435">    435</a> 		return face;
<a href="#l436" class="line" id="l436">    436</a> 	}
<a href="#l437" class="line" id="l437">    437</a> 	vec2 getUV( vec3 direction, float face ) {
<a href="#l438" class="line" id="l438">    438</a> 		vec2 uv;
<a href="#l439" class="line" id="l439">    439</a> 		if ( face == 0.0 ) {
<a href="#l440" class="line" id="l440">    440</a> 			uv = vec2( direction.z, direction.y ) / abs( direction.x );
<a href="#l441" class="line" id="l441">    441</a> 		} else if ( face == 1.0 ) {
<a href="#l442" class="line" id="l442">    442</a> 			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
<a href="#l443" class="line" id="l443">    443</a> 		} else if ( face == 2.0 ) {
<a href="#l444" class="line" id="l444">    444</a> 			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
<a href="#l445" class="line" id="l445">    445</a> 		} else if ( face == 3.0 ) {
<a href="#l446" class="line" id="l446">    446</a> 			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
<a href="#l447" class="line" id="l447">    447</a> 		} else if ( face == 4.0 ) {
<a href="#l448" class="line" id="l448">    448</a> 			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
<a href="#l449" class="line" id="l449">    449</a> 		} else {
<a href="#l450" class="line" id="l450">    450</a> 			uv = vec2( direction.x, direction.y ) / abs( direction.z );
<a href="#l451" class="line" id="l451">    451</a> 		}
<a href="#l452" class="line" id="l452">    452</a> 		return 0.5 * ( uv + 1.0 );
<a href="#l453" class="line" id="l453">    453</a> 	}
<a href="#l454" class="line" id="l454">    454</a> 	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
<a href="#l455" class="line" id="l455">    455</a> 		float face = getFace( direction );
<a href="#l456" class="line" id="l456">    456</a> 		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
<a href="#l457" class="line" id="l457">    457</a> 		mipInt = max( mipInt, cubeUV_minMipLevel );
<a href="#l458" class="line" id="l458">    458</a> 		float faceSize = exp2( mipInt );
<a href="#l459" class="line" id="l459">    459</a> 		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
<a href="#l460" class="line" id="l460">    460</a> 		if ( face &gt; 2.0 ) {
<a href="#l461" class="line" id="l461">    461</a> 			uv.y += faceSize;
<a href="#l462" class="line" id="l462">    462</a> 			face -= 3.0;
<a href="#l463" class="line" id="l463">    463</a> 		}
<a href="#l464" class="line" id="l464">    464</a> 		uv.x += face * faceSize;
<a href="#l465" class="line" id="l465">    465</a> 		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
<a href="#l466" class="line" id="l466">    466</a> 		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
<a href="#l467" class="line" id="l467">    467</a> 		uv.x *= CUBEUV_TEXEL_WIDTH;
<a href="#l468" class="line" id="l468">    468</a> 		uv.y *= CUBEUV_TEXEL_HEIGHT;
<a href="#l469" class="line" id="l469">    469</a> 		#ifdef texture2DGradEXT
<a href="#l470" class="line" id="l470">    470</a> 			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
<a href="#l471" class="line" id="l471">    471</a> 		#else
<a href="#l472" class="line" id="l472">    472</a> 			return texture2D( envMap, uv ).rgb;
<a href="#l473" class="line" id="l473">    473</a> 		#endif
<a href="#l474" class="line" id="l474">    474</a> 	}
<a href="#l475" class="line" id="l475">    475</a> 	#define cubeUV_r0 1.0
<a href="#l476" class="line" id="l476">    476</a> 	#define cubeUV_m0 - 2.0
<a href="#l477" class="line" id="l477">    477</a> 	#define cubeUV_r1 0.8
<a href="#l478" class="line" id="l478">    478</a> 	#define cubeUV_m1 - 1.0
<a href="#l479" class="line" id="l479">    479</a> 	#define cubeUV_r4 0.4
<a href="#l480" class="line" id="l480">    480</a> 	#define cubeUV_m4 2.0
<a href="#l481" class="line" id="l481">    481</a> 	#define cubeUV_r5 0.305
<a href="#l482" class="line" id="l482">    482</a> 	#define cubeUV_m5 3.0
<a href="#l483" class="line" id="l483">    483</a> 	#define cubeUV_r6 0.21
<a href="#l484" class="line" id="l484">    484</a> 	#define cubeUV_m6 4.0
<a href="#l485" class="line" id="l485">    485</a> 	float roughnessToMip( float roughness ) {
<a href="#l486" class="line" id="l486">    486</a> 		float mip = 0.0;
<a href="#l487" class="line" id="l487">    487</a> 		if ( roughness &gt;= cubeUV_r1 ) {
<a href="#l488" class="line" id="l488">    488</a> 			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
<a href="#l489" class="line" id="l489">    489</a> 		} else if ( roughness &gt;= cubeUV_r4 ) {
<a href="#l490" class="line" id="l490">    490</a> 			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
<a href="#l491" class="line" id="l491">    491</a> 		} else if ( roughness &gt;= cubeUV_r5 ) {
<a href="#l492" class="line" id="l492">    492</a> 			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
<a href="#l493" class="line" id="l493">    493</a> 		} else if ( roughness &gt;= cubeUV_r6 ) {
<a href="#l494" class="line" id="l494">    494</a> 			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
<a href="#l495" class="line" id="l495">    495</a> 		} else {
<a href="#l496" class="line" id="l496">    496</a> 			mip = - 2.0 * log2( 1.16 * roughness );		}
<a href="#l497" class="line" id="l497">    497</a> 		return mip;
<a href="#l498" class="line" id="l498">    498</a> 	}
<a href="#l499" class="line" id="l499">    499</a> 	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
<a href="#l500" class="line" id="l500">    500</a> 		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
<a href="#l501" class="line" id="l501">    501</a> 		float mipF = fract( mip );
<a href="#l502" class="line" id="l502">    502</a> 		float mipInt = floor( mip );
<a href="#l503" class="line" id="l503">    503</a> 		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
<a href="#l504" class="line" id="l504">    504</a> 		if ( mipF == 0.0 ) {
<a href="#l505" class="line" id="l505">    505</a> 			return vec4( color0, 1.0 );
<a href="#l506" class="line" id="l506">    506</a> 		} else {
<a href="#l507" class="line" id="l507">    507</a> 			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
<a href="#l508" class="line" id="l508">    508</a> 			return vec4( mix( color0, color1, mipF ), 1.0 );
<a href="#l509" class="line" id="l509">    509</a> 		}
<a href="#l510" class="line" id="l510">    510</a> 	}
<a href="#l511" class="line" id="l511">    511</a> #endif`,NF=`vec3 transformedNormal = objectNormal;
<a href="#l512" class="line" id="l512">    512</a> #ifdef USE_TANGENT
<a href="#l513" class="line" id="l513">    513</a> 	vec3 transformedTangent = objectTangent;
<a href="#l514" class="line" id="l514">    514</a> #endif
<a href="#l515" class="line" id="l515">    515</a> #ifdef USE_BATCHING
<a href="#l516" class="line" id="l516">    516</a> 	mat3 bm = mat3( batchingMatrix );
<a href="#l517" class="line" id="l517">    517</a> 	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
<a href="#l518" class="line" id="l518">    518</a> 	transformedNormal = bm * transformedNormal;
<a href="#l519" class="line" id="l519">    519</a> 	#ifdef USE_TANGENT
<a href="#l520" class="line" id="l520">    520</a> 		transformedTangent = bm * transformedTangent;
<a href="#l521" class="line" id="l521">    521</a> 	#endif
<a href="#l522" class="line" id="l522">    522</a> #endif
<a href="#l523" class="line" id="l523">    523</a> #ifdef USE_INSTANCING
<a href="#l524" class="line" id="l524">    524</a> 	mat3 im = mat3( instanceMatrix );
<a href="#l525" class="line" id="l525">    525</a> 	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
<a href="#l526" class="line" id="l526">    526</a> 	transformedNormal = im * transformedNormal;
<a href="#l527" class="line" id="l527">    527</a> 	#ifdef USE_TANGENT
<a href="#l528" class="line" id="l528">    528</a> 		transformedTangent = im * transformedTangent;
<a href="#l529" class="line" id="l529">    529</a> 	#endif
<a href="#l530" class="line" id="l530">    530</a> #endif
<a href="#l531" class="line" id="l531">    531</a> transformedNormal = normalMatrix * transformedNormal;
<a href="#l532" class="line" id="l532">    532</a> #ifdef FLIP_SIDED
<a href="#l533" class="line" id="l533">    533</a> 	transformedNormal = - transformedNormal;
<a href="#l534" class="line" id="l534">    534</a> #endif
<a href="#l535" class="line" id="l535">    535</a> #ifdef USE_TANGENT
<a href="#l536" class="line" id="l536">    536</a> 	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
<a href="#l537" class="line" id="l537">    537</a> 	#ifdef FLIP_SIDED
<a href="#l538" class="line" id="l538">    538</a> 		transformedTangent = - transformedTangent;
<a href="#l539" class="line" id="l539">    539</a> 	#endif
<a href="#l540" class="line" id="l540">    540</a> #endif`,OF=`#ifdef USE_DISPLACEMENTMAP
<a href="#l541" class="line" id="l541">    541</a> 	uniform sampler2D displacementMap;
<a href="#l542" class="line" id="l542">    542</a> 	uniform float displacementScale;
<a href="#l543" class="line" id="l543">    543</a> 	uniform float displacementBias;
<a href="#l544" class="line" id="l544">    544</a> #endif`,LF=`#ifdef USE_DISPLACEMENTMAP
<a href="#l545" class="line" id="l545">    545</a> 	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
<a href="#l546" class="line" id="l546">    546</a> #endif`,zF=`#ifdef USE_EMISSIVEMAP
<a href="#l547" class="line" id="l547">    547</a> 	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
<a href="#l548" class="line" id="l548">    548</a> 	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
<a href="#l549" class="line" id="l549">    549</a> 		emissiveColor = sRGBTransferEOTF( emissiveColor );
<a href="#l550" class="line" id="l550">    550</a> 	#endif
<a href="#l551" class="line" id="l551">    551</a> 	totalEmissiveRadiance *= emissiveColor.rgb;
<a href="#l552" class="line" id="l552">    552</a> #endif`,BF=`#ifdef USE_EMISSIVEMAP
<a href="#l553" class="line" id="l553">    553</a> 	uniform sampler2D emissiveMap;
<a href="#l554" class="line" id="l554">    554</a> #endif`,PF=&quot;gl_FragColor = linearToOutputTexel( gl_FragColor );&quot;,IF=`vec4 LinearTransferOETF( in vec4 value ) {
<a href="#l555" class="line" id="l555">    555</a> 	return value;
<a href="#l556" class="line" id="l556">    556</a> }
<a href="#l557" class="line" id="l557">    557</a> vec4 sRGBTransferEOTF( in vec4 value ) {
<a href="#l558" class="line" id="l558">    558</a> 	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
<a href="#l559" class="line" id="l559">    559</a> }
<a href="#l560" class="line" id="l560">    560</a> vec4 sRGBTransferOETF( in vec4 value ) {
<a href="#l561" class="line" id="l561">    561</a> 	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
<a href="#l562" class="line" id="l562">    562</a> }`,HF=`#ifdef USE_ENVMAP
<a href="#l563" class="line" id="l563">    563</a> 	#ifdef ENV_WORLDPOS
<a href="#l564" class="line" id="l564">    564</a> 		vec3 cameraToFrag;
<a href="#l565" class="line" id="l565">    565</a> 		if ( isOrthographic ) {
<a href="#l566" class="line" id="l566">    566</a> 			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
<a href="#l567" class="line" id="l567">    567</a> 		} else {
<a href="#l568" class="line" id="l568">    568</a> 			cameraToFrag = normalize( vWorldPosition - cameraPosition );
<a href="#l569" class="line" id="l569">    569</a> 		}
<a href="#l570" class="line" id="l570">    570</a> 		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
<a href="#l571" class="line" id="l571">    571</a> 		#ifdef ENVMAP_MODE_REFLECTION
<a href="#l572" class="line" id="l572">    572</a> 			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
<a href="#l573" class="line" id="l573">    573</a> 		#else
<a href="#l574" class="line" id="l574">    574</a> 			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
<a href="#l575" class="line" id="l575">    575</a> 		#endif
<a href="#l576" class="line" id="l576">    576</a> 	#else
<a href="#l577" class="line" id="l577">    577</a> 		vec3 reflectVec = vReflect;
<a href="#l578" class="line" id="l578">    578</a> 	#endif
<a href="#l579" class="line" id="l579">    579</a> 	#ifdef ENVMAP_TYPE_CUBE
<a href="#l580" class="line" id="l580">    580</a> 		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
<a href="#l581" class="line" id="l581">    581</a> 	#else
<a href="#l582" class="line" id="l582">    582</a> 		vec4 envColor = vec4( 0.0 );
<a href="#l583" class="line" id="l583">    583</a> 	#endif
<a href="#l584" class="line" id="l584">    584</a> 	#ifdef ENVMAP_BLENDING_MULTIPLY
<a href="#l585" class="line" id="l585">    585</a> 		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
<a href="#l586" class="line" id="l586">    586</a> 	#elif defined( ENVMAP_BLENDING_MIX )
<a href="#l587" class="line" id="l587">    587</a> 		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
<a href="#l588" class="line" id="l588">    588</a> 	#elif defined( ENVMAP_BLENDING_ADD )
<a href="#l589" class="line" id="l589">    589</a> 		outgoingLight += envColor.xyz * specularStrength * reflectivity;
<a href="#l590" class="line" id="l590">    590</a> 	#endif
<a href="#l591" class="line" id="l591">    591</a> #endif`,FF=`#ifdef USE_ENVMAP
<a href="#l592" class="line" id="l592">    592</a> 	uniform float envMapIntensity;
<a href="#l593" class="line" id="l593">    593</a> 	uniform float flipEnvMap;
<a href="#l594" class="line" id="l594">    594</a> 	uniform mat3 envMapRotation;
<a href="#l595" class="line" id="l595">    595</a> 	#ifdef ENVMAP_TYPE_CUBE
<a href="#l596" class="line" id="l596">    596</a> 		uniform samplerCube envMap;
<a href="#l597" class="line" id="l597">    597</a> 	#else
<a href="#l598" class="line" id="l598">    598</a> 		uniform sampler2D envMap;
<a href="#l599" class="line" id="l599">    599</a> 	#endif
<a href="#l600" class="line" id="l600">    600</a> 	
<a href="#l601" class="line" id="l601">    601</a> #endif`,VF=`#ifdef USE_ENVMAP
<a href="#l602" class="line" id="l602">    602</a> 	uniform float reflectivity;
<a href="#l603" class="line" id="l603">    603</a> 	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
<a href="#l604" class="line" id="l604">    604</a> 		#define ENV_WORLDPOS
<a href="#l605" class="line" id="l605">    605</a> 	#endif
<a href="#l606" class="line" id="l606">    606</a> 	#ifdef ENV_WORLDPOS
<a href="#l607" class="line" id="l607">    607</a> 		varying vec3 vWorldPosition;
<a href="#l608" class="line" id="l608">    608</a> 		uniform float refractionRatio;
<a href="#l609" class="line" id="l609">    609</a> 	#else
<a href="#l610" class="line" id="l610">    610</a> 		varying vec3 vReflect;
<a href="#l611" class="line" id="l611">    611</a> 	#endif
<a href="#l612" class="line" id="l612">    612</a> #endif`,GF=`#ifdef USE_ENVMAP
<a href="#l613" class="line" id="l613">    613</a> 	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
<a href="#l614" class="line" id="l614">    614</a> 		#define ENV_WORLDPOS
<a href="#l615" class="line" id="l615">    615</a> 	#endif
<a href="#l616" class="line" id="l616">    616</a> 	#ifdef ENV_WORLDPOS
<a href="#l617" class="line" id="l617">    617</a> 		
<a href="#l618" class="line" id="l618">    618</a> 		varying vec3 vWorldPosition;
<a href="#l619" class="line" id="l619">    619</a> 	#else
<a href="#l620" class="line" id="l620">    620</a> 		varying vec3 vReflect;
<a href="#l621" class="line" id="l621">    621</a> 		uniform float refractionRatio;
<a href="#l622" class="line" id="l622">    622</a> 	#endif
<a href="#l623" class="line" id="l623">    623</a> #endif`,XF=`#ifdef USE_ENVMAP
<a href="#l624" class="line" id="l624">    624</a> 	#ifdef ENV_WORLDPOS
<a href="#l625" class="line" id="l625">    625</a> 		vWorldPosition = worldPosition.xyz;
<a href="#l626" class="line" id="l626">    626</a> 	#else
<a href="#l627" class="line" id="l627">    627</a> 		vec3 cameraToVertex;
<a href="#l628" class="line" id="l628">    628</a> 		if ( isOrthographic ) {
<a href="#l629" class="line" id="l629">    629</a> 			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
<a href="#l630" class="line" id="l630">    630</a> 		} else {
<a href="#l631" class="line" id="l631">    631</a> 			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
<a href="#l632" class="line" id="l632">    632</a> 		}
<a href="#l633" class="line" id="l633">    633</a> 		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
<a href="#l634" class="line" id="l634">    634</a> 		#ifdef ENVMAP_MODE_REFLECTION
<a href="#l635" class="line" id="l635">    635</a> 			vReflect = reflect( cameraToVertex, worldNormal );
<a href="#l636" class="line" id="l636">    636</a> 		#else
<a href="#l637" class="line" id="l637">    637</a> 			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
<a href="#l638" class="line" id="l638">    638</a> 		#endif
<a href="#l639" class="line" id="l639">    639</a> 	#endif
<a href="#l640" class="line" id="l640">    640</a> #endif`,qF=`#ifdef USE_FOG
<a href="#l641" class="line" id="l641">    641</a> 	vFogDepth = - mvPosition.z;
<a href="#l642" class="line" id="l642">    642</a> #endif`,YF=`#ifdef USE_FOG
<a href="#l643" class="line" id="l643">    643</a> 	varying float vFogDepth;
<a href="#l644" class="line" id="l644">    644</a> #endif`,WF=`#ifdef USE_FOG
<a href="#l645" class="line" id="l645">    645</a> 	#ifdef FOG_EXP2
<a href="#l646" class="line" id="l646">    646</a> 		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
<a href="#l647" class="line" id="l647">    647</a> 	#else
<a href="#l648" class="line" id="l648">    648</a> 		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
<a href="#l649" class="line" id="l649">    649</a> 	#endif
<a href="#l650" class="line" id="l650">    650</a> 	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
<a href="#l651" class="line" id="l651">    651</a> #endif`,kF=`#ifdef USE_FOG
<a href="#l652" class="line" id="l652">    652</a> 	uniform vec3 fogColor;
<a href="#l653" class="line" id="l653">    653</a> 	varying float vFogDepth;
<a href="#l654" class="line" id="l654">    654</a> 	#ifdef FOG_EXP2
<a href="#l655" class="line" id="l655">    655</a> 		uniform float fogDensity;
<a href="#l656" class="line" id="l656">    656</a> 	#else
<a href="#l657" class="line" id="l657">    657</a> 		uniform float fogNear;
<a href="#l658" class="line" id="l658">    658</a> 		uniform float fogFar;
<a href="#l659" class="line" id="l659">    659</a> 	#endif
<a href="#l660" class="line" id="l660">    660</a> #endif`,ZF=`#ifdef USE_GRADIENTMAP
<a href="#l661" class="line" id="l661">    661</a> 	uniform sampler2D gradientMap;
<a href="#l662" class="line" id="l662">    662</a> #endif
<a href="#l663" class="line" id="l663">    663</a> vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
<a href="#l664" class="line" id="l664">    664</a> 	float dotNL = dot( normal, lightDirection );
<a href="#l665" class="line" id="l665">    665</a> 	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
<a href="#l666" class="line" id="l666">    666</a> 	#ifdef USE_GRADIENTMAP
<a href="#l667" class="line" id="l667">    667</a> 		return vec3( texture2D( gradientMap, coord ).r );
<a href="#l668" class="line" id="l668">    668</a> 	#else
<a href="#l669" class="line" id="l669">    669</a> 		vec2 fw = fwidth( coord ) * 0.5;
<a href="#l670" class="line" id="l670">    670</a> 		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
<a href="#l671" class="line" id="l671">    671</a> 	#endif
<a href="#l672" class="line" id="l672">    672</a> }`,jF=`#ifdef USE_LIGHTMAP
<a href="#l673" class="line" id="l673">    673</a> 	uniform sampler2D lightMap;
<a href="#l674" class="line" id="l674">    674</a> 	uniform float lightMapIntensity;
<a href="#l675" class="line" id="l675">    675</a> #endif`,QF=`LambertMaterial material;
<a href="#l676" class="line" id="l676">    676</a> material.diffuseColor = diffuseColor.rgb;
<a href="#l677" class="line" id="l677">    677</a> material.specularStrength = specularStrength;`,KF=`varying vec3 vViewPosition;
<a href="#l678" class="line" id="l678">    678</a> struct LambertMaterial {
<a href="#l679" class="line" id="l679">    679</a> 	vec3 diffuseColor;
<a href="#l680" class="line" id="l680">    680</a> 	float specularStrength;
<a href="#l681" class="line" id="l681">    681</a> };
<a href="#l682" class="line" id="l682">    682</a> void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l683" class="line" id="l683">    683</a> 	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
<a href="#l684" class="line" id="l684">    684</a> 	vec3 irradiance = dotNL * directLight.color;
<a href="#l685" class="line" id="l685">    685</a> 	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
<a href="#l686" class="line" id="l686">    686</a> }
<a href="#l687" class="line" id="l687">    687</a> void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l688" class="line" id="l688">    688</a> 	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
<a href="#l689" class="line" id="l689">    689</a> }
<a href="#l690" class="line" id="l690">    690</a> #define RE_Direct				RE_Direct_Lambert
<a href="#l691" class="line" id="l691">    691</a> #define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,JF=`uniform bool receiveShadow;
<a href="#l692" class="line" id="l692">    692</a> uniform vec3 ambientLightColor;
<a href="#l693" class="line" id="l693">    693</a> #if defined( USE_LIGHT_PROBES )
<a href="#l694" class="line" id="l694">    694</a> 	uniform vec3 lightProbe[ 9 ];
<a href="#l695" class="line" id="l695">    695</a> #endif
<a href="#l696" class="line" id="l696">    696</a> vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
<a href="#l697" class="line" id="l697">    697</a> 	float x = normal.x, y = normal.y, z = normal.z;
<a href="#l698" class="line" id="l698">    698</a> 	vec3 result = shCoefficients[ 0 ] * 0.886227;
<a href="#l699" class="line" id="l699">    699</a> 	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
<a href="#l700" class="line" id="l700">    700</a> 	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
<a href="#l701" class="line" id="l701">    701</a> 	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
<a href="#l702" class="line" id="l702">    702</a> 	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
<a href="#l703" class="line" id="l703">    703</a> 	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
<a href="#l704" class="line" id="l704">    704</a> 	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
<a href="#l705" class="line" id="l705">    705</a> 	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
<a href="#l706" class="line" id="l706">    706</a> 	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
<a href="#l707" class="line" id="l707">    707</a> 	return result;
<a href="#l708" class="line" id="l708">    708</a> }
<a href="#l709" class="line" id="l709">    709</a> vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
<a href="#l710" class="line" id="l710">    710</a> 	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
<a href="#l711" class="line" id="l711">    711</a> 	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
<a href="#l712" class="line" id="l712">    712</a> 	return irradiance;
<a href="#l713" class="line" id="l713">    713</a> }
<a href="#l714" class="line" id="l714">    714</a> vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
<a href="#l715" class="line" id="l715">    715</a> 	vec3 irradiance = ambientLightColor;
<a href="#l716" class="line" id="l716">    716</a> 	return irradiance;
<a href="#l717" class="line" id="l717">    717</a> }
<a href="#l718" class="line" id="l718">    718</a> float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
<a href="#l719" class="line" id="l719">    719</a> 	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
<a href="#l720" class="line" id="l720">    720</a> 	if ( cutoffDistance &gt; 0.0 ) {
<a href="#l721" class="line" id="l721">    721</a> 		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
<a href="#l722" class="line" id="l722">    722</a> 	}
<a href="#l723" class="line" id="l723">    723</a> 	return distanceFalloff;
<a href="#l724" class="line" id="l724">    724</a> }
<a href="#l725" class="line" id="l725">    725</a> float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
<a href="#l726" class="line" id="l726">    726</a> 	return smoothstep( coneCosine, penumbraCosine, angleCosine );
<a href="#l727" class="line" id="l727">    727</a> }
<a href="#l728" class="line" id="l728">    728</a> #if NUM_DIR_LIGHTS &gt; 0
<a href="#l729" class="line" id="l729">    729</a> 	struct DirectionalLight {
<a href="#l730" class="line" id="l730">    730</a> 		vec3 direction;
<a href="#l731" class="line" id="l731">    731</a> 		vec3 color;
<a href="#l732" class="line" id="l732">    732</a> 	};
<a href="#l733" class="line" id="l733">    733</a> 	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
<a href="#l734" class="line" id="l734">    734</a> 	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
<a href="#l735" class="line" id="l735">    735</a> 		light.color = directionalLight.color;
<a href="#l736" class="line" id="l736">    736</a> 		light.direction = directionalLight.direction;
<a href="#l737" class="line" id="l737">    737</a> 		light.visible = true;
<a href="#l738" class="line" id="l738">    738</a> 	}
<a href="#l739" class="line" id="l739">    739</a> #endif
<a href="#l740" class="line" id="l740">    740</a> #if NUM_POINT_LIGHTS &gt; 0
<a href="#l741" class="line" id="l741">    741</a> 	struct PointLight {
<a href="#l742" class="line" id="l742">    742</a> 		vec3 position;
<a href="#l743" class="line" id="l743">    743</a> 		vec3 color;
<a href="#l744" class="line" id="l744">    744</a> 		float distance;
<a href="#l745" class="line" id="l745">    745</a> 		float decay;
<a href="#l746" class="line" id="l746">    746</a> 	};
<a href="#l747" class="line" id="l747">    747</a> 	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
<a href="#l748" class="line" id="l748">    748</a> 	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
<a href="#l749" class="line" id="l749">    749</a> 		vec3 lVector = pointLight.position - geometryPosition;
<a href="#l750" class="line" id="l750">    750</a> 		light.direction = normalize( lVector );
<a href="#l751" class="line" id="l751">    751</a> 		float lightDistance = length( lVector );
<a href="#l752" class="line" id="l752">    752</a> 		light.color = pointLight.color;
<a href="#l753" class="line" id="l753">    753</a> 		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
<a href="#l754" class="line" id="l754">    754</a> 		light.visible = ( light.color != vec3( 0.0 ) );
<a href="#l755" class="line" id="l755">    755</a> 	}
<a href="#l756" class="line" id="l756">    756</a> #endif
<a href="#l757" class="line" id="l757">    757</a> #if NUM_SPOT_LIGHTS &gt; 0
<a href="#l758" class="line" id="l758">    758</a> 	struct SpotLight {
<a href="#l759" class="line" id="l759">    759</a> 		vec3 position;
<a href="#l760" class="line" id="l760">    760</a> 		vec3 direction;
<a href="#l761" class="line" id="l761">    761</a> 		vec3 color;
<a href="#l762" class="line" id="l762">    762</a> 		float distance;
<a href="#l763" class="line" id="l763">    763</a> 		float decay;
<a href="#l764" class="line" id="l764">    764</a> 		float coneCos;
<a href="#l765" class="line" id="l765">    765</a> 		float penumbraCos;
<a href="#l766" class="line" id="l766">    766</a> 	};
<a href="#l767" class="line" id="l767">    767</a> 	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
<a href="#l768" class="line" id="l768">    768</a> 	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
<a href="#l769" class="line" id="l769">    769</a> 		vec3 lVector = spotLight.position - geometryPosition;
<a href="#l770" class="line" id="l770">    770</a> 		light.direction = normalize( lVector );
<a href="#l771" class="line" id="l771">    771</a> 		float angleCos = dot( light.direction, spotLight.direction );
<a href="#l772" class="line" id="l772">    772</a> 		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
<a href="#l773" class="line" id="l773">    773</a> 		if ( spotAttenuation &gt; 0.0 ) {
<a href="#l774" class="line" id="l774">    774</a> 			float lightDistance = length( lVector );
<a href="#l775" class="line" id="l775">    775</a> 			light.color = spotLight.color * spotAttenuation;
<a href="#l776" class="line" id="l776">    776</a> 			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
<a href="#l777" class="line" id="l777">    777</a> 			light.visible = ( light.color != vec3( 0.0 ) );
<a href="#l778" class="line" id="l778">    778</a> 		} else {
<a href="#l779" class="line" id="l779">    779</a> 			light.color = vec3( 0.0 );
<a href="#l780" class="line" id="l780">    780</a> 			light.visible = false;
<a href="#l781" class="line" id="l781">    781</a> 		}
<a href="#l782" class="line" id="l782">    782</a> 	}
<a href="#l783" class="line" id="l783">    783</a> #endif
<a href="#l784" class="line" id="l784">    784</a> #if NUM_RECT_AREA_LIGHTS &gt; 0
<a href="#l785" class="line" id="l785">    785</a> 	struct RectAreaLight {
<a href="#l786" class="line" id="l786">    786</a> 		vec3 color;
<a href="#l787" class="line" id="l787">    787</a> 		vec3 position;
<a href="#l788" class="line" id="l788">    788</a> 		vec3 halfWidth;
<a href="#l789" class="line" id="l789">    789</a> 		vec3 halfHeight;
<a href="#l790" class="line" id="l790">    790</a> 	};
<a href="#l791" class="line" id="l791">    791</a> 	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
<a href="#l792" class="line" id="l792">    792</a> 	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
<a href="#l793" class="line" id="l793">    793</a> #endif
<a href="#l794" class="line" id="l794">    794</a> #if NUM_HEMI_LIGHTS &gt; 0
<a href="#l795" class="line" id="l795">    795</a> 	struct HemisphereLight {
<a href="#l796" class="line" id="l796">    796</a> 		vec3 direction;
<a href="#l797" class="line" id="l797">    797</a> 		vec3 skyColor;
<a href="#l798" class="line" id="l798">    798</a> 		vec3 groundColor;
<a href="#l799" class="line" id="l799">    799</a> 	};
<a href="#l800" class="line" id="l800">    800</a> 	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
<a href="#l801" class="line" id="l801">    801</a> 	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
<a href="#l802" class="line" id="l802">    802</a> 		float dotNL = dot( normal, hemiLight.direction );
<a href="#l803" class="line" id="l803">    803</a> 		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
<a href="#l804" class="line" id="l804">    804</a> 		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
<a href="#l805" class="line" id="l805">    805</a> 		return irradiance;
<a href="#l806" class="line" id="l806">    806</a> 	}
<a href="#l807" class="line" id="l807">    807</a> #endif`,$F=`#ifdef USE_ENVMAP
<a href="#l808" class="line" id="l808">    808</a> 	vec3 getIBLIrradiance( const in vec3 normal ) {
<a href="#l809" class="line" id="l809">    809</a> 		#ifdef ENVMAP_TYPE_CUBE_UV
<a href="#l810" class="line" id="l810">    810</a> 			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
<a href="#l811" class="line" id="l811">    811</a> 			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
<a href="#l812" class="line" id="l812">    812</a> 			return PI * envMapColor.rgb * envMapIntensity;
<a href="#l813" class="line" id="l813">    813</a> 		#else
<a href="#l814" class="line" id="l814">    814</a> 			return vec3( 0.0 );
<a href="#l815" class="line" id="l815">    815</a> 		#endif
<a href="#l816" class="line" id="l816">    816</a> 	}
<a href="#l817" class="line" id="l817">    817</a> 	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
<a href="#l818" class="line" id="l818">    818</a> 		#ifdef ENVMAP_TYPE_CUBE_UV
<a href="#l819" class="line" id="l819">    819</a> 			vec3 reflectVec = reflect( - viewDir, normal );
<a href="#l820" class="line" id="l820">    820</a> 			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
<a href="#l821" class="line" id="l821">    821</a> 			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
<a href="#l822" class="line" id="l822">    822</a> 			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
<a href="#l823" class="line" id="l823">    823</a> 			return envMapColor.rgb * envMapIntensity;
<a href="#l824" class="line" id="l824">    824</a> 		#else
<a href="#l825" class="line" id="l825">    825</a> 			return vec3( 0.0 );
<a href="#l826" class="line" id="l826">    826</a> 		#endif
<a href="#l827" class="line" id="l827">    827</a> 	}
<a href="#l828" class="line" id="l828">    828</a> 	#ifdef USE_ANISOTROPY
<a href="#l829" class="line" id="l829">    829</a> 		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
<a href="#l830" class="line" id="l830">    830</a> 			#ifdef ENVMAP_TYPE_CUBE_UV
<a href="#l831" class="line" id="l831">    831</a> 				vec3 bentNormal = cross( bitangent, viewDir );
<a href="#l832" class="line" id="l832">    832</a> 				bentNormal = normalize( cross( bentNormal, bitangent ) );
<a href="#l833" class="line" id="l833">    833</a> 				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
<a href="#l834" class="line" id="l834">    834</a> 				return getIBLRadiance( viewDir, bentNormal, roughness );
<a href="#l835" class="line" id="l835">    835</a> 			#else
<a href="#l836" class="line" id="l836">    836</a> 				return vec3( 0.0 );
<a href="#l837" class="line" id="l837">    837</a> 			#endif
<a href="#l838" class="line" id="l838">    838</a> 		}
<a href="#l839" class="line" id="l839">    839</a> 	#endif
<a href="#l840" class="line" id="l840">    840</a> #endif`,tV=`ToonMaterial material;
<a href="#l841" class="line" id="l841">    841</a> material.diffuseColor = diffuseColor.rgb;`,eV=`varying vec3 vViewPosition;
<a href="#l842" class="line" id="l842">    842</a> struct ToonMaterial {
<a href="#l843" class="line" id="l843">    843</a> 	vec3 diffuseColor;
<a href="#l844" class="line" id="l844">    844</a> };
<a href="#l845" class="line" id="l845">    845</a> void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l846" class="line" id="l846">    846</a> 	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
<a href="#l847" class="line" id="l847">    847</a> 	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
<a href="#l848" class="line" id="l848">    848</a> }
<a href="#l849" class="line" id="l849">    849</a> void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l850" class="line" id="l850">    850</a> 	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
<a href="#l851" class="line" id="l851">    851</a> }
<a href="#l852" class="line" id="l852">    852</a> #define RE_Direct				RE_Direct_Toon
<a href="#l853" class="line" id="l853">    853</a> #define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,nV=`BlinnPhongMaterial material;
<a href="#l854" class="line" id="l854">    854</a> material.diffuseColor = diffuseColor.rgb;
<a href="#l855" class="line" id="l855">    855</a> material.specularColor = specular;
<a href="#l856" class="line" id="l856">    856</a> material.specularShininess = shininess;
<a href="#l857" class="line" id="l857">    857</a> material.specularStrength = specularStrength;`,iV=`varying vec3 vViewPosition;
<a href="#l858" class="line" id="l858">    858</a> struct BlinnPhongMaterial {
<a href="#l859" class="line" id="l859">    859</a> 	vec3 diffuseColor;
<a href="#l860" class="line" id="l860">    860</a> 	vec3 specularColor;
<a href="#l861" class="line" id="l861">    861</a> 	float specularShininess;
<a href="#l862" class="line" id="l862">    862</a> 	float specularStrength;
<a href="#l863" class="line" id="l863">    863</a> };
<a href="#l864" class="line" id="l864">    864</a> void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l865" class="line" id="l865">    865</a> 	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
<a href="#l866" class="line" id="l866">    866</a> 	vec3 irradiance = dotNL * directLight.color;
<a href="#l867" class="line" id="l867">    867</a> 	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
<a href="#l868" class="line" id="l868">    868</a> 	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
<a href="#l869" class="line" id="l869">    869</a> }
<a href="#l870" class="line" id="l870">    870</a> void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l871" class="line" id="l871">    871</a> 	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
<a href="#l872" class="line" id="l872">    872</a> }
<a href="#l873" class="line" id="l873">    873</a> #define RE_Direct				RE_Direct_BlinnPhong
<a href="#l874" class="line" id="l874">    874</a> #define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,aV=`PhysicalMaterial material;
<a href="#l875" class="line" id="l875">    875</a> material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
<a href="#l876" class="line" id="l876">    876</a> vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
<a href="#l877" class="line" id="l877">    877</a> float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
<a href="#l878" class="line" id="l878">    878</a> material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
<a href="#l879" class="line" id="l879">    879</a> material.roughness = min( material.roughness, 1.0 );
<a href="#l880" class="line" id="l880">    880</a> #ifdef IOR
<a href="#l881" class="line" id="l881">    881</a> 	material.ior = ior;
<a href="#l882" class="line" id="l882">    882</a> 	#ifdef USE_SPECULAR
<a href="#l883" class="line" id="l883">    883</a> 		float specularIntensityFactor = specularIntensity;
<a href="#l884" class="line" id="l884">    884</a> 		vec3 specularColorFactor = specularColor;
<a href="#l885" class="line" id="l885">    885</a> 		#ifdef USE_SPECULAR_COLORMAP
<a href="#l886" class="line" id="l886">    886</a> 			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
<a href="#l887" class="line" id="l887">    887</a> 		#endif
<a href="#l888" class="line" id="l888">    888</a> 		#ifdef USE_SPECULAR_INTENSITYMAP
<a href="#l889" class="line" id="l889">    889</a> 			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
<a href="#l890" class="line" id="l890">    890</a> 		#endif
<a href="#l891" class="line" id="l891">    891</a> 		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
<a href="#l892" class="line" id="l892">    892</a> 	#else
<a href="#l893" class="line" id="l893">    893</a> 		float specularIntensityFactor = 1.0;
<a href="#l894" class="line" id="l894">    894</a> 		vec3 specularColorFactor = vec3( 1.0 );
<a href="#l895" class="line" id="l895">    895</a> 		material.specularF90 = 1.0;
<a href="#l896" class="line" id="l896">    896</a> 	#endif
<a href="#l897" class="line" id="l897">    897</a> 	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
<a href="#l898" class="line" id="l898">    898</a> #else
<a href="#l899" class="line" id="l899">    899</a> 	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
<a href="#l900" class="line" id="l900">    900</a> 	material.specularF90 = 1.0;
<a href="#l901" class="line" id="l901">    901</a> #endif
<a href="#l902" class="line" id="l902">    902</a> #ifdef USE_CLEARCOAT
<a href="#l903" class="line" id="l903">    903</a> 	material.clearcoat = clearcoat;
<a href="#l904" class="line" id="l904">    904</a> 	material.clearcoatRoughness = clearcoatRoughness;
<a href="#l905" class="line" id="l905">    905</a> 	material.clearcoatF0 = vec3( 0.04 );
<a href="#l906" class="line" id="l906">    906</a> 	material.clearcoatF90 = 1.0;
<a href="#l907" class="line" id="l907">    907</a> 	#ifdef USE_CLEARCOATMAP
<a href="#l908" class="line" id="l908">    908</a> 		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
<a href="#l909" class="line" id="l909">    909</a> 	#endif
<a href="#l910" class="line" id="l910">    910</a> 	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
<a href="#l911" class="line" id="l911">    911</a> 		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
<a href="#l912" class="line" id="l912">    912</a> 	#endif
<a href="#l913" class="line" id="l913">    913</a> 	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
<a href="#l914" class="line" id="l914">    914</a> 	material.clearcoatRoughness += geometryRoughness;
<a href="#l915" class="line" id="l915">    915</a> 	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
<a href="#l916" class="line" id="l916">    916</a> #endif
<a href="#l917" class="line" id="l917">    917</a> #ifdef USE_DISPERSION
<a href="#l918" class="line" id="l918">    918</a> 	material.dispersion = dispersion;
<a href="#l919" class="line" id="l919">    919</a> #endif
<a href="#l920" class="line" id="l920">    920</a> #ifdef USE_IRIDESCENCE
<a href="#l921" class="line" id="l921">    921</a> 	material.iridescence = iridescence;
<a href="#l922" class="line" id="l922">    922</a> 	material.iridescenceIOR = iridescenceIOR;
<a href="#l923" class="line" id="l923">    923</a> 	#ifdef USE_IRIDESCENCEMAP
<a href="#l924" class="line" id="l924">    924</a> 		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
<a href="#l925" class="line" id="l925">    925</a> 	#endif
<a href="#l926" class="line" id="l926">    926</a> 	#ifdef USE_IRIDESCENCE_THICKNESSMAP
<a href="#l927" class="line" id="l927">    927</a> 		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
<a href="#l928" class="line" id="l928">    928</a> 	#else
<a href="#l929" class="line" id="l929">    929</a> 		material.iridescenceThickness = iridescenceThicknessMaximum;
<a href="#l930" class="line" id="l930">    930</a> 	#endif
<a href="#l931" class="line" id="l931">    931</a> #endif
<a href="#l932" class="line" id="l932">    932</a> #ifdef USE_SHEEN
<a href="#l933" class="line" id="l933">    933</a> 	material.sheenColor = sheenColor;
<a href="#l934" class="line" id="l934">    934</a> 	#ifdef USE_SHEEN_COLORMAP
<a href="#l935" class="line" id="l935">    935</a> 		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
<a href="#l936" class="line" id="l936">    936</a> 	#endif
<a href="#l937" class="line" id="l937">    937</a> 	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
<a href="#l938" class="line" id="l938">    938</a> 	#ifdef USE_SHEEN_ROUGHNESSMAP
<a href="#l939" class="line" id="l939">    939</a> 		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
<a href="#l940" class="line" id="l940">    940</a> 	#endif
<a href="#l941" class="line" id="l941">    941</a> #endif
<a href="#l942" class="line" id="l942">    942</a> #ifdef USE_ANISOTROPY
<a href="#l943" class="line" id="l943">    943</a> 	#ifdef USE_ANISOTROPYMAP
<a href="#l944" class="line" id="l944">    944</a> 		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
<a href="#l945" class="line" id="l945">    945</a> 		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
<a href="#l946" class="line" id="l946">    946</a> 		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
<a href="#l947" class="line" id="l947">    947</a> 	#else
<a href="#l948" class="line" id="l948">    948</a> 		vec2 anisotropyV = anisotropyVector;
<a href="#l949" class="line" id="l949">    949</a> 	#endif
<a href="#l950" class="line" id="l950">    950</a> 	material.anisotropy = length( anisotropyV );
<a href="#l951" class="line" id="l951">    951</a> 	if( material.anisotropy == 0.0 ) {
<a href="#l952" class="line" id="l952">    952</a> 		anisotropyV = vec2( 1.0, 0.0 );
<a href="#l953" class="line" id="l953">    953</a> 	} else {
<a href="#l954" class="line" id="l954">    954</a> 		anisotropyV /= material.anisotropy;
<a href="#l955" class="line" id="l955">    955</a> 		material.anisotropy = saturate( material.anisotropy );
<a href="#l956" class="line" id="l956">    956</a> 	}
<a href="#l957" class="line" id="l957">    957</a> 	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
<a href="#l958" class="line" id="l958">    958</a> 	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
<a href="#l959" class="line" id="l959">    959</a> 	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
<a href="#l960" class="line" id="l960">    960</a> #endif`,sV=`struct PhysicalMaterial {
<a href="#l961" class="line" id="l961">    961</a> 	vec3 diffuseColor;
<a href="#l962" class="line" id="l962">    962</a> 	float roughness;
<a href="#l963" class="line" id="l963">    963</a> 	vec3 specularColor;
<a href="#l964" class="line" id="l964">    964</a> 	float specularF90;
<a href="#l965" class="line" id="l965">    965</a> 	float dispersion;
<a href="#l966" class="line" id="l966">    966</a> 	#ifdef USE_CLEARCOAT
<a href="#l967" class="line" id="l967">    967</a> 		float clearcoat;
<a href="#l968" class="line" id="l968">    968</a> 		float clearcoatRoughness;
<a href="#l969" class="line" id="l969">    969</a> 		vec3 clearcoatF0;
<a href="#l970" class="line" id="l970">    970</a> 		float clearcoatF90;
<a href="#l971" class="line" id="l971">    971</a> 	#endif
<a href="#l972" class="line" id="l972">    972</a> 	#ifdef USE_IRIDESCENCE
<a href="#l973" class="line" id="l973">    973</a> 		float iridescence;
<a href="#l974" class="line" id="l974">    974</a> 		float iridescenceIOR;
<a href="#l975" class="line" id="l975">    975</a> 		float iridescenceThickness;
<a href="#l976" class="line" id="l976">    976</a> 		vec3 iridescenceFresnel;
<a href="#l977" class="line" id="l977">    977</a> 		vec3 iridescenceF0;
<a href="#l978" class="line" id="l978">    978</a> 	#endif
<a href="#l979" class="line" id="l979">    979</a> 	#ifdef USE_SHEEN
<a href="#l980" class="line" id="l980">    980</a> 		vec3 sheenColor;
<a href="#l981" class="line" id="l981">    981</a> 		float sheenRoughness;
<a href="#l982" class="line" id="l982">    982</a> 	#endif
<a href="#l983" class="line" id="l983">    983</a> 	#ifdef IOR
<a href="#l984" class="line" id="l984">    984</a> 		float ior;
<a href="#l985" class="line" id="l985">    985</a> 	#endif
<a href="#l986" class="line" id="l986">    986</a> 	#ifdef USE_TRANSMISSION
<a href="#l987" class="line" id="l987">    987</a> 		float transmission;
<a href="#l988" class="line" id="l988">    988</a> 		float transmissionAlpha;
<a href="#l989" class="line" id="l989">    989</a> 		float thickness;
<a href="#l990" class="line" id="l990">    990</a> 		float attenuationDistance;
<a href="#l991" class="line" id="l991">    991</a> 		vec3 attenuationColor;
<a href="#l992" class="line" id="l992">    992</a> 	#endif
<a href="#l993" class="line" id="l993">    993</a> 	#ifdef USE_ANISOTROPY
<a href="#l994" class="line" id="l994">    994</a> 		float anisotropy;
<a href="#l995" class="line" id="l995">    995</a> 		float alphaT;
<a href="#l996" class="line" id="l996">    996</a> 		vec3 anisotropyT;
<a href="#l997" class="line" id="l997">    997</a> 		vec3 anisotropyB;
<a href="#l998" class="line" id="l998">    998</a> 	#endif
<a href="#l999" class="line" id="l999">    999</a> };
<a href="#l1000" class="line" id="l1000">   1000</a> vec3 clearcoatSpecularDirect = vec3( 0.0 );
<a href="#l1001" class="line" id="l1001">   1001</a> vec3 clearcoatSpecularIndirect = vec3( 0.0 );
<a href="#l1002" class="line" id="l1002">   1002</a> vec3 sheenSpecularDirect = vec3( 0.0 );
<a href="#l1003" class="line" id="l1003">   1003</a> vec3 sheenSpecularIndirect = vec3(0.0 );
<a href="#l1004" class="line" id="l1004">   1004</a> vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
<a href="#l1005" class="line" id="l1005">   1005</a>     float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
<a href="#l1006" class="line" id="l1006">   1006</a>     float x2 = x * x;
<a href="#l1007" class="line" id="l1007">   1007</a>     float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
<a href="#l1008" class="line" id="l1008">   1008</a>     return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
<a href="#l1009" class="line" id="l1009">   1009</a> }
<a href="#l1010" class="line" id="l1010">   1010</a> float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
<a href="#l1011" class="line" id="l1011">   1011</a> 	float a2 = pow2( alpha );
<a href="#l1012" class="line" id="l1012">   1012</a> 	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
<a href="#l1013" class="line" id="l1013">   1013</a> 	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
<a href="#l1014" class="line" id="l1014">   1014</a> 	return 0.5 / max( gv + gl, EPSILON );
<a href="#l1015" class="line" id="l1015">   1015</a> }
<a href="#l1016" class="line" id="l1016">   1016</a> float D_GGX( const in float alpha, const in float dotNH ) {
<a href="#l1017" class="line" id="l1017">   1017</a> 	float a2 = pow2( alpha );
<a href="#l1018" class="line" id="l1018">   1018</a> 	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
<a href="#l1019" class="line" id="l1019">   1019</a> 	return RECIPROCAL_PI * a2 / pow2( denom );
<a href="#l1020" class="line" id="l1020">   1020</a> }
<a href="#l1021" class="line" id="l1021">   1021</a> #ifdef USE_ANISOTROPY
<a href="#l1022" class="line" id="l1022">   1022</a> 	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
<a href="#l1023" class="line" id="l1023">   1023</a> 		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
<a href="#l1024" class="line" id="l1024">   1024</a> 		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
<a href="#l1025" class="line" id="l1025">   1025</a> 		float v = 0.5 / ( gv + gl );
<a href="#l1026" class="line" id="l1026">   1026</a> 		return saturate(v);
<a href="#l1027" class="line" id="l1027">   1027</a> 	}
<a href="#l1028" class="line" id="l1028">   1028</a> 	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
<a href="#l1029" class="line" id="l1029">   1029</a> 		float a2 = alphaT * alphaB;
<a href="#l1030" class="line" id="l1030">   1030</a> 		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
<a href="#l1031" class="line" id="l1031">   1031</a> 		highp float v2 = dot( v, v );
<a href="#l1032" class="line" id="l1032">   1032</a> 		float w2 = a2 / v2;
<a href="#l1033" class="line" id="l1033">   1033</a> 		return RECIPROCAL_PI * a2 * pow2 ( w2 );
<a href="#l1034" class="line" id="l1034">   1034</a> 	}
<a href="#l1035" class="line" id="l1035">   1035</a> #endif
<a href="#l1036" class="line" id="l1036">   1036</a> #ifdef USE_CLEARCOAT
<a href="#l1037" class="line" id="l1037">   1037</a> 	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
<a href="#l1038" class="line" id="l1038">   1038</a> 		vec3 f0 = material.clearcoatF0;
<a href="#l1039" class="line" id="l1039">   1039</a> 		float f90 = material.clearcoatF90;
<a href="#l1040" class="line" id="l1040">   1040</a> 		float roughness = material.clearcoatRoughness;
<a href="#l1041" class="line" id="l1041">   1041</a> 		float alpha = pow2( roughness );
<a href="#l1042" class="line" id="l1042">   1042</a> 		vec3 halfDir = normalize( lightDir + viewDir );
<a href="#l1043" class="line" id="l1043">   1043</a> 		float dotNL = saturate( dot( normal, lightDir ) );
<a href="#l1044" class="line" id="l1044">   1044</a> 		float dotNV = saturate( dot( normal, viewDir ) );
<a href="#l1045" class="line" id="l1045">   1045</a> 		float dotNH = saturate( dot( normal, halfDir ) );
<a href="#l1046" class="line" id="l1046">   1046</a> 		float dotVH = saturate( dot( viewDir, halfDir ) );
<a href="#l1047" class="line" id="l1047">   1047</a> 		vec3 F = F_Schlick( f0, f90, dotVH );
<a href="#l1048" class="line" id="l1048">   1048</a> 		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
<a href="#l1049" class="line" id="l1049">   1049</a> 		float D = D_GGX( alpha, dotNH );
<a href="#l1050" class="line" id="l1050">   1050</a> 		return F * ( V * D );
<a href="#l1051" class="line" id="l1051">   1051</a> 	}
<a href="#l1052" class="line" id="l1052">   1052</a> #endif
<a href="#l1053" class="line" id="l1053">   1053</a> vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
<a href="#l1054" class="line" id="l1054">   1054</a> 	vec3 f0 = material.specularColor;
<a href="#l1055" class="line" id="l1055">   1055</a> 	float f90 = material.specularF90;
<a href="#l1056" class="line" id="l1056">   1056</a> 	float roughness = material.roughness;
<a href="#l1057" class="line" id="l1057">   1057</a> 	float alpha = pow2( roughness );
<a href="#l1058" class="line" id="l1058">   1058</a> 	vec3 halfDir = normalize( lightDir + viewDir );
<a href="#l1059" class="line" id="l1059">   1059</a> 	float dotNL = saturate( dot( normal, lightDir ) );
<a href="#l1060" class="line" id="l1060">   1060</a> 	float dotNV = saturate( dot( normal, viewDir ) );
<a href="#l1061" class="line" id="l1061">   1061</a> 	float dotNH = saturate( dot( normal, halfDir ) );
<a href="#l1062" class="line" id="l1062">   1062</a> 	float dotVH = saturate( dot( viewDir, halfDir ) );
<a href="#l1063" class="line" id="l1063">   1063</a> 	vec3 F = F_Schlick( f0, f90, dotVH );
<a href="#l1064" class="line" id="l1064">   1064</a> 	#ifdef USE_IRIDESCENCE
<a href="#l1065" class="line" id="l1065">   1065</a> 		F = mix( F, material.iridescenceFresnel, material.iridescence );
<a href="#l1066" class="line" id="l1066">   1066</a> 	#endif
<a href="#l1067" class="line" id="l1067">   1067</a> 	#ifdef USE_ANISOTROPY
<a href="#l1068" class="line" id="l1068">   1068</a> 		float dotTL = dot( material.anisotropyT, lightDir );
<a href="#l1069" class="line" id="l1069">   1069</a> 		float dotTV = dot( material.anisotropyT, viewDir );
<a href="#l1070" class="line" id="l1070">   1070</a> 		float dotTH = dot( material.anisotropyT, halfDir );
<a href="#l1071" class="line" id="l1071">   1071</a> 		float dotBL = dot( material.anisotropyB, lightDir );
<a href="#l1072" class="line" id="l1072">   1072</a> 		float dotBV = dot( material.anisotropyB, viewDir );
<a href="#l1073" class="line" id="l1073">   1073</a> 		float dotBH = dot( material.anisotropyB, halfDir );
<a href="#l1074" class="line" id="l1074">   1074</a> 		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
<a href="#l1075" class="line" id="l1075">   1075</a> 		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
<a href="#l1076" class="line" id="l1076">   1076</a> 	#else
<a href="#l1077" class="line" id="l1077">   1077</a> 		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
<a href="#l1078" class="line" id="l1078">   1078</a> 		float D = D_GGX( alpha, dotNH );
<a href="#l1079" class="line" id="l1079">   1079</a> 	#endif
<a href="#l1080" class="line" id="l1080">   1080</a> 	return F * ( V * D );
<a href="#l1081" class="line" id="l1081">   1081</a> }
<a href="#l1082" class="line" id="l1082">   1082</a> vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
<a href="#l1083" class="line" id="l1083">   1083</a> 	const float LUT_SIZE = 64.0;
<a href="#l1084" class="line" id="l1084">   1084</a> 	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
<a href="#l1085" class="line" id="l1085">   1085</a> 	const float LUT_BIAS = 0.5 / LUT_SIZE;
<a href="#l1086" class="line" id="l1086">   1086</a> 	float dotNV = saturate( dot( N, V ) );
<a href="#l1087" class="line" id="l1087">   1087</a> 	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
<a href="#l1088" class="line" id="l1088">   1088</a> 	uv = uv * LUT_SCALE + LUT_BIAS;
<a href="#l1089" class="line" id="l1089">   1089</a> 	return uv;
<a href="#l1090" class="line" id="l1090">   1090</a> }
<a href="#l1091" class="line" id="l1091">   1091</a> float LTC_ClippedSphereFormFactor( const in vec3 f ) {
<a href="#l1092" class="line" id="l1092">   1092</a> 	float l = length( f );
<a href="#l1093" class="line" id="l1093">   1093</a> 	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
<a href="#l1094" class="line" id="l1094">   1094</a> }
<a href="#l1095" class="line" id="l1095">   1095</a> vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
<a href="#l1096" class="line" id="l1096">   1096</a> 	float x = dot( v1, v2 );
<a href="#l1097" class="line" id="l1097">   1097</a> 	float y = abs( x );
<a href="#l1098" class="line" id="l1098">   1098</a> 	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
<a href="#l1099" class="line" id="l1099">   1099</a> 	float b = 3.4175940 + ( 4.1616724 + y ) * y;
<a href="#l1100" class="line" id="l1100">   1100</a> 	float v = a / b;
<a href="#l1101" class="line" id="l1101">   1101</a> 	float theta_sintheta = ( x &gt; 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
<a href="#l1102" class="line" id="l1102">   1102</a> 	return cross( v1, v2 ) * theta_sintheta;
<a href="#l1103" class="line" id="l1103">   1103</a> }
<a href="#l1104" class="line" id="l1104">   1104</a> vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
<a href="#l1105" class="line" id="l1105">   1105</a> 	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
<a href="#l1106" class="line" id="l1106">   1106</a> 	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
<a href="#l1107" class="line" id="l1107">   1107</a> 	vec3 lightNormal = cross( v1, v2 );
<a href="#l1108" class="line" id="l1108">   1108</a> 	if( dot( lightNormal, P - rectCoords[ 0 ] ) &lt; 0.0 ) return vec3( 0.0 );
<a href="#l1109" class="line" id="l1109">   1109</a> 	vec3 T1, T2;
<a href="#l1110" class="line" id="l1110">   1110</a> 	T1 = normalize( V - N * dot( V, N ) );
<a href="#l1111" class="line" id="l1111">   1111</a> 	T2 = - cross( N, T1 );
<a href="#l1112" class="line" id="l1112">   1112</a> 	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
<a href="#l1113" class="line" id="l1113">   1113</a> 	vec3 coords[ 4 ];
<a href="#l1114" class="line" id="l1114">   1114</a> 	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
<a href="#l1115" class="line" id="l1115">   1115</a> 	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
<a href="#l1116" class="line" id="l1116">   1116</a> 	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
<a href="#l1117" class="line" id="l1117">   1117</a> 	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
<a href="#l1118" class="line" id="l1118">   1118</a> 	coords[ 0 ] = normalize( coords[ 0 ] );
<a href="#l1119" class="line" id="l1119">   1119</a> 	coords[ 1 ] = normalize( coords[ 1 ] );
<a href="#l1120" class="line" id="l1120">   1120</a> 	coords[ 2 ] = normalize( coords[ 2 ] );
<a href="#l1121" class="line" id="l1121">   1121</a> 	coords[ 3 ] = normalize( coords[ 3 ] );
<a href="#l1122" class="line" id="l1122">   1122</a> 	vec3 vectorFormFactor = vec3( 0.0 );
<a href="#l1123" class="line" id="l1123">   1123</a> 	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
<a href="#l1124" class="line" id="l1124">   1124</a> 	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
<a href="#l1125" class="line" id="l1125">   1125</a> 	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
<a href="#l1126" class="line" id="l1126">   1126</a> 	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
<a href="#l1127" class="line" id="l1127">   1127</a> 	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
<a href="#l1128" class="line" id="l1128">   1128</a> 	return vec3( result );
<a href="#l1129" class="line" id="l1129">   1129</a> }
<a href="#l1130" class="line" id="l1130">   1130</a> #if defined( USE_SHEEN )
<a href="#l1131" class="line" id="l1131">   1131</a> float D_Charlie( float roughness, float dotNH ) {
<a href="#l1132" class="line" id="l1132">   1132</a> 	float alpha = pow2( roughness );
<a href="#l1133" class="line" id="l1133">   1133</a> 	float invAlpha = 1.0 / alpha;
<a href="#l1134" class="line" id="l1134">   1134</a> 	float cos2h = dotNH * dotNH;
<a href="#l1135" class="line" id="l1135">   1135</a> 	float sin2h = max( 1.0 - cos2h, 0.0078125 );
<a href="#l1136" class="line" id="l1136">   1136</a> 	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
<a href="#l1137" class="line" id="l1137">   1137</a> }
<a href="#l1138" class="line" id="l1138">   1138</a> float V_Neubelt( float dotNV, float dotNL ) {
<a href="#l1139" class="line" id="l1139">   1139</a> 	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
<a href="#l1140" class="line" id="l1140">   1140</a> }
<a href="#l1141" class="line" id="l1141">   1141</a> vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
<a href="#l1142" class="line" id="l1142">   1142</a> 	vec3 halfDir = normalize( lightDir + viewDir );
<a href="#l1143" class="line" id="l1143">   1143</a> 	float dotNL = saturate( dot( normal, lightDir ) );
<a href="#l1144" class="line" id="l1144">   1144</a> 	float dotNV = saturate( dot( normal, viewDir ) );
<a href="#l1145" class="line" id="l1145">   1145</a> 	float dotNH = saturate( dot( normal, halfDir ) );
<a href="#l1146" class="line" id="l1146">   1146</a> 	float D = D_Charlie( sheenRoughness, dotNH );
<a href="#l1147" class="line" id="l1147">   1147</a> 	float V = V_Neubelt( dotNV, dotNL );
<a href="#l1148" class="line" id="l1148">   1148</a> 	return sheenColor * ( D * V );
<a href="#l1149" class="line" id="l1149">   1149</a> }
<a href="#l1150" class="line" id="l1150">   1150</a> #endif
<a href="#l1151" class="line" id="l1151">   1151</a> float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
<a href="#l1152" class="line" id="l1152">   1152</a> 	float dotNV = saturate( dot( normal, viewDir ) );
<a href="#l1153" class="line" id="l1153">   1153</a> 	float r2 = roughness * roughness;
<a href="#l1154" class="line" id="l1154">   1154</a> 	float a = roughness &lt; 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
<a href="#l1155" class="line" id="l1155">   1155</a> 	float b = roughness &lt; 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
<a href="#l1156" class="line" id="l1156">   1156</a> 	float DG = exp( a * dotNV + b ) + ( roughness &lt; 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
<a href="#l1157" class="line" id="l1157">   1157</a> 	return saturate( DG * RECIPROCAL_PI );
<a href="#l1158" class="line" id="l1158">   1158</a> }
<a href="#l1159" class="line" id="l1159">   1159</a> vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
<a href="#l1160" class="line" id="l1160">   1160</a> 	float dotNV = saturate( dot( normal, viewDir ) );
<a href="#l1161" class="line" id="l1161">   1161</a> 	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
<a href="#l1162" class="line" id="l1162">   1162</a> 	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
<a href="#l1163" class="line" id="l1163">   1163</a> 	vec4 r = roughness * c0 + c1;
<a href="#l1164" class="line" id="l1164">   1164</a> 	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
<a href="#l1165" class="line" id="l1165">   1165</a> 	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
<a href="#l1166" class="line" id="l1166">   1166</a> 	return fab;
<a href="#l1167" class="line" id="l1167">   1167</a> }
<a href="#l1168" class="line" id="l1168">   1168</a> vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
<a href="#l1169" class="line" id="l1169">   1169</a> 	vec2 fab = DFGApprox( normal, viewDir, roughness );
<a href="#l1170" class="line" id="l1170">   1170</a> 	return specularColor * fab.x + specularF90 * fab.y;
<a href="#l1171" class="line" id="l1171">   1171</a> }
<a href="#l1172" class="line" id="l1172">   1172</a> #ifdef USE_IRIDESCENCE
<a href="#l1173" class="line" id="l1173">   1173</a> void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
<a href="#l1174" class="line" id="l1174">   1174</a> #else
<a href="#l1175" class="line" id="l1175">   1175</a> void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
<a href="#l1176" class="line" id="l1176">   1176</a> #endif
<a href="#l1177" class="line" id="l1177">   1177</a> 	vec2 fab = DFGApprox( normal, viewDir, roughness );
<a href="#l1178" class="line" id="l1178">   1178</a> 	#ifdef USE_IRIDESCENCE
<a href="#l1179" class="line" id="l1179">   1179</a> 		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
<a href="#l1180" class="line" id="l1180">   1180</a> 	#else
<a href="#l1181" class="line" id="l1181">   1181</a> 		vec3 Fr = specularColor;
<a href="#l1182" class="line" id="l1182">   1182</a> 	#endif
<a href="#l1183" class="line" id="l1183">   1183</a> 	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
<a href="#l1184" class="line" id="l1184">   1184</a> 	float Ess = fab.x + fab.y;
<a href="#l1185" class="line" id="l1185">   1185</a> 	float Ems = 1.0 - Ess;
<a href="#l1186" class="line" id="l1186">   1186</a> 	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
<a href="#l1187" class="line" id="l1187">   1187</a> 	singleScatter += FssEss;
<a href="#l1188" class="line" id="l1188">   1188</a> 	multiScatter += Fms * Ems;
<a href="#l1189" class="line" id="l1189">   1189</a> }
<a href="#l1190" class="line" id="l1190">   1190</a> #if NUM_RECT_AREA_LIGHTS &gt; 0
<a href="#l1191" class="line" id="l1191">   1191</a> 	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l1192" class="line" id="l1192">   1192</a> 		vec3 normal = geometryNormal;
<a href="#l1193" class="line" id="l1193">   1193</a> 		vec3 viewDir = geometryViewDir;
<a href="#l1194" class="line" id="l1194">   1194</a> 		vec3 position = geometryPosition;
<a href="#l1195" class="line" id="l1195">   1195</a> 		vec3 lightPos = rectAreaLight.position;
<a href="#l1196" class="line" id="l1196">   1196</a> 		vec3 halfWidth = rectAreaLight.halfWidth;
<a href="#l1197" class="line" id="l1197">   1197</a> 		vec3 halfHeight = rectAreaLight.halfHeight;
<a href="#l1198" class="line" id="l1198">   1198</a> 		vec3 lightColor = rectAreaLight.color;
<a href="#l1199" class="line" id="l1199">   1199</a> 		float roughness = material.roughness;
<a href="#l1200" class="line" id="l1200">   1200</a> 		vec3 rectCoords[ 4 ];
<a href="#l1201" class="line" id="l1201">   1201</a> 		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
<a href="#l1202" class="line" id="l1202">   1202</a> 		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
<a href="#l1203" class="line" id="l1203">   1203</a> 		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
<a href="#l1204" class="line" id="l1204">   1204</a> 		vec2 uv = LTC_Uv( normal, viewDir, roughness );
<a href="#l1205" class="line" id="l1205">   1205</a> 		vec4 t1 = texture2D( ltc_1, uv );
<a href="#l1206" class="line" id="l1206">   1206</a> 		vec4 t2 = texture2D( ltc_2, uv );
<a href="#l1207" class="line" id="l1207">   1207</a> 		mat3 mInv = mat3(
<a href="#l1208" class="line" id="l1208">   1208</a> 			vec3( t1.x, 0, t1.y ),
<a href="#l1209" class="line" id="l1209">   1209</a> 			vec3(    0, 1,    0 ),
<a href="#l1210" class="line" id="l1210">   1210</a> 			vec3( t1.z, 0, t1.w )
<a href="#l1211" class="line" id="l1211">   1211</a> 		);
<a href="#l1212" class="line" id="l1212">   1212</a> 		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
<a href="#l1213" class="line" id="l1213">   1213</a> 		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
<a href="#l1214" class="line" id="l1214">   1214</a> 		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
<a href="#l1215" class="line" id="l1215">   1215</a> 	}
<a href="#l1216" class="line" id="l1216">   1216</a> #endif
<a href="#l1217" class="line" id="l1217">   1217</a> void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l1218" class="line" id="l1218">   1218</a> 	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
<a href="#l1219" class="line" id="l1219">   1219</a> 	vec3 irradiance = dotNL * directLight.color;
<a href="#l1220" class="line" id="l1220">   1220</a> 	#ifdef USE_CLEARCOAT
<a href="#l1221" class="line" id="l1221">   1221</a> 		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
<a href="#l1222" class="line" id="l1222">   1222</a> 		vec3 ccIrradiance = dotNLcc * directLight.color;
<a href="#l1223" class="line" id="l1223">   1223</a> 		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
<a href="#l1224" class="line" id="l1224">   1224</a> 	#endif
<a href="#l1225" class="line" id="l1225">   1225</a> 	#ifdef USE_SHEEN
<a href="#l1226" class="line" id="l1226">   1226</a> 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
<a href="#l1227" class="line" id="l1227">   1227</a> 	#endif
<a href="#l1228" class="line" id="l1228">   1228</a> 	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
<a href="#l1229" class="line" id="l1229">   1229</a> 	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
<a href="#l1230" class="line" id="l1230">   1230</a> }
<a href="#l1231" class="line" id="l1231">   1231</a> void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
<a href="#l1232" class="line" id="l1232">   1232</a> 	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
<a href="#l1233" class="line" id="l1233">   1233</a> }
<a href="#l1234" class="line" id="l1234">   1234</a> void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
<a href="#l1235" class="line" id="l1235">   1235</a> 	#ifdef USE_CLEARCOAT
<a href="#l1236" class="line" id="l1236">   1236</a> 		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
<a href="#l1237" class="line" id="l1237">   1237</a> 	#endif
<a href="#l1238" class="line" id="l1238">   1238</a> 	#ifdef USE_SHEEN
<a href="#l1239" class="line" id="l1239">   1239</a> 		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
<a href="#l1240" class="line" id="l1240">   1240</a> 	#endif
<a href="#l1241" class="line" id="l1241">   1241</a> 	vec3 singleScattering = vec3( 0.0 );
<a href="#l1242" class="line" id="l1242">   1242</a> 	vec3 multiScattering = vec3( 0.0 );
<a href="#l1243" class="line" id="l1243">   1243</a> 	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
<a href="#l1244" class="line" id="l1244">   1244</a> 	#ifdef USE_IRIDESCENCE
<a href="#l1245" class="line" id="l1245">   1245</a> 		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
<a href="#l1246" class="line" id="l1246">   1246</a> 	#else
<a href="#l1247" class="line" id="l1247">   1247</a> 		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
<a href="#l1248" class="line" id="l1248">   1248</a> 	#endif
<a href="#l1249" class="line" id="l1249">   1249</a> 	vec3 totalScattering = singleScattering + multiScattering;
<a href="#l1250" class="line" id="l1250">   1250</a> 	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
<a href="#l1251" class="line" id="l1251">   1251</a> 	reflectedLight.indirectSpecular += radiance * singleScattering;
<a href="#l1252" class="line" id="l1252">   1252</a> 	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
<a href="#l1253" class="line" id="l1253">   1253</a> 	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
<a href="#l1254" class="line" id="l1254">   1254</a> }
<a href="#l1255" class="line" id="l1255">   1255</a> #define RE_Direct				RE_Direct_Physical
<a href="#l1256" class="line" id="l1256">   1256</a> #define RE_Direct_RectArea		RE_Direct_RectArea_Physical
<a href="#l1257" class="line" id="l1257">   1257</a> #define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
<a href="#l1258" class="line" id="l1258">   1258</a> #define RE_IndirectSpecular		RE_IndirectSpecular_Physical
<a href="#l1259" class="line" id="l1259">   1259</a> float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
<a href="#l1260" class="line" id="l1260">   1260</a> 	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
<a href="#l1261" class="line" id="l1261">   1261</a> }`,rV=`
<a href="#l1262" class="line" id="l1262">   1262</a> vec3 geometryPosition = - vViewPosition;
<a href="#l1263" class="line" id="l1263">   1263</a> vec3 geometryNormal = normal;
<a href="#l1264" class="line" id="l1264">   1264</a> vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
<a href="#l1265" class="line" id="l1265">   1265</a> vec3 geometryClearcoatNormal = vec3( 0.0 );
<a href="#l1266" class="line" id="l1266">   1266</a> #ifdef USE_CLEARCOAT
<a href="#l1267" class="line" id="l1267">   1267</a> 	geometryClearcoatNormal = clearcoatNormal;
<a href="#l1268" class="line" id="l1268">   1268</a> #endif
<a href="#l1269" class="line" id="l1269">   1269</a> #ifdef USE_IRIDESCENCE
<a href="#l1270" class="line" id="l1270">   1270</a> 	float dotNVi = saturate( dot( normal, geometryViewDir ) );
<a href="#l1271" class="line" id="l1271">   1271</a> 	if ( material.iridescenceThickness == 0.0 ) {
<a href="#l1272" class="line" id="l1272">   1272</a> 		material.iridescence = 0.0;
<a href="#l1273" class="line" id="l1273">   1273</a> 	} else {
<a href="#l1274" class="line" id="l1274">   1274</a> 		material.iridescence = saturate( material.iridescence );
<a href="#l1275" class="line" id="l1275">   1275</a> 	}
<a href="#l1276" class="line" id="l1276">   1276</a> 	if ( material.iridescence &gt; 0.0 ) {
<a href="#l1277" class="line" id="l1277">   1277</a> 		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
<a href="#l1278" class="line" id="l1278">   1278</a> 		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
<a href="#l1279" class="line" id="l1279">   1279</a> 	}
<a href="#l1280" class="line" id="l1280">   1280</a> #endif
<a href="#l1281" class="line" id="l1281">   1281</a> IncidentLight directLight;
<a href="#l1282" class="line" id="l1282">   1282</a> #if ( NUM_POINT_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
<a href="#l1283" class="line" id="l1283">   1283</a> 	PointLight pointLight;
<a href="#l1284" class="line" id="l1284">   1284</a> 	#if defined( USE_SHADOWMAP ) &amp;&amp; NUM_POINT_LIGHT_SHADOWS &gt; 0
<a href="#l1285" class="line" id="l1285">   1285</a> 	PointLightShadow pointLightShadow;
<a href="#l1286" class="line" id="l1286">   1286</a> 	#endif
<a href="#l1287" class="line" id="l1287">   1287</a> 	#pragma unroll_loop_start
<a href="#l1288" class="line" id="l1288">   1288</a> 	for ( int i = 0; i &lt; NUM_POINT_LIGHTS; i ++ ) {
<a href="#l1289" class="line" id="l1289">   1289</a> 		pointLight = pointLights[ i ];
<a href="#l1290" class="line" id="l1290">   1290</a> 		getPointLightInfo( pointLight, geometryPosition, directLight );
<a href="#l1291" class="line" id="l1291">   1291</a> 		#if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_POINT_LIGHT_SHADOWS )
<a href="#l1292" class="line" id="l1292">   1292</a> 		pointLightShadow = pointLightShadows[ i ];
<a href="#l1293" class="line" id="l1293">   1293</a> 		directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
<a href="#l1294" class="line" id="l1294">   1294</a> 		#endif
<a href="#l1295" class="line" id="l1295">   1295</a> 		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
<a href="#l1296" class="line" id="l1296">   1296</a> 	}
<a href="#l1297" class="line" id="l1297">   1297</a> 	#pragma unroll_loop_end
<a href="#l1298" class="line" id="l1298">   1298</a> #endif
<a href="#l1299" class="line" id="l1299">   1299</a> #if ( NUM_SPOT_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
<a href="#l1300" class="line" id="l1300">   1300</a> 	SpotLight spotLight;
<a href="#l1301" class="line" id="l1301">   1301</a> 	vec4 spotColor;
<a href="#l1302" class="line" id="l1302">   1302</a> 	vec3 spotLightCoord;
<a href="#l1303" class="line" id="l1303">   1303</a> 	bool inSpotLightMap;
<a href="#l1304" class="line" id="l1304">   1304</a> 	#if defined( USE_SHADOWMAP ) &amp;&amp; NUM_SPOT_LIGHT_SHADOWS &gt; 0
<a href="#l1305" class="line" id="l1305">   1305</a> 	SpotLightShadow spotLightShadow;
<a href="#l1306" class="line" id="l1306">   1306</a> 	#endif
<a href="#l1307" class="line" id="l1307">   1307</a> 	#pragma unroll_loop_start
<a href="#l1308" class="line" id="l1308">   1308</a> 	for ( int i = 0; i &lt; NUM_SPOT_LIGHTS; i ++ ) {
<a href="#l1309" class="line" id="l1309">   1309</a> 		spotLight = spotLights[ i ];
<a href="#l1310" class="line" id="l1310">   1310</a> 		getSpotLightInfo( spotLight, geometryPosition, directLight );
<a href="#l1311" class="line" id="l1311">   1311</a> 		#if ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
<a href="#l1312" class="line" id="l1312">   1312</a> 		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
<a href="#l1313" class="line" id="l1313">   1313</a> 		#elif ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
<a href="#l1314" class="line" id="l1314">   1314</a> 		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
<a href="#l1315" class="line" id="l1315">   1315</a> 		#else
<a href="#l1316" class="line" id="l1316">   1316</a> 		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
<a href="#l1317" class="line" id="l1317">   1317</a> 		#endif
<a href="#l1318" class="line" id="l1318">   1318</a> 		#if ( SPOT_LIGHT_MAP_INDEX &lt; NUM_SPOT_LIGHT_MAPS )
<a href="#l1319" class="line" id="l1319">   1319</a> 			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
<a href="#l1320" class="line" id="l1320">   1320</a> 			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
<a href="#l1321" class="line" id="l1321">   1321</a> 			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
<a href="#l1322" class="line" id="l1322">   1322</a> 			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
<a href="#l1323" class="line" id="l1323">   1323</a> 		#endif
<a href="#l1324" class="line" id="l1324">   1324</a> 		#undef SPOT_LIGHT_MAP_INDEX
<a href="#l1325" class="line" id="l1325">   1325</a> 		#if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
<a href="#l1326" class="line" id="l1326">   1326</a> 		spotLightShadow = spotLightShadows[ i ];
<a href="#l1327" class="line" id="l1327">   1327</a> 		directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
<a href="#l1328" class="line" id="l1328">   1328</a> 		#endif
<a href="#l1329" class="line" id="l1329">   1329</a> 		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
<a href="#l1330" class="line" id="l1330">   1330</a> 	}
<a href="#l1331" class="line" id="l1331">   1331</a> 	#pragma unroll_loop_end
<a href="#l1332" class="line" id="l1332">   1332</a> #endif
<a href="#l1333" class="line" id="l1333">   1333</a> #if ( NUM_DIR_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct )
<a href="#l1334" class="line" id="l1334">   1334</a> 	DirectionalLight directionalLight;
<a href="#l1335" class="line" id="l1335">   1335</a> 	#if defined( USE_SHADOWMAP ) &amp;&amp; NUM_DIR_LIGHT_SHADOWS &gt; 0
<a href="#l1336" class="line" id="l1336">   1336</a> 	DirectionalLightShadow directionalLightShadow;
<a href="#l1337" class="line" id="l1337">   1337</a> 	#endif
<a href="#l1338" class="line" id="l1338">   1338</a> 	#pragma unroll_loop_start
<a href="#l1339" class="line" id="l1339">   1339</a> 	for ( int i = 0; i &lt; NUM_DIR_LIGHTS; i ++ ) {
<a href="#l1340" class="line" id="l1340">   1340</a> 		directionalLight = directionalLights[ i ];
<a href="#l1341" class="line" id="l1341">   1341</a> 		getDirectionalLightInfo( directionalLight, directLight );
<a href="#l1342" class="line" id="l1342">   1342</a> 		#if defined( USE_SHADOWMAP ) &amp;&amp; ( UNROLLED_LOOP_INDEX &lt; NUM_DIR_LIGHT_SHADOWS )
<a href="#l1343" class="line" id="l1343">   1343</a> 		directionalLightShadow = directionalLightShadows[ i ];
<a href="#l1344" class="line" id="l1344">   1344</a> 		directLight.color *= ( directLight.visible &amp;&amp; receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
<a href="#l1345" class="line" id="l1345">   1345</a> 		#endif
<a href="#l1346" class="line" id="l1346">   1346</a> 		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
<a href="#l1347" class="line" id="l1347">   1347</a> 	}
<a href="#l1348" class="line" id="l1348">   1348</a> 	#pragma unroll_loop_end
<a href="#l1349" class="line" id="l1349">   1349</a> #endif
<a href="#l1350" class="line" id="l1350">   1350</a> #if ( NUM_RECT_AREA_LIGHTS &gt; 0 ) &amp;&amp; defined( RE_Direct_RectArea )
<a href="#l1351" class="line" id="l1351">   1351</a> 	RectAreaLight rectAreaLight;
<a href="#l1352" class="line" id="l1352">   1352</a> 	#pragma unroll_loop_start
<a href="#l1353" class="line" id="l1353">   1353</a> 	for ( int i = 0; i &lt; NUM_RECT_AREA_LIGHTS; i ++ ) {
<a href="#l1354" class="line" id="l1354">   1354</a> 		rectAreaLight = rectAreaLights[ i ];
<a href="#l1355" class="line" id="l1355">   1355</a> 		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
<a href="#l1356" class="line" id="l1356">   1356</a> 	}
<a href="#l1357" class="line" id="l1357">   1357</a> 	#pragma unroll_loop_end
<a href="#l1358" class="line" id="l1358">   1358</a> #endif
<a href="#l1359" class="line" id="l1359">   1359</a> #if defined( RE_IndirectDiffuse )
<a href="#l1360" class="line" id="l1360">   1360</a> 	vec3 iblIrradiance = vec3( 0.0 );
<a href="#l1361" class="line" id="l1361">   1361</a> 	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
<a href="#l1362" class="line" id="l1362">   1362</a> 	#if defined( USE_LIGHT_PROBES )
<a href="#l1363" class="line" id="l1363">   1363</a> 		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
<a href="#l1364" class="line" id="l1364">   1364</a> 	#endif
<a href="#l1365" class="line" id="l1365">   1365</a> 	#if ( NUM_HEMI_LIGHTS &gt; 0 )
<a href="#l1366" class="line" id="l1366">   1366</a> 		#pragma unroll_loop_start
<a href="#l1367" class="line" id="l1367">   1367</a> 		for ( int i = 0; i &lt; NUM_HEMI_LIGHTS; i ++ ) {
<a href="#l1368" class="line" id="l1368">   1368</a> 			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
<a href="#l1369" class="line" id="l1369">   1369</a> 		}
<a href="#l1370" class="line" id="l1370">   1370</a> 		#pragma unroll_loop_end
<a href="#l1371" class="line" id="l1371">   1371</a> 	#endif
<a href="#l1372" class="line" id="l1372">   1372</a> #endif
<a href="#l1373" class="line" id="l1373">   1373</a> #if defined( RE_IndirectSpecular )
<a href="#l1374" class="line" id="l1374">   1374</a> 	vec3 radiance = vec3( 0.0 );
<a href="#l1375" class="line" id="l1375">   1375</a> 	vec3 clearcoatRadiance = vec3( 0.0 );
<a href="#l1376" class="line" id="l1376">   1376</a> #endif`,oV=`#if defined( RE_IndirectDiffuse )
<a href="#l1377" class="line" id="l1377">   1377</a> 	#ifdef USE_LIGHTMAP
<a href="#l1378" class="line" id="l1378">   1378</a> 		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
<a href="#l1379" class="line" id="l1379">   1379</a> 		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
<a href="#l1380" class="line" id="l1380">   1380</a> 		irradiance += lightMapIrradiance;
<a href="#l1381" class="line" id="l1381">   1381</a> 	#endif
<a href="#l1382" class="line" id="l1382">   1382</a> 	#if defined( USE_ENVMAP ) &amp;&amp; defined( STANDARD ) &amp;&amp; defined( ENVMAP_TYPE_CUBE_UV )
<a href="#l1383" class="line" id="l1383">   1383</a> 		iblIrradiance += getIBLIrradiance( geometryNormal );
<a href="#l1384" class="line" id="l1384">   1384</a> 	#endif
<a href="#l1385" class="line" id="l1385">   1385</a> #endif
<a href="#l1386" class="line" id="l1386">   1386</a> #if defined( USE_ENVMAP ) &amp;&amp; defined( RE_IndirectSpecular )
<a href="#l1387" class="line" id="l1387">   1387</a> 	#ifdef USE_ANISOTROPY
<a href="#l1388" class="line" id="l1388">   1388</a> 		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
<a href="#l1389" class="line" id="l1389">   1389</a> 	#else
<a href="#l1390" class="line" id="l1390">   1390</a> 		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
<a href="#l1391" class="line" id="l1391">   1391</a> 	#endif
<a href="#l1392" class="line" id="l1392">   1392</a> 	#ifdef USE_CLEARCOAT
<a href="#l1393" class="line" id="l1393">   1393</a> 		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
<a href="#l1394" class="line" id="l1394">   1394</a> 	#endif
<a href="#l1395" class="line" id="l1395">   1395</a> #endif`,lV=`#if defined( RE_IndirectDiffuse )
<a href="#l1396" class="line" id="l1396">   1396</a> 	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
<a href="#l1397" class="line" id="l1397">   1397</a> #endif
<a href="#l1398" class="line" id="l1398">   1398</a> #if defined( RE_IndirectSpecular )
<a href="#l1399" class="line" id="l1399">   1399</a> 	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
<a href="#l1400" class="line" id="l1400">   1400</a> #endif`,uV=`#if defined( USE_LOGDEPTHBUF )
<a href="#l1401" class="line" id="l1401">   1401</a> 	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
<a href="#l1402" class="line" id="l1402">   1402</a> #endif`,cV=`#if defined( USE_LOGDEPTHBUF )
<a href="#l1403" class="line" id="l1403">   1403</a> 	uniform float logDepthBufFC;
<a href="#l1404" class="line" id="l1404">   1404</a> 	varying float vFragDepth;
<a href="#l1405" class="line" id="l1405">   1405</a> 	varying float vIsPerspective;
<a href="#l1406" class="line" id="l1406">   1406</a> #endif`,fV=`#ifdef USE_LOGDEPTHBUF
<a href="#l1407" class="line" id="l1407">   1407</a> 	varying float vFragDepth;
<a href="#l1408" class="line" id="l1408">   1408</a> 	varying float vIsPerspective;
<a href="#l1409" class="line" id="l1409">   1409</a> #endif`,hV=`#ifdef USE_LOGDEPTHBUF
<a href="#l1410" class="line" id="l1410">   1410</a> 	vFragDepth = 1.0 + gl_Position.w;
<a href="#l1411" class="line" id="l1411">   1411</a> 	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
<a href="#l1412" class="line" id="l1412">   1412</a> #endif`,dV=`#ifdef USE_MAP
<a href="#l1413" class="line" id="l1413">   1413</a> 	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
<a href="#l1414" class="line" id="l1414">   1414</a> 	#ifdef DECODE_VIDEO_TEXTURE
<a href="#l1415" class="line" id="l1415">   1415</a> 		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
<a href="#l1416" class="line" id="l1416">   1416</a> 	#endif
<a href="#l1417" class="line" id="l1417">   1417</a> 	diffuseColor *= sampledDiffuseColor;
<a href="#l1418" class="line" id="l1418">   1418</a> #endif`,pV=`#ifdef USE_MAP
<a href="#l1419" class="line" id="l1419">   1419</a> 	uniform sampler2D map;
<a href="#l1420" class="line" id="l1420">   1420</a> #endif`,mV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
<a href="#l1421" class="line" id="l1421">   1421</a> 	#if defined( USE_POINTS_UV )
<a href="#l1422" class="line" id="l1422">   1422</a> 		vec2 uv = vUv;
<a href="#l1423" class="line" id="l1423">   1423</a> 	#else
<a href="#l1424" class="line" id="l1424">   1424</a> 		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
<a href="#l1425" class="line" id="l1425">   1425</a> 	#endif
<a href="#l1426" class="line" id="l1426">   1426</a> #endif
<a href="#l1427" class="line" id="l1427">   1427</a> #ifdef USE_MAP
<a href="#l1428" class="line" id="l1428">   1428</a> 	diffuseColor *= texture2D( map, uv );
<a href="#l1429" class="line" id="l1429">   1429</a> #endif
<a href="#l1430" class="line" id="l1430">   1430</a> #ifdef USE_ALPHAMAP
<a href="#l1431" class="line" id="l1431">   1431</a> 	diffuseColor.a *= texture2D( alphaMap, uv ).g;
<a href="#l1432" class="line" id="l1432">   1432</a> #endif`,gV=`#if defined( USE_POINTS_UV )
<a href="#l1433" class="line" id="l1433">   1433</a> 	varying vec2 vUv;
<a href="#l1434" class="line" id="l1434">   1434</a> #else
<a href="#l1435" class="line" id="l1435">   1435</a> 	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
<a href="#l1436" class="line" id="l1436">   1436</a> 		uniform mat3 uvTransform;
<a href="#l1437" class="line" id="l1437">   1437</a> 	#endif
<a href="#l1438" class="line" id="l1438">   1438</a> #endif
<a href="#l1439" class="line" id="l1439">   1439</a> #ifdef USE_MAP
<a href="#l1440" class="line" id="l1440">   1440</a> 	uniform sampler2D map;
<a href="#l1441" class="line" id="l1441">   1441</a> #endif
<a href="#l1442" class="line" id="l1442">   1442</a> #ifdef USE_ALPHAMAP
<a href="#l1443" class="line" id="l1443">   1443</a> 	uniform sampler2D alphaMap;
<a href="#l1444" class="line" id="l1444">   1444</a> #endif`,vV=`float metalnessFactor = metalness;
<a href="#l1445" class="line" id="l1445">   1445</a> #ifdef USE_METALNESSMAP
<a href="#l1446" class="line" id="l1446">   1446</a> 	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
<a href="#l1447" class="line" id="l1447">   1447</a> 	metalnessFactor *= texelMetalness.b;
<a href="#l1448" class="line" id="l1448">   1448</a> #endif`,yV=`#ifdef USE_METALNESSMAP
<a href="#l1449" class="line" id="l1449">   1449</a> 	uniform sampler2D metalnessMap;
<a href="#l1450" class="line" id="l1450">   1450</a> #endif`,_V=`#ifdef USE_INSTANCING_MORPH
<a href="#l1451" class="line" id="l1451">   1451</a> 	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
<a href="#l1452" class="line" id="l1452">   1452</a> 	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
<a href="#l1453" class="line" id="l1453">   1453</a> 	for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
<a href="#l1454" class="line" id="l1454">   1454</a> 		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
<a href="#l1455" class="line" id="l1455">   1455</a> 	}
<a href="#l1456" class="line" id="l1456">   1456</a> #endif`,xV=`#if defined( USE_MORPHCOLORS )
<a href="#l1457" class="line" id="l1457">   1457</a> 	vColor *= morphTargetBaseInfluence;
<a href="#l1458" class="line" id="l1458">   1458</a> 	for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
<a href="#l1459" class="line" id="l1459">   1459</a> 		#if defined( USE_COLOR_ALPHA )
<a href="#l1460" class="line" id="l1460">   1460</a> 			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
<a href="#l1461" class="line" id="l1461">   1461</a> 		#elif defined( USE_COLOR )
<a href="#l1462" class="line" id="l1462">   1462</a> 			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
<a href="#l1463" class="line" id="l1463">   1463</a> 		#endif
<a href="#l1464" class="line" id="l1464">   1464</a> 	}
<a href="#l1465" class="line" id="l1465">   1465</a> #endif`,SV=`#ifdef USE_MORPHNORMALS
<a href="#l1466" class="line" id="l1466">   1466</a> 	objectNormal *= morphTargetBaseInfluence;
<a href="#l1467" class="line" id="l1467">   1467</a> 	for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
<a href="#l1468" class="line" id="l1468">   1468</a> 		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
<a href="#l1469" class="line" id="l1469">   1469</a> 	}
<a href="#l1470" class="line" id="l1470">   1470</a> #endif`,MV=`#ifdef USE_MORPHTARGETS
<a href="#l1471" class="line" id="l1471">   1471</a> 	#ifndef USE_INSTANCING_MORPH
<a href="#l1472" class="line" id="l1472">   1472</a> 		uniform float morphTargetBaseInfluence;
<a href="#l1473" class="line" id="l1473">   1473</a> 		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
<a href="#l1474" class="line" id="l1474">   1474</a> 	#endif
<a href="#l1475" class="line" id="l1475">   1475</a> 	uniform sampler2DArray morphTargetsTexture;
<a href="#l1476" class="line" id="l1476">   1476</a> 	uniform ivec2 morphTargetsTextureSize;
<a href="#l1477" class="line" id="l1477">   1477</a> 	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
<a href="#l1478" class="line" id="l1478">   1478</a> 		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
<a href="#l1479" class="line" id="l1479">   1479</a> 		int y = texelIndex / morphTargetsTextureSize.x;
<a href="#l1480" class="line" id="l1480">   1480</a> 		int x = texelIndex - y * morphTargetsTextureSize.x;
<a href="#l1481" class="line" id="l1481">   1481</a> 		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
<a href="#l1482" class="line" id="l1482">   1482</a> 		return texelFetch( morphTargetsTexture, morphUV, 0 );
<a href="#l1483" class="line" id="l1483">   1483</a> 	}
<a href="#l1484" class="line" id="l1484">   1484</a> #endif`,EV=`#ifdef USE_MORPHTARGETS
<a href="#l1485" class="line" id="l1485">   1485</a> 	transformed *= morphTargetBaseInfluence;
<a href="#l1486" class="line" id="l1486">   1486</a> 	for ( int i = 0; i &lt; MORPHTARGETS_COUNT; i ++ ) {
<a href="#l1487" class="line" id="l1487">   1487</a> 		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
<a href="#l1488" class="line" id="l1488">   1488</a> 	}
<a href="#l1489" class="line" id="l1489">   1489</a> #endif`,bV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
<a href="#l1490" class="line" id="l1490">   1490</a> #ifdef FLAT_SHADED
<a href="#l1491" class="line" id="l1491">   1491</a> 	vec3 fdx = dFdx( vViewPosition );
<a href="#l1492" class="line" id="l1492">   1492</a> 	vec3 fdy = dFdy( vViewPosition );
<a href="#l1493" class="line" id="l1493">   1493</a> 	vec3 normal = normalize( cross( fdx, fdy ) );
<a href="#l1494" class="line" id="l1494">   1494</a> #else
<a href="#l1495" class="line" id="l1495">   1495</a> 	vec3 normal = normalize( vNormal );
<a href="#l1496" class="line" id="l1496">   1496</a> 	#ifdef DOUBLE_SIDED
<a href="#l1497" class="line" id="l1497">   1497</a> 		normal *= faceDirection;
<a href="#l1498" class="line" id="l1498">   1498</a> 	#endif
<a href="#l1499" class="line" id="l1499">   1499</a> #endif
<a href="#l1500" class="line" id="l1500">   1500</a> #if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
<a href="#l1501" class="line" id="l1501">   1501</a> 	#ifdef USE_TANGENT
<a href="#l1502" class="line" id="l1502">   1502</a> 		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
<a href="#l1503" class="line" id="l1503">   1503</a> 	#else
<a href="#l1504" class="line" id="l1504">   1504</a> 		mat3 tbn = getTangentFrame( - vViewPosition, normal,
<a href="#l1505" class="line" id="l1505">   1505</a> 		#if defined( USE_NORMALMAP )
<a href="#l1506" class="line" id="l1506">   1506</a> 			vNormalMapUv
<a href="#l1507" class="line" id="l1507">   1507</a> 		#elif defined( USE_CLEARCOAT_NORMALMAP )
<a href="#l1508" class="line" id="l1508">   1508</a> 			vClearcoatNormalMapUv
<a href="#l1509" class="line" id="l1509">   1509</a> 		#else
<a href="#l1510" class="line" id="l1510">   1510</a> 			vUv
<a href="#l1511" class="line" id="l1511">   1511</a> 		#endif
<a href="#l1512" class="line" id="l1512">   1512</a> 		);
<a href="#l1513" class="line" id="l1513">   1513</a> 	#endif
<a href="#l1514" class="line" id="l1514">   1514</a> 	#if defined( DOUBLE_SIDED ) &amp;&amp; ! defined( FLAT_SHADED )
<a href="#l1515" class="line" id="l1515">   1515</a> 		tbn[0] *= faceDirection;
<a href="#l1516" class="line" id="l1516">   1516</a> 		tbn[1] *= faceDirection;
<a href="#l1517" class="line" id="l1517">   1517</a> 	#endif
<a href="#l1518" class="line" id="l1518">   1518</a> #endif
<a href="#l1519" class="line" id="l1519">   1519</a> #ifdef USE_CLEARCOAT_NORMALMAP
<a href="#l1520" class="line" id="l1520">   1520</a> 	#ifdef USE_TANGENT
<a href="#l1521" class="line" id="l1521">   1521</a> 		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
<a href="#l1522" class="line" id="l1522">   1522</a> 	#else
<a href="#l1523" class="line" id="l1523">   1523</a> 		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
<a href="#l1524" class="line" id="l1524">   1524</a> 	#endif
<a href="#l1525" class="line" id="l1525">   1525</a> 	#if defined( DOUBLE_SIDED ) &amp;&amp; ! defined( FLAT_SHADED )
<a href="#l1526" class="line" id="l1526">   1526</a> 		tbn2[0] *= faceDirection;
<a href="#l1527" class="line" id="l1527">   1527</a> 		tbn2[1] *= faceDirection;
<a href="#l1528" class="line" id="l1528">   1528</a> 	#endif
<a href="#l1529" class="line" id="l1529">   1529</a> #endif
<a href="#l1530" class="line" id="l1530">   1530</a> vec3 nonPerturbedNormal = normal;`,TV=`#ifdef USE_NORMALMAP_OBJECTSPACE
<a href="#l1531" class="line" id="l1531">   1531</a> 	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
<a href="#l1532" class="line" id="l1532">   1532</a> 	#ifdef FLIP_SIDED
<a href="#l1533" class="line" id="l1533">   1533</a> 		normal = - normal;
<a href="#l1534" class="line" id="l1534">   1534</a> 	#endif
<a href="#l1535" class="line" id="l1535">   1535</a> 	#ifdef DOUBLE_SIDED
<a href="#l1536" class="line" id="l1536">   1536</a> 		normal = normal * faceDirection;
<a href="#l1537" class="line" id="l1537">   1537</a> 	#endif
<a href="#l1538" class="line" id="l1538">   1538</a> 	normal = normalize( normalMatrix * normal );
<a href="#l1539" class="line" id="l1539">   1539</a> #elif defined( USE_NORMALMAP_TANGENTSPACE )
<a href="#l1540" class="line" id="l1540">   1540</a> 	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
<a href="#l1541" class="line" id="l1541">   1541</a> 	mapN.xy *= normalScale;
<a href="#l1542" class="line" id="l1542">   1542</a> 	normal = normalize( tbn * mapN );
<a href="#l1543" class="line" id="l1543">   1543</a> #elif defined( USE_BUMPMAP )
<a href="#l1544" class="line" id="l1544">   1544</a> 	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
<a href="#l1545" class="line" id="l1545">   1545</a> #endif`,AV=`#ifndef FLAT_SHADED
<a href="#l1546" class="line" id="l1546">   1546</a> 	varying vec3 vNormal;
<a href="#l1547" class="line" id="l1547">   1547</a> 	#ifdef USE_TANGENT
<a href="#l1548" class="line" id="l1548">   1548</a> 		varying vec3 vTangent;
<a href="#l1549" class="line" id="l1549">   1549</a> 		varying vec3 vBitangent;
<a href="#l1550" class="line" id="l1550">   1550</a> 	#endif
<a href="#l1551" class="line" id="l1551">   1551</a> #endif`,RV=`#ifndef FLAT_SHADED
<a href="#l1552" class="line" id="l1552">   1552</a> 	varying vec3 vNormal;
<a href="#l1553" class="line" id="l1553">   1553</a> 	#ifdef USE_TANGENT
<a href="#l1554" class="line" id="l1554">   1554</a> 		varying vec3 vTangent;
<a href="#l1555" class="line" id="l1555">   1555</a> 		varying vec3 vBitangent;
<a href="#l1556" class="line" id="l1556">   1556</a> 	#endif
<a href="#l1557" class="line" id="l1557">   1557</a> #endif`,CV=`#ifndef FLAT_SHADED
<a href="#l1558" class="line" id="l1558">   1558</a> 	vNormal = normalize( transformedNormal );
<a href="#l1559" class="line" id="l1559">   1559</a> 	#ifdef USE_TANGENT
<a href="#l1560" class="line" id="l1560">   1560</a> 		vTangent = normalize( transformedTangent );
<a href="#l1561" class="line" id="l1561">   1561</a> 		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
<a href="#l1562" class="line" id="l1562">   1562</a> 	#endif
<a href="#l1563" class="line" id="l1563">   1563</a> #endif`,wV=`#ifdef USE_NORMALMAP
<a href="#l1564" class="line" id="l1564">   1564</a> 	uniform sampler2D normalMap;
<a href="#l1565" class="line" id="l1565">   1565</a> 	uniform vec2 normalScale;
<a href="#l1566" class="line" id="l1566">   1566</a> #endif
<a href="#l1567" class="line" id="l1567">   1567</a> #ifdef USE_NORMALMAP_OBJECTSPACE
<a href="#l1568" class="line" id="l1568">   1568</a> 	uniform mat3 normalMatrix;
<a href="#l1569" class="line" id="l1569">   1569</a> #endif
<a href="#l1570" class="line" id="l1570">   1570</a> #if ! defined ( USE_TANGENT ) &amp;&amp; ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
<a href="#l1571" class="line" id="l1571">   1571</a> 	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
<a href="#l1572" class="line" id="l1572">   1572</a> 		vec3 q0 = dFdx( eye_pos.xyz );
<a href="#l1573" class="line" id="l1573">   1573</a> 		vec3 q1 = dFdy( eye_pos.xyz );
<a href="#l1574" class="line" id="l1574">   1574</a> 		vec2 st0 = dFdx( uv.st );
<a href="#l1575" class="line" id="l1575">   1575</a> 		vec2 st1 = dFdy( uv.st );
<a href="#l1576" class="line" id="l1576">   1576</a> 		vec3 N = surf_norm;
<a href="#l1577" class="line" id="l1577">   1577</a> 		vec3 q1perp = cross( q1, N );
<a href="#l1578" class="line" id="l1578">   1578</a> 		vec3 q0perp = cross( N, q0 );
<a href="#l1579" class="line" id="l1579">   1579</a> 		vec3 T = q1perp * st0.x + q0perp * st1.x;
<a href="#l1580" class="line" id="l1580">   1580</a> 		vec3 B = q1perp * st0.y + q0perp * st1.y;
<a href="#l1581" class="line" id="l1581">   1581</a> 		float det = max( dot( T, T ), dot( B, B ) );
<a href="#l1582" class="line" id="l1582">   1582</a> 		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
<a href="#l1583" class="line" id="l1583">   1583</a> 		return mat3( T * scale, B * scale, N );
<a href="#l1584" class="line" id="l1584">   1584</a> 	}
<a href="#l1585" class="line" id="l1585">   1585</a> #endif`,DV=`#ifdef USE_CLEARCOAT
<a href="#l1586" class="line" id="l1586">   1586</a> 	vec3 clearcoatNormal = nonPerturbedNormal;
<a href="#l1587" class="line" id="l1587">   1587</a> #endif`,UV=`#ifdef USE_CLEARCOAT_NORMALMAP
<a href="#l1588" class="line" id="l1588">   1588</a> 	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
<a href="#l1589" class="line" id="l1589">   1589</a> 	clearcoatMapN.xy *= clearcoatNormalScale;
<a href="#l1590" class="line" id="l1590">   1590</a> 	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
<a href="#l1591" class="line" id="l1591">   1591</a> #endif`,NV=`#ifdef USE_CLEARCOATMAP
<a href="#l1592" class="line" id="l1592">   1592</a> 	uniform sampler2D clearcoatMap;
<a href="#l1593" class="line" id="l1593">   1593</a> #endif
<a href="#l1594" class="line" id="l1594">   1594</a> #ifdef USE_CLEARCOAT_NORMALMAP
<a href="#l1595" class="line" id="l1595">   1595</a> 	uniform sampler2D clearcoatNormalMap;
<a href="#l1596" class="line" id="l1596">   1596</a> 	uniform vec2 clearcoatNormalScale;
<a href="#l1597" class="line" id="l1597">   1597</a> #endif
<a href="#l1598" class="line" id="l1598">   1598</a> #ifdef USE_CLEARCOAT_ROUGHNESSMAP
<a href="#l1599" class="line" id="l1599">   1599</a> 	uniform sampler2D clearcoatRoughnessMap;
<a href="#l1600" class="line" id="l1600">   1600</a> #endif`,OV=`#ifdef USE_IRIDESCENCEMAP
<a href="#l1601" class="line" id="l1601">   1601</a> 	uniform sampler2D iridescenceMap;
<a href="#l1602" class="line" id="l1602">   1602</a> #endif
<a href="#l1603" class="line" id="l1603">   1603</a> #ifdef USE_IRIDESCENCE_THICKNESSMAP
<a href="#l1604" class="line" id="l1604">   1604</a> 	uniform sampler2D iridescenceThicknessMap;
<a href="#l1605" class="line" id="l1605">   1605</a> #endif`,LV=`#ifdef OPAQUE
<a href="#l1606" class="line" id="l1606">   1606</a> diffuseColor.a = 1.0;
<a href="#l1607" class="line" id="l1607">   1607</a> #endif
<a href="#l1608" class="line" id="l1608">   1608</a> #ifdef USE_TRANSMISSION
<a href="#l1609" class="line" id="l1609">   1609</a> diffuseColor.a *= material.transmissionAlpha;
<a href="#l1610" class="line" id="l1610">   1610</a> #endif
<a href="#l1611" class="line" id="l1611">   1611</a> gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,zV=`vec3 packNormalToRGB( const in vec3 normal ) {
<a href="#l1612" class="line" id="l1612">   1612</a> 	return normalize( normal ) * 0.5 + 0.5;
<a href="#l1613" class="line" id="l1613">   1613</a> }
<a href="#l1614" class="line" id="l1614">   1614</a> vec3 unpackRGBToNormal( const in vec3 rgb ) {
<a href="#l1615" class="line" id="l1615">   1615</a> 	return 2.0 * rgb.xyz - 1.0;
<a href="#l1616" class="line" id="l1616">   1616</a> }
<a href="#l1617" class="line" id="l1617">   1617</a> const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
<a href="#l1618" class="line" id="l1618">   1618</a> const float Inv255 = 1. / 255.;
<a href="#l1619" class="line" id="l1619">   1619</a> const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
<a href="#l1620" class="line" id="l1620">   1620</a> const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
<a href="#l1621" class="line" id="l1621">   1621</a> const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
<a href="#l1622" class="line" id="l1622">   1622</a> const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
<a href="#l1623" class="line" id="l1623">   1623</a> vec4 packDepthToRGBA( const in float v ) {
<a href="#l1624" class="line" id="l1624">   1624</a> 	if( v &lt;= 0.0 )
<a href="#l1625" class="line" id="l1625">   1625</a> 		return vec4( 0., 0., 0., 0. );
<a href="#l1626" class="line" id="l1626">   1626</a> 	if( v &gt;= 1.0 )
<a href="#l1627" class="line" id="l1627">   1627</a> 		return vec4( 1., 1., 1., 1. );
<a href="#l1628" class="line" id="l1628">   1628</a> 	float vuf;
<a href="#l1629" class="line" id="l1629">   1629</a> 	float af = modf( v * PackFactors.a, vuf );
<a href="#l1630" class="line" id="l1630">   1630</a> 	float bf = modf( vuf * ShiftRight8, vuf );
<a href="#l1631" class="line" id="l1631">   1631</a> 	float gf = modf( vuf * ShiftRight8, vuf );
<a href="#l1632" class="line" id="l1632">   1632</a> 	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
<a href="#l1633" class="line" id="l1633">   1633</a> }
<a href="#l1634" class="line" id="l1634">   1634</a> vec3 packDepthToRGB( const in float v ) {
<a href="#l1635" class="line" id="l1635">   1635</a> 	if( v &lt;= 0.0 )
<a href="#l1636" class="line" id="l1636">   1636</a> 		return vec3( 0., 0., 0. );
<a href="#l1637" class="line" id="l1637">   1637</a> 	if( v &gt;= 1.0 )
<a href="#l1638" class="line" id="l1638">   1638</a> 		return vec3( 1., 1., 1. );
<a href="#l1639" class="line" id="l1639">   1639</a> 	float vuf;
<a href="#l1640" class="line" id="l1640">   1640</a> 	float bf = modf( v * PackFactors.b, vuf );
<a href="#l1641" class="line" id="l1641">   1641</a> 	float gf = modf( vuf * ShiftRight8, vuf );
<a href="#l1642" class="line" id="l1642">   1642</a> 	return vec3( vuf * Inv255, gf * PackUpscale, bf );
<a href="#l1643" class="line" id="l1643">   1643</a> }
<a href="#l1644" class="line" id="l1644">   1644</a> vec2 packDepthToRG( const in float v ) {
<a href="#l1645" class="line" id="l1645">   1645</a> 	if( v &lt;= 0.0 )
<a href="#l1646" class="line" id="l1646">   1646</a> 		return vec2( 0., 0. );
<a href="#l1647" class="line" id="l1647">   1647</a> 	if( v &gt;= 1.0 )
<a href="#l1648" class="line" id="l1648">   1648</a> 		return vec2( 1., 1. );
<a href="#l1649" class="line" id="l1649">   1649</a> 	float vuf;
<a href="#l1650" class="line" id="l1650">   1650</a> 	float gf = modf( v * 256., vuf );
<a href="#l1651" class="line" id="l1651">   1651</a> 	return vec2( vuf * Inv255, gf );
<a href="#l1652" class="line" id="l1652">   1652</a> }
<a href="#l1653" class="line" id="l1653">   1653</a> float unpackRGBAToDepth( const in vec4 v ) {
<a href="#l1654" class="line" id="l1654">   1654</a> 	return dot( v, UnpackFactors4 );
<a href="#l1655" class="line" id="l1655">   1655</a> }
<a href="#l1656" class="line" id="l1656">   1656</a> float unpackRGBToDepth( const in vec3 v ) {
<a href="#l1657" class="line" id="l1657">   1657</a> 	return dot( v, UnpackFactors3 );
<a href="#l1658" class="line" id="l1658">   1658</a> }
<a href="#l1659" class="line" id="l1659">   1659</a> float unpackRGToDepth( const in vec2 v ) {
<a href="#l1660" class="line" id="l1660">   1660</a> 	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
<a href="#l1661" class="line" id="l1661">   1661</a> }
<a href="#l1662" class="line" id="l1662">   1662</a> vec4 pack2HalfToRGBA( const in vec2 v ) {
<a href="#l1663" class="line" id="l1663">   1663</a> 	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
<a href="#l1664" class="line" id="l1664">   1664</a> 	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
<a href="#l1665" class="line" id="l1665">   1665</a> }
<a href="#l1666" class="line" id="l1666">   1666</a> vec2 unpackRGBATo2Half( const in vec4 v ) {
<a href="#l1667" class="line" id="l1667">   1667</a> 	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
<a href="#l1668" class="line" id="l1668">   1668</a> }
<a href="#l1669" class="line" id="l1669">   1669</a> float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
<a href="#l1670" class="line" id="l1670">   1670</a> 	return ( viewZ + near ) / ( near - far );
<a href="#l1671" class="line" id="l1671">   1671</a> }
<a href="#l1672" class="line" id="l1672">   1672</a> float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
<a href="#l1673" class="line" id="l1673">   1673</a> 	return depth * ( near - far ) - near;
<a href="#l1674" class="line" id="l1674">   1674</a> }
<a href="#l1675" class="line" id="l1675">   1675</a> float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
<a href="#l1676" class="line" id="l1676">   1676</a> 	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
<a href="#l1677" class="line" id="l1677">   1677</a> }
<a href="#l1678" class="line" id="l1678">   1678</a> float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
<a href="#l1679" class="line" id="l1679">   1679</a> 	return ( near * far ) / ( ( far - near ) * depth - far );
<a href="#l1680" class="line" id="l1680">   1680</a> }`,BV=`#ifdef PREMULTIPLIED_ALPHA
<a href="#l1681" class="line" id="l1681">   1681</a> 	gl_FragColor.rgb *= gl_FragColor.a;
<a href="#l1682" class="line" id="l1682">   1682</a> #endif`,PV=`vec4 mvPosition = vec4( transformed, 1.0 );
<a href="#l1683" class="line" id="l1683">   1683</a> #ifdef USE_BATCHING
<a href="#l1684" class="line" id="l1684">   1684</a> 	mvPosition = batchingMatrix * mvPosition;
<a href="#l1685" class="line" id="l1685">   1685</a> #endif
<a href="#l1686" class="line" id="l1686">   1686</a> #ifdef USE_INSTANCING
<a href="#l1687" class="line" id="l1687">   1687</a> 	mvPosition = instanceMatrix * mvPosition;
<a href="#l1688" class="line" id="l1688">   1688</a> #endif
<a href="#l1689" class="line" id="l1689">   1689</a> mvPosition = modelViewMatrix * mvPosition;
<a href="#l1690" class="line" id="l1690">   1690</a> gl_Position = projectionMatrix * mvPosition;`,IV=`#ifdef DITHERING
<a href="#l1691" class="line" id="l1691">   1691</a> 	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
<a href="#l1692" class="line" id="l1692">   1692</a> #endif`,HV=`#ifdef DITHERING
<a href="#l1693" class="line" id="l1693">   1693</a> 	vec3 dithering( vec3 color ) {
<a href="#l1694" class="line" id="l1694">   1694</a> 		float grid_position = rand( gl_FragCoord.xy );
<a href="#l1695" class="line" id="l1695">   1695</a> 		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
<a href="#l1696" class="line" id="l1696">   1696</a> 		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
<a href="#l1697" class="line" id="l1697">   1697</a> 		return color + dither_shift_RGB;
<a href="#l1698" class="line" id="l1698">   1698</a> 	}
<a href="#l1699" class="line" id="l1699">   1699</a> #endif`,FV=`float roughnessFactor = roughness;
<a href="#l1700" class="line" id="l1700">   1700</a> #ifdef USE_ROUGHNESSMAP
<a href="#l1701" class="line" id="l1701">   1701</a> 	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
<a href="#l1702" class="line" id="l1702">   1702</a> 	roughnessFactor *= texelRoughness.g;
<a href="#l1703" class="line" id="l1703">   1703</a> #endif`,VV=`#ifdef USE_ROUGHNESSMAP
<a href="#l1704" class="line" id="l1704">   1704</a> 	uniform sampler2D roughnessMap;
<a href="#l1705" class="line" id="l1705">   1705</a> #endif`,GV=`#if NUM_SPOT_LIGHT_COORDS &gt; 0
<a href="#l1706" class="line" id="l1706">   1706</a> 	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
<a href="#l1707" class="line" id="l1707">   1707</a> #endif
<a href="#l1708" class="line" id="l1708">   1708</a> #if NUM_SPOT_LIGHT_MAPS &gt; 0
<a href="#l1709" class="line" id="l1709">   1709</a> 	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
<a href="#l1710" class="line" id="l1710">   1710</a> #endif
<a href="#l1711" class="line" id="l1711">   1711</a> #ifdef USE_SHADOWMAP
<a href="#l1712" class="line" id="l1712">   1712</a> 	#if NUM_DIR_LIGHT_SHADOWS &gt; 0
<a href="#l1713" class="line" id="l1713">   1713</a> 		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
<a href="#l1714" class="line" id="l1714">   1714</a> 		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
<a href="#l1715" class="line" id="l1715">   1715</a> 		struct DirectionalLightShadow {
<a href="#l1716" class="line" id="l1716">   1716</a> 			float shadowIntensity;
<a href="#l1717" class="line" id="l1717">   1717</a> 			float shadowBias;
<a href="#l1718" class="line" id="l1718">   1718</a> 			float shadowNormalBias;
<a href="#l1719" class="line" id="l1719">   1719</a> 			float shadowRadius;
<a href="#l1720" class="line" id="l1720">   1720</a> 			vec2 shadowMapSize;
<a href="#l1721" class="line" id="l1721">   1721</a> 		};
<a href="#l1722" class="line" id="l1722">   1722</a> 		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
<a href="#l1723" class="line" id="l1723">   1723</a> 	#endif
<a href="#l1724" class="line" id="l1724">   1724</a> 	#if NUM_SPOT_LIGHT_SHADOWS &gt; 0
<a href="#l1725" class="line" id="l1725">   1725</a> 		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
<a href="#l1726" class="line" id="l1726">   1726</a> 		struct SpotLightShadow {
<a href="#l1727" class="line" id="l1727">   1727</a> 			float shadowIntensity;
<a href="#l1728" class="line" id="l1728">   1728</a> 			float shadowBias;
<a href="#l1729" class="line" id="l1729">   1729</a> 			float shadowNormalBias;
<a href="#l1730" class="line" id="l1730">   1730</a> 			float shadowRadius;
<a href="#l1731" class="line" id="l1731">   1731</a> 			vec2 shadowMapSize;
<a href="#l1732" class="line" id="l1732">   1732</a> 		};
<a href="#l1733" class="line" id="l1733">   1733</a> 		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
<a href="#l1734" class="line" id="l1734">   1734</a> 	#endif
<a href="#l1735" class="line" id="l1735">   1735</a> 	#if NUM_POINT_LIGHT_SHADOWS &gt; 0
<a href="#l1736" class="line" id="l1736">   1736</a> 		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
<a href="#l1737" class="line" id="l1737">   1737</a> 		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
<a href="#l1738" class="line" id="l1738">   1738</a> 		struct PointLightShadow {
<a href="#l1739" class="line" id="l1739">   1739</a> 			float shadowIntensity;
<a href="#l1740" class="line" id="l1740">   1740</a> 			float shadowBias;
<a href="#l1741" class="line" id="l1741">   1741</a> 			float shadowNormalBias;
<a href="#l1742" class="line" id="l1742">   1742</a> 			float shadowRadius;
<a href="#l1743" class="line" id="l1743">   1743</a> 			vec2 shadowMapSize;
<a href="#l1744" class="line" id="l1744">   1744</a> 			float shadowCameraNear;
<a href="#l1745" class="line" id="l1745">   1745</a> 			float shadowCameraFar;
<a href="#l1746" class="line" id="l1746">   1746</a> 		};
<a href="#l1747" class="line" id="l1747">   1747</a> 		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
<a href="#l1748" class="line" id="l1748">   1748</a> 	#endif
<a href="#l1749" class="line" id="l1749">   1749</a> 	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
<a href="#l1750" class="line" id="l1750">   1750</a> 		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
<a href="#l1751" class="line" id="l1751">   1751</a> 		#ifdef USE_REVERSEDEPTHBUF
<a href="#l1752" class="line" id="l1752">   1752</a> 			return step( depth, compare );
<a href="#l1753" class="line" id="l1753">   1753</a> 		#else
<a href="#l1754" class="line" id="l1754">   1754</a> 			return step( compare, depth );
<a href="#l1755" class="line" id="l1755">   1755</a> 		#endif
<a href="#l1756" class="line" id="l1756">   1756</a> 	}
<a href="#l1757" class="line" id="l1757">   1757</a> 	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
<a href="#l1758" class="line" id="l1758">   1758</a> 		return unpackRGBATo2Half( texture2D( shadow, uv ) );
<a href="#l1759" class="line" id="l1759">   1759</a> 	}
<a href="#l1760" class="line" id="l1760">   1760</a> 	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
<a href="#l1761" class="line" id="l1761">   1761</a> 		float occlusion = 1.0;
<a href="#l1762" class="line" id="l1762">   1762</a> 		vec2 distribution = texture2DDistribution( shadow, uv );
<a href="#l1763" class="line" id="l1763">   1763</a> 		#ifdef USE_REVERSEDEPTHBUF
<a href="#l1764" class="line" id="l1764">   1764</a> 			float hard_shadow = step( distribution.x, compare );
<a href="#l1765" class="line" id="l1765">   1765</a> 		#else
<a href="#l1766" class="line" id="l1766">   1766</a> 			float hard_shadow = step( compare , distribution.x );
<a href="#l1767" class="line" id="l1767">   1767</a> 		#endif
<a href="#l1768" class="line" id="l1768">   1768</a> 		if (hard_shadow != 1.0 ) {
<a href="#l1769" class="line" id="l1769">   1769</a> 			float distance = compare - distribution.x ;
<a href="#l1770" class="line" id="l1770">   1770</a> 			float variance = max( 0.00000, distribution.y * distribution.y );
<a href="#l1771" class="line" id="l1771">   1771</a> 			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
<a href="#l1772" class="line" id="l1772">   1772</a> 		}
<a href="#l1773" class="line" id="l1773">   1773</a> 		return occlusion;
<a href="#l1774" class="line" id="l1774">   1774</a> 	}
<a href="#l1775" class="line" id="l1775">   1775</a> 	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
<a href="#l1776" class="line" id="l1776">   1776</a> 		float shadow = 1.0;
<a href="#l1777" class="line" id="l1777">   1777</a> 		shadowCoord.xyz /= shadowCoord.w;
<a href="#l1778" class="line" id="l1778">   1778</a> 		shadowCoord.z += shadowBias;
<a href="#l1779" class="line" id="l1779">   1779</a> 		bool inFrustum = shadowCoord.x &gt;= 0.0 &amp;&amp; shadowCoord.x &lt;= 1.0 &amp;&amp; shadowCoord.y &gt;= 0.0 &amp;&amp; shadowCoord.y &lt;= 1.0;
<a href="#l1780" class="line" id="l1780">   1780</a> 		bool frustumTest = inFrustum &amp;&amp; shadowCoord.z &lt;= 1.0;
<a href="#l1781" class="line" id="l1781">   1781</a> 		if ( frustumTest ) {
<a href="#l1782" class="line" id="l1782">   1782</a> 		#if defined( SHADOWMAP_TYPE_PCF )
<a href="#l1783" class="line" id="l1783">   1783</a> 			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
<a href="#l1784" class="line" id="l1784">   1784</a> 			float dx0 = - texelSize.x * shadowRadius;
<a href="#l1785" class="line" id="l1785">   1785</a> 			float dy0 = - texelSize.y * shadowRadius;
<a href="#l1786" class="line" id="l1786">   1786</a> 			float dx1 = + texelSize.x * shadowRadius;
<a href="#l1787" class="line" id="l1787">   1787</a> 			float dy1 = + texelSize.y * shadowRadius;
<a href="#l1788" class="line" id="l1788">   1788</a> 			float dx2 = dx0 / 2.0;
<a href="#l1789" class="line" id="l1789">   1789</a> 			float dy2 = dy0 / 2.0;
<a href="#l1790" class="line" id="l1790">   1790</a> 			float dx3 = dx1 / 2.0;
<a href="#l1791" class="line" id="l1791">   1791</a> 			float dy3 = dy1 / 2.0;
<a href="#l1792" class="line" id="l1792">   1792</a> 			shadow = (
<a href="#l1793" class="line" id="l1793">   1793</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
<a href="#l1794" class="line" id="l1794">   1794</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
<a href="#l1795" class="line" id="l1795">   1795</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
<a href="#l1796" class="line" id="l1796">   1796</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
<a href="#l1797" class="line" id="l1797">   1797</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
<a href="#l1798" class="line" id="l1798">   1798</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
<a href="#l1799" class="line" id="l1799">   1799</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
<a href="#l1800" class="line" id="l1800">   1800</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
<a href="#l1801" class="line" id="l1801">   1801</a> 				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
<a href="#l1802" class="line" id="l1802">   1802</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
<a href="#l1803" class="line" id="l1803">   1803</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
<a href="#l1804" class="line" id="l1804">   1804</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
<a href="#l1805" class="line" id="l1805">   1805</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
<a href="#l1806" class="line" id="l1806">   1806</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
<a href="#l1807" class="line" id="l1807">   1807</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
<a href="#l1808" class="line" id="l1808">   1808</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
<a href="#l1809" class="line" id="l1809">   1809</a> 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
<a href="#l1810" class="line" id="l1810">   1810</a> 			) * ( 1.0 / 17.0 );
<a href="#l1811" class="line" id="l1811">   1811</a> 		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
<a href="#l1812" class="line" id="l1812">   1812</a> 			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
<a href="#l1813" class="line" id="l1813">   1813</a> 			float dx = texelSize.x;
<a href="#l1814" class="line" id="l1814">   1814</a> 			float dy = texelSize.y;
<a href="#l1815" class="line" id="l1815">   1815</a> 			vec2 uv = shadowCoord.xy;
<a href="#l1816" class="line" id="l1816">   1816</a> 			vec2 f = fract( uv * shadowMapSize + 0.5 );
<a href="#l1817" class="line" id="l1817">   1817</a> 			uv -= f * texelSize;
<a href="#l1818" class="line" id="l1818">   1818</a> 			shadow = (
<a href="#l1819" class="line" id="l1819">   1819</a> 				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
<a href="#l1820" class="line" id="l1820">   1820</a> 				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
<a href="#l1821" class="line" id="l1821">   1821</a> 				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
<a href="#l1822" class="line" id="l1822">   1822</a> 				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
<a href="#l1823" class="line" id="l1823">   1823</a> 				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
<a href="#l1824" class="line" id="l1824">   1824</a> 					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
<a href="#l1825" class="line" id="l1825">   1825</a> 					 f.x ) +
<a href="#l1826" class="line" id="l1826">   1826</a> 				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
<a href="#l1827" class="line" id="l1827">   1827</a> 					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
<a href="#l1828" class="line" id="l1828">   1828</a> 					 f.x ) +
<a href="#l1829" class="line" id="l1829">   1829</a> 				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
<a href="#l1830" class="line" id="l1830">   1830</a> 					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
<a href="#l1831" class="line" id="l1831">   1831</a> 					 f.y ) +
<a href="#l1832" class="line" id="l1832">   1832</a> 				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
<a href="#l1833" class="line" id="l1833">   1833</a> 					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
<a href="#l1834" class="line" id="l1834">   1834</a> 					 f.y ) +
<a href="#l1835" class="line" id="l1835">   1835</a> 				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
<a href="#l1836" class="line" id="l1836">   1836</a> 						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
<a href="#l1837" class="line" id="l1837">   1837</a> 						  f.x ),
<a href="#l1838" class="line" id="l1838">   1838</a> 					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
<a href="#l1839" class="line" id="l1839">   1839</a> 						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
<a href="#l1840" class="line" id="l1840">   1840</a> 						  f.x ),
<a href="#l1841" class="line" id="l1841">   1841</a> 					 f.y )
<a href="#l1842" class="line" id="l1842">   1842</a> 			) * ( 1.0 / 9.0 );
<a href="#l1843" class="line" id="l1843">   1843</a> 		#elif defined( SHADOWMAP_TYPE_VSM )
<a href="#l1844" class="line" id="l1844">   1844</a> 			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
<a href="#l1845" class="line" id="l1845">   1845</a> 		#else
<a href="#l1846" class="line" id="l1846">   1846</a> 			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
<a href="#l1847" class="line" id="l1847">   1847</a> 		#endif
<a href="#l1848" class="line" id="l1848">   1848</a> 		}
<a href="#l1849" class="line" id="l1849">   1849</a> 		return mix( 1.0, shadow, shadowIntensity );
<a href="#l1850" class="line" id="l1850">   1850</a> 	}
<a href="#l1851" class="line" id="l1851">   1851</a> 	vec2 cubeToUV( vec3 v, float texelSizeY ) {
<a href="#l1852" class="line" id="l1852">   1852</a> 		vec3 absV = abs( v );
<a href="#l1853" class="line" id="l1853">   1853</a> 		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
<a href="#l1854" class="line" id="l1854">   1854</a> 		absV *= scaleToCube;
<a href="#l1855" class="line" id="l1855">   1855</a> 		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
<a href="#l1856" class="line" id="l1856">   1856</a> 		vec2 planar = v.xy;
<a href="#l1857" class="line" id="l1857">   1857</a> 		float almostATexel = 1.5 * texelSizeY;
<a href="#l1858" class="line" id="l1858">   1858</a> 		float almostOne = 1.0 - almostATexel;
<a href="#l1859" class="line" id="l1859">   1859</a> 		if ( absV.z &gt;= almostOne ) {
<a href="#l1860" class="line" id="l1860">   1860</a> 			if ( v.z &gt; 0.0 )
<a href="#l1861" class="line" id="l1861">   1861</a> 				planar.x = 4.0 - v.x;
<a href="#l1862" class="line" id="l1862">   1862</a> 		} else if ( absV.x &gt;= almostOne ) {
<a href="#l1863" class="line" id="l1863">   1863</a> 			float signX = sign( v.x );
<a href="#l1864" class="line" id="l1864">   1864</a> 			planar.x = v.z * signX + 2.0 * signX;
<a href="#l1865" class="line" id="l1865">   1865</a> 		} else if ( absV.y &gt;= almostOne ) {
<a href="#l1866" class="line" id="l1866">   1866</a> 			float signY = sign( v.y );
<a href="#l1867" class="line" id="l1867">   1867</a> 			planar.x = v.x + 2.0 * signY + 2.0;
<a href="#l1868" class="line" id="l1868">   1868</a> 			planar.y = v.z * signY - 2.0;
<a href="#l1869" class="line" id="l1869">   1869</a> 		}
<a href="#l1870" class="line" id="l1870">   1870</a> 		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
<a href="#l1871" class="line" id="l1871">   1871</a> 	}
<a href="#l1872" class="line" id="l1872">   1872</a> 	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
<a href="#l1873" class="line" id="l1873">   1873</a> 		float shadow = 1.0;
<a href="#l1874" class="line" id="l1874">   1874</a> 		vec3 lightToPosition = shadowCoord.xyz;
<a href="#l1875" class="line" id="l1875">   1875</a> 		
<a href="#l1876" class="line" id="l1876">   1876</a> 		float lightToPositionLength = length( lightToPosition );
<a href="#l1877" class="line" id="l1877">   1877</a> 		if ( lightToPositionLength - shadowCameraFar &lt;= 0.0 &amp;&amp; lightToPositionLength - shadowCameraNear &gt;= 0.0 ) {
<a href="#l1878" class="line" id="l1878">   1878</a> 			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
<a href="#l1879" class="line" id="l1879">   1879</a> 			vec3 bd3D = normalize( lightToPosition );
<a href="#l1880" class="line" id="l1880">   1880</a> 			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
<a href="#l1881" class="line" id="l1881">   1881</a> 			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
<a href="#l1882" class="line" id="l1882">   1882</a> 				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
<a href="#l1883" class="line" id="l1883">   1883</a> 				shadow = (
<a href="#l1884" class="line" id="l1884">   1884</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
<a href="#l1885" class="line" id="l1885">   1885</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
<a href="#l1886" class="line" id="l1886">   1886</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
<a href="#l1887" class="line" id="l1887">   1887</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
<a href="#l1888" class="line" id="l1888">   1888</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
<a href="#l1889" class="line" id="l1889">   1889</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
<a href="#l1890" class="line" id="l1890">   1890</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
<a href="#l1891" class="line" id="l1891">   1891</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
<a href="#l1892" class="line" id="l1892">   1892</a> 					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
<a href="#l1893" class="line" id="l1893">   1893</a> 				) * ( 1.0 / 9.0 );
<a href="#l1894" class="line" id="l1894">   1894</a> 			#else
<a href="#l1895" class="line" id="l1895">   1895</a> 				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
<a href="#l1896" class="line" id="l1896">   1896</a> 			#endif
<a href="#l1897" class="line" id="l1897">   1897</a> 		}
<a href="#l1898" class="line" id="l1898">   1898</a> 		return mix( 1.0, shadow, shadowIntensity );
<a href="#l1899" class="line" id="l1899">   1899</a> 	}
<a href="#l1900" class="line" id="l1900">   1900</a> #endif`,XV=`#if NUM_SPOT_LIGHT_COORDS &gt; 0
<a href="#l1901" class="line" id="l1901">   1901</a> 	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
<a href="#l1902" class="line" id="l1902">   1902</a> 	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
<a href="#l1903" class="line" id="l1903">   1903</a> #endif
<a href="#l1904" class="line" id="l1904">   1904</a> #ifdef USE_SHADOWMAP
<a href="#l1905" class="line" id="l1905">   1905</a> 	#if NUM_DIR_LIGHT_SHADOWS &gt; 0
<a href="#l1906" class="line" id="l1906">   1906</a> 		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
<a href="#l1907" class="line" id="l1907">   1907</a> 		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
<a href="#l1908" class="line" id="l1908">   1908</a> 		struct DirectionalLightShadow {
<a href="#l1909" class="line" id="l1909">   1909</a> 			float shadowIntensity;
<a href="#l1910" class="line" id="l1910">   1910</a> 			float shadowBias;
<a href="#l1911" class="line" id="l1911">   1911</a> 			float shadowNormalBias;
<a href="#l1912" class="line" id="l1912">   1912</a> 			float shadowRadius;
<a href="#l1913" class="line" id="l1913">   1913</a> 			vec2 shadowMapSize;
<a href="#l1914" class="line" id="l1914">   1914</a> 		};
<a href="#l1915" class="line" id="l1915">   1915</a> 		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
<a href="#l1916" class="line" id="l1916">   1916</a> 	#endif
<a href="#l1917" class="line" id="l1917">   1917</a> 	#if NUM_SPOT_LIGHT_SHADOWS &gt; 0
<a href="#l1918" class="line" id="l1918">   1918</a> 		struct SpotLightShadow {
<a href="#l1919" class="line" id="l1919">   1919</a> 			float shadowIntensity;
<a href="#l1920" class="line" id="l1920">   1920</a> 			float shadowBias;
<a href="#l1921" class="line" id="l1921">   1921</a> 			float shadowNormalBias;
<a href="#l1922" class="line" id="l1922">   1922</a> 			float shadowRadius;
<a href="#l1923" class="line" id="l1923">   1923</a> 			vec2 shadowMapSize;
<a href="#l1924" class="line" id="l1924">   1924</a> 		};
<a href="#l1925" class="line" id="l1925">   1925</a> 		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
<a href="#l1926" class="line" id="l1926">   1926</a> 	#endif
<a href="#l1927" class="line" id="l1927">   1927</a> 	#if NUM_POINT_LIGHT_SHADOWS &gt; 0
<a href="#l1928" class="line" id="l1928">   1928</a> 		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
<a href="#l1929" class="line" id="l1929">   1929</a> 		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
<a href="#l1930" class="line" id="l1930">   1930</a> 		struct PointLightShadow {
<a href="#l1931" class="line" id="l1931">   1931</a> 			float shadowIntensity;
<a href="#l1932" class="line" id="l1932">   1932</a> 			float shadowBias;
<a href="#l1933" class="line" id="l1933">   1933</a> 			float shadowNormalBias;
<a href="#l1934" class="line" id="l1934">   1934</a> 			float shadowRadius;
<a href="#l1935" class="line" id="l1935">   1935</a> 			vec2 shadowMapSize;
<a href="#l1936" class="line" id="l1936">   1936</a> 			float shadowCameraNear;
<a href="#l1937" class="line" id="l1937">   1937</a> 			float shadowCameraFar;
<a href="#l1938" class="line" id="l1938">   1938</a> 		};
<a href="#l1939" class="line" id="l1939">   1939</a> 		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
<a href="#l1940" class="line" id="l1940">   1940</a> 	#endif
<a href="#l1941" class="line" id="l1941">   1941</a> #endif`,qV=`#if ( defined( USE_SHADOWMAP ) &amp;&amp; ( NUM_DIR_LIGHT_SHADOWS &gt; 0 || NUM_POINT_LIGHT_SHADOWS &gt; 0 ) ) || ( NUM_SPOT_LIGHT_COORDS &gt; 0 )
<a href="#l1942" class="line" id="l1942">   1942</a> 	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
<a href="#l1943" class="line" id="l1943">   1943</a> 	vec4 shadowWorldPosition;
<a href="#l1944" class="line" id="l1944">   1944</a> #endif
<a href="#l1945" class="line" id="l1945">   1945</a> #if defined( USE_SHADOWMAP )
<a href="#l1946" class="line" id="l1946">   1946</a> 	#if NUM_DIR_LIGHT_SHADOWS &gt; 0
<a href="#l1947" class="line" id="l1947">   1947</a> 		#pragma unroll_loop_start
<a href="#l1948" class="line" id="l1948">   1948</a> 		for ( int i = 0; i &lt; NUM_DIR_LIGHT_SHADOWS; i ++ ) {
<a href="#l1949" class="line" id="l1949">   1949</a> 			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
<a href="#l1950" class="line" id="l1950">   1950</a> 			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
<a href="#l1951" class="line" id="l1951">   1951</a> 		}
<a href="#l1952" class="line" id="l1952">   1952</a> 		#pragma unroll_loop_end
<a href="#l1953" class="line" id="l1953">   1953</a> 	#endif
<a href="#l1954" class="line" id="l1954">   1954</a> 	#if NUM_POINT_LIGHT_SHADOWS &gt; 0
<a href="#l1955" class="line" id="l1955">   1955</a> 		#pragma unroll_loop_start
<a href="#l1956" class="line" id="l1956">   1956</a> 		for ( int i = 0; i &lt; NUM_POINT_LIGHT_SHADOWS; i ++ ) {
<a href="#l1957" class="line" id="l1957">   1957</a> 			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
<a href="#l1958" class="line" id="l1958">   1958</a> 			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
<a href="#l1959" class="line" id="l1959">   1959</a> 		}
<a href="#l1960" class="line" id="l1960">   1960</a> 		#pragma unroll_loop_end
<a href="#l1961" class="line" id="l1961">   1961</a> 	#endif
<a href="#l1962" class="line" id="l1962">   1962</a> #endif
<a href="#l1963" class="line" id="l1963">   1963</a> #if NUM_SPOT_LIGHT_COORDS &gt; 0
<a href="#l1964" class="line" id="l1964">   1964</a> 	#pragma unroll_loop_start
<a href="#l1965" class="line" id="l1965">   1965</a> 	for ( int i = 0; i &lt; NUM_SPOT_LIGHT_COORDS; i ++ ) {
<a href="#l1966" class="line" id="l1966">   1966</a> 		shadowWorldPosition = worldPosition;
<a href="#l1967" class="line" id="l1967">   1967</a> 		#if ( defined( USE_SHADOWMAP ) &amp;&amp; UNROLLED_LOOP_INDEX &lt; NUM_SPOT_LIGHT_SHADOWS )
<a href="#l1968" class="line" id="l1968">   1968</a> 			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
<a href="#l1969" class="line" id="l1969">   1969</a> 		#endif
<a href="#l1970" class="line" id="l1970">   1970</a> 		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
<a href="#l1971" class="line" id="l1971">   1971</a> 	}
<a href="#l1972" class="line" id="l1972">   1972</a> 	#pragma unroll_loop_end
<a href="#l1973" class="line" id="l1973">   1973</a> #endif`,YV=`float getShadowMask() {
<a href="#l1974" class="line" id="l1974">   1974</a> 	float shadow = 1.0;
<a href="#l1975" class="line" id="l1975">   1975</a> 	#ifdef USE_SHADOWMAP
<a href="#l1976" class="line" id="l1976">   1976</a> 	#if NUM_DIR_LIGHT_SHADOWS &gt; 0
<a href="#l1977" class="line" id="l1977">   1977</a> 	DirectionalLightShadow directionalLight;
<a href="#l1978" class="line" id="l1978">   1978</a> 	#pragma unroll_loop_start
<a href="#l1979" class="line" id="l1979">   1979</a> 	for ( int i = 0; i &lt; NUM_DIR_LIGHT_SHADOWS; i ++ ) {
<a href="#l1980" class="line" id="l1980">   1980</a> 		directionalLight = directionalLightShadows[ i ];
<a href="#l1981" class="line" id="l1981">   1981</a> 		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
<a href="#l1982" class="line" id="l1982">   1982</a> 	}
<a href="#l1983" class="line" id="l1983">   1983</a> 	#pragma unroll_loop_end
<a href="#l1984" class="line" id="l1984">   1984</a> 	#endif
<a href="#l1985" class="line" id="l1985">   1985</a> 	#if NUM_SPOT_LIGHT_SHADOWS &gt; 0
<a href="#l1986" class="line" id="l1986">   1986</a> 	SpotLightShadow spotLight;
<a href="#l1987" class="line" id="l1987">   1987</a> 	#pragma unroll_loop_start
<a href="#l1988" class="line" id="l1988">   1988</a> 	for ( int i = 0; i &lt; NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
<a href="#l1989" class="line" id="l1989">   1989</a> 		spotLight = spotLightShadows[ i ];
<a href="#l1990" class="line" id="l1990">   1990</a> 		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
<a href="#l1991" class="line" id="l1991">   1991</a> 	}
<a href="#l1992" class="line" id="l1992">   1992</a> 	#pragma unroll_loop_end
<a href="#l1993" class="line" id="l1993">   1993</a> 	#endif
<a href="#l1994" class="line" id="l1994">   1994</a> 	#if NUM_POINT_LIGHT_SHADOWS &gt; 0
<a href="#l1995" class="line" id="l1995">   1995</a> 	PointLightShadow pointLight;
<a href="#l1996" class="line" id="l1996">   1996</a> 	#pragma unroll_loop_start
<a href="#l1997" class="line" id="l1997">   1997</a> 	for ( int i = 0; i &lt; NUM_POINT_LIGHT_SHADOWS; i ++ ) {
<a href="#l1998" class="line" id="l1998">   1998</a> 		pointLight = pointLightShadows[ i ];
<a href="#l1999" class="line" id="l1999">   1999</a> 		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
<a href="#l2000" class="line" id="l2000">   2000</a> 	}
<a href="#l2001" class="line" id="l2001">   2001</a> 	#pragma unroll_loop_end
<a href="#l2002" class="line" id="l2002">   2002</a> 	#endif
<a href="#l2003" class="line" id="l2003">   2003</a> 	#endif
<a href="#l2004" class="line" id="l2004">   2004</a> 	return shadow;
<a href="#l2005" class="line" id="l2005">   2005</a> }`,WV=`#ifdef USE_SKINNING
<a href="#l2006" class="line" id="l2006">   2006</a> 	mat4 boneMatX = getBoneMatrix( skinIndex.x );
<a href="#l2007" class="line" id="l2007">   2007</a> 	mat4 boneMatY = getBoneMatrix( skinIndex.y );
<a href="#l2008" class="line" id="l2008">   2008</a> 	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
<a href="#l2009" class="line" id="l2009">   2009</a> 	mat4 boneMatW = getBoneMatrix( skinIndex.w );
<a href="#l2010" class="line" id="l2010">   2010</a> #endif`,kV=`#ifdef USE_SKINNING
<a href="#l2011" class="line" id="l2011">   2011</a> 	uniform mat4 bindMatrix;
<a href="#l2012" class="line" id="l2012">   2012</a> 	uniform mat4 bindMatrixInverse;
<a href="#l2013" class="line" id="l2013">   2013</a> 	uniform highp sampler2D boneTexture;
<a href="#l2014" class="line" id="l2014">   2014</a> 	mat4 getBoneMatrix( const in float i ) {
<a href="#l2015" class="line" id="l2015">   2015</a> 		int size = textureSize( boneTexture, 0 ).x;
<a href="#l2016" class="line" id="l2016">   2016</a> 		int j = int( i ) * 4;
<a href="#l2017" class="line" id="l2017">   2017</a> 		int x = j % size;
<a href="#l2018" class="line" id="l2018">   2018</a> 		int y = j / size;
<a href="#l2019" class="line" id="l2019">   2019</a> 		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
<a href="#l2020" class="line" id="l2020">   2020</a> 		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
<a href="#l2021" class="line" id="l2021">   2021</a> 		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
<a href="#l2022" class="line" id="l2022">   2022</a> 		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
<a href="#l2023" class="line" id="l2023">   2023</a> 		return mat4( v1, v2, v3, v4 );
<a href="#l2024" class="line" id="l2024">   2024</a> 	}
<a href="#l2025" class="line" id="l2025">   2025</a> #endif`,ZV=`#ifdef USE_SKINNING
<a href="#l2026" class="line" id="l2026">   2026</a> 	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
<a href="#l2027" class="line" id="l2027">   2027</a> 	vec4 skinned = vec4( 0.0 );
<a href="#l2028" class="line" id="l2028">   2028</a> 	skinned += boneMatX * skinVertex * skinWeight.x;
<a href="#l2029" class="line" id="l2029">   2029</a> 	skinned += boneMatY * skinVertex * skinWeight.y;
<a href="#l2030" class="line" id="l2030">   2030</a> 	skinned += boneMatZ * skinVertex * skinWeight.z;
<a href="#l2031" class="line" id="l2031">   2031</a> 	skinned += boneMatW * skinVertex * skinWeight.w;
<a href="#l2032" class="line" id="l2032">   2032</a> 	transformed = ( bindMatrixInverse * skinned ).xyz;
<a href="#l2033" class="line" id="l2033">   2033</a> #endif`,jV=`#ifdef USE_SKINNING
<a href="#l2034" class="line" id="l2034">   2034</a> 	mat4 skinMatrix = mat4( 0.0 );
<a href="#l2035" class="line" id="l2035">   2035</a> 	skinMatrix += skinWeight.x * boneMatX;
<a href="#l2036" class="line" id="l2036">   2036</a> 	skinMatrix += skinWeight.y * boneMatY;
<a href="#l2037" class="line" id="l2037">   2037</a> 	skinMatrix += skinWeight.z * boneMatZ;
<a href="#l2038" class="line" id="l2038">   2038</a> 	skinMatrix += skinWeight.w * boneMatW;
<a href="#l2039" class="line" id="l2039">   2039</a> 	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
<a href="#l2040" class="line" id="l2040">   2040</a> 	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
<a href="#l2041" class="line" id="l2041">   2041</a> 	#ifdef USE_TANGENT
<a href="#l2042" class="line" id="l2042">   2042</a> 		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
<a href="#l2043" class="line" id="l2043">   2043</a> 	#endif
<a href="#l2044" class="line" id="l2044">   2044</a> #endif`,QV=`float specularStrength;
<a href="#l2045" class="line" id="l2045">   2045</a> #ifdef USE_SPECULARMAP
<a href="#l2046" class="line" id="l2046">   2046</a> 	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
<a href="#l2047" class="line" id="l2047">   2047</a> 	specularStrength = texelSpecular.r;
<a href="#l2048" class="line" id="l2048">   2048</a> #else
<a href="#l2049" class="line" id="l2049">   2049</a> 	specularStrength = 1.0;
<a href="#l2050" class="line" id="l2050">   2050</a> #endif`,KV=`#ifdef USE_SPECULARMAP
<a href="#l2051" class="line" id="l2051">   2051</a> 	uniform sampler2D specularMap;
<a href="#l2052" class="line" id="l2052">   2052</a> #endif`,JV=`#if defined( TONE_MAPPING )
<a href="#l2053" class="line" id="l2053">   2053</a> 	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
<a href="#l2054" class="line" id="l2054">   2054</a> #endif`,$V=`#ifndef saturate
<a href="#l2055" class="line" id="l2055">   2055</a> #define saturate( a ) clamp( a, 0.0, 1.0 )
<a href="#l2056" class="line" id="l2056">   2056</a> #endif
<a href="#l2057" class="line" id="l2057">   2057</a> uniform float toneMappingExposure;
<a href="#l2058" class="line" id="l2058">   2058</a> vec3 LinearToneMapping( vec3 color ) {
<a href="#l2059" class="line" id="l2059">   2059</a> 	return saturate( toneMappingExposure * color );
<a href="#l2060" class="line" id="l2060">   2060</a> }
<a href="#l2061" class="line" id="l2061">   2061</a> vec3 ReinhardToneMapping( vec3 color ) {
<a href="#l2062" class="line" id="l2062">   2062</a> 	color *= toneMappingExposure;
<a href="#l2063" class="line" id="l2063">   2063</a> 	return saturate( color / ( vec3( 1.0 ) + color ) );
<a href="#l2064" class="line" id="l2064">   2064</a> }
<a href="#l2065" class="line" id="l2065">   2065</a> vec3 CineonToneMapping( vec3 color ) {
<a href="#l2066" class="line" id="l2066">   2066</a> 	color *= toneMappingExposure;
<a href="#l2067" class="line" id="l2067">   2067</a> 	color = max( vec3( 0.0 ), color - 0.004 );
<a href="#l2068" class="line" id="l2068">   2068</a> 	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
<a href="#l2069" class="line" id="l2069">   2069</a> }
<a href="#l2070" class="line" id="l2070">   2070</a> vec3 RRTAndODTFit( vec3 v ) {
<a href="#l2071" class="line" id="l2071">   2071</a> 	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
<a href="#l2072" class="line" id="l2072">   2072</a> 	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
<a href="#l2073" class="line" id="l2073">   2073</a> 	return a / b;
<a href="#l2074" class="line" id="l2074">   2074</a> }
<a href="#l2075" class="line" id="l2075">   2075</a> vec3 ACESFilmicToneMapping( vec3 color ) {
<a href="#l2076" class="line" id="l2076">   2076</a> 	const mat3 ACESInputMat = mat3(
<a href="#l2077" class="line" id="l2077">   2077</a> 		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
<a href="#l2078" class="line" id="l2078">   2078</a> 		vec3( 0.04823, 0.01566, 0.83777 )
<a href="#l2079" class="line" id="l2079">   2079</a> 	);
<a href="#l2080" class="line" id="l2080">   2080</a> 	const mat3 ACESOutputMat = mat3(
<a href="#l2081" class="line" id="l2081">   2081</a> 		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
<a href="#l2082" class="line" id="l2082">   2082</a> 		vec3( -0.07367, -0.00605,  1.07602 )
<a href="#l2083" class="line" id="l2083">   2083</a> 	);
<a href="#l2084" class="line" id="l2084">   2084</a> 	color *= toneMappingExposure / 0.6;
<a href="#l2085" class="line" id="l2085">   2085</a> 	color = ACESInputMat * color;
<a href="#l2086" class="line" id="l2086">   2086</a> 	color = RRTAndODTFit( color );
<a href="#l2087" class="line" id="l2087">   2087</a> 	color = ACESOutputMat * color;
<a href="#l2088" class="line" id="l2088">   2088</a> 	return saturate( color );
<a href="#l2089" class="line" id="l2089">   2089</a> }
<a href="#l2090" class="line" id="l2090">   2090</a> const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
<a href="#l2091" class="line" id="l2091">   2091</a> 	vec3( 1.6605, - 0.1246, - 0.0182 ),
<a href="#l2092" class="line" id="l2092">   2092</a> 	vec3( - 0.5876, 1.1329, - 0.1006 ),
<a href="#l2093" class="line" id="l2093">   2093</a> 	vec3( - 0.0728, - 0.0083, 1.1187 )
<a href="#l2094" class="line" id="l2094">   2094</a> );
<a href="#l2095" class="line" id="l2095">   2095</a> const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
<a href="#l2096" class="line" id="l2096">   2096</a> 	vec3( 0.6274, 0.0691, 0.0164 ),
<a href="#l2097" class="line" id="l2097">   2097</a> 	vec3( 0.3293, 0.9195, 0.0880 ),
<a href="#l2098" class="line" id="l2098">   2098</a> 	vec3( 0.0433, 0.0113, 0.8956 )
<a href="#l2099" class="line" id="l2099">   2099</a> );
<a href="#l2100" class="line" id="l2100">   2100</a> vec3 agxDefaultContrastApprox( vec3 x ) {
<a href="#l2101" class="line" id="l2101">   2101</a> 	vec3 x2 = x * x;
<a href="#l2102" class="line" id="l2102">   2102</a> 	vec3 x4 = x2 * x2;
<a href="#l2103" class="line" id="l2103">   2103</a> 	return + 15.5 * x4 * x2
<a href="#l2104" class="line" id="l2104">   2104</a> 		- 40.14 * x4 * x
<a href="#l2105" class="line" id="l2105">   2105</a> 		+ 31.96 * x4
<a href="#l2106" class="line" id="l2106">   2106</a> 		- 6.868 * x2 * x
<a href="#l2107" class="line" id="l2107">   2107</a> 		+ 0.4298 * x2
<a href="#l2108" class="line" id="l2108">   2108</a> 		+ 0.1191 * x
<a href="#l2109" class="line" id="l2109">   2109</a> 		- 0.00232;
<a href="#l2110" class="line" id="l2110">   2110</a> }
<a href="#l2111" class="line" id="l2111">   2111</a> vec3 AgXToneMapping( vec3 color ) {
<a href="#l2112" class="line" id="l2112">   2112</a> 	const mat3 AgXInsetMatrix = mat3(
<a href="#l2113" class="line" id="l2113">   2113</a> 		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
<a href="#l2114" class="line" id="l2114">   2114</a> 		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
<a href="#l2115" class="line" id="l2115">   2115</a> 		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
<a href="#l2116" class="line" id="l2116">   2116</a> 	);
<a href="#l2117" class="line" id="l2117">   2117</a> 	const mat3 AgXOutsetMatrix = mat3(
<a href="#l2118" class="line" id="l2118">   2118</a> 		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
<a href="#l2119" class="line" id="l2119">   2119</a> 		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
<a href="#l2120" class="line" id="l2120">   2120</a> 		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
<a href="#l2121" class="line" id="l2121">   2121</a> 	);
<a href="#l2122" class="line" id="l2122">   2122</a> 	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
<a href="#l2123" class="line" id="l2123">   2123</a> 	color *= toneMappingExposure;
<a href="#l2124" class="line" id="l2124">   2124</a> 	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
<a href="#l2125" class="line" id="l2125">   2125</a> 	color = AgXInsetMatrix * color;
<a href="#l2126" class="line" id="l2126">   2126</a> 	color = max( color, 1e-10 );	color = log2( color );
<a href="#l2127" class="line" id="l2127">   2127</a> 	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
<a href="#l2128" class="line" id="l2128">   2128</a> 	color = clamp( color, 0.0, 1.0 );
<a href="#l2129" class="line" id="l2129">   2129</a> 	color = agxDefaultContrastApprox( color );
<a href="#l2130" class="line" id="l2130">   2130</a> 	color = AgXOutsetMatrix * color;
<a href="#l2131" class="line" id="l2131">   2131</a> 	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
<a href="#l2132" class="line" id="l2132">   2132</a> 	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
<a href="#l2133" class="line" id="l2133">   2133</a> 	color = clamp( color, 0.0, 1.0 );
<a href="#l2134" class="line" id="l2134">   2134</a> 	return color;
<a href="#l2135" class="line" id="l2135">   2135</a> }
<a href="#l2136" class="line" id="l2136">   2136</a> vec3 NeutralToneMapping( vec3 color ) {
<a href="#l2137" class="line" id="l2137">   2137</a> 	const float StartCompression = 0.8 - 0.04;
<a href="#l2138" class="line" id="l2138">   2138</a> 	const float Desaturation = 0.15;
<a href="#l2139" class="line" id="l2139">   2139</a> 	color *= toneMappingExposure;
<a href="#l2140" class="line" id="l2140">   2140</a> 	float x = min( color.r, min( color.g, color.b ) );
<a href="#l2141" class="line" id="l2141">   2141</a> 	float offset = x &lt; 0.08 ? x - 6.25 * x * x : 0.04;
<a href="#l2142" class="line" id="l2142">   2142</a> 	color -= offset;
<a href="#l2143" class="line" id="l2143">   2143</a> 	float peak = max( color.r, max( color.g, color.b ) );
<a href="#l2144" class="line" id="l2144">   2144</a> 	if ( peak &lt; StartCompression ) return color;
<a href="#l2145" class="line" id="l2145">   2145</a> 	float d = 1. - StartCompression;
<a href="#l2146" class="line" id="l2146">   2146</a> 	float newPeak = 1. - d * d / ( peak + d - StartCompression );
<a href="#l2147" class="line" id="l2147">   2147</a> 	color *= newPeak / peak;
<a href="#l2148" class="line" id="l2148">   2148</a> 	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
<a href="#l2149" class="line" id="l2149">   2149</a> 	return mix( color, vec3( newPeak ), g );
<a href="#l2150" class="line" id="l2150">   2150</a> }
<a href="#l2151" class="line" id="l2151">   2151</a> vec3 CustomToneMapping( vec3 color ) { return color; }`,t6=`#ifdef USE_TRANSMISSION
<a href="#l2152" class="line" id="l2152">   2152</a> 	material.transmission = transmission;
<a href="#l2153" class="line" id="l2153">   2153</a> 	material.transmissionAlpha = 1.0;
<a href="#l2154" class="line" id="l2154">   2154</a> 	material.thickness = thickness;
<a href="#l2155" class="line" id="l2155">   2155</a> 	material.attenuationDistance = attenuationDistance;
<a href="#l2156" class="line" id="l2156">   2156</a> 	material.attenuationColor = attenuationColor;
<a href="#l2157" class="line" id="l2157">   2157</a> 	#ifdef USE_TRANSMISSIONMAP
<a href="#l2158" class="line" id="l2158">   2158</a> 		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
<a href="#l2159" class="line" id="l2159">   2159</a> 	#endif
<a href="#l2160" class="line" id="l2160">   2160</a> 	#ifdef USE_THICKNESSMAP
<a href="#l2161" class="line" id="l2161">   2161</a> 		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
<a href="#l2162" class="line" id="l2162">   2162</a> 	#endif
<a href="#l2163" class="line" id="l2163">   2163</a> 	vec3 pos = vWorldPosition;
<a href="#l2164" class="line" id="l2164">   2164</a> 	vec3 v = normalize( cameraPosition - pos );
<a href="#l2165" class="line" id="l2165">   2165</a> 	vec3 n = inverseTransformDirection( normal, viewMatrix );
<a href="#l2166" class="line" id="l2166">   2166</a> 	vec4 transmitted = getIBLVolumeRefraction(
<a href="#l2167" class="line" id="l2167">   2167</a> 		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
<a href="#l2168" class="line" id="l2168">   2168</a> 		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
<a href="#l2169" class="line" id="l2169">   2169</a> 		material.attenuationColor, material.attenuationDistance );
<a href="#l2170" class="line" id="l2170">   2170</a> 	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
<a href="#l2171" class="line" id="l2171">   2171</a> 	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
<a href="#l2172" class="line" id="l2172">   2172</a> #endif`,e6=`#ifdef USE_TRANSMISSION
<a href="#l2173" class="line" id="l2173">   2173</a> 	uniform float transmission;
<a href="#l2174" class="line" id="l2174">   2174</a> 	uniform float thickness;
<a href="#l2175" class="line" id="l2175">   2175</a> 	uniform float attenuationDistance;
<a href="#l2176" class="line" id="l2176">   2176</a> 	uniform vec3 attenuationColor;
<a href="#l2177" class="line" id="l2177">   2177</a> 	#ifdef USE_TRANSMISSIONMAP
<a href="#l2178" class="line" id="l2178">   2178</a> 		uniform sampler2D transmissionMap;
<a href="#l2179" class="line" id="l2179">   2179</a> 	#endif
<a href="#l2180" class="line" id="l2180">   2180</a> 	#ifdef USE_THICKNESSMAP
<a href="#l2181" class="line" id="l2181">   2181</a> 		uniform sampler2D thicknessMap;
<a href="#l2182" class="line" id="l2182">   2182</a> 	#endif
<a href="#l2183" class="line" id="l2183">   2183</a> 	uniform vec2 transmissionSamplerSize;
<a href="#l2184" class="line" id="l2184">   2184</a> 	uniform sampler2D transmissionSamplerMap;
<a href="#l2185" class="line" id="l2185">   2185</a> 	uniform mat4 modelMatrix;
<a href="#l2186" class="line" id="l2186">   2186</a> 	uniform mat4 projectionMatrix;
<a href="#l2187" class="line" id="l2187">   2187</a> 	varying vec3 vWorldPosition;
<a href="#l2188" class="line" id="l2188">   2188</a> 	float w0( float a ) {
<a href="#l2189" class="line" id="l2189">   2189</a> 		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
<a href="#l2190" class="line" id="l2190">   2190</a> 	}
<a href="#l2191" class="line" id="l2191">   2191</a> 	float w1( float a ) {
<a href="#l2192" class="line" id="l2192">   2192</a> 		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
<a href="#l2193" class="line" id="l2193">   2193</a> 	}
<a href="#l2194" class="line" id="l2194">   2194</a> 	float w2( float a ){
<a href="#l2195" class="line" id="l2195">   2195</a> 		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
<a href="#l2196" class="line" id="l2196">   2196</a> 	}
<a href="#l2197" class="line" id="l2197">   2197</a> 	float w3( float a ) {
<a href="#l2198" class="line" id="l2198">   2198</a> 		return ( 1.0 / 6.0 ) * ( a * a * a );
<a href="#l2199" class="line" id="l2199">   2199</a> 	}
<a href="#l2200" class="line" id="l2200">   2200</a> 	float g0( float a ) {
<a href="#l2201" class="line" id="l2201">   2201</a> 		return w0( a ) + w1( a );
<a href="#l2202" class="line" id="l2202">   2202</a> 	}
<a href="#l2203" class="line" id="l2203">   2203</a> 	float g1( float a ) {
<a href="#l2204" class="line" id="l2204">   2204</a> 		return w2( a ) + w3( a );
<a href="#l2205" class="line" id="l2205">   2205</a> 	}
<a href="#l2206" class="line" id="l2206">   2206</a> 	float h0( float a ) {
<a href="#l2207" class="line" id="l2207">   2207</a> 		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
<a href="#l2208" class="line" id="l2208">   2208</a> 	}
<a href="#l2209" class="line" id="l2209">   2209</a> 	float h1( float a ) {
<a href="#l2210" class="line" id="l2210">   2210</a> 		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
<a href="#l2211" class="line" id="l2211">   2211</a> 	}
<a href="#l2212" class="line" id="l2212">   2212</a> 	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
<a href="#l2213" class="line" id="l2213">   2213</a> 		uv = uv * texelSize.zw + 0.5;
<a href="#l2214" class="line" id="l2214">   2214</a> 		vec2 iuv = floor( uv );
<a href="#l2215" class="line" id="l2215">   2215</a> 		vec2 fuv = fract( uv );
<a href="#l2216" class="line" id="l2216">   2216</a> 		float g0x = g0( fuv.x );
<a href="#l2217" class="line" id="l2217">   2217</a> 		float g1x = g1( fuv.x );
<a href="#l2218" class="line" id="l2218">   2218</a> 		float h0x = h0( fuv.x );
<a href="#l2219" class="line" id="l2219">   2219</a> 		float h1x = h1( fuv.x );
<a href="#l2220" class="line" id="l2220">   2220</a> 		float h0y = h0( fuv.y );
<a href="#l2221" class="line" id="l2221">   2221</a> 		float h1y = h1( fuv.y );
<a href="#l2222" class="line" id="l2222">   2222</a> 		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
<a href="#l2223" class="line" id="l2223">   2223</a> 		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
<a href="#l2224" class="line" id="l2224">   2224</a> 		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
<a href="#l2225" class="line" id="l2225">   2225</a> 		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
<a href="#l2226" class="line" id="l2226">   2226</a> 		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
<a href="#l2227" class="line" id="l2227">   2227</a> 			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
<a href="#l2228" class="line" id="l2228">   2228</a> 	}
<a href="#l2229" class="line" id="l2229">   2229</a> 	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
<a href="#l2230" class="line" id="l2230">   2230</a> 		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
<a href="#l2231" class="line" id="l2231">   2231</a> 		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
<a href="#l2232" class="line" id="l2232">   2232</a> 		vec2 fLodSizeInv = 1.0 / fLodSize;
<a href="#l2233" class="line" id="l2233">   2233</a> 		vec2 cLodSizeInv = 1.0 / cLodSize;
<a href="#l2234" class="line" id="l2234">   2234</a> 		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
<a href="#l2235" class="line" id="l2235">   2235</a> 		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
<a href="#l2236" class="line" id="l2236">   2236</a> 		return mix( fSample, cSample, fract( lod ) );
<a href="#l2237" class="line" id="l2237">   2237</a> 	}
<a href="#l2238" class="line" id="l2238">   2238</a> 	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
<a href="#l2239" class="line" id="l2239">   2239</a> 		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
<a href="#l2240" class="line" id="l2240">   2240</a> 		vec3 modelScale;
<a href="#l2241" class="line" id="l2241">   2241</a> 		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
<a href="#l2242" class="line" id="l2242">   2242</a> 		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
<a href="#l2243" class="line" id="l2243">   2243</a> 		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
<a href="#l2244" class="line" id="l2244">   2244</a> 		return normalize( refractionVector ) * thickness * modelScale;
<a href="#l2245" class="line" id="l2245">   2245</a> 	}
<a href="#l2246" class="line" id="l2246">   2246</a> 	float applyIorToRoughness( const in float roughness, const in float ior ) {
<a href="#l2247" class="line" id="l2247">   2247</a> 		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
<a href="#l2248" class="line" id="l2248">   2248</a> 	}
<a href="#l2249" class="line" id="l2249">   2249</a> 	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
<a href="#l2250" class="line" id="l2250">   2250</a> 		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
<a href="#l2251" class="line" id="l2251">   2251</a> 		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
<a href="#l2252" class="line" id="l2252">   2252</a> 	}
<a href="#l2253" class="line" id="l2253">   2253</a> 	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
<a href="#l2254" class="line" id="l2254">   2254</a> 		if ( isinf( attenuationDistance ) ) {
<a href="#l2255" class="line" id="l2255">   2255</a> 			return vec3( 1.0 );
<a href="#l2256" class="line" id="l2256">   2256</a> 		} else {
<a href="#l2257" class="line" id="l2257">   2257</a> 			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
<a href="#l2258" class="line" id="l2258">   2258</a> 			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
<a href="#l2259" class="line" id="l2259">   2259</a> 		}
<a href="#l2260" class="line" id="l2260">   2260</a> 	}
<a href="#l2261" class="line" id="l2261">   2261</a> 	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
<a href="#l2262" class="line" id="l2262">   2262</a> 		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
<a href="#l2263" class="line" id="l2263">   2263</a> 		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
<a href="#l2264" class="line" id="l2264">   2264</a> 		const in vec3 attenuationColor, const in float attenuationDistance ) {
<a href="#l2265" class="line" id="l2265">   2265</a> 		vec4 transmittedLight;
<a href="#l2266" class="line" id="l2266">   2266</a> 		vec3 transmittance;
<a href="#l2267" class="line" id="l2267">   2267</a> 		#ifdef USE_DISPERSION
<a href="#l2268" class="line" id="l2268">   2268</a> 			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
<a href="#l2269" class="line" id="l2269">   2269</a> 			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
<a href="#l2270" class="line" id="l2270">   2270</a> 			for ( int i = 0; i &lt; 3; i ++ ) {
<a href="#l2271" class="line" id="l2271">   2271</a> 				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
<a href="#l2272" class="line" id="l2272">   2272</a> 				vec3 refractedRayExit = position + transmissionRay;
<a href="#l2273" class="line" id="l2273">   2273</a> 				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
<a href="#l2274" class="line" id="l2274">   2274</a> 				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
<a href="#l2275" class="line" id="l2275">   2275</a> 				refractionCoords += 1.0;
<a href="#l2276" class="line" id="l2276">   2276</a> 				refractionCoords /= 2.0;
<a href="#l2277" class="line" id="l2277">   2277</a> 				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
<a href="#l2278" class="line" id="l2278">   2278</a> 				transmittedLight[ i ] = transmissionSample[ i ];
<a href="#l2279" class="line" id="l2279">   2279</a> 				transmittedLight.a += transmissionSample.a;
<a href="#l2280" class="line" id="l2280">   2280</a> 				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
<a href="#l2281" class="line" id="l2281">   2281</a> 			}
<a href="#l2282" class="line" id="l2282">   2282</a> 			transmittedLight.a /= 3.0;
<a href="#l2283" class="line" id="l2283">   2283</a> 		#else
<a href="#l2284" class="line" id="l2284">   2284</a> 			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
<a href="#l2285" class="line" id="l2285">   2285</a> 			vec3 refractedRayExit = position + transmissionRay;
<a href="#l2286" class="line" id="l2286">   2286</a> 			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
<a href="#l2287" class="line" id="l2287">   2287</a> 			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
<a href="#l2288" class="line" id="l2288">   2288</a> 			refractionCoords += 1.0;
<a href="#l2289" class="line" id="l2289">   2289</a> 			refractionCoords /= 2.0;
<a href="#l2290" class="line" id="l2290">   2290</a> 			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
<a href="#l2291" class="line" id="l2291">   2291</a> 			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
<a href="#l2292" class="line" id="l2292">   2292</a> 		#endif
<a href="#l2293" class="line" id="l2293">   2293</a> 		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
<a href="#l2294" class="line" id="l2294">   2294</a> 		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
<a href="#l2295" class="line" id="l2295">   2295</a> 		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
<a href="#l2296" class="line" id="l2296">   2296</a> 		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
<a href="#l2297" class="line" id="l2297">   2297</a> 	}
<a href="#l2298" class="line" id="l2298">   2298</a> #endif`,n6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
<a href="#l2299" class="line" id="l2299">   2299</a> 	varying vec2 vUv;
<a href="#l2300" class="line" id="l2300">   2300</a> #endif
<a href="#l2301" class="line" id="l2301">   2301</a> #ifdef USE_MAP
<a href="#l2302" class="line" id="l2302">   2302</a> 	varying vec2 vMapUv;
<a href="#l2303" class="line" id="l2303">   2303</a> #endif
<a href="#l2304" class="line" id="l2304">   2304</a> #ifdef USE_ALPHAMAP
<a href="#l2305" class="line" id="l2305">   2305</a> 	varying vec2 vAlphaMapUv;
<a href="#l2306" class="line" id="l2306">   2306</a> #endif
<a href="#l2307" class="line" id="l2307">   2307</a> #ifdef USE_LIGHTMAP
<a href="#l2308" class="line" id="l2308">   2308</a> 	varying vec2 vLightMapUv;
<a href="#l2309" class="line" id="l2309">   2309</a> #endif
<a href="#l2310" class="line" id="l2310">   2310</a> #ifdef USE_AOMAP
<a href="#l2311" class="line" id="l2311">   2311</a> 	varying vec2 vAoMapUv;
<a href="#l2312" class="line" id="l2312">   2312</a> #endif
<a href="#l2313" class="line" id="l2313">   2313</a> #ifdef USE_BUMPMAP
<a href="#l2314" class="line" id="l2314">   2314</a> 	varying vec2 vBumpMapUv;
<a href="#l2315" class="line" id="l2315">   2315</a> #endif
<a href="#l2316" class="line" id="l2316">   2316</a> #ifdef USE_NORMALMAP
<a href="#l2317" class="line" id="l2317">   2317</a> 	varying vec2 vNormalMapUv;
<a href="#l2318" class="line" id="l2318">   2318</a> #endif
<a href="#l2319" class="line" id="l2319">   2319</a> #ifdef USE_EMISSIVEMAP
<a href="#l2320" class="line" id="l2320">   2320</a> 	varying vec2 vEmissiveMapUv;
<a href="#l2321" class="line" id="l2321">   2321</a> #endif
<a href="#l2322" class="line" id="l2322">   2322</a> #ifdef USE_METALNESSMAP
<a href="#l2323" class="line" id="l2323">   2323</a> 	varying vec2 vMetalnessMapUv;
<a href="#l2324" class="line" id="l2324">   2324</a> #endif
<a href="#l2325" class="line" id="l2325">   2325</a> #ifdef USE_ROUGHNESSMAP
<a href="#l2326" class="line" id="l2326">   2326</a> 	varying vec2 vRoughnessMapUv;
<a href="#l2327" class="line" id="l2327">   2327</a> #endif
<a href="#l2328" class="line" id="l2328">   2328</a> #ifdef USE_ANISOTROPYMAP
<a href="#l2329" class="line" id="l2329">   2329</a> 	varying vec2 vAnisotropyMapUv;
<a href="#l2330" class="line" id="l2330">   2330</a> #endif
<a href="#l2331" class="line" id="l2331">   2331</a> #ifdef USE_CLEARCOATMAP
<a href="#l2332" class="line" id="l2332">   2332</a> 	varying vec2 vClearcoatMapUv;
<a href="#l2333" class="line" id="l2333">   2333</a> #endif
<a href="#l2334" class="line" id="l2334">   2334</a> #ifdef USE_CLEARCOAT_NORMALMAP
<a href="#l2335" class="line" id="l2335">   2335</a> 	varying vec2 vClearcoatNormalMapUv;
<a href="#l2336" class="line" id="l2336">   2336</a> #endif
<a href="#l2337" class="line" id="l2337">   2337</a> #ifdef USE_CLEARCOAT_ROUGHNESSMAP
<a href="#l2338" class="line" id="l2338">   2338</a> 	varying vec2 vClearcoatRoughnessMapUv;
<a href="#l2339" class="line" id="l2339">   2339</a> #endif
<a href="#l2340" class="line" id="l2340">   2340</a> #ifdef USE_IRIDESCENCEMAP
<a href="#l2341" class="line" id="l2341">   2341</a> 	varying vec2 vIridescenceMapUv;
<a href="#l2342" class="line" id="l2342">   2342</a> #endif
<a href="#l2343" class="line" id="l2343">   2343</a> #ifdef USE_IRIDESCENCE_THICKNESSMAP
<a href="#l2344" class="line" id="l2344">   2344</a> 	varying vec2 vIridescenceThicknessMapUv;
<a href="#l2345" class="line" id="l2345">   2345</a> #endif
<a href="#l2346" class="line" id="l2346">   2346</a> #ifdef USE_SHEEN_COLORMAP
<a href="#l2347" class="line" id="l2347">   2347</a> 	varying vec2 vSheenColorMapUv;
<a href="#l2348" class="line" id="l2348">   2348</a> #endif
<a href="#l2349" class="line" id="l2349">   2349</a> #ifdef USE_SHEEN_ROUGHNESSMAP
<a href="#l2350" class="line" id="l2350">   2350</a> 	varying vec2 vSheenRoughnessMapUv;
<a href="#l2351" class="line" id="l2351">   2351</a> #endif
<a href="#l2352" class="line" id="l2352">   2352</a> #ifdef USE_SPECULARMAP
<a href="#l2353" class="line" id="l2353">   2353</a> 	varying vec2 vSpecularMapUv;
<a href="#l2354" class="line" id="l2354">   2354</a> #endif
<a href="#l2355" class="line" id="l2355">   2355</a> #ifdef USE_SPECULAR_COLORMAP
<a href="#l2356" class="line" id="l2356">   2356</a> 	varying vec2 vSpecularColorMapUv;
<a href="#l2357" class="line" id="l2357">   2357</a> #endif
<a href="#l2358" class="line" id="l2358">   2358</a> #ifdef USE_SPECULAR_INTENSITYMAP
<a href="#l2359" class="line" id="l2359">   2359</a> 	varying vec2 vSpecularIntensityMapUv;
<a href="#l2360" class="line" id="l2360">   2360</a> #endif
<a href="#l2361" class="line" id="l2361">   2361</a> #ifdef USE_TRANSMISSIONMAP
<a href="#l2362" class="line" id="l2362">   2362</a> 	uniform mat3 transmissionMapTransform;
<a href="#l2363" class="line" id="l2363">   2363</a> 	varying vec2 vTransmissionMapUv;
<a href="#l2364" class="line" id="l2364">   2364</a> #endif
<a href="#l2365" class="line" id="l2365">   2365</a> #ifdef USE_THICKNESSMAP
<a href="#l2366" class="line" id="l2366">   2366</a> 	uniform mat3 thicknessMapTransform;
<a href="#l2367" class="line" id="l2367">   2367</a> 	varying vec2 vThicknessMapUv;
<a href="#l2368" class="line" id="l2368">   2368</a> #endif`,i6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
<a href="#l2369" class="line" id="l2369">   2369</a> 	varying vec2 vUv;
<a href="#l2370" class="line" id="l2370">   2370</a> #endif
<a href="#l2371" class="line" id="l2371">   2371</a> #ifdef USE_MAP
<a href="#l2372" class="line" id="l2372">   2372</a> 	uniform mat3 mapTransform;
<a href="#l2373" class="line" id="l2373">   2373</a> 	varying vec2 vMapUv;
<a href="#l2374" class="line" id="l2374">   2374</a> #endif
<a href="#l2375" class="line" id="l2375">   2375</a> #ifdef USE_ALPHAMAP
<a href="#l2376" class="line" id="l2376">   2376</a> 	uniform mat3 alphaMapTransform;
<a href="#l2377" class="line" id="l2377">   2377</a> 	varying vec2 vAlphaMapUv;
<a href="#l2378" class="line" id="l2378">   2378</a> #endif
<a href="#l2379" class="line" id="l2379">   2379</a> #ifdef USE_LIGHTMAP
<a href="#l2380" class="line" id="l2380">   2380</a> 	uniform mat3 lightMapTransform;
<a href="#l2381" class="line" id="l2381">   2381</a> 	varying vec2 vLightMapUv;
<a href="#l2382" class="line" id="l2382">   2382</a> #endif
<a href="#l2383" class="line" id="l2383">   2383</a> #ifdef USE_AOMAP
<a href="#l2384" class="line" id="l2384">   2384</a> 	uniform mat3 aoMapTransform;
<a href="#l2385" class="line" id="l2385">   2385</a> 	varying vec2 vAoMapUv;
<a href="#l2386" class="line" id="l2386">   2386</a> #endif
<a href="#l2387" class="line" id="l2387">   2387</a> #ifdef USE_BUMPMAP
<a href="#l2388" class="line" id="l2388">   2388</a> 	uniform mat3 bumpMapTransform;
<a href="#l2389" class="line" id="l2389">   2389</a> 	varying vec2 vBumpMapUv;
<a href="#l2390" class="line" id="l2390">   2390</a> #endif
<a href="#l2391" class="line" id="l2391">   2391</a> #ifdef USE_NORMALMAP
<a href="#l2392" class="line" id="l2392">   2392</a> 	uniform mat3 normalMapTransform;
<a href="#l2393" class="line" id="l2393">   2393</a> 	varying vec2 vNormalMapUv;
<a href="#l2394" class="line" id="l2394">   2394</a> #endif
<a href="#l2395" class="line" id="l2395">   2395</a> #ifdef USE_DISPLACEMENTMAP
<a href="#l2396" class="line" id="l2396">   2396</a> 	uniform mat3 displacementMapTransform;
<a href="#l2397" class="line" id="l2397">   2397</a> 	varying vec2 vDisplacementMapUv;
<a href="#l2398" class="line" id="l2398">   2398</a> #endif
<a href="#l2399" class="line" id="l2399">   2399</a> #ifdef USE_EMISSIVEMAP
<a href="#l2400" class="line" id="l2400">   2400</a> 	uniform mat3 emissiveMapTransform;
<a href="#l2401" class="line" id="l2401">   2401</a> 	varying vec2 vEmissiveMapUv;
<a href="#l2402" class="line" id="l2402">   2402</a> #endif
<a href="#l2403" class="line" id="l2403">   2403</a> #ifdef USE_METALNESSMAP
<a href="#l2404" class="line" id="l2404">   2404</a> 	uniform mat3 metalnessMapTransform;
<a href="#l2405" class="line" id="l2405">   2405</a> 	varying vec2 vMetalnessMapUv;
<a href="#l2406" class="line" id="l2406">   2406</a> #endif
<a href="#l2407" class="line" id="l2407">   2407</a> #ifdef USE_ROUGHNESSMAP
<a href="#l2408" class="line" id="l2408">   2408</a> 	uniform mat3 roughnessMapTransform;
<a href="#l2409" class="line" id="l2409">   2409</a> 	varying vec2 vRoughnessMapUv;
<a href="#l2410" class="line" id="l2410">   2410</a> #endif
<a href="#l2411" class="line" id="l2411">   2411</a> #ifdef USE_ANISOTROPYMAP
<a href="#l2412" class="line" id="l2412">   2412</a> 	uniform mat3 anisotropyMapTransform;
<a href="#l2413" class="line" id="l2413">   2413</a> 	varying vec2 vAnisotropyMapUv;
<a href="#l2414" class="line" id="l2414">   2414</a> #endif
<a href="#l2415" class="line" id="l2415">   2415</a> #ifdef USE_CLEARCOATMAP
<a href="#l2416" class="line" id="l2416">   2416</a> 	uniform mat3 clearcoatMapTransform;
<a href="#l2417" class="line" id="l2417">   2417</a> 	varying vec2 vClearcoatMapUv;
<a href="#l2418" class="line" id="l2418">   2418</a> #endif
<a href="#l2419" class="line" id="l2419">   2419</a> #ifdef USE_CLEARCOAT_NORMALMAP
<a href="#l2420" class="line" id="l2420">   2420</a> 	uniform mat3 clearcoatNormalMapTransform;
<a href="#l2421" class="line" id="l2421">   2421</a> 	varying vec2 vClearcoatNormalMapUv;
<a href="#l2422" class="line" id="l2422">   2422</a> #endif
<a href="#l2423" class="line" id="l2423">   2423</a> #ifdef USE_CLEARCOAT_ROUGHNESSMAP
<a href="#l2424" class="line" id="l2424">   2424</a> 	uniform mat3 clearcoatRoughnessMapTransform;
<a href="#l2425" class="line" id="l2425">   2425</a> 	varying vec2 vClearcoatRoughnessMapUv;
<a href="#l2426" class="line" id="l2426">   2426</a> #endif
<a href="#l2427" class="line" id="l2427">   2427</a> #ifdef USE_SHEEN_COLORMAP
<a href="#l2428" class="line" id="l2428">   2428</a> 	uniform mat3 sheenColorMapTransform;
<a href="#l2429" class="line" id="l2429">   2429</a> 	varying vec2 vSheenColorMapUv;
<a href="#l2430" class="line" id="l2430">   2430</a> #endif
<a href="#l2431" class="line" id="l2431">   2431</a> #ifdef USE_SHEEN_ROUGHNESSMAP
<a href="#l2432" class="line" id="l2432">   2432</a> 	uniform mat3 sheenRoughnessMapTransform;
<a href="#l2433" class="line" id="l2433">   2433</a> 	varying vec2 vSheenRoughnessMapUv;
<a href="#l2434" class="line" id="l2434">   2434</a> #endif
<a href="#l2435" class="line" id="l2435">   2435</a> #ifdef USE_IRIDESCENCEMAP
<a href="#l2436" class="line" id="l2436">   2436</a> 	uniform mat3 iridescenceMapTransform;
<a href="#l2437" class="line" id="l2437">   2437</a> 	varying vec2 vIridescenceMapUv;
<a href="#l2438" class="line" id="l2438">   2438</a> #endif
<a href="#l2439" class="line" id="l2439">   2439</a> #ifdef USE_IRIDESCENCE_THICKNESSMAP
<a href="#l2440" class="line" id="l2440">   2440</a> 	uniform mat3 iridescenceThicknessMapTransform;
<a href="#l2441" class="line" id="l2441">   2441</a> 	varying vec2 vIridescenceThicknessMapUv;
<a href="#l2442" class="line" id="l2442">   2442</a> #endif
<a href="#l2443" class="line" id="l2443">   2443</a> #ifdef USE_SPECULARMAP
<a href="#l2444" class="line" id="l2444">   2444</a> 	uniform mat3 specularMapTransform;
<a href="#l2445" class="line" id="l2445">   2445</a> 	varying vec2 vSpecularMapUv;
<a href="#l2446" class="line" id="l2446">   2446</a> #endif
<a href="#l2447" class="line" id="l2447">   2447</a> #ifdef USE_SPECULAR_COLORMAP
<a href="#l2448" class="line" id="l2448">   2448</a> 	uniform mat3 specularColorMapTransform;
<a href="#l2449" class="line" id="l2449">   2449</a> 	varying vec2 vSpecularColorMapUv;
<a href="#l2450" class="line" id="l2450">   2450</a> #endif
<a href="#l2451" class="line" id="l2451">   2451</a> #ifdef USE_SPECULAR_INTENSITYMAP
<a href="#l2452" class="line" id="l2452">   2452</a> 	uniform mat3 specularIntensityMapTransform;
<a href="#l2453" class="line" id="l2453">   2453</a> 	varying vec2 vSpecularIntensityMapUv;
<a href="#l2454" class="line" id="l2454">   2454</a> #endif
<a href="#l2455" class="line" id="l2455">   2455</a> #ifdef USE_TRANSMISSIONMAP
<a href="#l2456" class="line" id="l2456">   2456</a> 	uniform mat3 transmissionMapTransform;
<a href="#l2457" class="line" id="l2457">   2457</a> 	varying vec2 vTransmissionMapUv;
<a href="#l2458" class="line" id="l2458">   2458</a> #endif
<a href="#l2459" class="line" id="l2459">   2459</a> #ifdef USE_THICKNESSMAP
<a href="#l2460" class="line" id="l2460">   2460</a> 	uniform mat3 thicknessMapTransform;
<a href="#l2461" class="line" id="l2461">   2461</a> 	varying vec2 vThicknessMapUv;
<a href="#l2462" class="line" id="l2462">   2462</a> #endif`,a6=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
<a href="#l2463" class="line" id="l2463">   2463</a> 	vUv = vec3( uv, 1 ).xy;
<a href="#l2464" class="line" id="l2464">   2464</a> #endif
<a href="#l2465" class="line" id="l2465">   2465</a> #ifdef USE_MAP
<a href="#l2466" class="line" id="l2466">   2466</a> 	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
<a href="#l2467" class="line" id="l2467">   2467</a> #endif
<a href="#l2468" class="line" id="l2468">   2468</a> #ifdef USE_ALPHAMAP
<a href="#l2469" class="line" id="l2469">   2469</a> 	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
<a href="#l2470" class="line" id="l2470">   2470</a> #endif
<a href="#l2471" class="line" id="l2471">   2471</a> #ifdef USE_LIGHTMAP
<a href="#l2472" class="line" id="l2472">   2472</a> 	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
<a href="#l2473" class="line" id="l2473">   2473</a> #endif
<a href="#l2474" class="line" id="l2474">   2474</a> #ifdef USE_AOMAP
<a href="#l2475" class="line" id="l2475">   2475</a> 	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
<a href="#l2476" class="line" id="l2476">   2476</a> #endif
<a href="#l2477" class="line" id="l2477">   2477</a> #ifdef USE_BUMPMAP
<a href="#l2478" class="line" id="l2478">   2478</a> 	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
<a href="#l2479" class="line" id="l2479">   2479</a> #endif
<a href="#l2480" class="line" id="l2480">   2480</a> #ifdef USE_NORMALMAP
<a href="#l2481" class="line" id="l2481">   2481</a> 	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
<a href="#l2482" class="line" id="l2482">   2482</a> #endif
<a href="#l2483" class="line" id="l2483">   2483</a> #ifdef USE_DISPLACEMENTMAP
<a href="#l2484" class="line" id="l2484">   2484</a> 	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
<a href="#l2485" class="line" id="l2485">   2485</a> #endif
<a href="#l2486" class="line" id="l2486">   2486</a> #ifdef USE_EMISSIVEMAP
<a href="#l2487" class="line" id="l2487">   2487</a> 	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
<a href="#l2488" class="line" id="l2488">   2488</a> #endif
<a href="#l2489" class="line" id="l2489">   2489</a> #ifdef USE_METALNESSMAP
<a href="#l2490" class="line" id="l2490">   2490</a> 	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
<a href="#l2491" class="line" id="l2491">   2491</a> #endif
<a href="#l2492" class="line" id="l2492">   2492</a> #ifdef USE_ROUGHNESSMAP
<a href="#l2493" class="line" id="l2493">   2493</a> 	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
<a href="#l2494" class="line" id="l2494">   2494</a> #endif
<a href="#l2495" class="line" id="l2495">   2495</a> #ifdef USE_ANISOTROPYMAP
<a href="#l2496" class="line" id="l2496">   2496</a> 	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
<a href="#l2497" class="line" id="l2497">   2497</a> #endif
<a href="#l2498" class="line" id="l2498">   2498</a> #ifdef USE_CLEARCOATMAP
<a href="#l2499" class="line" id="l2499">   2499</a> 	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
<a href="#l2500" class="line" id="l2500">   2500</a> #endif
<a href="#l2501" class="line" id="l2501">   2501</a> #ifdef USE_CLEARCOAT_NORMALMAP
<a href="#l2502" class="line" id="l2502">   2502</a> 	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
<a href="#l2503" class="line" id="l2503">   2503</a> #endif
<a href="#l2504" class="line" id="l2504">   2504</a> #ifdef USE_CLEARCOAT_ROUGHNESSMAP
<a href="#l2505" class="line" id="l2505">   2505</a> 	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
<a href="#l2506" class="line" id="l2506">   2506</a> #endif
<a href="#l2507" class="line" id="l2507">   2507</a> #ifdef USE_IRIDESCENCEMAP
<a href="#l2508" class="line" id="l2508">   2508</a> 	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
<a href="#l2509" class="line" id="l2509">   2509</a> #endif
<a href="#l2510" class="line" id="l2510">   2510</a> #ifdef USE_IRIDESCENCE_THICKNESSMAP
<a href="#l2511" class="line" id="l2511">   2511</a> 	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
<a href="#l2512" class="line" id="l2512">   2512</a> #endif
<a href="#l2513" class="line" id="l2513">   2513</a> #ifdef USE_SHEEN_COLORMAP
<a href="#l2514" class="line" id="l2514">   2514</a> 	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
<a href="#l2515" class="line" id="l2515">   2515</a> #endif
<a href="#l2516" class="line" id="l2516">   2516</a> #ifdef USE_SHEEN_ROUGHNESSMAP
<a href="#l2517" class="line" id="l2517">   2517</a> 	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
<a href="#l2518" class="line" id="l2518">   2518</a> #endif
<a href="#l2519" class="line" id="l2519">   2519</a> #ifdef USE_SPECULARMAP
<a href="#l2520" class="line" id="l2520">   2520</a> 	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
<a href="#l2521" class="line" id="l2521">   2521</a> #endif
<a href="#l2522" class="line" id="l2522">   2522</a> #ifdef USE_SPECULAR_COLORMAP
<a href="#l2523" class="line" id="l2523">   2523</a> 	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
<a href="#l2524" class="line" id="l2524">   2524</a> #endif
<a href="#l2525" class="line" id="l2525">   2525</a> #ifdef USE_SPECULAR_INTENSITYMAP
<a href="#l2526" class="line" id="l2526">   2526</a> 	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
<a href="#l2527" class="line" id="l2527">   2527</a> #endif
<a href="#l2528" class="line" id="l2528">   2528</a> #ifdef USE_TRANSMISSIONMAP
<a href="#l2529" class="line" id="l2529">   2529</a> 	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
<a href="#l2530" class="line" id="l2530">   2530</a> #endif
<a href="#l2531" class="line" id="l2531">   2531</a> #ifdef USE_THICKNESSMAP
<a href="#l2532" class="line" id="l2532">   2532</a> 	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
<a href="#l2533" class="line" id="l2533">   2533</a> #endif`,s6=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS &gt; 0
<a href="#l2534" class="line" id="l2534">   2534</a> 	vec4 worldPosition = vec4( transformed, 1.0 );
<a href="#l2535" class="line" id="l2535">   2535</a> 	#ifdef USE_BATCHING
<a href="#l2536" class="line" id="l2536">   2536</a> 		worldPosition = batchingMatrix * worldPosition;
<a href="#l2537" class="line" id="l2537">   2537</a> 	#endif
<a href="#l2538" class="line" id="l2538">   2538</a> 	#ifdef USE_INSTANCING
<a href="#l2539" class="line" id="l2539">   2539</a> 		worldPosition = instanceMatrix * worldPosition;
<a href="#l2540" class="line" id="l2540">   2540</a> 	#endif
<a href="#l2541" class="line" id="l2541">   2541</a> 	worldPosition = modelMatrix * worldPosition;
<a href="#l2542" class="line" id="l2542">   2542</a> #endif`,r6=`varying vec2 vUv;
<a href="#l2543" class="line" id="l2543">   2543</a> uniform mat3 uvTransform;
<a href="#l2544" class="line" id="l2544">   2544</a> void main() {
<a href="#l2545" class="line" id="l2545">   2545</a> 	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
<a href="#l2546" class="line" id="l2546">   2546</a> 	gl_Position = vec4( position.xy, 1.0, 1.0 );
<a href="#l2547" class="line" id="l2547">   2547</a> }`,o6=`uniform sampler2D t2D;
<a href="#l2548" class="line" id="l2548">   2548</a> uniform float backgroundIntensity;
<a href="#l2549" class="line" id="l2549">   2549</a> varying vec2 vUv;
<a href="#l2550" class="line" id="l2550">   2550</a> void main() {
<a href="#l2551" class="line" id="l2551">   2551</a> 	vec4 texColor = texture2D( t2D, vUv );
<a href="#l2552" class="line" id="l2552">   2552</a> 	#ifdef DECODE_VIDEO_TEXTURE
<a href="#l2553" class="line" id="l2553">   2553</a> 		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
<a href="#l2554" class="line" id="l2554">   2554</a> 	#endif
<a href="#l2555" class="line" id="l2555">   2555</a> 	texColor.rgb *= backgroundIntensity;
<a href="#l2556" class="line" id="l2556">   2556</a> 	gl_FragColor = texColor;
<a href="#l2557" class="line" id="l2557">   2557</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l2558" class="line" id="l2558">   2558</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l2559" class="line" id="l2559">   2559</a> }`,l6=`varying vec3 vWorldDirection;
<a href="#l2560" class="line" id="l2560">   2560</a> #include &lt;common&gt;
<a href="#l2561" class="line" id="l2561">   2561</a> void main() {
<a href="#l2562" class="line" id="l2562">   2562</a> 	vWorldDirection = transformDirection( position, modelMatrix );
<a href="#l2563" class="line" id="l2563">   2563</a> 	#include &lt;begin_vertex&gt;
<a href="#l2564" class="line" id="l2564">   2564</a> 	#include &lt;project_vertex&gt;
<a href="#l2565" class="line" id="l2565">   2565</a> 	gl_Position.z = gl_Position.w;
<a href="#l2566" class="line" id="l2566">   2566</a> }`,u6=`#ifdef ENVMAP_TYPE_CUBE
<a href="#l2567" class="line" id="l2567">   2567</a> 	uniform samplerCube envMap;
<a href="#l2568" class="line" id="l2568">   2568</a> #elif defined( ENVMAP_TYPE_CUBE_UV )
<a href="#l2569" class="line" id="l2569">   2569</a> 	uniform sampler2D envMap;
<a href="#l2570" class="line" id="l2570">   2570</a> #endif
<a href="#l2571" class="line" id="l2571">   2571</a> uniform float flipEnvMap;
<a href="#l2572" class="line" id="l2572">   2572</a> uniform float backgroundBlurriness;
<a href="#l2573" class="line" id="l2573">   2573</a> uniform float backgroundIntensity;
<a href="#l2574" class="line" id="l2574">   2574</a> uniform mat3 backgroundRotation;
<a href="#l2575" class="line" id="l2575">   2575</a> varying vec3 vWorldDirection;
<a href="#l2576" class="line" id="l2576">   2576</a> #include &lt;cube_uv_reflection_fragment&gt;
<a href="#l2577" class="line" id="l2577">   2577</a> void main() {
<a href="#l2578" class="line" id="l2578">   2578</a> 	#ifdef ENVMAP_TYPE_CUBE
<a href="#l2579" class="line" id="l2579">   2579</a> 		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
<a href="#l2580" class="line" id="l2580">   2580</a> 	#elif defined( ENVMAP_TYPE_CUBE_UV )
<a href="#l2581" class="line" id="l2581">   2581</a> 		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
<a href="#l2582" class="line" id="l2582">   2582</a> 	#else
<a href="#l2583" class="line" id="l2583">   2583</a> 		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
<a href="#l2584" class="line" id="l2584">   2584</a> 	#endif
<a href="#l2585" class="line" id="l2585">   2585</a> 	texColor.rgb *= backgroundIntensity;
<a href="#l2586" class="line" id="l2586">   2586</a> 	gl_FragColor = texColor;
<a href="#l2587" class="line" id="l2587">   2587</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l2588" class="line" id="l2588">   2588</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l2589" class="line" id="l2589">   2589</a> }`,c6=`varying vec3 vWorldDirection;
<a href="#l2590" class="line" id="l2590">   2590</a> #include &lt;common&gt;
<a href="#l2591" class="line" id="l2591">   2591</a> void main() {
<a href="#l2592" class="line" id="l2592">   2592</a> 	vWorldDirection = transformDirection( position, modelMatrix );
<a href="#l2593" class="line" id="l2593">   2593</a> 	#include &lt;begin_vertex&gt;
<a href="#l2594" class="line" id="l2594">   2594</a> 	#include &lt;project_vertex&gt;
<a href="#l2595" class="line" id="l2595">   2595</a> 	gl_Position.z = gl_Position.w;
<a href="#l2596" class="line" id="l2596">   2596</a> }`,f6=`uniform samplerCube tCube;
<a href="#l2597" class="line" id="l2597">   2597</a> uniform float tFlip;
<a href="#l2598" class="line" id="l2598">   2598</a> uniform float opacity;
<a href="#l2599" class="line" id="l2599">   2599</a> varying vec3 vWorldDirection;
<a href="#l2600" class="line" id="l2600">   2600</a> void main() {
<a href="#l2601" class="line" id="l2601">   2601</a> 	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
<a href="#l2602" class="line" id="l2602">   2602</a> 	gl_FragColor = texColor;
<a href="#l2603" class="line" id="l2603">   2603</a> 	gl_FragColor.a *= opacity;
<a href="#l2604" class="line" id="l2604">   2604</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l2605" class="line" id="l2605">   2605</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l2606" class="line" id="l2606">   2606</a> }`,h6=`#include &lt;common&gt;
<a href="#l2607" class="line" id="l2607">   2607</a> #include &lt;batching_pars_vertex&gt;
<a href="#l2608" class="line" id="l2608">   2608</a> #include &lt;uv_pars_vertex&gt;
<a href="#l2609" class="line" id="l2609">   2609</a> #include &lt;displacementmap_pars_vertex&gt;
<a href="#l2610" class="line" id="l2610">   2610</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l2611" class="line" id="l2611">   2611</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l2612" class="line" id="l2612">   2612</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l2613" class="line" id="l2613">   2613</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l2614" class="line" id="l2614">   2614</a> varying vec2 vHighPrecisionZW;
<a href="#l2615" class="line" id="l2615">   2615</a> void main() {
<a href="#l2616" class="line" id="l2616">   2616</a> 	#include &lt;uv_vertex&gt;
<a href="#l2617" class="line" id="l2617">   2617</a> 	#include &lt;batching_vertex&gt;
<a href="#l2618" class="line" id="l2618">   2618</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l2619" class="line" id="l2619">   2619</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l2620" class="line" id="l2620">   2620</a> 	#ifdef USE_DISPLACEMENTMAP
<a href="#l2621" class="line" id="l2621">   2621</a> 		#include &lt;beginnormal_vertex&gt;
<a href="#l2622" class="line" id="l2622">   2622</a> 		#include &lt;morphnormal_vertex&gt;
<a href="#l2623" class="line" id="l2623">   2623</a> 		#include &lt;skinnormal_vertex&gt;
<a href="#l2624" class="line" id="l2624">   2624</a> 	#endif
<a href="#l2625" class="line" id="l2625">   2625</a> 	#include &lt;begin_vertex&gt;
<a href="#l2626" class="line" id="l2626">   2626</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l2627" class="line" id="l2627">   2627</a> 	#include &lt;skinning_vertex&gt;
<a href="#l2628" class="line" id="l2628">   2628</a> 	#include &lt;displacementmap_vertex&gt;
<a href="#l2629" class="line" id="l2629">   2629</a> 	#include &lt;project_vertex&gt;
<a href="#l2630" class="line" id="l2630">   2630</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l2631" class="line" id="l2631">   2631</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l2632" class="line" id="l2632">   2632</a> 	vHighPrecisionZW = gl_Position.zw;
<a href="#l2633" class="line" id="l2633">   2633</a> }`,d6=`#if DEPTH_PACKING == 3200
<a href="#l2634" class="line" id="l2634">   2634</a> 	uniform float opacity;
<a href="#l2635" class="line" id="l2635">   2635</a> #endif
<a href="#l2636" class="line" id="l2636">   2636</a> #include &lt;common&gt;
<a href="#l2637" class="line" id="l2637">   2637</a> #include &lt;packing&gt;
<a href="#l2638" class="line" id="l2638">   2638</a> #include &lt;uv_pars_fragment&gt;
<a href="#l2639" class="line" id="l2639">   2639</a> #include &lt;map_pars_fragment&gt;
<a href="#l2640" class="line" id="l2640">   2640</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l2641" class="line" id="l2641">   2641</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l2642" class="line" id="l2642">   2642</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l2643" class="line" id="l2643">   2643</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l2644" class="line" id="l2644">   2644</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l2645" class="line" id="l2645">   2645</a> varying vec2 vHighPrecisionZW;
<a href="#l2646" class="line" id="l2646">   2646</a> void main() {
<a href="#l2647" class="line" id="l2647">   2647</a> 	vec4 diffuseColor = vec4( 1.0 );
<a href="#l2648" class="line" id="l2648">   2648</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l2649" class="line" id="l2649">   2649</a> 	#if DEPTH_PACKING == 3200
<a href="#l2650" class="line" id="l2650">   2650</a> 		diffuseColor.a = opacity;
<a href="#l2651" class="line" id="l2651">   2651</a> 	#endif
<a href="#l2652" class="line" id="l2652">   2652</a> 	#include &lt;map_fragment&gt;
<a href="#l2653" class="line" id="l2653">   2653</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l2654" class="line" id="l2654">   2654</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l2655" class="line" id="l2655">   2655</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l2656" class="line" id="l2656">   2656</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l2657" class="line" id="l2657">   2657</a> 	#ifdef USE_REVERSEDEPTHBUF
<a href="#l2658" class="line" id="l2658">   2658</a> 		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
<a href="#l2659" class="line" id="l2659">   2659</a> 	#else
<a href="#l2660" class="line" id="l2660">   2660</a> 		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
<a href="#l2661" class="line" id="l2661">   2661</a> 	#endif
<a href="#l2662" class="line" id="l2662">   2662</a> 	#if DEPTH_PACKING == 3200
<a href="#l2663" class="line" id="l2663">   2663</a> 		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
<a href="#l2664" class="line" id="l2664">   2664</a> 	#elif DEPTH_PACKING == 3201
<a href="#l2665" class="line" id="l2665">   2665</a> 		gl_FragColor = packDepthToRGBA( fragCoordZ );
<a href="#l2666" class="line" id="l2666">   2666</a> 	#elif DEPTH_PACKING == 3202
<a href="#l2667" class="line" id="l2667">   2667</a> 		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
<a href="#l2668" class="line" id="l2668">   2668</a> 	#elif DEPTH_PACKING == 3203
<a href="#l2669" class="line" id="l2669">   2669</a> 		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
<a href="#l2670" class="line" id="l2670">   2670</a> 	#endif
<a href="#l2671" class="line" id="l2671">   2671</a> }`,p6=`#define DISTANCE
<a href="#l2672" class="line" id="l2672">   2672</a> varying vec3 vWorldPosition;
<a href="#l2673" class="line" id="l2673">   2673</a> #include &lt;common&gt;
<a href="#l2674" class="line" id="l2674">   2674</a> #include &lt;batching_pars_vertex&gt;
<a href="#l2675" class="line" id="l2675">   2675</a> #include &lt;uv_pars_vertex&gt;
<a href="#l2676" class="line" id="l2676">   2676</a> #include &lt;displacementmap_pars_vertex&gt;
<a href="#l2677" class="line" id="l2677">   2677</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l2678" class="line" id="l2678">   2678</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l2679" class="line" id="l2679">   2679</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l2680" class="line" id="l2680">   2680</a> void main() {
<a href="#l2681" class="line" id="l2681">   2681</a> 	#include &lt;uv_vertex&gt;
<a href="#l2682" class="line" id="l2682">   2682</a> 	#include &lt;batching_vertex&gt;
<a href="#l2683" class="line" id="l2683">   2683</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l2684" class="line" id="l2684">   2684</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l2685" class="line" id="l2685">   2685</a> 	#ifdef USE_DISPLACEMENTMAP
<a href="#l2686" class="line" id="l2686">   2686</a> 		#include &lt;beginnormal_vertex&gt;
<a href="#l2687" class="line" id="l2687">   2687</a> 		#include &lt;morphnormal_vertex&gt;
<a href="#l2688" class="line" id="l2688">   2688</a> 		#include &lt;skinnormal_vertex&gt;
<a href="#l2689" class="line" id="l2689">   2689</a> 	#endif
<a href="#l2690" class="line" id="l2690">   2690</a> 	#include &lt;begin_vertex&gt;
<a href="#l2691" class="line" id="l2691">   2691</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l2692" class="line" id="l2692">   2692</a> 	#include &lt;skinning_vertex&gt;
<a href="#l2693" class="line" id="l2693">   2693</a> 	#include &lt;displacementmap_vertex&gt;
<a href="#l2694" class="line" id="l2694">   2694</a> 	#include &lt;project_vertex&gt;
<a href="#l2695" class="line" id="l2695">   2695</a> 	#include &lt;worldpos_vertex&gt;
<a href="#l2696" class="line" id="l2696">   2696</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l2697" class="line" id="l2697">   2697</a> 	vWorldPosition = worldPosition.xyz;
<a href="#l2698" class="line" id="l2698">   2698</a> }`,m6=`#define DISTANCE
<a href="#l2699" class="line" id="l2699">   2699</a> uniform vec3 referencePosition;
<a href="#l2700" class="line" id="l2700">   2700</a> uniform float nearDistance;
<a href="#l2701" class="line" id="l2701">   2701</a> uniform float farDistance;
<a href="#l2702" class="line" id="l2702">   2702</a> varying vec3 vWorldPosition;
<a href="#l2703" class="line" id="l2703">   2703</a> #include &lt;common&gt;
<a href="#l2704" class="line" id="l2704">   2704</a> #include &lt;packing&gt;
<a href="#l2705" class="line" id="l2705">   2705</a> #include &lt;uv_pars_fragment&gt;
<a href="#l2706" class="line" id="l2706">   2706</a> #include &lt;map_pars_fragment&gt;
<a href="#l2707" class="line" id="l2707">   2707</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l2708" class="line" id="l2708">   2708</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l2709" class="line" id="l2709">   2709</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l2710" class="line" id="l2710">   2710</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l2711" class="line" id="l2711">   2711</a> void main () {
<a href="#l2712" class="line" id="l2712">   2712</a> 	vec4 diffuseColor = vec4( 1.0 );
<a href="#l2713" class="line" id="l2713">   2713</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l2714" class="line" id="l2714">   2714</a> 	#include &lt;map_fragment&gt;
<a href="#l2715" class="line" id="l2715">   2715</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l2716" class="line" id="l2716">   2716</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l2717" class="line" id="l2717">   2717</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l2718" class="line" id="l2718">   2718</a> 	float dist = length( vWorldPosition - referencePosition );
<a href="#l2719" class="line" id="l2719">   2719</a> 	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
<a href="#l2720" class="line" id="l2720">   2720</a> 	dist = saturate( dist );
<a href="#l2721" class="line" id="l2721">   2721</a> 	gl_FragColor = packDepthToRGBA( dist );
<a href="#l2722" class="line" id="l2722">   2722</a> }`,g6=`varying vec3 vWorldDirection;
<a href="#l2723" class="line" id="l2723">   2723</a> #include &lt;common&gt;
<a href="#l2724" class="line" id="l2724">   2724</a> void main() {
<a href="#l2725" class="line" id="l2725">   2725</a> 	vWorldDirection = transformDirection( position, modelMatrix );
<a href="#l2726" class="line" id="l2726">   2726</a> 	#include &lt;begin_vertex&gt;
<a href="#l2727" class="line" id="l2727">   2727</a> 	#include &lt;project_vertex&gt;
<a href="#l2728" class="line" id="l2728">   2728</a> }`,v6=`uniform sampler2D tEquirect;
<a href="#l2729" class="line" id="l2729">   2729</a> varying vec3 vWorldDirection;
<a href="#l2730" class="line" id="l2730">   2730</a> #include &lt;common&gt;
<a href="#l2731" class="line" id="l2731">   2731</a> void main() {
<a href="#l2732" class="line" id="l2732">   2732</a> 	vec3 direction = normalize( vWorldDirection );
<a href="#l2733" class="line" id="l2733">   2733</a> 	vec2 sampleUV = equirectUv( direction );
<a href="#l2734" class="line" id="l2734">   2734</a> 	gl_FragColor = texture2D( tEquirect, sampleUV );
<a href="#l2735" class="line" id="l2735">   2735</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l2736" class="line" id="l2736">   2736</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l2737" class="line" id="l2737">   2737</a> }`,y6=`uniform float scale;
<a href="#l2738" class="line" id="l2738">   2738</a> attribute float lineDistance;
<a href="#l2739" class="line" id="l2739">   2739</a> varying float vLineDistance;
<a href="#l2740" class="line" id="l2740">   2740</a> #include &lt;common&gt;
<a href="#l2741" class="line" id="l2741">   2741</a> #include &lt;uv_pars_vertex&gt;
<a href="#l2742" class="line" id="l2742">   2742</a> #include &lt;color_pars_vertex&gt;
<a href="#l2743" class="line" id="l2743">   2743</a> #include &lt;fog_pars_vertex&gt;
<a href="#l2744" class="line" id="l2744">   2744</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l2745" class="line" id="l2745">   2745</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l2746" class="line" id="l2746">   2746</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l2747" class="line" id="l2747">   2747</a> void main() {
<a href="#l2748" class="line" id="l2748">   2748</a> 	vLineDistance = scale * lineDistance;
<a href="#l2749" class="line" id="l2749">   2749</a> 	#include &lt;uv_vertex&gt;
<a href="#l2750" class="line" id="l2750">   2750</a> 	#include &lt;color_vertex&gt;
<a href="#l2751" class="line" id="l2751">   2751</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l2752" class="line" id="l2752">   2752</a> 	#include &lt;morphcolor_vertex&gt;
<a href="#l2753" class="line" id="l2753">   2753</a> 	#include &lt;begin_vertex&gt;
<a href="#l2754" class="line" id="l2754">   2754</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l2755" class="line" id="l2755">   2755</a> 	#include &lt;project_vertex&gt;
<a href="#l2756" class="line" id="l2756">   2756</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l2757" class="line" id="l2757">   2757</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l2758" class="line" id="l2758">   2758</a> 	#include &lt;fog_vertex&gt;
<a href="#l2759" class="line" id="l2759">   2759</a> }`,_6=`uniform vec3 diffuse;
<a href="#l2760" class="line" id="l2760">   2760</a> uniform float opacity;
<a href="#l2761" class="line" id="l2761">   2761</a> uniform float dashSize;
<a href="#l2762" class="line" id="l2762">   2762</a> uniform float totalSize;
<a href="#l2763" class="line" id="l2763">   2763</a> varying float vLineDistance;
<a href="#l2764" class="line" id="l2764">   2764</a> #include &lt;common&gt;
<a href="#l2765" class="line" id="l2765">   2765</a> #include &lt;color_pars_fragment&gt;
<a href="#l2766" class="line" id="l2766">   2766</a> #include &lt;uv_pars_fragment&gt;
<a href="#l2767" class="line" id="l2767">   2767</a> #include &lt;map_pars_fragment&gt;
<a href="#l2768" class="line" id="l2768">   2768</a> #include &lt;fog_pars_fragment&gt;
<a href="#l2769" class="line" id="l2769">   2769</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l2770" class="line" id="l2770">   2770</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l2771" class="line" id="l2771">   2771</a> void main() {
<a href="#l2772" class="line" id="l2772">   2772</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l2773" class="line" id="l2773">   2773</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l2774" class="line" id="l2774">   2774</a> 	if ( mod( vLineDistance, totalSize ) &gt; dashSize ) {
<a href="#l2775" class="line" id="l2775">   2775</a> 		discard;
<a href="#l2776" class="line" id="l2776">   2776</a> 	}
<a href="#l2777" class="line" id="l2777">   2777</a> 	vec3 outgoingLight = vec3( 0.0 );
<a href="#l2778" class="line" id="l2778">   2778</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l2779" class="line" id="l2779">   2779</a> 	#include &lt;map_fragment&gt;
<a href="#l2780" class="line" id="l2780">   2780</a> 	#include &lt;color_fragment&gt;
<a href="#l2781" class="line" id="l2781">   2781</a> 	outgoingLight = diffuseColor.rgb;
<a href="#l2782" class="line" id="l2782">   2782</a> 	#include &lt;opaque_fragment&gt;
<a href="#l2783" class="line" id="l2783">   2783</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l2784" class="line" id="l2784">   2784</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l2785" class="line" id="l2785">   2785</a> 	#include &lt;fog_fragment&gt;
<a href="#l2786" class="line" id="l2786">   2786</a> 	#include &lt;premultiplied_alpha_fragment&gt;
<a href="#l2787" class="line" id="l2787">   2787</a> }`,x6=`#include &lt;common&gt;
<a href="#l2788" class="line" id="l2788">   2788</a> #include &lt;batching_pars_vertex&gt;
<a href="#l2789" class="line" id="l2789">   2789</a> #include &lt;uv_pars_vertex&gt;
<a href="#l2790" class="line" id="l2790">   2790</a> #include &lt;envmap_pars_vertex&gt;
<a href="#l2791" class="line" id="l2791">   2791</a> #include &lt;color_pars_vertex&gt;
<a href="#l2792" class="line" id="l2792">   2792</a> #include &lt;fog_pars_vertex&gt;
<a href="#l2793" class="line" id="l2793">   2793</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l2794" class="line" id="l2794">   2794</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l2795" class="line" id="l2795">   2795</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l2796" class="line" id="l2796">   2796</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l2797" class="line" id="l2797">   2797</a> void main() {
<a href="#l2798" class="line" id="l2798">   2798</a> 	#include &lt;uv_vertex&gt;
<a href="#l2799" class="line" id="l2799">   2799</a> 	#include &lt;color_vertex&gt;
<a href="#l2800" class="line" id="l2800">   2800</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l2801" class="line" id="l2801">   2801</a> 	#include &lt;morphcolor_vertex&gt;
<a href="#l2802" class="line" id="l2802">   2802</a> 	#include &lt;batching_vertex&gt;
<a href="#l2803" class="line" id="l2803">   2803</a> 	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
<a href="#l2804" class="line" id="l2804">   2804</a> 		#include &lt;beginnormal_vertex&gt;
<a href="#l2805" class="line" id="l2805">   2805</a> 		#include &lt;morphnormal_vertex&gt;
<a href="#l2806" class="line" id="l2806">   2806</a> 		#include &lt;skinbase_vertex&gt;
<a href="#l2807" class="line" id="l2807">   2807</a> 		#include &lt;skinnormal_vertex&gt;
<a href="#l2808" class="line" id="l2808">   2808</a> 		#include &lt;defaultnormal_vertex&gt;
<a href="#l2809" class="line" id="l2809">   2809</a> 	#endif
<a href="#l2810" class="line" id="l2810">   2810</a> 	#include &lt;begin_vertex&gt;
<a href="#l2811" class="line" id="l2811">   2811</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l2812" class="line" id="l2812">   2812</a> 	#include &lt;skinning_vertex&gt;
<a href="#l2813" class="line" id="l2813">   2813</a> 	#include &lt;project_vertex&gt;
<a href="#l2814" class="line" id="l2814">   2814</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l2815" class="line" id="l2815">   2815</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l2816" class="line" id="l2816">   2816</a> 	#include &lt;worldpos_vertex&gt;
<a href="#l2817" class="line" id="l2817">   2817</a> 	#include &lt;envmap_vertex&gt;
<a href="#l2818" class="line" id="l2818">   2818</a> 	#include &lt;fog_vertex&gt;
<a href="#l2819" class="line" id="l2819">   2819</a> }`,S6=`uniform vec3 diffuse;
<a href="#l2820" class="line" id="l2820">   2820</a> uniform float opacity;
<a href="#l2821" class="line" id="l2821">   2821</a> #ifndef FLAT_SHADED
<a href="#l2822" class="line" id="l2822">   2822</a> 	varying vec3 vNormal;
<a href="#l2823" class="line" id="l2823">   2823</a> #endif
<a href="#l2824" class="line" id="l2824">   2824</a> #include &lt;common&gt;
<a href="#l2825" class="line" id="l2825">   2825</a> #include &lt;dithering_pars_fragment&gt;
<a href="#l2826" class="line" id="l2826">   2826</a> #include &lt;color_pars_fragment&gt;
<a href="#l2827" class="line" id="l2827">   2827</a> #include &lt;uv_pars_fragment&gt;
<a href="#l2828" class="line" id="l2828">   2828</a> #include &lt;map_pars_fragment&gt;
<a href="#l2829" class="line" id="l2829">   2829</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l2830" class="line" id="l2830">   2830</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l2831" class="line" id="l2831">   2831</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l2832" class="line" id="l2832">   2832</a> #include &lt;aomap_pars_fragment&gt;
<a href="#l2833" class="line" id="l2833">   2833</a> #include &lt;lightmap_pars_fragment&gt;
<a href="#l2834" class="line" id="l2834">   2834</a> #include &lt;envmap_common_pars_fragment&gt;
<a href="#l2835" class="line" id="l2835">   2835</a> #include &lt;envmap_pars_fragment&gt;
<a href="#l2836" class="line" id="l2836">   2836</a> #include &lt;fog_pars_fragment&gt;
<a href="#l2837" class="line" id="l2837">   2837</a> #include &lt;specularmap_pars_fragment&gt;
<a href="#l2838" class="line" id="l2838">   2838</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l2839" class="line" id="l2839">   2839</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l2840" class="line" id="l2840">   2840</a> void main() {
<a href="#l2841" class="line" id="l2841">   2841</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l2842" class="line" id="l2842">   2842</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l2843" class="line" id="l2843">   2843</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l2844" class="line" id="l2844">   2844</a> 	#include &lt;map_fragment&gt;
<a href="#l2845" class="line" id="l2845">   2845</a> 	#include &lt;color_fragment&gt;
<a href="#l2846" class="line" id="l2846">   2846</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l2847" class="line" id="l2847">   2847</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l2848" class="line" id="l2848">   2848</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l2849" class="line" id="l2849">   2849</a> 	#include &lt;specularmap_fragment&gt;
<a href="#l2850" class="line" id="l2850">   2850</a> 	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
<a href="#l2851" class="line" id="l2851">   2851</a> 	#ifdef USE_LIGHTMAP
<a href="#l2852" class="line" id="l2852">   2852</a> 		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
<a href="#l2853" class="line" id="l2853">   2853</a> 		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
<a href="#l2854" class="line" id="l2854">   2854</a> 	#else
<a href="#l2855" class="line" id="l2855">   2855</a> 		reflectedLight.indirectDiffuse += vec3( 1.0 );
<a href="#l2856" class="line" id="l2856">   2856</a> 	#endif
<a href="#l2857" class="line" id="l2857">   2857</a> 	#include &lt;aomap_fragment&gt;
<a href="#l2858" class="line" id="l2858">   2858</a> 	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
<a href="#l2859" class="line" id="l2859">   2859</a> 	vec3 outgoingLight = reflectedLight.indirectDiffuse;
<a href="#l2860" class="line" id="l2860">   2860</a> 	#include &lt;envmap_fragment&gt;
<a href="#l2861" class="line" id="l2861">   2861</a> 	#include &lt;opaque_fragment&gt;
<a href="#l2862" class="line" id="l2862">   2862</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l2863" class="line" id="l2863">   2863</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l2864" class="line" id="l2864">   2864</a> 	#include &lt;fog_fragment&gt;
<a href="#l2865" class="line" id="l2865">   2865</a> 	#include &lt;premultiplied_alpha_fragment&gt;
<a href="#l2866" class="line" id="l2866">   2866</a> 	#include &lt;dithering_fragment&gt;
<a href="#l2867" class="line" id="l2867">   2867</a> }`,M6=`#define LAMBERT
<a href="#l2868" class="line" id="l2868">   2868</a> varying vec3 vViewPosition;
<a href="#l2869" class="line" id="l2869">   2869</a> #include &lt;common&gt;
<a href="#l2870" class="line" id="l2870">   2870</a> #include &lt;batching_pars_vertex&gt;
<a href="#l2871" class="line" id="l2871">   2871</a> #include &lt;uv_pars_vertex&gt;
<a href="#l2872" class="line" id="l2872">   2872</a> #include &lt;displacementmap_pars_vertex&gt;
<a href="#l2873" class="line" id="l2873">   2873</a> #include &lt;envmap_pars_vertex&gt;
<a href="#l2874" class="line" id="l2874">   2874</a> #include &lt;color_pars_vertex&gt;
<a href="#l2875" class="line" id="l2875">   2875</a> #include &lt;fog_pars_vertex&gt;
<a href="#l2876" class="line" id="l2876">   2876</a> #include &lt;normal_pars_vertex&gt;
<a href="#l2877" class="line" id="l2877">   2877</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l2878" class="line" id="l2878">   2878</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l2879" class="line" id="l2879">   2879</a> #include &lt;shadowmap_pars_vertex&gt;
<a href="#l2880" class="line" id="l2880">   2880</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l2881" class="line" id="l2881">   2881</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l2882" class="line" id="l2882">   2882</a> void main() {
<a href="#l2883" class="line" id="l2883">   2883</a> 	#include &lt;uv_vertex&gt;
<a href="#l2884" class="line" id="l2884">   2884</a> 	#include &lt;color_vertex&gt;
<a href="#l2885" class="line" id="l2885">   2885</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l2886" class="line" id="l2886">   2886</a> 	#include &lt;morphcolor_vertex&gt;
<a href="#l2887" class="line" id="l2887">   2887</a> 	#include &lt;batching_vertex&gt;
<a href="#l2888" class="line" id="l2888">   2888</a> 	#include &lt;beginnormal_vertex&gt;
<a href="#l2889" class="line" id="l2889">   2889</a> 	#include &lt;morphnormal_vertex&gt;
<a href="#l2890" class="line" id="l2890">   2890</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l2891" class="line" id="l2891">   2891</a> 	#include &lt;skinnormal_vertex&gt;
<a href="#l2892" class="line" id="l2892">   2892</a> 	#include &lt;defaultnormal_vertex&gt;
<a href="#l2893" class="line" id="l2893">   2893</a> 	#include &lt;normal_vertex&gt;
<a href="#l2894" class="line" id="l2894">   2894</a> 	#include &lt;begin_vertex&gt;
<a href="#l2895" class="line" id="l2895">   2895</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l2896" class="line" id="l2896">   2896</a> 	#include &lt;skinning_vertex&gt;
<a href="#l2897" class="line" id="l2897">   2897</a> 	#include &lt;displacementmap_vertex&gt;
<a href="#l2898" class="line" id="l2898">   2898</a> 	#include &lt;project_vertex&gt;
<a href="#l2899" class="line" id="l2899">   2899</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l2900" class="line" id="l2900">   2900</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l2901" class="line" id="l2901">   2901</a> 	vViewPosition = - mvPosition.xyz;
<a href="#l2902" class="line" id="l2902">   2902</a> 	#include &lt;worldpos_vertex&gt;
<a href="#l2903" class="line" id="l2903">   2903</a> 	#include &lt;envmap_vertex&gt;
<a href="#l2904" class="line" id="l2904">   2904</a> 	#include &lt;shadowmap_vertex&gt;
<a href="#l2905" class="line" id="l2905">   2905</a> 	#include &lt;fog_vertex&gt;
<a href="#l2906" class="line" id="l2906">   2906</a> }`,E6=`#define LAMBERT
<a href="#l2907" class="line" id="l2907">   2907</a> uniform vec3 diffuse;
<a href="#l2908" class="line" id="l2908">   2908</a> uniform vec3 emissive;
<a href="#l2909" class="line" id="l2909">   2909</a> uniform float opacity;
<a href="#l2910" class="line" id="l2910">   2910</a> #include &lt;common&gt;
<a href="#l2911" class="line" id="l2911">   2911</a> #include &lt;packing&gt;
<a href="#l2912" class="line" id="l2912">   2912</a> #include &lt;dithering_pars_fragment&gt;
<a href="#l2913" class="line" id="l2913">   2913</a> #include &lt;color_pars_fragment&gt;
<a href="#l2914" class="line" id="l2914">   2914</a> #include &lt;uv_pars_fragment&gt;
<a href="#l2915" class="line" id="l2915">   2915</a> #include &lt;map_pars_fragment&gt;
<a href="#l2916" class="line" id="l2916">   2916</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l2917" class="line" id="l2917">   2917</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l2918" class="line" id="l2918">   2918</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l2919" class="line" id="l2919">   2919</a> #include &lt;aomap_pars_fragment&gt;
<a href="#l2920" class="line" id="l2920">   2920</a> #include &lt;lightmap_pars_fragment&gt;
<a href="#l2921" class="line" id="l2921">   2921</a> #include &lt;emissivemap_pars_fragment&gt;
<a href="#l2922" class="line" id="l2922">   2922</a> #include &lt;envmap_common_pars_fragment&gt;
<a href="#l2923" class="line" id="l2923">   2923</a> #include &lt;envmap_pars_fragment&gt;
<a href="#l2924" class="line" id="l2924">   2924</a> #include &lt;fog_pars_fragment&gt;
<a href="#l2925" class="line" id="l2925">   2925</a> #include &lt;bsdfs&gt;
<a href="#l2926" class="line" id="l2926">   2926</a> #include &lt;lights_pars_begin&gt;
<a href="#l2927" class="line" id="l2927">   2927</a> #include &lt;normal_pars_fragment&gt;
<a href="#l2928" class="line" id="l2928">   2928</a> #include &lt;lights_lambert_pars_fragment&gt;
<a href="#l2929" class="line" id="l2929">   2929</a> #include &lt;shadowmap_pars_fragment&gt;
<a href="#l2930" class="line" id="l2930">   2930</a> #include &lt;bumpmap_pars_fragment&gt;
<a href="#l2931" class="line" id="l2931">   2931</a> #include &lt;normalmap_pars_fragment&gt;
<a href="#l2932" class="line" id="l2932">   2932</a> #include &lt;specularmap_pars_fragment&gt;
<a href="#l2933" class="line" id="l2933">   2933</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l2934" class="line" id="l2934">   2934</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l2935" class="line" id="l2935">   2935</a> void main() {
<a href="#l2936" class="line" id="l2936">   2936</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l2937" class="line" id="l2937">   2937</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l2938" class="line" id="l2938">   2938</a> 	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
<a href="#l2939" class="line" id="l2939">   2939</a> 	vec3 totalEmissiveRadiance = emissive;
<a href="#l2940" class="line" id="l2940">   2940</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l2941" class="line" id="l2941">   2941</a> 	#include &lt;map_fragment&gt;
<a href="#l2942" class="line" id="l2942">   2942</a> 	#include &lt;color_fragment&gt;
<a href="#l2943" class="line" id="l2943">   2943</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l2944" class="line" id="l2944">   2944</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l2945" class="line" id="l2945">   2945</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l2946" class="line" id="l2946">   2946</a> 	#include &lt;specularmap_fragment&gt;
<a href="#l2947" class="line" id="l2947">   2947</a> 	#include &lt;normal_fragment_begin&gt;
<a href="#l2948" class="line" id="l2948">   2948</a> 	#include &lt;normal_fragment_maps&gt;
<a href="#l2949" class="line" id="l2949">   2949</a> 	#include &lt;emissivemap_fragment&gt;
<a href="#l2950" class="line" id="l2950">   2950</a> 	#include &lt;lights_lambert_fragment&gt;
<a href="#l2951" class="line" id="l2951">   2951</a> 	#include &lt;lights_fragment_begin&gt;
<a href="#l2952" class="line" id="l2952">   2952</a> 	#include &lt;lights_fragment_maps&gt;
<a href="#l2953" class="line" id="l2953">   2953</a> 	#include &lt;lights_fragment_end&gt;
<a href="#l2954" class="line" id="l2954">   2954</a> 	#include &lt;aomap_fragment&gt;
<a href="#l2955" class="line" id="l2955">   2955</a> 	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
<a href="#l2956" class="line" id="l2956">   2956</a> 	#include &lt;envmap_fragment&gt;
<a href="#l2957" class="line" id="l2957">   2957</a> 	#include &lt;opaque_fragment&gt;
<a href="#l2958" class="line" id="l2958">   2958</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l2959" class="line" id="l2959">   2959</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l2960" class="line" id="l2960">   2960</a> 	#include &lt;fog_fragment&gt;
<a href="#l2961" class="line" id="l2961">   2961</a> 	#include &lt;premultiplied_alpha_fragment&gt;
<a href="#l2962" class="line" id="l2962">   2962</a> 	#include &lt;dithering_fragment&gt;
<a href="#l2963" class="line" id="l2963">   2963</a> }`,b6=`#define MATCAP
<a href="#l2964" class="line" id="l2964">   2964</a> varying vec3 vViewPosition;
<a href="#l2965" class="line" id="l2965">   2965</a> #include &lt;common&gt;
<a href="#l2966" class="line" id="l2966">   2966</a> #include &lt;batching_pars_vertex&gt;
<a href="#l2967" class="line" id="l2967">   2967</a> #include &lt;uv_pars_vertex&gt;
<a href="#l2968" class="line" id="l2968">   2968</a> #include &lt;color_pars_vertex&gt;
<a href="#l2969" class="line" id="l2969">   2969</a> #include &lt;displacementmap_pars_vertex&gt;
<a href="#l2970" class="line" id="l2970">   2970</a> #include &lt;fog_pars_vertex&gt;
<a href="#l2971" class="line" id="l2971">   2971</a> #include &lt;normal_pars_vertex&gt;
<a href="#l2972" class="line" id="l2972">   2972</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l2973" class="line" id="l2973">   2973</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l2974" class="line" id="l2974">   2974</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l2975" class="line" id="l2975">   2975</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l2976" class="line" id="l2976">   2976</a> void main() {
<a href="#l2977" class="line" id="l2977">   2977</a> 	#include &lt;uv_vertex&gt;
<a href="#l2978" class="line" id="l2978">   2978</a> 	#include &lt;color_vertex&gt;
<a href="#l2979" class="line" id="l2979">   2979</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l2980" class="line" id="l2980">   2980</a> 	#include &lt;morphcolor_vertex&gt;
<a href="#l2981" class="line" id="l2981">   2981</a> 	#include &lt;batching_vertex&gt;
<a href="#l2982" class="line" id="l2982">   2982</a> 	#include &lt;beginnormal_vertex&gt;
<a href="#l2983" class="line" id="l2983">   2983</a> 	#include &lt;morphnormal_vertex&gt;
<a href="#l2984" class="line" id="l2984">   2984</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l2985" class="line" id="l2985">   2985</a> 	#include &lt;skinnormal_vertex&gt;
<a href="#l2986" class="line" id="l2986">   2986</a> 	#include &lt;defaultnormal_vertex&gt;
<a href="#l2987" class="line" id="l2987">   2987</a> 	#include &lt;normal_vertex&gt;
<a href="#l2988" class="line" id="l2988">   2988</a> 	#include &lt;begin_vertex&gt;
<a href="#l2989" class="line" id="l2989">   2989</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l2990" class="line" id="l2990">   2990</a> 	#include &lt;skinning_vertex&gt;
<a href="#l2991" class="line" id="l2991">   2991</a> 	#include &lt;displacementmap_vertex&gt;
<a href="#l2992" class="line" id="l2992">   2992</a> 	#include &lt;project_vertex&gt;
<a href="#l2993" class="line" id="l2993">   2993</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l2994" class="line" id="l2994">   2994</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l2995" class="line" id="l2995">   2995</a> 	#include &lt;fog_vertex&gt;
<a href="#l2996" class="line" id="l2996">   2996</a> 	vViewPosition = - mvPosition.xyz;
<a href="#l2997" class="line" id="l2997">   2997</a> }`,T6=`#define MATCAP
<a href="#l2998" class="line" id="l2998">   2998</a> uniform vec3 diffuse;
<a href="#l2999" class="line" id="l2999">   2999</a> uniform float opacity;
<a href="#l3000" class="line" id="l3000">   3000</a> uniform sampler2D matcap;
<a href="#l3001" class="line" id="l3001">   3001</a> varying vec3 vViewPosition;
<a href="#l3002" class="line" id="l3002">   3002</a> #include &lt;common&gt;
<a href="#l3003" class="line" id="l3003">   3003</a> #include &lt;dithering_pars_fragment&gt;
<a href="#l3004" class="line" id="l3004">   3004</a> #include &lt;color_pars_fragment&gt;
<a href="#l3005" class="line" id="l3005">   3005</a> #include &lt;uv_pars_fragment&gt;
<a href="#l3006" class="line" id="l3006">   3006</a> #include &lt;map_pars_fragment&gt;
<a href="#l3007" class="line" id="l3007">   3007</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l3008" class="line" id="l3008">   3008</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l3009" class="line" id="l3009">   3009</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l3010" class="line" id="l3010">   3010</a> #include &lt;fog_pars_fragment&gt;
<a href="#l3011" class="line" id="l3011">   3011</a> #include &lt;normal_pars_fragment&gt;
<a href="#l3012" class="line" id="l3012">   3012</a> #include &lt;bumpmap_pars_fragment&gt;
<a href="#l3013" class="line" id="l3013">   3013</a> #include &lt;normalmap_pars_fragment&gt;
<a href="#l3014" class="line" id="l3014">   3014</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l3015" class="line" id="l3015">   3015</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l3016" class="line" id="l3016">   3016</a> void main() {
<a href="#l3017" class="line" id="l3017">   3017</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l3018" class="line" id="l3018">   3018</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l3019" class="line" id="l3019">   3019</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l3020" class="line" id="l3020">   3020</a> 	#include &lt;map_fragment&gt;
<a href="#l3021" class="line" id="l3021">   3021</a> 	#include &lt;color_fragment&gt;
<a href="#l3022" class="line" id="l3022">   3022</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l3023" class="line" id="l3023">   3023</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l3024" class="line" id="l3024">   3024</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l3025" class="line" id="l3025">   3025</a> 	#include &lt;normal_fragment_begin&gt;
<a href="#l3026" class="line" id="l3026">   3026</a> 	#include &lt;normal_fragment_maps&gt;
<a href="#l3027" class="line" id="l3027">   3027</a> 	vec3 viewDir = normalize( vViewPosition );
<a href="#l3028" class="line" id="l3028">   3028</a> 	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
<a href="#l3029" class="line" id="l3029">   3029</a> 	vec3 y = cross( viewDir, x );
<a href="#l3030" class="line" id="l3030">   3030</a> 	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
<a href="#l3031" class="line" id="l3031">   3031</a> 	#ifdef USE_MATCAP
<a href="#l3032" class="line" id="l3032">   3032</a> 		vec4 matcapColor = texture2D( matcap, uv );
<a href="#l3033" class="line" id="l3033">   3033</a> 	#else
<a href="#l3034" class="line" id="l3034">   3034</a> 		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
<a href="#l3035" class="line" id="l3035">   3035</a> 	#endif
<a href="#l3036" class="line" id="l3036">   3036</a> 	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
<a href="#l3037" class="line" id="l3037">   3037</a> 	#include &lt;opaque_fragment&gt;
<a href="#l3038" class="line" id="l3038">   3038</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l3039" class="line" id="l3039">   3039</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l3040" class="line" id="l3040">   3040</a> 	#include &lt;fog_fragment&gt;
<a href="#l3041" class="line" id="l3041">   3041</a> 	#include &lt;premultiplied_alpha_fragment&gt;
<a href="#l3042" class="line" id="l3042">   3042</a> 	#include &lt;dithering_fragment&gt;
<a href="#l3043" class="line" id="l3043">   3043</a> }`,A6=`#define NORMAL
<a href="#l3044" class="line" id="l3044">   3044</a> #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
<a href="#l3045" class="line" id="l3045">   3045</a> 	varying vec3 vViewPosition;
<a href="#l3046" class="line" id="l3046">   3046</a> #endif
<a href="#l3047" class="line" id="l3047">   3047</a> #include &lt;common&gt;
<a href="#l3048" class="line" id="l3048">   3048</a> #include &lt;batching_pars_vertex&gt;
<a href="#l3049" class="line" id="l3049">   3049</a> #include &lt;uv_pars_vertex&gt;
<a href="#l3050" class="line" id="l3050">   3050</a> #include &lt;displacementmap_pars_vertex&gt;
<a href="#l3051" class="line" id="l3051">   3051</a> #include &lt;normal_pars_vertex&gt;
<a href="#l3052" class="line" id="l3052">   3052</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l3053" class="line" id="l3053">   3053</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l3054" class="line" id="l3054">   3054</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l3055" class="line" id="l3055">   3055</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l3056" class="line" id="l3056">   3056</a> void main() {
<a href="#l3057" class="line" id="l3057">   3057</a> 	#include &lt;uv_vertex&gt;
<a href="#l3058" class="line" id="l3058">   3058</a> 	#include &lt;batching_vertex&gt;
<a href="#l3059" class="line" id="l3059">   3059</a> 	#include &lt;beginnormal_vertex&gt;
<a href="#l3060" class="line" id="l3060">   3060</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l3061" class="line" id="l3061">   3061</a> 	#include &lt;morphnormal_vertex&gt;
<a href="#l3062" class="line" id="l3062">   3062</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l3063" class="line" id="l3063">   3063</a> 	#include &lt;skinnormal_vertex&gt;
<a href="#l3064" class="line" id="l3064">   3064</a> 	#include &lt;defaultnormal_vertex&gt;
<a href="#l3065" class="line" id="l3065">   3065</a> 	#include &lt;normal_vertex&gt;
<a href="#l3066" class="line" id="l3066">   3066</a> 	#include &lt;begin_vertex&gt;
<a href="#l3067" class="line" id="l3067">   3067</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l3068" class="line" id="l3068">   3068</a> 	#include &lt;skinning_vertex&gt;
<a href="#l3069" class="line" id="l3069">   3069</a> 	#include &lt;displacementmap_vertex&gt;
<a href="#l3070" class="line" id="l3070">   3070</a> 	#include &lt;project_vertex&gt;
<a href="#l3071" class="line" id="l3071">   3071</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l3072" class="line" id="l3072">   3072</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l3073" class="line" id="l3073">   3073</a> #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
<a href="#l3074" class="line" id="l3074">   3074</a> 	vViewPosition = - mvPosition.xyz;
<a href="#l3075" class="line" id="l3075">   3075</a> #endif
<a href="#l3076" class="line" id="l3076">   3076</a> }`,R6=`#define NORMAL
<a href="#l3077" class="line" id="l3077">   3077</a> uniform float opacity;
<a href="#l3078" class="line" id="l3078">   3078</a> #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
<a href="#l3079" class="line" id="l3079">   3079</a> 	varying vec3 vViewPosition;
<a href="#l3080" class="line" id="l3080">   3080</a> #endif
<a href="#l3081" class="line" id="l3081">   3081</a> #include &lt;packing&gt;
<a href="#l3082" class="line" id="l3082">   3082</a> #include &lt;uv_pars_fragment&gt;
<a href="#l3083" class="line" id="l3083">   3083</a> #include &lt;normal_pars_fragment&gt;
<a href="#l3084" class="line" id="l3084">   3084</a> #include &lt;bumpmap_pars_fragment&gt;
<a href="#l3085" class="line" id="l3085">   3085</a> #include &lt;normalmap_pars_fragment&gt;
<a href="#l3086" class="line" id="l3086">   3086</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l3087" class="line" id="l3087">   3087</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l3088" class="line" id="l3088">   3088</a> void main() {
<a href="#l3089" class="line" id="l3089">   3089</a> 	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
<a href="#l3090" class="line" id="l3090">   3090</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l3091" class="line" id="l3091">   3091</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l3092" class="line" id="l3092">   3092</a> 	#include &lt;normal_fragment_begin&gt;
<a href="#l3093" class="line" id="l3093">   3093</a> 	#include &lt;normal_fragment_maps&gt;
<a href="#l3094" class="line" id="l3094">   3094</a> 	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
<a href="#l3095" class="line" id="l3095">   3095</a> 	#ifdef OPAQUE
<a href="#l3096" class="line" id="l3096">   3096</a> 		gl_FragColor.a = 1.0;
<a href="#l3097" class="line" id="l3097">   3097</a> 	#endif
<a href="#l3098" class="line" id="l3098">   3098</a> }`,C6=`#define PHONG
<a href="#l3099" class="line" id="l3099">   3099</a> varying vec3 vViewPosition;
<a href="#l3100" class="line" id="l3100">   3100</a> #include &lt;common&gt;
<a href="#l3101" class="line" id="l3101">   3101</a> #include &lt;batching_pars_vertex&gt;
<a href="#l3102" class="line" id="l3102">   3102</a> #include &lt;uv_pars_vertex&gt;
<a href="#l3103" class="line" id="l3103">   3103</a> #include &lt;displacementmap_pars_vertex&gt;
<a href="#l3104" class="line" id="l3104">   3104</a> #include &lt;envmap_pars_vertex&gt;
<a href="#l3105" class="line" id="l3105">   3105</a> #include &lt;color_pars_vertex&gt;
<a href="#l3106" class="line" id="l3106">   3106</a> #include &lt;fog_pars_vertex&gt;
<a href="#l3107" class="line" id="l3107">   3107</a> #include &lt;normal_pars_vertex&gt;
<a href="#l3108" class="line" id="l3108">   3108</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l3109" class="line" id="l3109">   3109</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l3110" class="line" id="l3110">   3110</a> #include &lt;shadowmap_pars_vertex&gt;
<a href="#l3111" class="line" id="l3111">   3111</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l3112" class="line" id="l3112">   3112</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l3113" class="line" id="l3113">   3113</a> void main() {
<a href="#l3114" class="line" id="l3114">   3114</a> 	#include &lt;uv_vertex&gt;
<a href="#l3115" class="line" id="l3115">   3115</a> 	#include &lt;color_vertex&gt;
<a href="#l3116" class="line" id="l3116">   3116</a> 	#include &lt;morphcolor_vertex&gt;
<a href="#l3117" class="line" id="l3117">   3117</a> 	#include &lt;batching_vertex&gt;
<a href="#l3118" class="line" id="l3118">   3118</a> 	#include &lt;beginnormal_vertex&gt;
<a href="#l3119" class="line" id="l3119">   3119</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l3120" class="line" id="l3120">   3120</a> 	#include &lt;morphnormal_vertex&gt;
<a href="#l3121" class="line" id="l3121">   3121</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l3122" class="line" id="l3122">   3122</a> 	#include &lt;skinnormal_vertex&gt;
<a href="#l3123" class="line" id="l3123">   3123</a> 	#include &lt;defaultnormal_vertex&gt;
<a href="#l3124" class="line" id="l3124">   3124</a> 	#include &lt;normal_vertex&gt;
<a href="#l3125" class="line" id="l3125">   3125</a> 	#include &lt;begin_vertex&gt;
<a href="#l3126" class="line" id="l3126">   3126</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l3127" class="line" id="l3127">   3127</a> 	#include &lt;skinning_vertex&gt;
<a href="#l3128" class="line" id="l3128">   3128</a> 	#include &lt;displacementmap_vertex&gt;
<a href="#l3129" class="line" id="l3129">   3129</a> 	#include &lt;project_vertex&gt;
<a href="#l3130" class="line" id="l3130">   3130</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l3131" class="line" id="l3131">   3131</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l3132" class="line" id="l3132">   3132</a> 	vViewPosition = - mvPosition.xyz;
<a href="#l3133" class="line" id="l3133">   3133</a> 	#include &lt;worldpos_vertex&gt;
<a href="#l3134" class="line" id="l3134">   3134</a> 	#include &lt;envmap_vertex&gt;
<a href="#l3135" class="line" id="l3135">   3135</a> 	#include &lt;shadowmap_vertex&gt;
<a href="#l3136" class="line" id="l3136">   3136</a> 	#include &lt;fog_vertex&gt;
<a href="#l3137" class="line" id="l3137">   3137</a> }`,w6=`#define PHONG
<a href="#l3138" class="line" id="l3138">   3138</a> uniform vec3 diffuse;
<a href="#l3139" class="line" id="l3139">   3139</a> uniform vec3 emissive;
<a href="#l3140" class="line" id="l3140">   3140</a> uniform vec3 specular;
<a href="#l3141" class="line" id="l3141">   3141</a> uniform float shininess;
<a href="#l3142" class="line" id="l3142">   3142</a> uniform float opacity;
<a href="#l3143" class="line" id="l3143">   3143</a> #include &lt;common&gt;
<a href="#l3144" class="line" id="l3144">   3144</a> #include &lt;packing&gt;
<a href="#l3145" class="line" id="l3145">   3145</a> #include &lt;dithering_pars_fragment&gt;
<a href="#l3146" class="line" id="l3146">   3146</a> #include &lt;color_pars_fragment&gt;
<a href="#l3147" class="line" id="l3147">   3147</a> #include &lt;uv_pars_fragment&gt;
<a href="#l3148" class="line" id="l3148">   3148</a> #include &lt;map_pars_fragment&gt;
<a href="#l3149" class="line" id="l3149">   3149</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l3150" class="line" id="l3150">   3150</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l3151" class="line" id="l3151">   3151</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l3152" class="line" id="l3152">   3152</a> #include &lt;aomap_pars_fragment&gt;
<a href="#l3153" class="line" id="l3153">   3153</a> #include &lt;lightmap_pars_fragment&gt;
<a href="#l3154" class="line" id="l3154">   3154</a> #include &lt;emissivemap_pars_fragment&gt;
<a href="#l3155" class="line" id="l3155">   3155</a> #include &lt;envmap_common_pars_fragment&gt;
<a href="#l3156" class="line" id="l3156">   3156</a> #include &lt;envmap_pars_fragment&gt;
<a href="#l3157" class="line" id="l3157">   3157</a> #include &lt;fog_pars_fragment&gt;
<a href="#l3158" class="line" id="l3158">   3158</a> #include &lt;bsdfs&gt;
<a href="#l3159" class="line" id="l3159">   3159</a> #include &lt;lights_pars_begin&gt;
<a href="#l3160" class="line" id="l3160">   3160</a> #include &lt;normal_pars_fragment&gt;
<a href="#l3161" class="line" id="l3161">   3161</a> #include &lt;lights_phong_pars_fragment&gt;
<a href="#l3162" class="line" id="l3162">   3162</a> #include &lt;shadowmap_pars_fragment&gt;
<a href="#l3163" class="line" id="l3163">   3163</a> #include &lt;bumpmap_pars_fragment&gt;
<a href="#l3164" class="line" id="l3164">   3164</a> #include &lt;normalmap_pars_fragment&gt;
<a href="#l3165" class="line" id="l3165">   3165</a> #include &lt;specularmap_pars_fragment&gt;
<a href="#l3166" class="line" id="l3166">   3166</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l3167" class="line" id="l3167">   3167</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l3168" class="line" id="l3168">   3168</a> void main() {
<a href="#l3169" class="line" id="l3169">   3169</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l3170" class="line" id="l3170">   3170</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l3171" class="line" id="l3171">   3171</a> 	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
<a href="#l3172" class="line" id="l3172">   3172</a> 	vec3 totalEmissiveRadiance = emissive;
<a href="#l3173" class="line" id="l3173">   3173</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l3174" class="line" id="l3174">   3174</a> 	#include &lt;map_fragment&gt;
<a href="#l3175" class="line" id="l3175">   3175</a> 	#include &lt;color_fragment&gt;
<a href="#l3176" class="line" id="l3176">   3176</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l3177" class="line" id="l3177">   3177</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l3178" class="line" id="l3178">   3178</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l3179" class="line" id="l3179">   3179</a> 	#include &lt;specularmap_fragment&gt;
<a href="#l3180" class="line" id="l3180">   3180</a> 	#include &lt;normal_fragment_begin&gt;
<a href="#l3181" class="line" id="l3181">   3181</a> 	#include &lt;normal_fragment_maps&gt;
<a href="#l3182" class="line" id="l3182">   3182</a> 	#include &lt;emissivemap_fragment&gt;
<a href="#l3183" class="line" id="l3183">   3183</a> 	#include &lt;lights_phong_fragment&gt;
<a href="#l3184" class="line" id="l3184">   3184</a> 	#include &lt;lights_fragment_begin&gt;
<a href="#l3185" class="line" id="l3185">   3185</a> 	#include &lt;lights_fragment_maps&gt;
<a href="#l3186" class="line" id="l3186">   3186</a> 	#include &lt;lights_fragment_end&gt;
<a href="#l3187" class="line" id="l3187">   3187</a> 	#include &lt;aomap_fragment&gt;
<a href="#l3188" class="line" id="l3188">   3188</a> 	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
<a href="#l3189" class="line" id="l3189">   3189</a> 	#include &lt;envmap_fragment&gt;
<a href="#l3190" class="line" id="l3190">   3190</a> 	#include &lt;opaque_fragment&gt;
<a href="#l3191" class="line" id="l3191">   3191</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l3192" class="line" id="l3192">   3192</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l3193" class="line" id="l3193">   3193</a> 	#include &lt;fog_fragment&gt;
<a href="#l3194" class="line" id="l3194">   3194</a> 	#include &lt;premultiplied_alpha_fragment&gt;
<a href="#l3195" class="line" id="l3195">   3195</a> 	#include &lt;dithering_fragment&gt;
<a href="#l3196" class="line" id="l3196">   3196</a> }`,D6=`#define STANDARD
<a href="#l3197" class="line" id="l3197">   3197</a> varying vec3 vViewPosition;
<a href="#l3198" class="line" id="l3198">   3198</a> #ifdef USE_TRANSMISSION
<a href="#l3199" class="line" id="l3199">   3199</a> 	varying vec3 vWorldPosition;
<a href="#l3200" class="line" id="l3200">   3200</a> #endif
<a href="#l3201" class="line" id="l3201">   3201</a> #include &lt;common&gt;
<a href="#l3202" class="line" id="l3202">   3202</a> #include &lt;batching_pars_vertex&gt;
<a href="#l3203" class="line" id="l3203">   3203</a> #include &lt;uv_pars_vertex&gt;
<a href="#l3204" class="line" id="l3204">   3204</a> #include &lt;displacementmap_pars_vertex&gt;
<a href="#l3205" class="line" id="l3205">   3205</a> #include &lt;color_pars_vertex&gt;
<a href="#l3206" class="line" id="l3206">   3206</a> #include &lt;fog_pars_vertex&gt;
<a href="#l3207" class="line" id="l3207">   3207</a> #include &lt;normal_pars_vertex&gt;
<a href="#l3208" class="line" id="l3208">   3208</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l3209" class="line" id="l3209">   3209</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l3210" class="line" id="l3210">   3210</a> #include &lt;shadowmap_pars_vertex&gt;
<a href="#l3211" class="line" id="l3211">   3211</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l3212" class="line" id="l3212">   3212</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l3213" class="line" id="l3213">   3213</a> void main() {
<a href="#l3214" class="line" id="l3214">   3214</a> 	#include &lt;uv_vertex&gt;
<a href="#l3215" class="line" id="l3215">   3215</a> 	#include &lt;color_vertex&gt;
<a href="#l3216" class="line" id="l3216">   3216</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l3217" class="line" id="l3217">   3217</a> 	#include &lt;morphcolor_vertex&gt;
<a href="#l3218" class="line" id="l3218">   3218</a> 	#include &lt;batching_vertex&gt;
<a href="#l3219" class="line" id="l3219">   3219</a> 	#include &lt;beginnormal_vertex&gt;
<a href="#l3220" class="line" id="l3220">   3220</a> 	#include &lt;morphnormal_vertex&gt;
<a href="#l3221" class="line" id="l3221">   3221</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l3222" class="line" id="l3222">   3222</a> 	#include &lt;skinnormal_vertex&gt;
<a href="#l3223" class="line" id="l3223">   3223</a> 	#include &lt;defaultnormal_vertex&gt;
<a href="#l3224" class="line" id="l3224">   3224</a> 	#include &lt;normal_vertex&gt;
<a href="#l3225" class="line" id="l3225">   3225</a> 	#include &lt;begin_vertex&gt;
<a href="#l3226" class="line" id="l3226">   3226</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l3227" class="line" id="l3227">   3227</a> 	#include &lt;skinning_vertex&gt;
<a href="#l3228" class="line" id="l3228">   3228</a> 	#include &lt;displacementmap_vertex&gt;
<a href="#l3229" class="line" id="l3229">   3229</a> 	#include &lt;project_vertex&gt;
<a href="#l3230" class="line" id="l3230">   3230</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l3231" class="line" id="l3231">   3231</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l3232" class="line" id="l3232">   3232</a> 	vViewPosition = - mvPosition.xyz;
<a href="#l3233" class="line" id="l3233">   3233</a> 	#include &lt;worldpos_vertex&gt;
<a href="#l3234" class="line" id="l3234">   3234</a> 	#include &lt;shadowmap_vertex&gt;
<a href="#l3235" class="line" id="l3235">   3235</a> 	#include &lt;fog_vertex&gt;
<a href="#l3236" class="line" id="l3236">   3236</a> #ifdef USE_TRANSMISSION
<a href="#l3237" class="line" id="l3237">   3237</a> 	vWorldPosition = worldPosition.xyz;
<a href="#l3238" class="line" id="l3238">   3238</a> #endif
<a href="#l3239" class="line" id="l3239">   3239</a> }`,U6=`#define STANDARD
<a href="#l3240" class="line" id="l3240">   3240</a> #ifdef PHYSICAL
<a href="#l3241" class="line" id="l3241">   3241</a> 	#define IOR
<a href="#l3242" class="line" id="l3242">   3242</a> 	#define USE_SPECULAR
<a href="#l3243" class="line" id="l3243">   3243</a> #endif
<a href="#l3244" class="line" id="l3244">   3244</a> uniform vec3 diffuse;
<a href="#l3245" class="line" id="l3245">   3245</a> uniform vec3 emissive;
<a href="#l3246" class="line" id="l3246">   3246</a> uniform float roughness;
<a href="#l3247" class="line" id="l3247">   3247</a> uniform float metalness;
<a href="#l3248" class="line" id="l3248">   3248</a> uniform float opacity;
<a href="#l3249" class="line" id="l3249">   3249</a> #ifdef IOR
<a href="#l3250" class="line" id="l3250">   3250</a> 	uniform float ior;
<a href="#l3251" class="line" id="l3251">   3251</a> #endif
<a href="#l3252" class="line" id="l3252">   3252</a> #ifdef USE_SPECULAR
<a href="#l3253" class="line" id="l3253">   3253</a> 	uniform float specularIntensity;
<a href="#l3254" class="line" id="l3254">   3254</a> 	uniform vec3 specularColor;
<a href="#l3255" class="line" id="l3255">   3255</a> 	#ifdef USE_SPECULAR_COLORMAP
<a href="#l3256" class="line" id="l3256">   3256</a> 		uniform sampler2D specularColorMap;
<a href="#l3257" class="line" id="l3257">   3257</a> 	#endif
<a href="#l3258" class="line" id="l3258">   3258</a> 	#ifdef USE_SPECULAR_INTENSITYMAP
<a href="#l3259" class="line" id="l3259">   3259</a> 		uniform sampler2D specularIntensityMap;
<a href="#l3260" class="line" id="l3260">   3260</a> 	#endif
<a href="#l3261" class="line" id="l3261">   3261</a> #endif
<a href="#l3262" class="line" id="l3262">   3262</a> #ifdef USE_CLEARCOAT
<a href="#l3263" class="line" id="l3263">   3263</a> 	uniform float clearcoat;
<a href="#l3264" class="line" id="l3264">   3264</a> 	uniform float clearcoatRoughness;
<a href="#l3265" class="line" id="l3265">   3265</a> #endif
<a href="#l3266" class="line" id="l3266">   3266</a> #ifdef USE_DISPERSION
<a href="#l3267" class="line" id="l3267">   3267</a> 	uniform float dispersion;
<a href="#l3268" class="line" id="l3268">   3268</a> #endif
<a href="#l3269" class="line" id="l3269">   3269</a> #ifdef USE_IRIDESCENCE
<a href="#l3270" class="line" id="l3270">   3270</a> 	uniform float iridescence;
<a href="#l3271" class="line" id="l3271">   3271</a> 	uniform float iridescenceIOR;
<a href="#l3272" class="line" id="l3272">   3272</a> 	uniform float iridescenceThicknessMinimum;
<a href="#l3273" class="line" id="l3273">   3273</a> 	uniform float iridescenceThicknessMaximum;
<a href="#l3274" class="line" id="l3274">   3274</a> #endif
<a href="#l3275" class="line" id="l3275">   3275</a> #ifdef USE_SHEEN
<a href="#l3276" class="line" id="l3276">   3276</a> 	uniform vec3 sheenColor;
<a href="#l3277" class="line" id="l3277">   3277</a> 	uniform float sheenRoughness;
<a href="#l3278" class="line" id="l3278">   3278</a> 	#ifdef USE_SHEEN_COLORMAP
<a href="#l3279" class="line" id="l3279">   3279</a> 		uniform sampler2D sheenColorMap;
<a href="#l3280" class="line" id="l3280">   3280</a> 	#endif
<a href="#l3281" class="line" id="l3281">   3281</a> 	#ifdef USE_SHEEN_ROUGHNESSMAP
<a href="#l3282" class="line" id="l3282">   3282</a> 		uniform sampler2D sheenRoughnessMap;
<a href="#l3283" class="line" id="l3283">   3283</a> 	#endif
<a href="#l3284" class="line" id="l3284">   3284</a> #endif
<a href="#l3285" class="line" id="l3285">   3285</a> #ifdef USE_ANISOTROPY
<a href="#l3286" class="line" id="l3286">   3286</a> 	uniform vec2 anisotropyVector;
<a href="#l3287" class="line" id="l3287">   3287</a> 	#ifdef USE_ANISOTROPYMAP
<a href="#l3288" class="line" id="l3288">   3288</a> 		uniform sampler2D anisotropyMap;
<a href="#l3289" class="line" id="l3289">   3289</a> 	#endif
<a href="#l3290" class="line" id="l3290">   3290</a> #endif
<a href="#l3291" class="line" id="l3291">   3291</a> varying vec3 vViewPosition;
<a href="#l3292" class="line" id="l3292">   3292</a> #include &lt;common&gt;
<a href="#l3293" class="line" id="l3293">   3293</a> #include &lt;packing&gt;
<a href="#l3294" class="line" id="l3294">   3294</a> #include &lt;dithering_pars_fragment&gt;
<a href="#l3295" class="line" id="l3295">   3295</a> #include &lt;color_pars_fragment&gt;
<a href="#l3296" class="line" id="l3296">   3296</a> #include &lt;uv_pars_fragment&gt;
<a href="#l3297" class="line" id="l3297">   3297</a> #include &lt;map_pars_fragment&gt;
<a href="#l3298" class="line" id="l3298">   3298</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l3299" class="line" id="l3299">   3299</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l3300" class="line" id="l3300">   3300</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l3301" class="line" id="l3301">   3301</a> #include &lt;aomap_pars_fragment&gt;
<a href="#l3302" class="line" id="l3302">   3302</a> #include &lt;lightmap_pars_fragment&gt;
<a href="#l3303" class="line" id="l3303">   3303</a> #include &lt;emissivemap_pars_fragment&gt;
<a href="#l3304" class="line" id="l3304">   3304</a> #include &lt;iridescence_fragment&gt;
<a href="#l3305" class="line" id="l3305">   3305</a> #include &lt;cube_uv_reflection_fragment&gt;
<a href="#l3306" class="line" id="l3306">   3306</a> #include &lt;envmap_common_pars_fragment&gt;
<a href="#l3307" class="line" id="l3307">   3307</a> #include &lt;envmap_physical_pars_fragment&gt;
<a href="#l3308" class="line" id="l3308">   3308</a> #include &lt;fog_pars_fragment&gt;
<a href="#l3309" class="line" id="l3309">   3309</a> #include &lt;lights_pars_begin&gt;
<a href="#l3310" class="line" id="l3310">   3310</a> #include &lt;normal_pars_fragment&gt;
<a href="#l3311" class="line" id="l3311">   3311</a> #include &lt;lights_physical_pars_fragment&gt;
<a href="#l3312" class="line" id="l3312">   3312</a> #include &lt;transmission_pars_fragment&gt;
<a href="#l3313" class="line" id="l3313">   3313</a> #include &lt;shadowmap_pars_fragment&gt;
<a href="#l3314" class="line" id="l3314">   3314</a> #include &lt;bumpmap_pars_fragment&gt;
<a href="#l3315" class="line" id="l3315">   3315</a> #include &lt;normalmap_pars_fragment&gt;
<a href="#l3316" class="line" id="l3316">   3316</a> #include &lt;clearcoat_pars_fragment&gt;
<a href="#l3317" class="line" id="l3317">   3317</a> #include &lt;iridescence_pars_fragment&gt;
<a href="#l3318" class="line" id="l3318">   3318</a> #include &lt;roughnessmap_pars_fragment&gt;
<a href="#l3319" class="line" id="l3319">   3319</a> #include &lt;metalnessmap_pars_fragment&gt;
<a href="#l3320" class="line" id="l3320">   3320</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l3321" class="line" id="l3321">   3321</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l3322" class="line" id="l3322">   3322</a> void main() {
<a href="#l3323" class="line" id="l3323">   3323</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l3324" class="line" id="l3324">   3324</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l3325" class="line" id="l3325">   3325</a> 	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
<a href="#l3326" class="line" id="l3326">   3326</a> 	vec3 totalEmissiveRadiance = emissive;
<a href="#l3327" class="line" id="l3327">   3327</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l3328" class="line" id="l3328">   3328</a> 	#include &lt;map_fragment&gt;
<a href="#l3329" class="line" id="l3329">   3329</a> 	#include &lt;color_fragment&gt;
<a href="#l3330" class="line" id="l3330">   3330</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l3331" class="line" id="l3331">   3331</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l3332" class="line" id="l3332">   3332</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l3333" class="line" id="l3333">   3333</a> 	#include &lt;roughnessmap_fragment&gt;
<a href="#l3334" class="line" id="l3334">   3334</a> 	#include &lt;metalnessmap_fragment&gt;
<a href="#l3335" class="line" id="l3335">   3335</a> 	#include &lt;normal_fragment_begin&gt;
<a href="#l3336" class="line" id="l3336">   3336</a> 	#include &lt;normal_fragment_maps&gt;
<a href="#l3337" class="line" id="l3337">   3337</a> 	#include &lt;clearcoat_normal_fragment_begin&gt;
<a href="#l3338" class="line" id="l3338">   3338</a> 	#include &lt;clearcoat_normal_fragment_maps&gt;
<a href="#l3339" class="line" id="l3339">   3339</a> 	#include &lt;emissivemap_fragment&gt;
<a href="#l3340" class="line" id="l3340">   3340</a> 	#include &lt;lights_physical_fragment&gt;
<a href="#l3341" class="line" id="l3341">   3341</a> 	#include &lt;lights_fragment_begin&gt;
<a href="#l3342" class="line" id="l3342">   3342</a> 	#include &lt;lights_fragment_maps&gt;
<a href="#l3343" class="line" id="l3343">   3343</a> 	#include &lt;lights_fragment_end&gt;
<a href="#l3344" class="line" id="l3344">   3344</a> 	#include &lt;aomap_fragment&gt;
<a href="#l3345" class="line" id="l3345">   3345</a> 	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
<a href="#l3346" class="line" id="l3346">   3346</a> 	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
<a href="#l3347" class="line" id="l3347">   3347</a> 	#include &lt;transmission_fragment&gt;
<a href="#l3348" class="line" id="l3348">   3348</a> 	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
<a href="#l3349" class="line" id="l3349">   3349</a> 	#ifdef USE_SHEEN
<a href="#l3350" class="line" id="l3350">   3350</a> 		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
<a href="#l3351" class="line" id="l3351">   3351</a> 		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
<a href="#l3352" class="line" id="l3352">   3352</a> 	#endif
<a href="#l3353" class="line" id="l3353">   3353</a> 	#ifdef USE_CLEARCOAT
<a href="#l3354" class="line" id="l3354">   3354</a> 		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
<a href="#l3355" class="line" id="l3355">   3355</a> 		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
<a href="#l3356" class="line" id="l3356">   3356</a> 		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
<a href="#l3357" class="line" id="l3357">   3357</a> 	#endif
<a href="#l3358" class="line" id="l3358">   3358</a> 	#include &lt;opaque_fragment&gt;
<a href="#l3359" class="line" id="l3359">   3359</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l3360" class="line" id="l3360">   3360</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l3361" class="line" id="l3361">   3361</a> 	#include &lt;fog_fragment&gt;
<a href="#l3362" class="line" id="l3362">   3362</a> 	#include &lt;premultiplied_alpha_fragment&gt;
<a href="#l3363" class="line" id="l3363">   3363</a> 	#include &lt;dithering_fragment&gt;
<a href="#l3364" class="line" id="l3364">   3364</a> }`,N6=`#define TOON
<a href="#l3365" class="line" id="l3365">   3365</a> varying vec3 vViewPosition;
<a href="#l3366" class="line" id="l3366">   3366</a> #include &lt;common&gt;
<a href="#l3367" class="line" id="l3367">   3367</a> #include &lt;batching_pars_vertex&gt;
<a href="#l3368" class="line" id="l3368">   3368</a> #include &lt;uv_pars_vertex&gt;
<a href="#l3369" class="line" id="l3369">   3369</a> #include &lt;displacementmap_pars_vertex&gt;
<a href="#l3370" class="line" id="l3370">   3370</a> #include &lt;color_pars_vertex&gt;
<a href="#l3371" class="line" id="l3371">   3371</a> #include &lt;fog_pars_vertex&gt;
<a href="#l3372" class="line" id="l3372">   3372</a> #include &lt;normal_pars_vertex&gt;
<a href="#l3373" class="line" id="l3373">   3373</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l3374" class="line" id="l3374">   3374</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l3375" class="line" id="l3375">   3375</a> #include &lt;shadowmap_pars_vertex&gt;
<a href="#l3376" class="line" id="l3376">   3376</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l3377" class="line" id="l3377">   3377</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l3378" class="line" id="l3378">   3378</a> void main() {
<a href="#l3379" class="line" id="l3379">   3379</a> 	#include &lt;uv_vertex&gt;
<a href="#l3380" class="line" id="l3380">   3380</a> 	#include &lt;color_vertex&gt;
<a href="#l3381" class="line" id="l3381">   3381</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l3382" class="line" id="l3382">   3382</a> 	#include &lt;morphcolor_vertex&gt;
<a href="#l3383" class="line" id="l3383">   3383</a> 	#include &lt;batching_vertex&gt;
<a href="#l3384" class="line" id="l3384">   3384</a> 	#include &lt;beginnormal_vertex&gt;
<a href="#l3385" class="line" id="l3385">   3385</a> 	#include &lt;morphnormal_vertex&gt;
<a href="#l3386" class="line" id="l3386">   3386</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l3387" class="line" id="l3387">   3387</a> 	#include &lt;skinnormal_vertex&gt;
<a href="#l3388" class="line" id="l3388">   3388</a> 	#include &lt;defaultnormal_vertex&gt;
<a href="#l3389" class="line" id="l3389">   3389</a> 	#include &lt;normal_vertex&gt;
<a href="#l3390" class="line" id="l3390">   3390</a> 	#include &lt;begin_vertex&gt;
<a href="#l3391" class="line" id="l3391">   3391</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l3392" class="line" id="l3392">   3392</a> 	#include &lt;skinning_vertex&gt;
<a href="#l3393" class="line" id="l3393">   3393</a> 	#include &lt;displacementmap_vertex&gt;
<a href="#l3394" class="line" id="l3394">   3394</a> 	#include &lt;project_vertex&gt;
<a href="#l3395" class="line" id="l3395">   3395</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l3396" class="line" id="l3396">   3396</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l3397" class="line" id="l3397">   3397</a> 	vViewPosition = - mvPosition.xyz;
<a href="#l3398" class="line" id="l3398">   3398</a> 	#include &lt;worldpos_vertex&gt;
<a href="#l3399" class="line" id="l3399">   3399</a> 	#include &lt;shadowmap_vertex&gt;
<a href="#l3400" class="line" id="l3400">   3400</a> 	#include &lt;fog_vertex&gt;
<a href="#l3401" class="line" id="l3401">   3401</a> }`,O6=`#define TOON
<a href="#l3402" class="line" id="l3402">   3402</a> uniform vec3 diffuse;
<a href="#l3403" class="line" id="l3403">   3403</a> uniform vec3 emissive;
<a href="#l3404" class="line" id="l3404">   3404</a> uniform float opacity;
<a href="#l3405" class="line" id="l3405">   3405</a> #include &lt;common&gt;
<a href="#l3406" class="line" id="l3406">   3406</a> #include &lt;packing&gt;
<a href="#l3407" class="line" id="l3407">   3407</a> #include &lt;dithering_pars_fragment&gt;
<a href="#l3408" class="line" id="l3408">   3408</a> #include &lt;color_pars_fragment&gt;
<a href="#l3409" class="line" id="l3409">   3409</a> #include &lt;uv_pars_fragment&gt;
<a href="#l3410" class="line" id="l3410">   3410</a> #include &lt;map_pars_fragment&gt;
<a href="#l3411" class="line" id="l3411">   3411</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l3412" class="line" id="l3412">   3412</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l3413" class="line" id="l3413">   3413</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l3414" class="line" id="l3414">   3414</a> #include &lt;aomap_pars_fragment&gt;
<a href="#l3415" class="line" id="l3415">   3415</a> #include &lt;lightmap_pars_fragment&gt;
<a href="#l3416" class="line" id="l3416">   3416</a> #include &lt;emissivemap_pars_fragment&gt;
<a href="#l3417" class="line" id="l3417">   3417</a> #include &lt;gradientmap_pars_fragment&gt;
<a href="#l3418" class="line" id="l3418">   3418</a> #include &lt;fog_pars_fragment&gt;
<a href="#l3419" class="line" id="l3419">   3419</a> #include &lt;bsdfs&gt;
<a href="#l3420" class="line" id="l3420">   3420</a> #include &lt;lights_pars_begin&gt;
<a href="#l3421" class="line" id="l3421">   3421</a> #include &lt;normal_pars_fragment&gt;
<a href="#l3422" class="line" id="l3422">   3422</a> #include &lt;lights_toon_pars_fragment&gt;
<a href="#l3423" class="line" id="l3423">   3423</a> #include &lt;shadowmap_pars_fragment&gt;
<a href="#l3424" class="line" id="l3424">   3424</a> #include &lt;bumpmap_pars_fragment&gt;
<a href="#l3425" class="line" id="l3425">   3425</a> #include &lt;normalmap_pars_fragment&gt;
<a href="#l3426" class="line" id="l3426">   3426</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l3427" class="line" id="l3427">   3427</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l3428" class="line" id="l3428">   3428</a> void main() {
<a href="#l3429" class="line" id="l3429">   3429</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l3430" class="line" id="l3430">   3430</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l3431" class="line" id="l3431">   3431</a> 	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
<a href="#l3432" class="line" id="l3432">   3432</a> 	vec3 totalEmissiveRadiance = emissive;
<a href="#l3433" class="line" id="l3433">   3433</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l3434" class="line" id="l3434">   3434</a> 	#include &lt;map_fragment&gt;
<a href="#l3435" class="line" id="l3435">   3435</a> 	#include &lt;color_fragment&gt;
<a href="#l3436" class="line" id="l3436">   3436</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l3437" class="line" id="l3437">   3437</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l3438" class="line" id="l3438">   3438</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l3439" class="line" id="l3439">   3439</a> 	#include &lt;normal_fragment_begin&gt;
<a href="#l3440" class="line" id="l3440">   3440</a> 	#include &lt;normal_fragment_maps&gt;
<a href="#l3441" class="line" id="l3441">   3441</a> 	#include &lt;emissivemap_fragment&gt;
<a href="#l3442" class="line" id="l3442">   3442</a> 	#include &lt;lights_toon_fragment&gt;
<a href="#l3443" class="line" id="l3443">   3443</a> 	#include &lt;lights_fragment_begin&gt;
<a href="#l3444" class="line" id="l3444">   3444</a> 	#include &lt;lights_fragment_maps&gt;
<a href="#l3445" class="line" id="l3445">   3445</a> 	#include &lt;lights_fragment_end&gt;
<a href="#l3446" class="line" id="l3446">   3446</a> 	#include &lt;aomap_fragment&gt;
<a href="#l3447" class="line" id="l3447">   3447</a> 	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
<a href="#l3448" class="line" id="l3448">   3448</a> 	#include &lt;opaque_fragment&gt;
<a href="#l3449" class="line" id="l3449">   3449</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l3450" class="line" id="l3450">   3450</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l3451" class="line" id="l3451">   3451</a> 	#include &lt;fog_fragment&gt;
<a href="#l3452" class="line" id="l3452">   3452</a> 	#include &lt;premultiplied_alpha_fragment&gt;
<a href="#l3453" class="line" id="l3453">   3453</a> 	#include &lt;dithering_fragment&gt;
<a href="#l3454" class="line" id="l3454">   3454</a> }`,L6=`uniform float size;
<a href="#l3455" class="line" id="l3455">   3455</a> uniform float scale;
<a href="#l3456" class="line" id="l3456">   3456</a> #include &lt;common&gt;
<a href="#l3457" class="line" id="l3457">   3457</a> #include &lt;color_pars_vertex&gt;
<a href="#l3458" class="line" id="l3458">   3458</a> #include &lt;fog_pars_vertex&gt;
<a href="#l3459" class="line" id="l3459">   3459</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l3460" class="line" id="l3460">   3460</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l3461" class="line" id="l3461">   3461</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l3462" class="line" id="l3462">   3462</a> #ifdef USE_POINTS_UV
<a href="#l3463" class="line" id="l3463">   3463</a> 	varying vec2 vUv;
<a href="#l3464" class="line" id="l3464">   3464</a> 	uniform mat3 uvTransform;
<a href="#l3465" class="line" id="l3465">   3465</a> #endif
<a href="#l3466" class="line" id="l3466">   3466</a> void main() {
<a href="#l3467" class="line" id="l3467">   3467</a> 	#ifdef USE_POINTS_UV
<a href="#l3468" class="line" id="l3468">   3468</a> 		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
<a href="#l3469" class="line" id="l3469">   3469</a> 	#endif
<a href="#l3470" class="line" id="l3470">   3470</a> 	#include &lt;color_vertex&gt;
<a href="#l3471" class="line" id="l3471">   3471</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l3472" class="line" id="l3472">   3472</a> 	#include &lt;morphcolor_vertex&gt;
<a href="#l3473" class="line" id="l3473">   3473</a> 	#include &lt;begin_vertex&gt;
<a href="#l3474" class="line" id="l3474">   3474</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l3475" class="line" id="l3475">   3475</a> 	#include &lt;project_vertex&gt;
<a href="#l3476" class="line" id="l3476">   3476</a> 	gl_PointSize = size;
<a href="#l3477" class="line" id="l3477">   3477</a> 	#ifdef USE_SIZEATTENUATION
<a href="#l3478" class="line" id="l3478">   3478</a> 		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
<a href="#l3479" class="line" id="l3479">   3479</a> 		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
<a href="#l3480" class="line" id="l3480">   3480</a> 	#endif
<a href="#l3481" class="line" id="l3481">   3481</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l3482" class="line" id="l3482">   3482</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l3483" class="line" id="l3483">   3483</a> 	#include &lt;worldpos_vertex&gt;
<a href="#l3484" class="line" id="l3484">   3484</a> 	#include &lt;fog_vertex&gt;
<a href="#l3485" class="line" id="l3485">   3485</a> }`,z6=`uniform vec3 diffuse;
<a href="#l3486" class="line" id="l3486">   3486</a> uniform float opacity;
<a href="#l3487" class="line" id="l3487">   3487</a> #include &lt;common&gt;
<a href="#l3488" class="line" id="l3488">   3488</a> #include &lt;color_pars_fragment&gt;
<a href="#l3489" class="line" id="l3489">   3489</a> #include &lt;map_particle_pars_fragment&gt;
<a href="#l3490" class="line" id="l3490">   3490</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l3491" class="line" id="l3491">   3491</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l3492" class="line" id="l3492">   3492</a> #include &lt;fog_pars_fragment&gt;
<a href="#l3493" class="line" id="l3493">   3493</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l3494" class="line" id="l3494">   3494</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l3495" class="line" id="l3495">   3495</a> void main() {
<a href="#l3496" class="line" id="l3496">   3496</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l3497" class="line" id="l3497">   3497</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l3498" class="line" id="l3498">   3498</a> 	vec3 outgoingLight = vec3( 0.0 );
<a href="#l3499" class="line" id="l3499">   3499</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l3500" class="line" id="l3500">   3500</a> 	#include &lt;map_particle_fragment&gt;
<a href="#l3501" class="line" id="l3501">   3501</a> 	#include &lt;color_fragment&gt;
<a href="#l3502" class="line" id="l3502">   3502</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l3503" class="line" id="l3503">   3503</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l3504" class="line" id="l3504">   3504</a> 	outgoingLight = diffuseColor.rgb;
<a href="#l3505" class="line" id="l3505">   3505</a> 	#include &lt;opaque_fragment&gt;
<a href="#l3506" class="line" id="l3506">   3506</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l3507" class="line" id="l3507">   3507</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l3508" class="line" id="l3508">   3508</a> 	#include &lt;fog_fragment&gt;
<a href="#l3509" class="line" id="l3509">   3509</a> 	#include &lt;premultiplied_alpha_fragment&gt;
<a href="#l3510" class="line" id="l3510">   3510</a> }`,B6=`#include &lt;common&gt;
<a href="#l3511" class="line" id="l3511">   3511</a> #include &lt;batching_pars_vertex&gt;
<a href="#l3512" class="line" id="l3512">   3512</a> #include &lt;fog_pars_vertex&gt;
<a href="#l3513" class="line" id="l3513">   3513</a> #include &lt;morphtarget_pars_vertex&gt;
<a href="#l3514" class="line" id="l3514">   3514</a> #include &lt;skinning_pars_vertex&gt;
<a href="#l3515" class="line" id="l3515">   3515</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l3516" class="line" id="l3516">   3516</a> #include &lt;shadowmap_pars_vertex&gt;
<a href="#l3517" class="line" id="l3517">   3517</a> void main() {
<a href="#l3518" class="line" id="l3518">   3518</a> 	#include &lt;batching_vertex&gt;
<a href="#l3519" class="line" id="l3519">   3519</a> 	#include &lt;beginnormal_vertex&gt;
<a href="#l3520" class="line" id="l3520">   3520</a> 	#include &lt;morphinstance_vertex&gt;
<a href="#l3521" class="line" id="l3521">   3521</a> 	#include &lt;morphnormal_vertex&gt;
<a href="#l3522" class="line" id="l3522">   3522</a> 	#include &lt;skinbase_vertex&gt;
<a href="#l3523" class="line" id="l3523">   3523</a> 	#include &lt;skinnormal_vertex&gt;
<a href="#l3524" class="line" id="l3524">   3524</a> 	#include &lt;defaultnormal_vertex&gt;
<a href="#l3525" class="line" id="l3525">   3525</a> 	#include &lt;begin_vertex&gt;
<a href="#l3526" class="line" id="l3526">   3526</a> 	#include &lt;morphtarget_vertex&gt;
<a href="#l3527" class="line" id="l3527">   3527</a> 	#include &lt;skinning_vertex&gt;
<a href="#l3528" class="line" id="l3528">   3528</a> 	#include &lt;project_vertex&gt;
<a href="#l3529" class="line" id="l3529">   3529</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l3530" class="line" id="l3530">   3530</a> 	#include &lt;worldpos_vertex&gt;
<a href="#l3531" class="line" id="l3531">   3531</a> 	#include &lt;shadowmap_vertex&gt;
<a href="#l3532" class="line" id="l3532">   3532</a> 	#include &lt;fog_vertex&gt;
<a href="#l3533" class="line" id="l3533">   3533</a> }`,P6=`uniform vec3 color;
<a href="#l3534" class="line" id="l3534">   3534</a> uniform float opacity;
<a href="#l3535" class="line" id="l3535">   3535</a> #include &lt;common&gt;
<a href="#l3536" class="line" id="l3536">   3536</a> #include &lt;packing&gt;
<a href="#l3537" class="line" id="l3537">   3537</a> #include &lt;fog_pars_fragment&gt;
<a href="#l3538" class="line" id="l3538">   3538</a> #include &lt;bsdfs&gt;
<a href="#l3539" class="line" id="l3539">   3539</a> #include &lt;lights_pars_begin&gt;
<a href="#l3540" class="line" id="l3540">   3540</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l3541" class="line" id="l3541">   3541</a> #include &lt;shadowmap_pars_fragment&gt;
<a href="#l3542" class="line" id="l3542">   3542</a> #include &lt;shadowmask_pars_fragment&gt;
<a href="#l3543" class="line" id="l3543">   3543</a> void main() {
<a href="#l3544" class="line" id="l3544">   3544</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l3545" class="line" id="l3545">   3545</a> 	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
<a href="#l3546" class="line" id="l3546">   3546</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l3547" class="line" id="l3547">   3547</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l3548" class="line" id="l3548">   3548</a> 	#include &lt;fog_fragment&gt;
<a href="#l3549" class="line" id="l3549">   3549</a> }`,I6=`uniform float rotation;
<a href="#l3550" class="line" id="l3550">   3550</a> uniform vec2 center;
<a href="#l3551" class="line" id="l3551">   3551</a> #include &lt;common&gt;
<a href="#l3552" class="line" id="l3552">   3552</a> #include &lt;uv_pars_vertex&gt;
<a href="#l3553" class="line" id="l3553">   3553</a> #include &lt;fog_pars_vertex&gt;
<a href="#l3554" class="line" id="l3554">   3554</a> #include &lt;logdepthbuf_pars_vertex&gt;
<a href="#l3555" class="line" id="l3555">   3555</a> #include &lt;clipping_planes_pars_vertex&gt;
<a href="#l3556" class="line" id="l3556">   3556</a> void main() {
<a href="#l3557" class="line" id="l3557">   3557</a> 	#include &lt;uv_vertex&gt;
<a href="#l3558" class="line" id="l3558">   3558</a> 	vec4 mvPosition = modelViewMatrix[ 3 ];
<a href="#l3559" class="line" id="l3559">   3559</a> 	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
<a href="#l3560" class="line" id="l3560">   3560</a> 	#ifndef USE_SIZEATTENUATION
<a href="#l3561" class="line" id="l3561">   3561</a> 		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
<a href="#l3562" class="line" id="l3562">   3562</a> 		if ( isPerspective ) scale *= - mvPosition.z;
<a href="#l3563" class="line" id="l3563">   3563</a> 	#endif
<a href="#l3564" class="line" id="l3564">   3564</a> 	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
<a href="#l3565" class="line" id="l3565">   3565</a> 	vec2 rotatedPosition;
<a href="#l3566" class="line" id="l3566">   3566</a> 	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
<a href="#l3567" class="line" id="l3567">   3567</a> 	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
<a href="#l3568" class="line" id="l3568">   3568</a> 	mvPosition.xy += rotatedPosition;
<a href="#l3569" class="line" id="l3569">   3569</a> 	gl_Position = projectionMatrix * mvPosition;
<a href="#l3570" class="line" id="l3570">   3570</a> 	#include &lt;logdepthbuf_vertex&gt;
<a href="#l3571" class="line" id="l3571">   3571</a> 	#include &lt;clipping_planes_vertex&gt;
<a href="#l3572" class="line" id="l3572">   3572</a> 	#include &lt;fog_vertex&gt;
<a href="#l3573" class="line" id="l3573">   3573</a> }`,H6=`uniform vec3 diffuse;
<a href="#l3574" class="line" id="l3574">   3574</a> uniform float opacity;
<a href="#l3575" class="line" id="l3575">   3575</a> #include &lt;common&gt;
<a href="#l3576" class="line" id="l3576">   3576</a> #include &lt;uv_pars_fragment&gt;
<a href="#l3577" class="line" id="l3577">   3577</a> #include &lt;map_pars_fragment&gt;
<a href="#l3578" class="line" id="l3578">   3578</a> #include &lt;alphamap_pars_fragment&gt;
<a href="#l3579" class="line" id="l3579">   3579</a> #include &lt;alphatest_pars_fragment&gt;
<a href="#l3580" class="line" id="l3580">   3580</a> #include &lt;alphahash_pars_fragment&gt;
<a href="#l3581" class="line" id="l3581">   3581</a> #include &lt;fog_pars_fragment&gt;
<a href="#l3582" class="line" id="l3582">   3582</a> #include &lt;logdepthbuf_pars_fragment&gt;
<a href="#l3583" class="line" id="l3583">   3583</a> #include &lt;clipping_planes_pars_fragment&gt;
<a href="#l3584" class="line" id="l3584">   3584</a> void main() {
<a href="#l3585" class="line" id="l3585">   3585</a> 	vec4 diffuseColor = vec4( diffuse, opacity );
<a href="#l3586" class="line" id="l3586">   3586</a> 	#include &lt;clipping_planes_fragment&gt;
<a href="#l3587" class="line" id="l3587">   3587</a> 	vec3 outgoingLight = vec3( 0.0 );
<a href="#l3588" class="line" id="l3588">   3588</a> 	#include &lt;logdepthbuf_fragment&gt;
<a href="#l3589" class="line" id="l3589">   3589</a> 	#include &lt;map_fragment&gt;
<a href="#l3590" class="line" id="l3590">   3590</a> 	#include &lt;alphamap_fragment&gt;
<a href="#l3591" class="line" id="l3591">   3591</a> 	#include &lt;alphatest_fragment&gt;
<a href="#l3592" class="line" id="l3592">   3592</a> 	#include &lt;alphahash_fragment&gt;
<a href="#l3593" class="line" id="l3593">   3593</a> 	outgoingLight = diffuseColor.rgb;
<a href="#l3594" class="line" id="l3594">   3594</a> 	#include &lt;opaque_fragment&gt;
<a href="#l3595" class="line" id="l3595">   3595</a> 	#include &lt;tonemapping_fragment&gt;
<a href="#l3596" class="line" id="l3596">   3596</a> 	#include &lt;colorspace_fragment&gt;
<a href="#l3597" class="line" id="l3597">   3597</a> 	#include &lt;fog_fragment&gt;
<a href="#l3598" class="line" id="l3598">   3598</a> }`,xe={alphahash_fragment:oF,alphahash_pars_fragment:lF,alphamap_fragment:uF,alphamap_pars_fragment:cF,alphatest_fragment:fF,alphatest_pars_fragment:hF,aomap_fragment:dF,aomap_pars_fragment:pF,batching_pars_vertex:mF,batching_vertex:gF,begin_vertex:vF,beginnormal_vertex:yF,bsdfs:_F,iridescence_fragment:xF,bumpmap_pars_fragment:SF,clipping_planes_fragment:MF,clipping_planes_pars_fragment:EF,clipping_planes_pars_vertex:bF,clipping_planes_vertex:TF,color_fragment:AF,color_pars_fragment:RF,color_pars_vertex:CF,color_vertex:wF,common:DF,cube_uv_reflection_fragment:UF,defaultnormal_vertex:NF,displacementmap_pars_vertex:OF,displacementmap_vertex:LF,emissivemap_fragment:zF,emissivemap_pars_fragment:BF,colorspace_fragment:PF,colorspace_pars_fragment:IF,envmap_fragment:HF,envmap_common_pars_fragment:FF,envmap_pars_fragment:VF,envmap_pars_vertex:GF,envmap_physical_pars_fragment:$F,envmap_vertex:XF,fog_vertex:qF,fog_pars_vertex:YF,fog_fragment:WF,fog_pars_fragment:kF,gradientmap_pars_fragment:ZF,lightmap_pars_fragment:jF,lights_lambert_fragment:QF,lights_lambert_pars_fragment:KF,lights_pars_begin:JF,lights_toon_fragment:tV,lights_toon_pars_fragment:eV,lights_phong_fragment:nV,lights_phong_pars_fragment:iV,lights_physical_fragment:aV,lights_physical_pars_fragment:sV,lights_fragment_begin:rV,lights_fragment_maps:oV,lights_fragment_end:lV,logdepthbuf_fragment:uV,logdepthbuf_pars_fragment:cV,logdepthbuf_pars_vertex:fV,logdepthbuf_vertex:hV,map_fragment:dV,map_pars_fragment:pV,map_particle_fragment:mV,map_particle_pars_fragment:gV,metalnessmap_fragment:vV,metalnessmap_pars_fragment:yV,morphinstance_vertex:_V,morphcolor_vertex:xV,morphnormal_vertex:SV,morphtarget_pars_vertex:MV,morphtarget_vertex:EV,normal_fragment_begin:bV,normal_fragment_maps:TV,normal_pars_fragment:AV,normal_pars_vertex:RV,normal_vertex:CV,normalmap_pars_fragment:wV,clearcoat_normal_fragment_begin:DV,clearcoat_normal_fragment_maps:UV,clearcoat_pars_fragment:NV,iridescence_pars_fragment:OV,opaque_fragment:LV,packing:zV,premultiplied_alpha_fragment:BV,project_vertex:PV,dithering_fragment:IV,dithering_pars_fragment:HV,roughnessmap_fragment:FV,roughnessmap_pars_fragment:VV,shadowmap_pars_fragment:GV,shadowmap_pars_vertex:XV,shadowmap_vertex:qV,shadowmask_pars_fragment:YV,skinbase_vertex:WV,skinning_pars_vertex:kV,skinning_vertex:ZV,skinnormal_vertex:jV,specularmap_fragment:QV,specularmap_pars_fragment:KV,tonemapping_fragment:JV,tonemapping_pars_fragment:$V,transmission_fragment:t6,transmission_pars_fragment:e6,uv_pars_fragment:n6,uv_pars_vertex:i6,uv_vertex:a6,worldpos_vertex:s6,background_vert:r6,background_frag:o6,backgroundCube_vert:l6,backgroundCube_frag:u6,cube_vert:c6,cube_frag:f6,depth_vert:h6,depth_frag:d6,distanceRGBA_vert:p6,distanceRGBA_frag:m6,equirect_vert:g6,equirect_frag:v6,linedashed_vert:y6,linedashed_frag:_6,meshbasic_vert:x6,meshbasic_frag:S6,meshlambert_vert:M6,meshlambert_frag:E6,meshmatcap_vert:b6,meshmatcap_frag:T6,meshnormal_vert:A6,meshnormal_frag:R6,meshphong_vert:C6,meshphong_frag:w6,meshphysical_vert:D6,meshphysical_frag:U6,meshtoon_vert:N6,meshtoon_frag:O6,points_vert:L6,points_frag:z6,shadow_vert:B6,shadow_frag:P6,sprite_vert:I6,sprite_frag:H6},zt={common:{diffuse:{value:new Bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ge},alphaMap:{value:null},alphaMapTransform:{value:new ge},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ge}},envmap:{envMap:{value:null},envMapRotation:{value:new ge},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ge}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ge}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ge},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ge},normalScale:{value:new ct(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ge},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ge}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ge}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ge}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ge},alphaTest:{value:0},uvTransform:{value:new ge}},sprite:{diffuse:{value:new Bt(16777215)},opacity:{value:1},center:{value:new ct(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ge},alphaMap:{value:null},alphaMapTransform:{value:new ge},alphaTest:{value:0}}},Ns={basic:{uniforms:Oi([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.fog]),vertexShader:xe.meshbasic_vert,fragmentShader:xe.meshbasic_frag},lambert:{uniforms:Oi([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:xe.meshlambert_vert,fragmentShader:xe.meshlambert_frag},phong:{uniforms:Oi([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Bt(0)},specular:{value:new Bt(1118481)},shininess:{value:30}}]),vertexShader:xe.meshphong_vert,fragmentShader:xe.meshphong_frag},standard:{uniforms:Oi([zt.common,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.roughnessmap,zt.metalnessmap,zt.fog,zt.lights,{emissive:{value:new Bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:xe.meshphysical_vert,fragmentShader:xe.meshphysical_frag},toon:{uniforms:Oi([zt.common,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.gradientmap,zt.fog,zt.lights,{emissive:{value:new Bt(0)}}]),vertexShader:xe.meshtoon_vert,fragmentShader:xe.meshtoon_frag},matcap:{uniforms:Oi([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,{matcap:{value:null}}]),vertexShader:xe.meshmatcap_vert,fragmentShader:xe.meshmatcap_frag},points:{uniforms:Oi([zt.points,zt.fog]),vertexShader:xe.points_vert,fragmentShader:xe.points_frag},dashed:{uniforms:Oi([zt.common,zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xe.linedashed_vert,fragmentShader:xe.linedashed_frag},depth:{uniforms:Oi([zt.common,zt.displacementmap]),vertexShader:xe.depth_vert,fragmentShader:xe.depth_frag},normal:{uniforms:Oi([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,{opacity:{value:1}}]),vertexShader:xe.meshnormal_vert,fragmentShader:xe.meshnormal_frag},sprite:{uniforms:Oi([zt.sprite,zt.fog]),vertexShader:xe.sprite_vert,fragmentShader:xe.sprite_frag},background:{uniforms:{uvTransform:{value:new ge},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:xe.background_vert,fragmentShader:xe.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ge}},vertexShader:xe.backgroundCube_vert,fragmentShader:xe.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xe.cube_vert,fragmentShader:xe.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xe.equirect_vert,fragmentShader:xe.equirect_frag},distanceRGBA:{uniforms:Oi([zt.common,zt.displacementmap,{referencePosition:{value:new B},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xe.distanceRGBA_vert,fragmentShader:xe.distanceRGBA_frag},shadow:{uniforms:Oi([zt.lights,zt.fog,{color:{value:new Bt(0)},opacity:{value:1}}]),vertexShader:xe.shadow_vert,fragmentShader:xe.shadow_frag}};Ns.physical={uniforms:Oi([Ns.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ge},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ge},clearcoatNormalScale:{value:new ct(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ge},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ge},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ge},sheen:{value:0},sheenColor:{value:new Bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ge},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ge},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ge},transmissionSamplerSize:{value:new ct},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ge},attenuationDistance:{value:0},attenuationColor:{value:new Bt(0)},specularColor:{value:new Bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ge},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ge},anisotropyVector:{value:new ct},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ge}}]),vertexShader:xe.meshphysical_vert,fragmentShader:xe.meshphysical_frag};var px={r:0,b:0,g:0},Fu=new sa,F6=new fe;function V6(n,t,e,i,a,s,o){let u=new Bt(0),c=s===!0?0:1,h,d,m=null,g=0,y=null;function x(E){let T=E.isScene===!0?E.background:null;return T&amp;&amp;T.isTexture&amp;&amp;(T=(E.backgroundBlurriness&gt;0?e:t).get(T)),T}function b(E){let T=!1,w=x(E);w===null?v(u,c):w&amp;&amp;w.isColor&amp;&amp;(v(w,1),T=!0);let U=n.xr.getEnvironmentBlendMode();U===&quot;additive&quot;?i.buffers.color.setClear(0,0,0,1,o):U===&quot;alpha-blend&quot;&amp;&amp;i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||T)&amp;&amp;(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function M(E,T){let w=x(T);w&amp;&amp;(w.isCubeTexture||w.mapping===Ou)?(d===void 0&amp;&amp;(d=new En(new rl(1,1,1),new ra({name:&quot;BackgroundCubeMaterial&quot;,uniforms:Hu(Ns.backgroundCube.uniforms),vertexShader:Ns.backgroundCube.vertexShader,fragmentShader:Ns.backgroundCube.fragmentShader,side:Ni,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute(&quot;normal&quot;),d.geometry.deleteAttribute(&quot;uv&quot;),d.onBeforeRender=function(U,O,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(d.material,&quot;envMap&quot;,{get:function(){return this.uniforms.envMap.value}}),a.update(d)),Fu.copy(T.backgroundRotation),Fu.x*=-1,Fu.y*=-1,Fu.z*=-1,w.isCubeTexture&amp;&amp;w.isRenderTargetTexture===!1&amp;&amp;(Fu.y*=-1,Fu.z*=-1),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&amp;&amp;w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=T.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(F6.makeRotationFromEuler(Fu)),d.material.toneMapped=we.getTransfer(w.colorSpace)!==We,(m!==w||g!==w.version||y!==n.toneMapping)&amp;&amp;(d.material.needsUpdate=!0,m=w,g=w.version,y=n.toneMapping),d.layers.enableAll(),E.unshift(d,d.geometry,d.material,0,0,null)):w&amp;&amp;w.isTexture&amp;&amp;(h===void 0&amp;&amp;(h=new En(new Du(2,2),new ra({name:&quot;BackgroundMaterial&quot;,uniforms:Hu(Ns.background.uniforms),vertexShader:Ns.background.vertexShader,fragmentShader:Ns.background.fragmentShader,side:tr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),h.geometry.deleteAttribute(&quot;normal&quot;),Object.defineProperty(h.material,&quot;map&quot;,{get:function(){return this.uniforms.t2D.value}}),a.update(h)),h.material.uniforms.t2D.value=w,h.material.uniforms.backgroundIntensity.value=T.backgroundIntensity,h.material.toneMapped=we.getTransfer(w.colorSpace)!==We,w.matrixAutoUpdate===!0&amp;&amp;w.updateMatrix(),h.material.uniforms.uvTransform.value.copy(w.matrix),(m!==w||g!==w.version||y!==n.toneMapping)&amp;&amp;(h.material.needsUpdate=!0,m=w,g=w.version,y=n.toneMapping),h.layers.enableAll(),E.unshift(h,h.geometry,h.material,0,0,null))}function v(E,T){E.getRGB(px,OT(n)),i.buffers.color.setClear(px.r,px.g,px.b,T,o)}function S(){d!==void 0&amp;&amp;(d.geometry.dispose(),d.material.dispose(),d=void 0),h!==void 0&amp;&amp;(h.geometry.dispose(),h.material.dispose(),h=void 0)}return{getClearColor:function(){return u},setClearColor:function(E,T=1){u.set(E),c=T,v(u,c)},getClearAlpha:function(){return c},setClearAlpha:function(E){c=E,v(u,c)},render:b,addToRenderList:M,dispose:S}}function G6(n,t){let e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=g(null),s=a,o=!1;function u(R,P,j,X,Z){let st=!1,et=m(X,j,P);s!==et&amp;&amp;(s=et,h(s.object)),st=y(R,X,j,Z),st&amp;&amp;x(R,X,j,Z),Z!==null&amp;&amp;t.update(Z,n.ELEMENT_ARRAY_BUFFER),(st||o)&amp;&amp;(o=!1,T(R,P,j,X),Z!==null&amp;&amp;n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(Z).buffer))}function c(){return n.createVertexArray()}function h(R){return n.bindVertexArray(R)}function d(R){return n.deleteVertexArray(R)}function m(R,P,j){let X=j.wireframe===!0,Z=i[R.id];Z===void 0&amp;&amp;(Z={},i[R.id]=Z);let st=Z[P.id];st===void 0&amp;&amp;(st={},Z[P.id]=st);let et=st[X];return et===void 0&amp;&amp;(et=g(c()),st[X]=et),et}function g(R){let P=[],j=[],X=[];for(let Z=0;Z&lt;e;Z++)P[Z]=0,j[Z]=0,X[Z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:P,enabledAttributes:j,attributeDivisors:X,object:R,attributes:{},index:null}}function y(R,P,j,X){let Z=s.attributes,st=P.attributes,et=0,mt=j.getAttributes();for(let K in mt)if(mt[K].location&gt;=0){let Ut=Z[K],xt=st[K];if(xt===void 0&amp;&amp;(K===&quot;instanceMatrix&quot;&amp;&amp;R.instanceMatrix&amp;&amp;(xt=R.instanceMatrix),K===&quot;instanceColor&quot;&amp;&amp;R.instanceColor&amp;&amp;(xt=R.instanceColor)),Ut===void 0||Ut.attribute!==xt||xt&amp;&amp;Ut.data!==xt.data)return!0;et++}return s.attributesNum!==et||s.index!==X}function x(R,P,j,X){let Z={},st=P.attributes,et=0,mt=j.getAttributes();for(let K in mt)if(mt[K].location&gt;=0){let Ut=st[K];Ut===void 0&amp;&amp;(K===&quot;instanceMatrix&quot;&amp;&amp;R.instanceMatrix&amp;&amp;(Ut=R.instanceMatrix),K===&quot;instanceColor&quot;&amp;&amp;R.instanceColor&amp;&amp;(Ut=R.instanceColor));let xt={};xt.attribute=Ut,Ut&amp;&amp;Ut.data&amp;&amp;(xt.data=Ut.data),Z[K]=xt,et++}s.attributes=Z,s.attributesNum=et,s.index=X}function b(){let R=s.newAttributes;for(let P=0,j=R.length;P&lt;j;P++)R[P]=0}function M(R){v(R,0)}function v(R,P){let j=s.newAttributes,X=s.enabledAttributes,Z=s.attributeDivisors;j[R]=1,X[R]===0&amp;&amp;(n.enableVertexAttribArray(R),X[R]=1),Z[R]!==P&amp;&amp;(n.vertexAttribDivisor(R,P),Z[R]=P)}function S(){let R=s.newAttributes,P=s.enabledAttributes;for(let j=0,X=P.length;j&lt;X;j++)P[j]!==R[j]&amp;&amp;(n.disableVertexAttribArray(j),P[j]=0)}function E(R,P,j,X,Z,st,et){et===!0?n.vertexAttribIPointer(R,P,j,Z,st):n.vertexAttribPointer(R,P,j,X,Z,st)}function T(R,P,j,X){b();let Z=X.attributes,st=j.getAttributes(),et=P.defaultAttributeValues;for(let mt in st){let K=st[mt];if(K.location&gt;=0){let _t=Z[mt];if(_t===void 0&amp;&amp;(mt===&quot;instanceMatrix&quot;&amp;&amp;R.instanceMatrix&amp;&amp;(_t=R.instanceMatrix),mt===&quot;instanceColor&quot;&amp;&amp;R.instanceColor&amp;&amp;(_t=R.instanceColor)),_t!==void 0){let Ut=_t.normalized,xt=_t.itemSize,It=t.get(_t);if(It===void 0)continue;let se=It.buffer,Qt=It.type,it=It.bytesPerElement,wt=Qt===n.INT||Qt===n.UNSIGNED_INT||_t.gpuType===ag;if(_t.isInterleavedBufferAttribute){let bt=_t.data,Jt=bt.stride,Zt=_t.offset;if(bt.isInstancedInterleavedBuffer){for(let te=0;te&lt;K.locationSize;te++)v(K.location+te,bt.meshPerAttribute);R.isInstancedMesh!==!0&amp;&amp;X._maxInstanceCount===void 0&amp;&amp;(X._maxInstanceCount=bt.meshPerAttribute*bt.count)}else for(let te=0;te&lt;K.locationSize;te++)M(K.location+te);n.bindBuffer(n.ARRAY_BUFFER,se);for(let te=0;te&lt;K.locationSize;te++)E(K.location+te,xt/K.locationSize,Qt,Ut,Jt*it,(Zt+xt/K.locationSize*te)*it,wt)}else{if(_t.isInstancedBufferAttribute){for(let bt=0;bt&lt;K.locationSize;bt++)v(K.location+bt,_t.meshPerAttribute);R.isInstancedMesh!==!0&amp;&amp;X._maxInstanceCount===void 0&amp;&amp;(X._maxInstanceCount=_t.meshPerAttribute*_t.count)}else for(let bt=0;bt&lt;K.locationSize;bt++)M(K.location+bt);n.bindBuffer(n.ARRAY_BUFFER,se);for(let bt=0;bt&lt;K.locationSize;bt++)E(K.location+bt,xt/K.locationSize,Qt,Ut,xt*it,xt/K.locationSize*bt*it,wt)}}else if(et!==void 0){let Ut=et[mt];if(Ut!==void 0)switch(Ut.length){case 2:n.vertexAttrib2fv(K.location,Ut);break;case 3:n.vertexAttrib3fv(K.location,Ut);break;case 4:n.vertexAttrib4fv(K.location,Ut);break;default:n.vertexAttrib1fv(K.location,Ut)}}}}S()}function w(){z();for(let R in i){let P=i[R];for(let j in P){let X=P[j];for(let Z in X)d(X[Z].object),delete X[Z];delete P[j]}delete i[R]}}function U(R){if(i[R.id]===void 0)return;let P=i[R.id];for(let j in P){let X=P[j];for(let Z in X)d(X[Z].object),delete X[Z];delete P[j]}delete i[R.id]}function O(R){for(let P in i){let j=i[P];if(j[R.id]===void 0)continue;let X=j[R.id];for(let Z in X)d(X[Z].object),delete X[Z];delete j[R.id]}}function z(){C(),o=!0,s!==a&amp;&amp;(s=a,h(s.object))}function C(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:u,reset:z,resetDefaultState:C,dispose:w,releaseStatesOfGeometry:U,releaseStatesOfProgram:O,initAttributes:b,enableAttribute:M,disableUnusedAttributes:S}}function X6(n,t,e){let i;function a(h){i=h}function s(h,d){n.drawArrays(i,h,d),e.update(d,i,1)}function o(h,d,m){m!==0&amp;&amp;(n.drawArraysInstanced(i,h,d,m),e.update(d,i,m))}function u(h,d,m){if(m===0)return;t.get(&quot;WEBGL_multi_draw&quot;).multiDrawArraysWEBGL(i,h,0,d,0,m);let y=0;for(let x=0;x&lt;m;x++)y+=d[x];e.update(y,i,1)}function c(h,d,m,g){if(m===0)return;let y=t.get(&quot;WEBGL_multi_draw&quot;);if(y===null)for(let x=0;x&lt;h.length;x++)o(h[x],d[x],g[x]);else{y.multiDrawArraysInstancedWEBGL(i,h,0,d,0,g,0,m);let x=0;for(let b=0;b&lt;m;b++)x+=d[b]*g[b];e.update(x,i,1)}}this.setMode=a,this.render=s,this.renderInstances=o,this.renderMultiDraw=u,this.renderMultiDrawInstances=c}function q6(n,t,e,i){let a;function s(){if(a!==void 0)return a;if(t.has(&quot;EXT_texture_filter_anisotropic&quot;)===!0){let O=t.get(&quot;EXT_texture_filter_anisotropic&quot;);a=n.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function o(O){return!(O!==li&amp;&amp;i.convert(O)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function u(O){let z=O===Bu&amp;&amp;(t.has(&quot;EXT_color_buffer_half_float&quot;)||t.has(&quot;EXT_color_buffer_float&quot;));return!(O!==la&amp;&amp;i.convert(O)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&amp;&amp;O!==qi&amp;&amp;!z)}function c(O){if(O===&quot;highp&quot;){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision&gt;0&amp;&amp;n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision&gt;0)return&quot;highp&quot;;O=&quot;mediump&quot;}return O===&quot;mediump&quot;&amp;&amp;n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision&gt;0&amp;&amp;n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision&gt;0?&quot;mediump&quot;:&quot;lowp&quot;}let h=e.precision!==void 0?e.precision:&quot;highp&quot;,d=c(h);d!==h&amp;&amp;(console.warn(&quot;THREE.WebGLRenderer:&quot;,h,&quot;not supported, using&quot;,d,&quot;instead.&quot;),h=d);let m=e.logarithmicDepthBuffer===!0,g=e.reversedDepthBuffer===!0&amp;&amp;t.has(&quot;EXT_clip_control&quot;),y=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),M=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),T=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),w=x&gt;0,U=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:c,textureFormatReadable:o,textureTypeReadable:u,precision:h,logarithmicDepthBuffer:m,reversedDepthBuffer:g,maxTextures:y,maxVertexTextures:x,maxTextureSize:b,maxCubemapSize:M,maxAttributes:v,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:T,vertexTextures:w,maxSamples:U}}function Y6(n){let t=this,e=null,i=0,a=!1,s=!1,o=new Es,u=new ge,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(m,g){let y=m.length!==0||g||i!==0||a;return a=g,i=m.length,y},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(m,g){e=d(m,g,0)},this.setState=function(m,g,y){let x=m.clippingPlanes,b=m.clipIntersection,M=m.clipShadows,v=n.get(m);if(!a||x===null||x.length===0||s&amp;&amp;!M)s?d(null):h();else{let S=s?0:i,E=S*4,T=v.clippingState||null;c.value=T,T=d(x,g,E,y);for(let w=0;w!==E;++w)T[w]=e[w];v.clippingState=T,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=S}};function h(){c.value!==e&amp;&amp;(c.value=e,c.needsUpdate=i&gt;0),t.numPlanes=i,t.numIntersection=0}function d(m,g,y,x){let b=m!==null?m.length:0,M=null;if(b!==0){if(M=c.value,x!==!0||M===null){let v=y+b*4,S=g.matrixWorldInverse;u.getNormalMatrix(S),(M===null||M.length&lt;v)&amp;&amp;(M=new Float32Array(v));for(let E=0,T=y;E!==b;++E,T+=4)o.copy(m[E]).applyMatrix4(S,u),o.normal.toArray(M,T),M[T+3]=o.constant}c.value=M,c.needsUpdate=!0}return t.numPlanes=b,t.numIntersection=0,M}}function W6(n){let t=new WeakMap;function e(o,u){return u===vh?o.mapping=rr:u===yh&amp;&amp;(o.mapping=to),o}function i(o){if(o&amp;&amp;o.isTexture){let u=o.mapping;if(u===vh||u===yh)if(t.has(o)){let c=t.get(o).texture;return e(c,o.mapping)}else{let c=o.image;if(c&amp;&amp;c.height&gt;0){let h=new Fp(c.height);return h.fromEquirectangularTexture(n,o),t.set(o,h),o.addEventListener(&quot;dispose&quot;,a),e(h.texture,o.mapping)}else return null}}return o}function a(o){let u=o.target;u.removeEventListener(&quot;dispose&quot;,a);let c=t.get(u);c!==void 0&amp;&amp;(t.delete(u),c.dispose())}function s(){t=new WeakMap}return{get:i,dispose:s}}var Rh=4,AO=[.125,.215,.35,.446,.526,.582],Xu=20,FT=new $r,RO=new Bt,VT=null,GT=0,XT=0,qT=!1,Gu=(1+Math.sqrt(5))/2,Ah=1/Gu,CO=[new B(-Gu,Ah,0),new B(Gu,Ah,0),new B(-Ah,0,Gu),new B(Ah,0,Gu),new B(0,Gu,-Ah),new B(0,Gu,Ah),new B(-1,1,-1),new B(1,1,-1),new B(-1,1,1),new B(1,1,1)],k6=new B,Ig=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,a=100,s={}){let{size:o=256,position:u=k6}=s;VT=this._renderer.getRenderTarget(),GT=this._renderer.getActiveCubeFace(),XT=this._renderer.getActiveMipmapLevel(),qT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);let c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(t,i,a,c,u),e&gt;0&amp;&amp;this._blur(c,0,0,e),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&amp;&amp;(this._cubemapMaterial=UO(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&amp;&amp;(this._equirectMaterial=DO(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&amp;&amp;this._cubemapMaterial.dispose(),this._equirectMaterial!==null&amp;&amp;this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&amp;&amp;this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&amp;&amp;this._pingPongRenderTarget.dispose();for(let t=0;t&lt;this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(VT,GT,XT),this._renderer.xr.enabled=qT,t.scissorTest=!1,mx(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===rr||t.mapping===to?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),VT=this._renderer.getRenderTarget(),GT=this._renderer.getActiveCubeFace(),XT=this._renderer.getActiveMipmapLevel(),qT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:Gn,minFilter:Gn,generateMipmaps:!1,type:Bu,format:li,colorSpace:er,depthBuffer:!1},a=wO(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&amp;&amp;this._dispose(),this._pingPongRenderTarget=wO(t,e,i);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Z6(s)),this._blurMaterial=j6(s,t,e)}return a}_compileMaterial(t){let e=new En(this._lodPlanes[0],t);this._renderer.compile(e,FT)}_sceneToCubeUV(t,e,i,a,s){let c=new Un(90,1,e,i),h=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],m=this._renderer,g=m.autoClear,y=m.toneMapping;m.getClearColor(RO),m.toneMapping=us,m.autoClear=!1,m.state.buffers.depth.getReversed()&amp;&amp;(m.setRenderTarget(a),m.clearDepth(),m.setRenderTarget(null));let b=new Rs({name:&quot;PMREM.Background&quot;,side:Ni,depthWrite:!1,depthTest:!1}),M=new En(new rl,b),v=!1,S=t.background;S?S.isColor&amp;&amp;(b.color.copy(S),t.background=null,v=!0):(b.color.copy(RO),v=!0);for(let E=0;E&lt;6;E++){let T=E%3;T===0?(c.up.set(0,h[E],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x+d[E],s.y,s.z)):T===1?(c.up.set(0,0,h[E]),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y+d[E],s.z)):(c.up.set(0,h[E],0),c.position.set(s.x,s.y,s.z),c.lookAt(s.x,s.y,s.z+d[E]));let w=this._cubeSize;mx(a,T*w,E&gt;2?w:0,w,w),m.setRenderTarget(a),v&amp;&amp;m.render(M,c),m.render(t,c)}M.geometry.dispose(),M.material.dispose(),m.toneMapping=y,m.autoClear=g,t.background=S}_textureToCubeUV(t,e){let i=this._renderer,a=t.mapping===rr||t.mapping===to;a?(this._cubemapMaterial===null&amp;&amp;(this._cubemapMaterial=UO()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&amp;&amp;(this._equirectMaterial=DO());let s=a?this._cubemapMaterial:this._equirectMaterial,o=new En(this._lodPlanes[0],s),u=s.uniforms;u.envMap.value=t;let c=this._cubeSize;mx(e,0,0,3*c,2*c),i.setRenderTarget(e),i.render(o,FT)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;let a=this._lodPlanes.length;for(let s=1;s&lt;a;s++){let o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),u=CO[(a-s-1)%CO.length];this._blur(t,s-1,s,o,u)}e.autoClear=i}_blur(t,e,i,a,s){let o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,a,&quot;latitudinal&quot;,s),this._halfBlur(o,t,i,i,a,&quot;longitudinal&quot;,s)}_halfBlur(t,e,i,a,s,o,u){let c=this._renderer,h=this._blurMaterial;o!==&quot;latitudinal&quot;&amp;&amp;o!==&quot;longitudinal&quot;&amp;&amp;console.error(&quot;blur direction must be either latitudinal or longitudinal!&quot;);let d=3,m=new En(this._lodPlanes[a],h),g=h.uniforms,y=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*Xu-1),b=s/x,M=isFinite(s)?1+Math.floor(d*b):Xu;M&gt;Xu&amp;&amp;console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${Xu}`);let v=[],S=0;for(let O=0;O&lt;Xu;++O){let z=O/b,C=Math.exp(-z*z/2);v.push(C),O===0?S+=C:O&lt;M&amp;&amp;(S+=2*C)}for(let O=0;O&lt;v.length;O++)v[O]=v[O]/S;g.envMap.value=t.texture,g.samples.value=M,g.weights.value=v,g.latitudinal.value=o===&quot;latitudinal&quot;,u&amp;&amp;(g.poleAxis.value=u);let{_lodMax:E}=this;g.dTheta.value=x,g.mipInt.value=E-i;let T=this._sizeLods[a],w=3*T*(a&gt;E-Rh?a-E+Rh:0),U=4*(this._cubeSize-T);mx(e,w,U,3*T,2*T),c.setRenderTarget(e),c.render(m,FT)}};function Z6(n){let t=[],e=[],i=[],a=n,s=n-Rh+1+AO.length;for(let o=0;o&lt;s;o++){let u=Math.pow(2,a);e.push(u);let c=1/u;o&gt;n-Rh?c=AO[o-n+Rh-1]:o===0&amp;&amp;(c=0),i.push(c);let h=1/(u-2),d=-h,m=1+h,g=[d,d,m,d,m,m,d,d,m,m,d,m],y=6,x=6,b=3,M=2,v=1,S=new Float32Array(b*x*y),E=new Float32Array(M*x*y),T=new Float32Array(v*x*y);for(let U=0;U&lt;y;U++){let O=U%3*2/3-1,z=U&gt;2?0:-1,C=[O,z,0,O+2/3,z,0,O+2/3,z+1,0,O,z,0,O+2/3,z+1,0,O,z+1,0];S.set(C,b*x*U),E.set(g,M*x*U);let R=[U,U,U,U,U,U];T.set(R,v*x*U)}let w=new ve;w.setAttribute(&quot;position&quot;,new Xe(S,b)),w.setAttribute(&quot;uv&quot;,new Xe(E,M)),w.setAttribute(&quot;faceIndex&quot;,new Xe(T,v)),t.push(w),a&gt;Rh&amp;&amp;a--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function wO(n,t,e){let i=new za(n,t,e);return i.texture.mapping=Ou,i.texture.name=&quot;PMREM.cubeUv&quot;,i.scissorTest=!0,i}function mx(n,t,e,i,a){n.viewport.set(t,e,i,a),n.scissor.set(t,e,i,a)}function j6(n,t,e){let i=new Float32Array(Xu),a=new B(0,1,0);return new ra({name:&quot;SphericalGaussianBlur&quot;,defines:{n:Xu,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:tA(),fragmentShader:`
<a href="#l3599" class="line" id="l3599">   3599</a> 
<a href="#l3600" class="line" id="l3600">   3600</a> 			precision mediump float;
<a href="#l3601" class="line" id="l3601">   3601</a> 			precision mediump int;
<a href="#l3602" class="line" id="l3602">   3602</a> 
<a href="#l3603" class="line" id="l3603">   3603</a> 			varying vec3 vOutputDirection;
<a href="#l3604" class="line" id="l3604">   3604</a> 
<a href="#l3605" class="line" id="l3605">   3605</a> 			uniform sampler2D envMap;
<a href="#l3606" class="line" id="l3606">   3606</a> 			uniform int samples;
<a href="#l3607" class="line" id="l3607">   3607</a> 			uniform float weights[ n ];
<a href="#l3608" class="line" id="l3608">   3608</a> 			uniform bool latitudinal;
<a href="#l3609" class="line" id="l3609">   3609</a> 			uniform float dTheta;
<a href="#l3610" class="line" id="l3610">   3610</a> 			uniform float mipInt;
<a href="#l3611" class="line" id="l3611">   3611</a> 			uniform vec3 poleAxis;
<a href="#l3612" class="line" id="l3612">   3612</a> 
<a href="#l3613" class="line" id="l3613">   3613</a> 			#define ENVMAP_TYPE_CUBE_UV
<a href="#l3614" class="line" id="l3614">   3614</a> 			#include &lt;cube_uv_reflection_fragment&gt;
<a href="#l3615" class="line" id="l3615">   3615</a> 
<a href="#l3616" class="line" id="l3616">   3616</a> 			vec3 getSample( float theta, vec3 axis ) {
<a href="#l3617" class="line" id="l3617">   3617</a> 
<a href="#l3618" class="line" id="l3618">   3618</a> 				float cosTheta = cos( theta );
<a href="#l3619" class="line" id="l3619">   3619</a> 				// Rodrigues&#39; axis-angle rotation
<a href="#l3620" class="line" id="l3620">   3620</a> 				vec3 sampleDirection = vOutputDirection * cosTheta
<a href="#l3621" class="line" id="l3621">   3621</a> 					+ cross( axis, vOutputDirection ) * sin( theta )
<a href="#l3622" class="line" id="l3622">   3622</a> 					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
<a href="#l3623" class="line" id="l3623">   3623</a> 
<a href="#l3624" class="line" id="l3624">   3624</a> 				return bilinearCubeUV( envMap, sampleDirection, mipInt );
<a href="#l3625" class="line" id="l3625">   3625</a> 
<a href="#l3626" class="line" id="l3626">   3626</a> 			}
<a href="#l3627" class="line" id="l3627">   3627</a> 
<a href="#l3628" class="line" id="l3628">   3628</a> 			void main() {
<a href="#l3629" class="line" id="l3629">   3629</a> 
<a href="#l3630" class="line" id="l3630">   3630</a> 				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
<a href="#l3631" class="line" id="l3631">   3631</a> 
<a href="#l3632" class="line" id="l3632">   3632</a> 				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
<a href="#l3633" class="line" id="l3633">   3633</a> 
<a href="#l3634" class="line" id="l3634">   3634</a> 					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
<a href="#l3635" class="line" id="l3635">   3635</a> 
<a href="#l3636" class="line" id="l3636">   3636</a> 				}
<a href="#l3637" class="line" id="l3637">   3637</a> 
<a href="#l3638" class="line" id="l3638">   3638</a> 				axis = normalize( axis );
<a href="#l3639" class="line" id="l3639">   3639</a> 
<a href="#l3640" class="line" id="l3640">   3640</a> 				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
<a href="#l3641" class="line" id="l3641">   3641</a> 				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
<a href="#l3642" class="line" id="l3642">   3642</a> 
<a href="#l3643" class="line" id="l3643">   3643</a> 				for ( int i = 1; i &lt; n; i++ ) {
<a href="#l3644" class="line" id="l3644">   3644</a> 
<a href="#l3645" class="line" id="l3645">   3645</a> 					if ( i &gt;= samples ) {
<a href="#l3646" class="line" id="l3646">   3646</a> 
<a href="#l3647" class="line" id="l3647">   3647</a> 						break;
<a href="#l3648" class="line" id="l3648">   3648</a> 
<a href="#l3649" class="line" id="l3649">   3649</a> 					}
<a href="#l3650" class="line" id="l3650">   3650</a> 
<a href="#l3651" class="line" id="l3651">   3651</a> 					float theta = dTheta * float( i );
<a href="#l3652" class="line" id="l3652">   3652</a> 					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
<a href="#l3653" class="line" id="l3653">   3653</a> 					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
<a href="#l3654" class="line" id="l3654">   3654</a> 
<a href="#l3655" class="line" id="l3655">   3655</a> 				}
<a href="#l3656" class="line" id="l3656">   3656</a> 
<a href="#l3657" class="line" id="l3657">   3657</a> 			}
<a href="#l3658" class="line" id="l3658">   3658</a> 		`,blending:sr,depthTest:!1,depthWrite:!1})}function DO(){return new ra({name:&quot;EquirectangularToCubeUV&quot;,uniforms:{envMap:{value:null}},vertexShader:tA(),fragmentShader:`
<a href="#l3659" class="line" id="l3659">   3659</a> 
<a href="#l3660" class="line" id="l3660">   3660</a> 			precision mediump float;
<a href="#l3661" class="line" id="l3661">   3661</a> 			precision mediump int;
<a href="#l3662" class="line" id="l3662">   3662</a> 
<a href="#l3663" class="line" id="l3663">   3663</a> 			varying vec3 vOutputDirection;
<a href="#l3664" class="line" id="l3664">   3664</a> 
<a href="#l3665" class="line" id="l3665">   3665</a> 			uniform sampler2D envMap;
<a href="#l3666" class="line" id="l3666">   3666</a> 
<a href="#l3667" class="line" id="l3667">   3667</a> 			#include &lt;common&gt;
<a href="#l3668" class="line" id="l3668">   3668</a> 
<a href="#l3669" class="line" id="l3669">   3669</a> 			void main() {
<a href="#l3670" class="line" id="l3670">   3670</a> 
<a href="#l3671" class="line" id="l3671">   3671</a> 				vec3 outputDirection = normalize( vOutputDirection );
<a href="#l3672" class="line" id="l3672">   3672</a> 				vec2 uv = equirectUv( outputDirection );
<a href="#l3673" class="line" id="l3673">   3673</a> 
<a href="#l3674" class="line" id="l3674">   3674</a> 				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );
<a href="#l3675" class="line" id="l3675">   3675</a> 
<a href="#l3676" class="line" id="l3676">   3676</a> 			}
<a href="#l3677" class="line" id="l3677">   3677</a> 		`,blending:sr,depthTest:!1,depthWrite:!1})}function UO(){return new ra({name:&quot;CubemapToCubeUV&quot;,uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:tA(),fragmentShader:`
<a href="#l3678" class="line" id="l3678">   3678</a> 
<a href="#l3679" class="line" id="l3679">   3679</a> 			precision mediump float;
<a href="#l3680" class="line" id="l3680">   3680</a> 			precision mediump int;
<a href="#l3681" class="line" id="l3681">   3681</a> 
<a href="#l3682" class="line" id="l3682">   3682</a> 			uniform float flipEnvMap;
<a href="#l3683" class="line" id="l3683">   3683</a> 
<a href="#l3684" class="line" id="l3684">   3684</a> 			varying vec3 vOutputDirection;
<a href="#l3685" class="line" id="l3685">   3685</a> 
<a href="#l3686" class="line" id="l3686">   3686</a> 			uniform samplerCube envMap;
<a href="#l3687" class="line" id="l3687">   3687</a> 
<a href="#l3688" class="line" id="l3688">   3688</a> 			void main() {
<a href="#l3689" class="line" id="l3689">   3689</a> 
<a href="#l3690" class="line" id="l3690">   3690</a> 				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );
<a href="#l3691" class="line" id="l3691">   3691</a> 
<a href="#l3692" class="line" id="l3692">   3692</a> 			}
<a href="#l3693" class="line" id="l3693">   3693</a> 		`,blending:sr,depthTest:!1,depthWrite:!1})}function tA(){return`
<a href="#l3694" class="line" id="l3694">   3694</a> 
<a href="#l3695" class="line" id="l3695">   3695</a> 		precision mediump float;
<a href="#l3696" class="line" id="l3696">   3696</a> 		precision mediump int;
<a href="#l3697" class="line" id="l3697">   3697</a> 
<a href="#l3698" class="line" id="l3698">   3698</a> 		attribute float faceIndex;
<a href="#l3699" class="line" id="l3699">   3699</a> 
<a href="#l3700" class="line" id="l3700">   3700</a> 		varying vec3 vOutputDirection;
<a href="#l3701" class="line" id="l3701">   3701</a> 
<a href="#l3702" class="line" id="l3702">   3702</a> 		// RH coordinate system; PMREM face-indexing convention
<a href="#l3703" class="line" id="l3703">   3703</a> 		vec3 getDirection( vec2 uv, float face ) {
<a href="#l3704" class="line" id="l3704">   3704</a> 
<a href="#l3705" class="line" id="l3705">   3705</a> 			uv = 2.0 * uv - 1.0;
<a href="#l3706" class="line" id="l3706">   3706</a> 
<a href="#l3707" class="line" id="l3707">   3707</a> 			vec3 direction = vec3( uv, 1.0 );
<a href="#l3708" class="line" id="l3708">   3708</a> 
<a href="#l3709" class="line" id="l3709">   3709</a> 			if ( face == 0.0 ) {
<a href="#l3710" class="line" id="l3710">   3710</a> 
<a href="#l3711" class="line" id="l3711">   3711</a> 				direction = direction.zyx; // ( 1, v, u ) pos x
<a href="#l3712" class="line" id="l3712">   3712</a> 
<a href="#l3713" class="line" id="l3713">   3713</a> 			} else if ( face == 1.0 ) {
<a href="#l3714" class="line" id="l3714">   3714</a> 
<a href="#l3715" class="line" id="l3715">   3715</a> 				direction = direction.xzy;
<a href="#l3716" class="line" id="l3716">   3716</a> 				direction.xz *= -1.0; // ( -u, 1, -v ) pos y
<a href="#l3717" class="line" id="l3717">   3717</a> 
<a href="#l3718" class="line" id="l3718">   3718</a> 			} else if ( face == 2.0 ) {
<a href="#l3719" class="line" id="l3719">   3719</a> 
<a href="#l3720" class="line" id="l3720">   3720</a> 				direction.x *= -1.0; // ( -u, v, 1 ) pos z
<a href="#l3721" class="line" id="l3721">   3721</a> 
<a href="#l3722" class="line" id="l3722">   3722</a> 			} else if ( face == 3.0 ) {
<a href="#l3723" class="line" id="l3723">   3723</a> 
<a href="#l3724" class="line" id="l3724">   3724</a> 				direction = direction.zyx;
<a href="#l3725" class="line" id="l3725">   3725</a> 				direction.xz *= -1.0; // ( -1, v, -u ) neg x
<a href="#l3726" class="line" id="l3726">   3726</a> 
<a href="#l3727" class="line" id="l3727">   3727</a> 			} else if ( face == 4.0 ) {
<a href="#l3728" class="line" id="l3728">   3728</a> 
<a href="#l3729" class="line" id="l3729">   3729</a> 				direction = direction.xzy;
<a href="#l3730" class="line" id="l3730">   3730</a> 				direction.xy *= -1.0; // ( -u, -1, v ) neg y
<a href="#l3731" class="line" id="l3731">   3731</a> 
<a href="#l3732" class="line" id="l3732">   3732</a> 			} else if ( face == 5.0 ) {
<a href="#l3733" class="line" id="l3733">   3733</a> 
<a href="#l3734" class="line" id="l3734">   3734</a> 				direction.z *= -1.0; // ( u, v, -1 ) neg z
<a href="#l3735" class="line" id="l3735">   3735</a> 
<a href="#l3736" class="line" id="l3736">   3736</a> 			}
<a href="#l3737" class="line" id="l3737">   3737</a> 
<a href="#l3738" class="line" id="l3738">   3738</a> 			return direction;
<a href="#l3739" class="line" id="l3739">   3739</a> 
<a href="#l3740" class="line" id="l3740">   3740</a> 		}
<a href="#l3741" class="line" id="l3741">   3741</a> 
<a href="#l3742" class="line" id="l3742">   3742</a> 		void main() {
<a href="#l3743" class="line" id="l3743">   3743</a> 
<a href="#l3744" class="line" id="l3744">   3744</a> 			vOutputDirection = getDirection( uv, faceIndex );
<a href="#l3745" class="line" id="l3745">   3745</a> 			gl_Position = vec4( position, 1.0 );
<a href="#l3746" class="line" id="l3746">   3746</a> 
<a href="#l3747" class="line" id="l3747">   3747</a> 		}
<a href="#l3748" class="line" id="l3748">   3748</a> 	`}function Q6(n){let t=new WeakMap,e=null;function i(u){if(u&amp;&amp;u.isTexture){let c=u.mapping,h=c===vh||c===yh,d=c===rr||c===to;if(h||d){let m=t.get(u),g=m!==void 0?m.texture.pmremVersion:0;if(u.isRenderTargetTexture&amp;&amp;u.pmremVersion!==g)return e===null&amp;&amp;(e=new Ig(n)),m=h?e.fromEquirectangular(u,m):e.fromCubemap(u,m),m.texture.pmremVersion=u.pmremVersion,t.set(u,m),m.texture;if(m!==void 0)return m.texture;{let y=u.image;return h&amp;&amp;y&amp;&amp;y.height&gt;0||d&amp;&amp;y&amp;&amp;a(y)?(e===null&amp;&amp;(e=new Ig(n)),m=h?e.fromEquirectangular(u):e.fromCubemap(u),m.texture.pmremVersion=u.pmremVersion,t.set(u,m),u.addEventListener(&quot;dispose&quot;,s),m.texture):null}}}return u}function a(u){let c=0,h=6;for(let d=0;d&lt;h;d++)u[d]!==void 0&amp;&amp;c++;return c===h}function s(u){let c=u.target;c.removeEventListener(&quot;dispose&quot;,s);let h=t.get(c);h!==void 0&amp;&amp;(t.delete(c),h.dispose())}function o(){t=new WeakMap,e!==null&amp;&amp;(e.dispose(),e=null)}return{get:i,dispose:o}}function K6(n){let t={};function e(i){if(t[i]!==void 0)return t[i];let a;switch(i){case&quot;WEBGL_depth_texture&quot;:a=n.getExtension(&quot;WEBGL_depth_texture&quot;)||n.getExtension(&quot;MOZ_WEBGL_depth_texture&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_depth_texture&quot;);break;case&quot;EXT_texture_filter_anisotropic&quot;:a=n.getExtension(&quot;EXT_texture_filter_anisotropic&quot;)||n.getExtension(&quot;MOZ_EXT_texture_filter_anisotropic&quot;)||n.getExtension(&quot;WEBKIT_EXT_texture_filter_anisotropic&quot;);break;case&quot;WEBGL_compressed_texture_s3tc&quot;:a=n.getExtension(&quot;WEBGL_compressed_texture_s3tc&quot;)||n.getExtension(&quot;MOZ_WEBGL_compressed_texture_s3tc&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_compressed_texture_s3tc&quot;);break;case&quot;WEBGL_compressed_texture_pvrtc&quot;:a=n.getExtension(&quot;WEBGL_compressed_texture_pvrtc&quot;)||n.getExtension(&quot;WEBKIT_WEBGL_compressed_texture_pvrtc&quot;);break;default:a=n.getExtension(i)}return t[i]=a,a}return{has:function(i){return e(i)!==null},init:function(){e(&quot;EXT_color_buffer_float&quot;),e(&quot;WEBGL_clip_cull_distance&quot;),e(&quot;OES_texture_float_linear&quot;),e(&quot;EXT_color_buffer_half_float&quot;),e(&quot;WEBGL_multisampled_render_to_texture&quot;),e(&quot;WEBGL_render_shared_exponent&quot;)},get:function(i){let a=e(i);return a===null&amp;&amp;_u(&quot;THREE.WebGLRenderer: &quot;+i+&quot; extension not supported.&quot;),a}}}function J6(n,t,e,i){let a={},s=new WeakMap;function o(m){let g=m.target;g.index!==null&amp;&amp;t.remove(g.index);for(let x in g.attributes)t.remove(g.attributes[x]);g.removeEventListener(&quot;dispose&quot;,o),delete a[g.id];let y=s.get(g);y&amp;&amp;(t.remove(y),s.delete(g)),i.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&amp;&amp;delete g._maxInstanceCount,e.memory.geometries--}function u(m,g){return a[g.id]===!0||(g.addEventListener(&quot;dispose&quot;,o),a[g.id]=!0,e.memory.geometries++),g}function c(m){let g=m.attributes;for(let y in g)t.update(g[y],n.ARRAY_BUFFER)}function h(m){let g=[],y=m.index,x=m.attributes.position,b=0;if(y!==null){let S=y.array;b=y.version;for(let E=0,T=S.length;E&lt;T;E+=3){let w=S[E+0],U=S[E+1],O=S[E+2];g.push(w,U,U,O,O,w)}}else if(x!==void 0){let S=x.array;b=x.version;for(let E=0,T=S.length/3-1;E&lt;T;E+=3){let w=E+0,U=E+1,O=E+2;g.push(w,U,U,O,O,w)}}else return;let M=new(UT(g)?Yf:qf)(g,1);M.version=b;let v=s.get(m);v&amp;&amp;t.remove(v),s.set(m,M)}function d(m){let g=s.get(m);if(g){let y=m.index;y!==null&amp;&amp;g.version&lt;y.version&amp;&amp;h(m)}else h(m);return s.get(m)}return{get:u,update:c,getWireframeAttribute:d}}function $6(n,t,e){let i;function a(g){i=g}let s,o;function u(g){s=g.type,o=g.bytesPerElement}function c(g,y){n.drawElements(i,y,s,g*o),e.update(y,i,1)}function h(g,y,x){x!==0&amp;&amp;(n.drawElementsInstanced(i,y,s,g*o,x),e.update(y,i,x))}function d(g,y,x){if(x===0)return;t.get(&quot;WEBGL_multi_draw&quot;).multiDrawElementsWEBGL(i,y,0,s,g,0,x);let M=0;for(let v=0;v&lt;x;v++)M+=y[v];e.update(M,i,1)}function m(g,y,x,b){if(x===0)return;let M=t.get(&quot;WEBGL_multi_draw&quot;);if(M===null)for(let v=0;v&lt;g.length;v++)h(g[v]/o,y[v],b[v]);else{M.multiDrawElementsInstancedWEBGL(i,y,0,s,g,0,b,0,x);let v=0;for(let S=0;S&lt;x;S++)v+=y[S]*b[S];e.update(v,i,1)}}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=h,this.renderMultiDraw=d,this.renderMultiDrawInstances=m}function tG(n){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,u){switch(e.calls++,o){case n.TRIANGLES:e.triangles+=u*(s/3);break;case n.LINES:e.lines+=u*(s/2);break;case n.LINE_STRIP:e.lines+=u*(s-1);break;case n.LINE_LOOP:e.lines+=u*s;break;case n.POINTS:e.points+=u*s;break;default:console.error(&quot;THREE.WebGLInfo: Unknown draw mode:&quot;,o);break}}function a(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:a,update:i}}function eG(n,t,e){let i=new WeakMap,a=new Oe;function s(o,u,c){let h=o.morphTargetInfluences,d=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=d!==void 0?d.length:0,g=i.get(u);if(g===void 0||g.count!==m){let C=function(){O.dispose(),i.delete(u),u.removeEventListener(&quot;dispose&quot;,C)};g!==void 0&amp;&amp;g.texture.dispose();let y=u.morphAttributes.position!==void 0,x=u.morphAttributes.normal!==void 0,b=u.morphAttributes.color!==void 0,M=u.morphAttributes.position||[],v=u.morphAttributes.normal||[],S=u.morphAttributes.color||[],E=0;y===!0&amp;&amp;(E=1),x===!0&amp;&amp;(E=2),b===!0&amp;&amp;(E=3);let T=u.attributes.position.count*E,w=1;T&gt;t.maxTextureSize&amp;&amp;(w=Math.ceil(T/t.maxTextureSize),T=t.maxTextureSize);let U=new Float32Array(T*w*4*m),O=new xu(U,T,w,m);O.type=qi,O.needsUpdate=!0;let z=E*4;for(let R=0;R&lt;m;R++){let P=M[R],j=v[R],X=S[R],Z=T*w*4*R;for(let st=0;st&lt;P.count;st++){let et=st*z;y===!0&amp;&amp;(a.fromBufferAttribute(P,st),U[Z+et+0]=a.x,U[Z+et+1]=a.y,U[Z+et+2]=a.z,U[Z+et+3]=0),x===!0&amp;&amp;(a.fromBufferAttribute(j,st),U[Z+et+4]=a.x,U[Z+et+5]=a.y,U[Z+et+6]=a.z,U[Z+et+7]=0),b===!0&amp;&amp;(a.fromBufferAttribute(X,st),U[Z+et+8]=a.x,U[Z+et+9]=a.y,U[Z+et+10]=a.z,U[Z+et+11]=X.itemSize===4?a.w:1)}}g={count:m,texture:O,size:new ct(T,w)},i.set(u,g),u.addEventListener(&quot;dispose&quot;,C)}if(o.isInstancedMesh===!0&amp;&amp;o.morphTexture!==null)c.getUniforms().setValue(n,&quot;morphTexture&quot;,o.morphTexture,e);else{let y=0;for(let b=0;b&lt;h.length;b++)y+=h[b];let x=u.morphTargetsRelative?1:1-y;c.getUniforms().setValue(n,&quot;morphTargetBaseInfluence&quot;,x),c.getUniforms().setValue(n,&quot;morphTargetInfluences&quot;,h)}c.getUniforms().setValue(n,&quot;morphTargetsTexture&quot;,g.texture,e),c.getUniforms().setValue(n,&quot;morphTargetsTextureSize&quot;,g.size)}return{update:s}}function nG(n,t,e,i){let a=new WeakMap;function s(c){let h=i.render.frame,d=c.geometry,m=t.get(c,d);if(a.get(m)!==h&amp;&amp;(t.update(m),a.set(m,h)),c.isInstancedMesh&amp;&amp;(c.hasEventListener(&quot;dispose&quot;,u)===!1&amp;&amp;c.addEventListener(&quot;dispose&quot;,u),a.get(c)!==h&amp;&amp;(e.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&amp;&amp;e.update(c.instanceColor,n.ARRAY_BUFFER),a.set(c,h))),c.isSkinnedMesh){let g=c.skeleton;a.get(g)!==h&amp;&amp;(g.update(),a.set(g,h))}return m}function o(){a=new WeakMap}function u(c){let h=c.target;h.removeEventListener(&quot;dispose&quot;,u),e.remove(h.instanceMatrix),h.instanceColor!==null&amp;&amp;e.remove(h.instanceColor)}return{update:s,dispose:o}}var QO=new zn,NO=new jf(1,1),KO=new xu,JO=new Su,$O=new ol,OO=[],LO=[],zO=new Float32Array(16),BO=new Float32Array(9),PO=new Float32Array(4);function wh(n,t,e){let i=n[0];if(i&lt;=0||i&gt;0)return n;let a=t*e,s=OO[a];if(s===void 0&amp;&amp;(s=new Float32Array(a),OO[a]=s),t!==0){i.toArray(s,0);for(let o=1,u=0;o!==t;++o)u+=e,n[o].toArray(s,u)}return s}function Qn(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e&lt;i;e++)if(n[e]!==t[e])return!1;return!0}function Kn(n,t){for(let e=0,i=t.length;e&lt;i;e++)n[e]=t[e]}function yx(n,t){let e=LO[t];e===void 0&amp;&amp;(e=new Int32Array(t),LO[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function iG(n,t){let e=this.cache;e[0]!==t&amp;&amp;(n.uniform1f(this.addr,t),e[0]=t)}function aG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&amp;&amp;(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Qn(e,t))return;n.uniform2fv(this.addr,t),Kn(e,t)}}function sG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&amp;&amp;(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&amp;&amp;(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Qn(e,t))return;n.uniform3fv(this.addr,t),Kn(e,t)}}function rG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&amp;&amp;(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Qn(e,t))return;n.uniform4fv(this.addr,t),Kn(e,t)}}function oG(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Qn(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),Kn(e,t)}else{if(Qn(e,i))return;PO.set(i),n.uniformMatrix2fv(this.addr,!1,PO),Kn(e,i)}}function lG(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Qn(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),Kn(e,t)}else{if(Qn(e,i))return;BO.set(i),n.uniformMatrix3fv(this.addr,!1,BO),Kn(e,i)}}function uG(n,t){let e=this.cache,i=t.elements;if(i===void 0){if(Qn(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),Kn(e,t)}else{if(Qn(e,i))return;zO.set(i),n.uniformMatrix4fv(this.addr,!1,zO),Kn(e,i)}}function cG(n,t){let e=this.cache;e[0]!==t&amp;&amp;(n.uniform1i(this.addr,t),e[0]=t)}function fG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&amp;&amp;(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Qn(e,t))return;n.uniform2iv(this.addr,t),Kn(e,t)}}function hG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&amp;&amp;(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Qn(e,t))return;n.uniform3iv(this.addr,t),Kn(e,t)}}function dG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&amp;&amp;(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Qn(e,t))return;n.uniform4iv(this.addr,t),Kn(e,t)}}function pG(n,t){let e=this.cache;e[0]!==t&amp;&amp;(n.uniform1ui(this.addr,t),e[0]=t)}function mG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&amp;&amp;(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Qn(e,t))return;n.uniform2uiv(this.addr,t),Kn(e,t)}}function gG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&amp;&amp;(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Qn(e,t))return;n.uniform3uiv(this.addr,t),Kn(e,t)}}function vG(n,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&amp;&amp;(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Qn(e,t))return;n.uniform4uiv(this.addr,t),Kn(e,t)}}function yG(n,t,e){let i=this.cache,a=e.allocateTextureUnit();i[0]!==a&amp;&amp;(n.uniform1i(this.addr,a),i[0]=a);let s;this.type===n.SAMPLER_2D_SHADOW?(NO.compareFunction=fx,s=NO):s=QO,e.setTexture2D(t||s,a)}function _G(n,t,e){let i=this.cache,a=e.allocateTextureUnit();i[0]!==a&amp;&amp;(n.uniform1i(this.addr,a),i[0]=a),e.setTexture3D(t||JO,a)}function xG(n,t,e){let i=this.cache,a=e.allocateTextureUnit();i[0]!==a&amp;&amp;(n.uniform1i(this.addr,a),i[0]=a),e.setTextureCube(t||$O,a)}function SG(n,t,e){let i=this.cache,a=e.allocateTextureUnit();i[0]!==a&amp;&amp;(n.uniform1i(this.addr,a),i[0]=a),e.setTexture2DArray(t||KO,a)}function MG(n){switch(n){case 5126:return iG;case 35664:return aG;case 35665:return sG;case 35666:return rG;case 35674:return oG;case 35675:return lG;case 35676:return uG;case 5124:case 35670:return cG;case 35667:case 35671:return fG;case 35668:case 35672:return hG;case 35669:case 35673:return dG;case 5125:return pG;case 36294:return mG;case 36295:return gG;case 36296:return vG;case 35678:case 36198:case 36298:case 36306:case 35682:return yG;case 35679:case 36299:case 36307:return _G;case 35680:case 36300:case 36308:case 36293:return xG;case 36289:case 36303:case 36311:case 36292:return SG}}function EG(n,t){n.uniform1fv(this.addr,t)}function bG(n,t){let e=wh(t,this.size,2);n.uniform2fv(this.addr,e)}function TG(n,t){let e=wh(t,this.size,3);n.uniform3fv(this.addr,e)}function AG(n,t){let e=wh(t,this.size,4);n.uniform4fv(this.addr,e)}function RG(n,t){let e=wh(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function CG(n,t){let e=wh(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function wG(n,t){let e=wh(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function DG(n,t){n.uniform1iv(this.addr,t)}function UG(n,t){n.uniform2iv(this.addr,t)}function NG(n,t){n.uniform3iv(this.addr,t)}function OG(n,t){n.uniform4iv(this.addr,t)}function LG(n,t){n.uniform1uiv(this.addr,t)}function zG(n,t){n.uniform2uiv(this.addr,t)}function BG(n,t){n.uniform3uiv(this.addr,t)}function PG(n,t){n.uniform4uiv(this.addr,t)}function IG(n,t,e){let i=this.cache,a=t.length,s=yx(e,a);Qn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==a;++o)e.setTexture2D(t[o]||QO,s[o])}function HG(n,t,e){let i=this.cache,a=t.length,s=yx(e,a);Qn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==a;++o)e.setTexture3D(t[o]||JO,s[o])}function FG(n,t,e){let i=this.cache,a=t.length,s=yx(e,a);Qn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==a;++o)e.setTextureCube(t[o]||$O,s[o])}function VG(n,t,e){let i=this.cache,a=t.length,s=yx(e,a);Qn(i,s)||(n.uniform1iv(this.addr,s),Kn(i,s));for(let o=0;o!==a;++o)e.setTexture2DArray(t[o]||KO,s[o])}function GG(n){switch(n){case 5126:return EG;case 35664:return bG;case 35665:return TG;case 35666:return AG;case 35674:return RG;case 35675:return CG;case 35676:return wG;case 5124:case 35670:return DG;case 35667:case 35671:return UG;case 35668:case 35672:return NG;case 35669:case 35673:return OG;case 5125:return LG;case 36294:return zG;case 36295:return BG;case 36296:return PG;case 35678:case 36198:case 36298:case 36306:case 35682:return IG;case 35679:case 36299:case 36307:return HG;case 35680:case 36300:case 36308:case 36293:return FG;case 36289:case 36303:case 36311:case 36292:return VG}}var WT=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=MG(e.type)}},kT=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=GG(e.type)}},ZT=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let a=this.seq;for(let s=0,o=a.length;s!==o;++s){let u=a[s];u.setValue(t,e[u.id],i)}}},YT=/(\w+)(\])?(\[|\.)?/g;function IO(n,t){n.seq.push(t),n.map[t.id]=t}function XG(n,t,e){let i=n.name,a=i.length;for(YT.lastIndex=0;;){let s=YT.exec(i),o=YT.lastIndex,u=s[1],c=s[2]===&quot;]&quot;,h=s[3];if(c&amp;&amp;(u=u|0),h===void 0||h===&quot;[&quot;&amp;&amp;o+2===a){IO(e,h===void 0?new WT(u,n,t):new kT(u,n,t));break}else{let m=e.map[u];m===void 0&amp;&amp;(m=new ZT(u),IO(e,m)),e=m}}}var Ch=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a&lt;i;++a){let s=t.getActiveUniform(e,a),o=t.getUniformLocation(e,s.name);XG(s,o,this)}}setValue(t,e,i,a){let s=this.map[e];s!==void 0&amp;&amp;s.setValue(t,i,a)}setOptional(t,e,i){let a=e[i];a!==void 0&amp;&amp;this.setValue(t,i,a)}static upload(t,e,i,a){for(let s=0,o=e.length;s!==o;++s){let u=e[s],c=i[u.id];c.needsUpdate!==!1&amp;&amp;u.setValue(t,c.value,a)}}static seqWithValue(t,e){let i=[];for(let a=0,s=t.length;a!==s;++a){let o=t[a];o.id in e&amp;&amp;i.push(o)}return i}};function HO(n,t,e){let i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}var qG=37297,YG=0;function WG(n,t){let e=n.split(`
<a href="#l3749" class="line" id="l3749">   3749</a> `),i=[],a=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=a;o&lt;s;o++){let u=o+1;i.push(`${u===t?&quot;&gt;&quot;:&quot; &quot;} ${u}: ${e[o]}`)}return i.join(`
<a href="#l3750" class="line" id="l3750">   3750</a> `)}var FO=new ge;function kG(n){we._getMatrix(FO,we.workingColorSpace,n);let t=`mat3( ${FO.elements.map(e=&gt;e.toFixed(4))} )`;switch(we.getTransfer(n)){case Ff:return[t,&quot;LinearTransferOETF&quot;];case We:return[t,&quot;sRGBTransferOETF&quot;];default:return console.warn(&quot;THREE.WebGLProgram: Unsupported color space: &quot;,n),[t,&quot;LinearTransferOETF&quot;]}}function VO(n,t,e){let i=n.getShaderParameter(t,n.COMPILE_STATUS),s=(n.getShaderInfoLog(t)||&quot;&quot;).trim();if(i&amp;&amp;s===&quot;&quot;)return&quot;&quot;;let o=/ERROR: 0:(\d+)/.exec(s);if(o){let u=parseInt(o[1]);return e.toUpperCase()+`
<a href="#l3751" class="line" id="l3751">   3751</a> 
<a href="#l3752" class="line" id="l3752">   3752</a> `+s+`
<a href="#l3753" class="line" id="l3753">   3753</a> 
<a href="#l3754" class="line" id="l3754">   3754</a> `+WG(n.getShaderSource(t),u)}else return s}function ZG(n,t){let e=kG(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,&quot;}&quot;].join(`
<a href="#l3755" class="line" id="l3755">   3755</a> `)}function jG(n,t){let e;switch(t){case cT:e=&quot;Linear&quot;;break;case fT:e=&quot;Reinhard&quot;;break;case hT:e=&quot;Cineon&quot;;break;case ng:e=&quot;ACESFilmic&quot;;break;case pT:e=&quot;AgX&quot;;break;case mT:e=&quot;Neutral&quot;;break;case dT:e=&quot;Custom&quot;;break;default:console.warn(&quot;THREE.WebGLProgram: Unsupported toneMapping:&quot;,t),e=&quot;Linear&quot;}return&quot;vec3 &quot;+n+&quot;( vec3 color ) { return &quot;+e+&quot;ToneMapping( color ); }&quot;}var gx=new B;function QG(){we.getLuminanceCoefficients(gx);let n=gx.x.toFixed(4),t=gx.y.toFixed(4),e=gx.z.toFixed(4);return[&quot;float luminance( const in vec3 rgb ) {&quot;,`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,&quot;	return dot( weights, rgb );&quot;,&quot;}&quot;].join(`
<a href="#l3756" class="line" id="l3756">   3756</a> `)}function KG(n){return[n.extensionClipCullDistance?&quot;#extension GL_ANGLE_clip_cull_distance : require&quot;:&quot;&quot;,n.extensionMultiDraw?&quot;#extension GL_ANGLE_multi_draw : require&quot;:&quot;&quot;].filter(Pg).join(`
<a href="#l3757" class="line" id="l3757">   3757</a> `)}function JG(n){let t=[];for(let e in n){let i=n[e];i!==!1&amp;&amp;t.push(&quot;#define &quot;+e+&quot; &quot;+i)}return t.join(`
<a href="#l3758" class="line" id="l3758">   3758</a> `)}function $G(n,t){let e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let a=0;a&lt;i;a++){let s=n.getActiveAttrib(t,a),o=s.name,u=1;s.type===n.FLOAT_MAT2&amp;&amp;(u=2),s.type===n.FLOAT_MAT3&amp;&amp;(u=3),s.type===n.FLOAT_MAT4&amp;&amp;(u=4),e[o]={type:s.type,location:n.getAttribLocation(t,o),locationSize:u}}return e}function Pg(n){return n!==&quot;&quot;}function GO(n,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function XO(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var t8=/^[ \t]*#include +&lt;([\w\d./]+)&gt;/gm;function jT(n){return n.replace(t8,n8)}var e8=new Map;function n8(n,t){let e=xe[t];if(e===void 0){let i=e8.get(t);if(i!==void 0)e=xe[i],console.warn(&#39;THREE.WebGLRenderer: Shader chunk &quot;%s&quot; has been deprecated. Use &quot;%s&quot; instead.&#39;,t,i);else throw new Error(&quot;Can not resolve #include &lt;&quot;+t+&quot;&gt;&quot;)}return jT(e)}var i8=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*&lt;\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qO(n){return n.replace(i8,a8)}function a8(n,t,e,i){let a=&quot;&quot;;for(let s=parseInt(t);s&lt;parseInt(e);s++)a+=i.replace(/\[\s*i\s*\]/g,&quot;[ &quot;+s+&quot; ]&quot;).replace(/UNROLLED_LOOP_INDEX/g,s);return a}function YO(n){let t=`precision ${n.precision} float;
<a href="#l3759" class="line" id="l3759">   3759</a> 	precision ${n.precision} int;
<a href="#l3760" class="line" id="l3760">   3760</a> 	precision ${n.precision} sampler2D;
<a href="#l3761" class="line" id="l3761">   3761</a> 	precision ${n.precision} samplerCube;
<a href="#l3762" class="line" id="l3762">   3762</a> 	precision ${n.precision} sampler3D;
<a href="#l3763" class="line" id="l3763">   3763</a> 	precision ${n.precision} sampler2DArray;
<a href="#l3764" class="line" id="l3764">   3764</a> 	precision ${n.precision} sampler2DShadow;
<a href="#l3765" class="line" id="l3765">   3765</a> 	precision ${n.precision} samplerCubeShadow;
<a href="#l3766" class="line" id="l3766">   3766</a> 	precision ${n.precision} sampler2DArrayShadow;
<a href="#l3767" class="line" id="l3767">   3767</a> 	precision ${n.precision} isampler2D;
<a href="#l3768" class="line" id="l3768">   3768</a> 	precision ${n.precision} isampler3D;
<a href="#l3769" class="line" id="l3769">   3769</a> 	precision ${n.precision} isamplerCube;
<a href="#l3770" class="line" id="l3770">   3770</a> 	precision ${n.precision} isampler2DArray;
<a href="#l3771" class="line" id="l3771">   3771</a> 	precision ${n.precision} usampler2D;
<a href="#l3772" class="line" id="l3772">   3772</a> 	precision ${n.precision} usampler3D;
<a href="#l3773" class="line" id="l3773">   3773</a> 	precision ${n.precision} usamplerCube;
<a href="#l3774" class="line" id="l3774">   3774</a> 	precision ${n.precision} usampler2DArray;
<a href="#l3775" class="line" id="l3775">   3775</a> 	`;return n.precision===&quot;highp&quot;?t+=`
<a href="#l3776" class="line" id="l3776">   3776</a> #define HIGH_PRECISION`:n.precision===&quot;mediump&quot;?t+=`
<a href="#l3777" class="line" id="l3777">   3777</a> #define MEDIUM_PRECISION`:n.precision===&quot;lowp&quot;&amp;&amp;(t+=`
<a href="#l3778" class="line" id="l3778">   3778</a> #define LOW_PRECISION`),t}function s8(n){let t=&quot;SHADOWMAP_TYPE_BASIC&quot;;return n.shadowMapType===mh?t=&quot;SHADOWMAP_TYPE_PCF&quot;:n.shadowMapType===Nu?t=&quot;SHADOWMAP_TYPE_PCF_SOFT&quot;:n.shadowMapType===Pa&amp;&amp;(t=&quot;SHADOWMAP_TYPE_VSM&quot;),t}function r8(n){let t=&quot;ENVMAP_TYPE_CUBE&quot;;if(n.envMap)switch(n.envMapMode){case rr:case to:t=&quot;ENVMAP_TYPE_CUBE&quot;;break;case Ou:t=&quot;ENVMAP_TYPE_CUBE_UV&quot;;break}return t}function o8(n){let t=&quot;ENVMAP_MODE_REFLECTION&quot;;if(n.envMap)switch(n.envMapMode){case to:t=&quot;ENVMAP_MODE_REFRACTION&quot;;break}return t}function l8(n){let t=&quot;ENVMAP_BLENDING_NONE&quot;;if(n.envMap)switch(n.combine){case gh:t=&quot;ENVMAP_BLENDING_MULTIPLY&quot;;break;case lT:t=&quot;ENVMAP_BLENDING_MIX&quot;;break;case uT:t=&quot;ENVMAP_BLENDING_ADD&quot;;break}return t}function u8(n){let t=n.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:i,maxMip:e}}function c8(n,t,e,i){let a=n.getContext(),s=e.defines,o=e.vertexShader,u=e.fragmentShader,c=s8(e),h=r8(e),d=o8(e),m=l8(e),g=u8(e),y=KG(e),x=JG(s),b=a.createProgram(),M,v,S=e.glslVersion?&quot;#version &quot;+e.glslVersion+`
<a href="#l3779" class="line" id="l3779">   3779</a> `:&quot;&quot;;e.isRawShaderMaterial?(M=[&quot;#define SHADER_TYPE &quot;+e.shaderType,&quot;#define SHADER_NAME &quot;+e.shaderName,x].filter(Pg).join(`
<a href="#l3780" class="line" id="l3780">   3780</a> `),M.length&gt;0&amp;&amp;(M+=`
<a href="#l3781" class="line" id="l3781">   3781</a> `),v=[&quot;#define SHADER_TYPE &quot;+e.shaderType,&quot;#define SHADER_NAME &quot;+e.shaderName,x].filter(Pg).join(`
<a href="#l3782" class="line" id="l3782">   3782</a> `),v.length&gt;0&amp;&amp;(v+=`
<a href="#l3783" class="line" id="l3783">   3783</a> `)):(M=[YO(e),&quot;#define SHADER_TYPE &quot;+e.shaderType,&quot;#define SHADER_NAME &quot;+e.shaderName,x,e.extensionClipCullDistance?&quot;#define USE_CLIP_DISTANCE&quot;:&quot;&quot;,e.batching?&quot;#define USE_BATCHING&quot;:&quot;&quot;,e.batchingColor?&quot;#define USE_BATCHING_COLOR&quot;:&quot;&quot;,e.instancing?&quot;#define USE_INSTANCING&quot;:&quot;&quot;,e.instancingColor?&quot;#define USE_INSTANCING_COLOR&quot;:&quot;&quot;,e.instancingMorph?&quot;#define USE_INSTANCING_MORPH&quot;:&quot;&quot;,e.useFog&amp;&amp;e.fog?&quot;#define USE_FOG&quot;:&quot;&quot;,e.useFog&amp;&amp;e.fogExp2?&quot;#define FOG_EXP2&quot;:&quot;&quot;,e.map?&quot;#define USE_MAP&quot;:&quot;&quot;,e.envMap?&quot;#define USE_ENVMAP&quot;:&quot;&quot;,e.envMap?&quot;#define &quot;+d:&quot;&quot;,e.lightMap?&quot;#define USE_LIGHTMAP&quot;:&quot;&quot;,e.aoMap?&quot;#define USE_AOMAP&quot;:&quot;&quot;,e.bumpMap?&quot;#define USE_BUMPMAP&quot;:&quot;&quot;,e.normalMap?&quot;#define USE_NORMALMAP&quot;:&quot;&quot;,e.normalMapObjectSpace?&quot;#define USE_NORMALMAP_OBJECTSPACE&quot;:&quot;&quot;,e.normalMapTangentSpace?&quot;#define USE_NORMALMAP_TANGENTSPACE&quot;:&quot;&quot;,e.displacementMap?&quot;#define USE_DISPLACEMENTMAP&quot;:&quot;&quot;,e.emissiveMap?&quot;#define USE_EMISSIVEMAP&quot;:&quot;&quot;,e.anisotropy?&quot;#define USE_ANISOTROPY&quot;:&quot;&quot;,e.anisotropyMap?&quot;#define USE_ANISOTROPYMAP&quot;:&quot;&quot;,e.clearcoatMap?&quot;#define USE_CLEARCOATMAP&quot;:&quot;&quot;,e.clearcoatRoughnessMap?&quot;#define USE_CLEARCOAT_ROUGHNESSMAP&quot;:&quot;&quot;,e.clearcoatNormalMap?&quot;#define USE_CLEARCOAT_NORMALMAP&quot;:&quot;&quot;,e.iridescenceMap?&quot;#define USE_IRIDESCENCEMAP&quot;:&quot;&quot;,e.iridescenceThicknessMap?&quot;#define USE_IRIDESCENCE_THICKNESSMAP&quot;:&quot;&quot;,e.specularMap?&quot;#define USE_SPECULARMAP&quot;:&quot;&quot;,e.specularColorMap?&quot;#define USE_SPECULAR_COLORMAP&quot;:&quot;&quot;,e.specularIntensityMap?&quot;#define USE_SPECULAR_INTENSITYMAP&quot;:&quot;&quot;,e.roughnessMap?&quot;#define USE_ROUGHNESSMAP&quot;:&quot;&quot;,e.metalnessMap?&quot;#define USE_METALNESSMAP&quot;:&quot;&quot;,e.alphaMap?&quot;#define USE_ALPHAMAP&quot;:&quot;&quot;,e.alphaHash?&quot;#define USE_ALPHAHASH&quot;:&quot;&quot;,e.transmission?&quot;#define USE_TRANSMISSION&quot;:&quot;&quot;,e.transmissionMap?&quot;#define USE_TRANSMISSIONMAP&quot;:&quot;&quot;,e.thicknessMap?&quot;#define USE_THICKNESSMAP&quot;:&quot;&quot;,e.sheenColorMap?&quot;#define USE_SHEEN_COLORMAP&quot;:&quot;&quot;,e.sheenRoughnessMap?&quot;#define USE_SHEEN_ROUGHNESSMAP&quot;:&quot;&quot;,e.mapUv?&quot;#define MAP_UV &quot;+e.mapUv:&quot;&quot;,e.alphaMapUv?&quot;#define ALPHAMAP_UV &quot;+e.alphaMapUv:&quot;&quot;,e.lightMapUv?&quot;#define LIGHTMAP_UV &quot;+e.lightMapUv:&quot;&quot;,e.aoMapUv?&quot;#define AOMAP_UV &quot;+e.aoMapUv:&quot;&quot;,e.emissiveMapUv?&quot;#define EMISSIVEMAP_UV &quot;+e.emissiveMapUv:&quot;&quot;,e.bumpMapUv?&quot;#define BUMPMAP_UV &quot;+e.bumpMapUv:&quot;&quot;,e.normalMapUv?&quot;#define NORMALMAP_UV &quot;+e.normalMapUv:&quot;&quot;,e.displacementMapUv?&quot;#define DISPLACEMENTMAP_UV &quot;+e.displacementMapUv:&quot;&quot;,e.metalnessMapUv?&quot;#define METALNESSMAP_UV &quot;+e.metalnessMapUv:&quot;&quot;,e.roughnessMapUv?&quot;#define ROUGHNESSMAP_UV &quot;+e.roughnessMapUv:&quot;&quot;,e.anisotropyMapUv?&quot;#define ANISOTROPYMAP_UV &quot;+e.anisotropyMapUv:&quot;&quot;,e.clearcoatMapUv?&quot;#define CLEARCOATMAP_UV &quot;+e.clearcoatMapUv:&quot;&quot;,e.clearcoatNormalMapUv?&quot;#define CLEARCOAT_NORMALMAP_UV &quot;+e.clearcoatNormalMapUv:&quot;&quot;,e.clearcoatRoughnessMapUv?&quot;#define CLEARCOAT_ROUGHNESSMAP_UV &quot;+e.clearcoatRoughnessMapUv:&quot;&quot;,e.iridescenceMapUv?&quot;#define IRIDESCENCEMAP_UV &quot;+e.iridescenceMapUv:&quot;&quot;,e.iridescenceThicknessMapUv?&quot;#define IRIDESCENCE_THICKNESSMAP_UV &quot;+e.iridescenceThicknessMapUv:&quot;&quot;,e.sheenColorMapUv?&quot;#define SHEEN_COLORMAP_UV &quot;+e.sheenColorMapUv:&quot;&quot;,e.sheenRoughnessMapUv?&quot;#define SHEEN_ROUGHNESSMAP_UV &quot;+e.sheenRoughnessMapUv:&quot;&quot;,e.specularMapUv?&quot;#define SPECULARMAP_UV &quot;+e.specularMapUv:&quot;&quot;,e.specularColorMapUv?&quot;#define SPECULAR_COLORMAP_UV &quot;+e.specularColorMapUv:&quot;&quot;,e.specularIntensityMapUv?&quot;#define SPECULAR_INTENSITYMAP_UV &quot;+e.specularIntensityMapUv:&quot;&quot;,e.transmissionMapUv?&quot;#define TRANSMISSIONMAP_UV &quot;+e.transmissionMapUv:&quot;&quot;,e.thicknessMapUv?&quot;#define THICKNESSMAP_UV &quot;+e.thicknessMapUv:&quot;&quot;,e.vertexTangents&amp;&amp;e.flatShading===!1?&quot;#define USE_TANGENT&quot;:&quot;&quot;,e.vertexColors?&quot;#define USE_COLOR&quot;:&quot;&quot;,e.vertexAlphas?&quot;#define USE_COLOR_ALPHA&quot;:&quot;&quot;,e.vertexUv1s?&quot;#define USE_UV1&quot;:&quot;&quot;,e.vertexUv2s?&quot;#define USE_UV2&quot;:&quot;&quot;,e.vertexUv3s?&quot;#define USE_UV3&quot;:&quot;&quot;,e.pointsUvs?&quot;#define USE_POINTS_UV&quot;:&quot;&quot;,e.flatShading?&quot;#define FLAT_SHADED&quot;:&quot;&quot;,e.skinning?&quot;#define USE_SKINNING&quot;:&quot;&quot;,e.morphTargets?&quot;#define USE_MORPHTARGETS&quot;:&quot;&quot;,e.morphNormals&amp;&amp;e.flatShading===!1?&quot;#define USE_MORPHNORMALS&quot;:&quot;&quot;,e.morphColors?&quot;#define USE_MORPHCOLORS&quot;:&quot;&quot;,e.morphTargetsCount&gt;0?&quot;#define MORPHTARGETS_TEXTURE_STRIDE &quot;+e.morphTextureStride:&quot;&quot;,e.morphTargetsCount&gt;0?&quot;#define MORPHTARGETS_COUNT &quot;+e.morphTargetsCount:&quot;&quot;,e.doubleSided?&quot;#define DOUBLE_SIDED&quot;:&quot;&quot;,e.flipSided?&quot;#define FLIP_SIDED&quot;:&quot;&quot;,e.shadowMapEnabled?&quot;#define USE_SHADOWMAP&quot;:&quot;&quot;,e.shadowMapEnabled?&quot;#define &quot;+c:&quot;&quot;,e.sizeAttenuation?&quot;#define USE_SIZEATTENUATION&quot;:&quot;&quot;,e.numLightProbes&gt;0?&quot;#define USE_LIGHT_PROBES&quot;:&quot;&quot;,e.logarithmicDepthBuffer?&quot;#define USE_LOGDEPTHBUF&quot;:&quot;&quot;,e.reversedDepthBuffer?&quot;#define USE_REVERSEDEPTHBUF&quot;:&quot;&quot;,&quot;uniform mat4 modelMatrix;&quot;,&quot;uniform mat4 modelViewMatrix;&quot;,&quot;uniform mat4 projectionMatrix;&quot;,&quot;uniform mat4 viewMatrix;&quot;,&quot;uniform mat3 normalMatrix;&quot;,&quot;uniform vec3 cameraPosition;&quot;,&quot;uniform bool isOrthographic;&quot;,&quot;#ifdef USE_INSTANCING&quot;,&quot;	attribute mat4 instanceMatrix;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_INSTANCING_COLOR&quot;,&quot;	attribute vec3 instanceColor;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_INSTANCING_MORPH&quot;,&quot;	uniform sampler2D morphTexture;&quot;,&quot;#endif&quot;,&quot;attribute vec3 position;&quot;,&quot;attribute vec3 normal;&quot;,&quot;attribute vec2 uv;&quot;,&quot;#ifdef USE_UV1&quot;,&quot;	attribute vec2 uv1;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_UV2&quot;,&quot;	attribute vec2 uv2;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_UV3&quot;,&quot;	attribute vec2 uv3;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_TANGENT&quot;,&quot;	attribute vec4 tangent;&quot;,&quot;#endif&quot;,&quot;#if defined( USE_COLOR_ALPHA )&quot;,&quot;	attribute vec4 color;&quot;,&quot;#elif defined( USE_COLOR )&quot;,&quot;	attribute vec3 color;&quot;,&quot;#endif&quot;,&quot;#ifdef USE_SKINNING&quot;,&quot;	attribute vec4 skinIndex;&quot;,&quot;	attribute vec4 skinWeight;&quot;,&quot;#endif&quot;,`
<a href="#l3784" class="line" id="l3784">   3784</a> `].filter(Pg).join(`
<a href="#l3785" class="line" id="l3785">   3785</a> `),v=[YO(e),&quot;#define SHADER_TYPE &quot;+e.shaderType,&quot;#define SHADER_NAME &quot;+e.shaderName,x,e.useFog&amp;&amp;e.fog?&quot;#define USE_FOG&quot;:&quot;&quot;,e.useFog&amp;&amp;e.fogExp2?&quot;#define FOG_EXP2&quot;:&quot;&quot;,e.alphaToCoverage?&quot;#define ALPHA_TO_COVERAGE&quot;:&quot;&quot;,e.map?&quot;#define USE_MAP&quot;:&quot;&quot;,e.matcap?&quot;#define USE_MATCAP&quot;:&quot;&quot;,e.envMap?&quot;#define USE_ENVMAP&quot;:&quot;&quot;,e.envMap?&quot;#define &quot;+h:&quot;&quot;,e.envMap?&quot;#define &quot;+d:&quot;&quot;,e.envMap?&quot;#define &quot;+m:&quot;&quot;,g?&quot;#define CUBEUV_TEXEL_WIDTH &quot;+g.texelWidth:&quot;&quot;,g?&quot;#define CUBEUV_TEXEL_HEIGHT &quot;+g.texelHeight:&quot;&quot;,g?&quot;#define CUBEUV_MAX_MIP &quot;+g.maxMip+&quot;.0&quot;:&quot;&quot;,e.lightMap?&quot;#define USE_LIGHTMAP&quot;:&quot;&quot;,e.aoMap?&quot;#define USE_AOMAP&quot;:&quot;&quot;,e.bumpMap?&quot;#define USE_BUMPMAP&quot;:&quot;&quot;,e.normalMap?&quot;#define USE_NORMALMAP&quot;:&quot;&quot;,e.normalMapObjectSpace?&quot;#define USE_NORMALMAP_OBJECTSPACE&quot;:&quot;&quot;,e.normalMapTangentSpace?&quot;#define USE_NORMALMAP_TANGENTSPACE&quot;:&quot;&quot;,e.emissiveMap?&quot;#define USE_EMISSIVEMAP&quot;:&quot;&quot;,e.anisotropy?&quot;#define USE_ANISOTROPY&quot;:&quot;&quot;,e.anisotropyMap?&quot;#define USE_ANISOTROPYMAP&quot;:&quot;&quot;,e.clearcoat?&quot;#define USE_CLEARCOAT&quot;:&quot;&quot;,e.clearcoatMap?&quot;#define USE_CLEARCOATMAP&quot;:&quot;&quot;,e.clearcoatRoughnessMap?&quot;#define USE_CLEARCOAT_ROUGHNESSMAP&quot;:&quot;&quot;,e.clearcoatNormalMap?&quot;#define USE_CLEARCOAT_NORMALMAP&quot;:&quot;&quot;,e.dispersion?&quot;#define USE_DISPERSION&quot;:&quot;&quot;,e.iridescence?&quot;#define USE_IRIDESCENCE&quot;:&quot;&quot;,e.iridescenceMap?&quot;#define USE_IRIDESCENCEMAP&quot;:&quot;&quot;,e.iridescenceThicknessMap?&quot;#define USE_IRIDESCENCE_THICKNESSMAP&quot;:&quot;&quot;,e.specularMap?&quot;#define USE_SPECULARMAP&quot;:&quot;&quot;,e.specularColorMap?&quot;#define USE_SPECULAR_COLORMAP&quot;:&quot;&quot;,e.specularIntensityMap?&quot;#define USE_SPECULAR_INTENSITYMAP&quot;:&quot;&quot;,e.roughnessMap?&quot;#define USE_ROUGHNESSMAP&quot;:&quot;&quot;,e.metalnessMap?&quot;#define USE_METALNESSMAP&quot;:&quot;&quot;,e.alphaMap?&quot;#define USE_ALPHAMAP&quot;:&quot;&quot;,e.alphaTest?&quot;#define USE_ALPHATEST&quot;:&quot;&quot;,e.alphaHash?&quot;#define USE_ALPHAHASH&quot;:&quot;&quot;,e.sheen?&quot;#define USE_SHEEN&quot;:&quot;&quot;,e.sheenColorMap?&quot;#define USE_SHEEN_COLORMAP&quot;:&quot;&quot;,e.sheenRoughnessMap?&quot;#define USE_SHEEN_ROUGHNESSMAP&quot;:&quot;&quot;,e.transmission?&quot;#define USE_TRANSMISSION&quot;:&quot;&quot;,e.transmissionMap?&quot;#define USE_TRANSMISSIONMAP&quot;:&quot;&quot;,e.thicknessMap?&quot;#define USE_THICKNESSMAP&quot;:&quot;&quot;,e.vertexTangents&amp;&amp;e.flatShading===!1?&quot;#define USE_TANGENT&quot;:&quot;&quot;,e.vertexColors||e.instancingColor||e.batchingColor?&quot;#define USE_COLOR&quot;:&quot;&quot;,e.vertexAlphas?&quot;#define USE_COLOR_ALPHA&quot;:&quot;&quot;,e.vertexUv1s?&quot;#define USE_UV1&quot;:&quot;&quot;,e.vertexUv2s?&quot;#define USE_UV2&quot;:&quot;&quot;,e.vertexUv3s?&quot;#define USE_UV3&quot;:&quot;&quot;,e.pointsUvs?&quot;#define USE_POINTS_UV&quot;:&quot;&quot;,e.gradientMap?&quot;#define USE_GRADIENTMAP&quot;:&quot;&quot;,e.flatShading?&quot;#define FLAT_SHADED&quot;:&quot;&quot;,e.doubleSided?&quot;#define DOUBLE_SIDED&quot;:&quot;&quot;,e.flipSided?&quot;#define FLIP_SIDED&quot;:&quot;&quot;,e.shadowMapEnabled?&quot;#define USE_SHADOWMAP&quot;:&quot;&quot;,e.shadowMapEnabled?&quot;#define &quot;+c:&quot;&quot;,e.premultipliedAlpha?&quot;#define PREMULTIPLIED_ALPHA&quot;:&quot;&quot;,e.numLightProbes&gt;0?&quot;#define USE_LIGHT_PROBES&quot;:&quot;&quot;,e.decodeVideoTexture?&quot;#define DECODE_VIDEO_TEXTURE&quot;:&quot;&quot;,e.decodeVideoTextureEmissive?&quot;#define DECODE_VIDEO_TEXTURE_EMISSIVE&quot;:&quot;&quot;,e.logarithmicDepthBuffer?&quot;#define USE_LOGDEPTHBUF&quot;:&quot;&quot;,e.reversedDepthBuffer?&quot;#define USE_REVERSEDEPTHBUF&quot;:&quot;&quot;,&quot;uniform mat4 viewMatrix;&quot;,&quot;uniform vec3 cameraPosition;&quot;,&quot;uniform bool isOrthographic;&quot;,e.toneMapping!==us?&quot;#define TONE_MAPPING&quot;:&quot;&quot;,e.toneMapping!==us?xe.tonemapping_pars_fragment:&quot;&quot;,e.toneMapping!==us?jG(&quot;toneMapping&quot;,e.toneMapping):&quot;&quot;,e.dithering?&quot;#define DITHERING&quot;:&quot;&quot;,e.opaque?&quot;#define OPAQUE&quot;:&quot;&quot;,xe.colorspace_pars_fragment,ZG(&quot;linearToOutputTexel&quot;,e.outputColorSpace),QG(),e.useDepthPacking?&quot;#define DEPTH_PACKING &quot;+e.depthPacking:&quot;&quot;,`
<a href="#l3786" class="line" id="l3786">   3786</a> `].filter(Pg).join(`
<a href="#l3787" class="line" id="l3787">   3787</a> `)),o=jT(o),o=GO(o,e),o=XO(o,e),u=jT(u),u=GO(u,e),u=XO(u,e),o=qO(o),u=qO(u),e.isRawShaderMaterial!==!0&amp;&amp;(S=`#version 300 es
<a href="#l3788" class="line" id="l3788">   3788</a> `,M=[y,&quot;#define attribute in&quot;,&quot;#define varying out&quot;,&quot;#define texture2D texture&quot;].join(`
<a href="#l3789" class="line" id="l3789">   3789</a> `)+`
<a href="#l3790" class="line" id="l3790">   3790</a> `+M,v=[&quot;#define varying in&quot;,e.glslVersion===hx?&quot;&quot;:&quot;layout(location = 0) out highp vec4 pc_fragColor;&quot;,e.glslVersion===hx?&quot;&quot;:&quot;#define gl_FragColor pc_fragColor&quot;,&quot;#define gl_FragDepthEXT gl_FragDepth&quot;,&quot;#define texture2D texture&quot;,&quot;#define textureCube texture&quot;,&quot;#define texture2DProj textureProj&quot;,&quot;#define texture2DLodEXT textureLod&quot;,&quot;#define texture2DProjLodEXT textureProjLod&quot;,&quot;#define textureCubeLodEXT textureLod&quot;,&quot;#define texture2DGradEXT textureGrad&quot;,&quot;#define texture2DProjGradEXT textureProjGrad&quot;,&quot;#define textureCubeGradEXT textureGrad&quot;].join(`
<a href="#l3791" class="line" id="l3791">   3791</a> `)+`
<a href="#l3792" class="line" id="l3792">   3792</a> `+v);let E=S+M+o,T=S+v+u,w=HO(a,a.VERTEX_SHADER,E),U=HO(a,a.FRAGMENT_SHADER,T);a.attachShader(b,w),a.attachShader(b,U),e.index0AttributeName!==void 0?a.bindAttribLocation(b,0,e.index0AttributeName):e.morphTargets===!0&amp;&amp;a.bindAttribLocation(b,0,&quot;position&quot;),a.linkProgram(b);function O(P){if(n.debug.checkShaderErrors){let j=a.getProgramInfoLog(b)||&quot;&quot;,X=a.getShaderInfoLog(w)||&quot;&quot;,Z=a.getShaderInfoLog(U)||&quot;&quot;,st=j.trim(),et=X.trim(),mt=Z.trim(),K=!0,_t=!0;if(a.getProgramParameter(b,a.LINK_STATUS)===!1)if(K=!1,typeof n.debug.onShaderError==&quot;function&quot;)n.debug.onShaderError(a,b,w,U);else{let Ut=VO(a,w,&quot;vertex&quot;),xt=VO(a,U,&quot;fragment&quot;);console.error(&quot;THREE.WebGLProgram: Shader Error &quot;+a.getError()+&quot; - VALIDATE_STATUS &quot;+a.getProgramParameter(b,a.VALIDATE_STATUS)+`
<a href="#l3793" class="line" id="l3793">   3793</a> 
<a href="#l3794" class="line" id="l3794">   3794</a> Material Name: `+P.name+`
<a href="#l3795" class="line" id="l3795">   3795</a> Material Type: `+P.type+`
<a href="#l3796" class="line" id="l3796">   3796</a> 
<a href="#l3797" class="line" id="l3797">   3797</a> Program Info Log: `+st+`
<a href="#l3798" class="line" id="l3798">   3798</a> `+Ut+`
<a href="#l3799" class="line" id="l3799">   3799</a> `+xt)}else st!==&quot;&quot;?console.warn(&quot;THREE.WebGLProgram: Program Info Log:&quot;,st):(et===&quot;&quot;||mt===&quot;&quot;)&amp;&amp;(_t=!1);_t&amp;&amp;(P.diagnostics={runnable:K,programLog:st,vertexShader:{log:et,prefix:M},fragmentShader:{log:mt,prefix:v}})}a.deleteShader(w),a.deleteShader(U),z=new Ch(a,b),C=$G(a,b)}let z;this.getUniforms=function(){return z===void 0&amp;&amp;O(this),z};let C;this.getAttributes=function(){return C===void 0&amp;&amp;O(this),C};let R=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return R===!1&amp;&amp;(R=a.getProgramParameter(b,qG)),R},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(b),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=YG++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=w,this.fragmentShader=U,this}var f8=0,QT=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,a=this._getShaderStage(e),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return o.has(a)===!1&amp;&amp;(o.add(a),a.usedTimes++),o.has(s)===!1&amp;&amp;(o.add(s),s.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let i of e)i.usedTimes--,i.usedTimes===0&amp;&amp;this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return i===void 0&amp;&amp;(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return i===void 0&amp;&amp;(i=new KT(t),e.set(t,i)),i}},KT=class{constructor(t){this.id=f8++,this.code=t,this.usedTimes=0}};function h8(n,t,e,i,a,s,o){let u=new nr,c=new QT,h=new Set,d=[],m=a.logarithmicDepthBuffer,g=a.vertexTextures,y=a.precision,x={MeshDepthMaterial:&quot;depth&quot;,MeshDistanceMaterial:&quot;distanceRGBA&quot;,MeshNormalMaterial:&quot;normal&quot;,MeshBasicMaterial:&quot;basic&quot;,MeshLambertMaterial:&quot;lambert&quot;,MeshPhongMaterial:&quot;phong&quot;,MeshToonMaterial:&quot;toon&quot;,MeshStandardMaterial:&quot;physical&quot;,MeshPhysicalMaterial:&quot;physical&quot;,MeshMatcapMaterial:&quot;matcap&quot;,LineBasicMaterial:&quot;basic&quot;,LineDashedMaterial:&quot;dashed&quot;,PointsMaterial:&quot;points&quot;,ShadowMaterial:&quot;shadow&quot;,SpriteMaterial:&quot;sprite&quot;};function b(C){return h.add(C),C===0?&quot;uv&quot;:`uv${C}`}function M(C,R,P,j,X){let Z=j.fog,st=X.geometry,et=C.isMeshStandardMaterial?j.environment:null,mt=(C.isMeshStandardMaterial?e:t).get(C.envMap||et),K=mt&amp;&amp;mt.mapping===Ou?mt.image.height:null,_t=x[C.type];C.precision!==null&amp;&amp;(y=a.getMaxPrecision(C.precision),y!==C.precision&amp;&amp;console.warn(&quot;THREE.WebGLProgram.getParameters:&quot;,C.precision,&quot;not supported, using&quot;,y,&quot;instead.&quot;));let Ut=st.morphAttributes.position||st.morphAttributes.normal||st.morphAttributes.color,xt=Ut!==void 0?Ut.length:0,It=0;st.morphAttributes.position!==void 0&amp;&amp;(It=1),st.morphAttributes.normal!==void 0&amp;&amp;(It=2),st.morphAttributes.color!==void 0&amp;&amp;(It=3);let se,Qt,it,wt;if(_t){let Le=Ns[_t];se=Le.vertexShader,Qt=Le.fragmentShader}else se=C.vertexShader,Qt=C.fragmentShader,c.update(C),it=c.getVertexShaderID(C),wt=c.getFragmentShaderID(C);let bt=n.getRenderTarget(),Jt=n.state.buffers.depth.getReversed(),Zt=X.isInstancedMesh===!0,te=X.isBatchedMesh===!0,ke=!!C.map,re=!!C.matcap,H=!!mt,ht=!!C.aoMap,rt=!!C.lightMap,pt=!!C.bumpMap,lt=!!C.normalMap,Ct=!!C.displacementMap,dt=!!C.emissiveMap,Rt=!!C.metalnessMap,de=!!C.roughnessMap,ue=C.anisotropy&gt;0,I=C.clearcoat&gt;0,D=C.dispersion&gt;0,k=C.iridescence&gt;0,nt=C.sheen&gt;0,gt=C.transmission&gt;0,at=ue&amp;&amp;!!C.anisotropyMap,jt=I&amp;&amp;!!C.clearcoatMap,Tt=I&amp;&amp;!!C.clearcoatNormalMap,Wt=I&amp;&amp;!!C.clearcoatRoughnessMap,Ft=k&amp;&amp;!!C.iridescenceMap,vt=k&amp;&amp;!!C.iridescenceThicknessMap,Ot=nt&amp;&amp;!!C.sheenColorMap,ne=nt&amp;&amp;!!C.sheenRoughnessMap,kt=!!C.specularMap,Nt=!!C.specularColorMap,me=!!C.specularIntensityMap,G=gt&amp;&amp;!!C.transmissionMap,Mt=gt&amp;&amp;!!C.thicknessMap,Dt=!!C.gradientMap,Gt=!!C.alphaMap,St=C.alphaTest&gt;0,ut=!!C.alphaHash,qt=!!C.extensions,oe=us;C.toneMapped&amp;&amp;(bt===null||bt.isXRRenderTarget===!0)&amp;&amp;(oe=n.toneMapping);let He={shaderID:_t,shaderType:C.type,shaderName:C.name,vertexShader:se,fragmentShader:Qt,defines:C.defines,customVertexShaderID:it,customFragmentShaderID:wt,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:y,batching:te,batchingColor:te&amp;&amp;X._colorsTexture!==null,instancing:Zt,instancingColor:Zt&amp;&amp;X.instanceColor!==null,instancingMorph:Zt&amp;&amp;X.morphTexture!==null,supportsVertexTextures:g,outputColorSpace:bt===null?n.outputColorSpace:bt.isXRRenderTarget===!0?bt.texture.colorSpace:er,alphaToCoverage:!!C.alphaToCoverage,map:ke,matcap:re,envMap:H,envMapMode:H&amp;&amp;mt.mapping,envMapCubeUVHeight:K,aoMap:ht,lightMap:rt,bumpMap:pt,normalMap:lt,displacementMap:g&amp;&amp;Ct,emissiveMap:dt,normalMapObjectSpace:lt&amp;&amp;C.normalMapType===MT,normalMapTangentSpace:lt&amp;&amp;C.normalMapType===eo,metalnessMap:Rt,roughnessMap:de,anisotropy:ue,anisotropyMap:at,clearcoat:I,clearcoatMap:jt,clearcoatNormalMap:Tt,clearcoatRoughnessMap:Wt,dispersion:D,iridescence:k,iridescenceMap:Ft,iridescenceThicknessMap:vt,sheen:nt,sheenColorMap:Ot,sheenRoughnessMap:ne,specularMap:kt,specularColorMap:Nt,specularIntensityMap:me,transmission:gt,transmissionMap:G,thicknessMap:Mt,gradientMap:Dt,opaque:C.transparent===!1&amp;&amp;C.blending===al&amp;&amp;C.alphaToCoverage===!1,alphaMap:Gt,alphaTest:St,alphaHash:ut,combine:C.combine,mapUv:ke&amp;&amp;b(C.map.channel),aoMapUv:ht&amp;&amp;b(C.aoMap.channel),lightMapUv:rt&amp;&amp;b(C.lightMap.channel),bumpMapUv:pt&amp;&amp;b(C.bumpMap.channel),normalMapUv:lt&amp;&amp;b(C.normalMap.channel),displacementMapUv:Ct&amp;&amp;b(C.displacementMap.channel),emissiveMapUv:dt&amp;&amp;b(C.emissiveMap.channel),metalnessMapUv:Rt&amp;&amp;b(C.metalnessMap.channel),roughnessMapUv:de&amp;&amp;b(C.roughnessMap.channel),anisotropyMapUv:at&amp;&amp;b(C.anisotropyMap.channel),clearcoatMapUv:jt&amp;&amp;b(C.clearcoatMap.channel),clearcoatNormalMapUv:Tt&amp;&amp;b(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Wt&amp;&amp;b(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Ft&amp;&amp;b(C.iridescenceMap.channel),iridescenceThicknessMapUv:vt&amp;&amp;b(C.iridescenceThicknessMap.channel),sheenColorMapUv:Ot&amp;&amp;b(C.sheenColorMap.channel),sheenRoughnessMapUv:ne&amp;&amp;b(C.sheenRoughnessMap.channel),specularMapUv:kt&amp;&amp;b(C.specularMap.channel),specularColorMapUv:Nt&amp;&amp;b(C.specularColorMap.channel),specularIntensityMapUv:me&amp;&amp;b(C.specularIntensityMap.channel),transmissionMapUv:G&amp;&amp;b(C.transmissionMap.channel),thicknessMapUv:Mt&amp;&amp;b(C.thicknessMap.channel),alphaMapUv:Gt&amp;&amp;b(C.alphaMap.channel),vertexTangents:!!st.attributes.tangent&amp;&amp;(lt||ue),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&amp;&amp;!!st.attributes.color&amp;&amp;st.attributes.color.itemSize===4,pointsUvs:X.isPoints===!0&amp;&amp;!!st.attributes.uv&amp;&amp;(ke||Gt),fog:!!Z,useFog:C.fog===!0,fogExp2:!!Z&amp;&amp;Z.isFogExp2,flatShading:C.flatShading===!0&amp;&amp;C.wireframe===!1,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:m,reversedDepthBuffer:Jt,skinning:X.isSkinnedMesh===!0,morphTargets:st.morphAttributes.position!==void 0,morphNormals:st.morphAttributes.normal!==void 0,morphColors:st.morphAttributes.color!==void 0,morphTargetsCount:xt,morphTextureStride:It,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&amp;&amp;P.length&gt;0,shadowMapType:n.shadowMap.type,toneMapping:oe,decodeVideoTexture:ke&amp;&amp;C.map.isVideoTexture===!0&amp;&amp;we.getTransfer(C.map.colorSpace)===We,decodeVideoTextureEmissive:dt&amp;&amp;C.emissiveMap.isVideoTexture===!0&amp;&amp;we.getTransfer(C.emissiveMap.colorSpace)===We,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Ds,flipSided:C.side===Ni,useDepthPacking:C.depthPacking&gt;=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:qt&amp;&amp;C.extensions.clipCullDistance===!0&amp;&amp;i.has(&quot;WEBGL_clip_cull_distance&quot;),extensionMultiDraw:(qt&amp;&amp;C.extensions.multiDraw===!0||te)&amp;&amp;i.has(&quot;WEBGL_multi_draw&quot;),rendererExtensionParallelShaderCompile:i.has(&quot;KHR_parallel_shader_compile&quot;),customProgramCacheKey:C.customProgramCacheKey()};return He.vertexUv1s=h.has(1),He.vertexUv2s=h.has(2),He.vertexUv3s=h.has(3),h.clear(),He}function v(C){let R=[];if(C.shaderID?R.push(C.shaderID):(R.push(C.customVertexShaderID),R.push(C.customFragmentShaderID)),C.defines!==void 0)for(let P in C.defines)R.push(P),R.push(C.defines[P]);return C.isRawShaderMaterial===!1&amp;&amp;(S(R,C),E(R,C),R.push(n.outputColorSpace)),R.push(C.customProgramCacheKey),R.join()}function S(C,R){C.push(R.precision),C.push(R.outputColorSpace),C.push(R.envMapMode),C.push(R.envMapCubeUVHeight),C.push(R.mapUv),C.push(R.alphaMapUv),C.push(R.lightMapUv),C.push(R.aoMapUv),C.push(R.bumpMapUv),C.push(R.normalMapUv),C.push(R.displacementMapUv),C.push(R.emissiveMapUv),C.push(R.metalnessMapUv),C.push(R.roughnessMapUv),C.push(R.anisotropyMapUv),C.push(R.clearcoatMapUv),C.push(R.clearcoatNormalMapUv),C.push(R.clearcoatRoughnessMapUv),C.push(R.iridescenceMapUv),C.push(R.iridescenceThicknessMapUv),C.push(R.sheenColorMapUv),C.push(R.sheenRoughnessMapUv),C.push(R.specularMapUv),C.push(R.specularColorMapUv),C.push(R.specularIntensityMapUv),C.push(R.transmissionMapUv),C.push(R.thicknessMapUv),C.push(R.combine),C.push(R.fogExp2),C.push(R.sizeAttenuation),C.push(R.morphTargetsCount),C.push(R.morphAttributeCount),C.push(R.numDirLights),C.push(R.numPointLights),C.push(R.numSpotLights),C.push(R.numSpotLightMaps),C.push(R.numHemiLights),C.push(R.numRectAreaLights),C.push(R.numDirLightShadows),C.push(R.numPointLightShadows),C.push(R.numSpotLightShadows),C.push(R.numSpotLightShadowsWithMaps),C.push(R.numLightProbes),C.push(R.shadowMapType),C.push(R.toneMapping),C.push(R.numClippingPlanes),C.push(R.numClipIntersection),C.push(R.depthPacking)}function E(C,R){u.disableAll(),R.supportsVertexTextures&amp;&amp;u.enable(0),R.instancing&amp;&amp;u.enable(1),R.instancingColor&amp;&amp;u.enable(2),R.instancingMorph&amp;&amp;u.enable(3),R.matcap&amp;&amp;u.enable(4),R.envMap&amp;&amp;u.enable(5),R.normalMapObjectSpace&amp;&amp;u.enable(6),R.normalMapTangentSpace&amp;&amp;u.enable(7),R.clearcoat&amp;&amp;u.enable(8),R.iridescence&amp;&amp;u.enable(9),R.alphaTest&amp;&amp;u.enable(10),R.vertexColors&amp;&amp;u.enable(11),R.vertexAlphas&amp;&amp;u.enable(12),R.vertexUv1s&amp;&amp;u.enable(13),R.vertexUv2s&amp;&amp;u.enable(14),R.vertexUv3s&amp;&amp;u.enable(15),R.vertexTangents&amp;&amp;u.enable(16),R.anisotropy&amp;&amp;u.enable(17),R.alphaHash&amp;&amp;u.enable(18),R.batching&amp;&amp;u.enable(19),R.dispersion&amp;&amp;u.enable(20),R.batchingColor&amp;&amp;u.enable(21),R.gradientMap&amp;&amp;u.enable(22),C.push(u.mask),u.disableAll(),R.fog&amp;&amp;u.enable(0),R.useFog&amp;&amp;u.enable(1),R.flatShading&amp;&amp;u.enable(2),R.logarithmicDepthBuffer&amp;&amp;u.enable(3),R.reversedDepthBuffer&amp;&amp;u.enable(4),R.skinning&amp;&amp;u.enable(5),R.morphTargets&amp;&amp;u.enable(6),R.morphNormals&amp;&amp;u.enable(7),R.morphColors&amp;&amp;u.enable(8),R.premultipliedAlpha&amp;&amp;u.enable(9),R.shadowMapEnabled&amp;&amp;u.enable(10),R.doubleSided&amp;&amp;u.enable(11),R.flipSided&amp;&amp;u.enable(12),R.useDepthPacking&amp;&amp;u.enable(13),R.dithering&amp;&amp;u.enable(14),R.transmission&amp;&amp;u.enable(15),R.sheen&amp;&amp;u.enable(16),R.opaque&amp;&amp;u.enable(17),R.pointsUvs&amp;&amp;u.enable(18),R.decodeVideoTexture&amp;&amp;u.enable(19),R.decodeVideoTextureEmissive&amp;&amp;u.enable(20),R.alphaToCoverage&amp;&amp;u.enable(21),C.push(u.mask)}function T(C){let R=x[C.type],P;if(R){let j=Ns[R];P=LT.clone(j.uniforms)}else P=C.uniforms;return P}function w(C,R){let P;for(let j=0,X=d.length;j&lt;X;j++){let Z=d[j];if(Z.cacheKey===R){P=Z,++P.usedTimes;break}}return P===void 0&amp;&amp;(P=new c8(n,R,C,s),d.push(P)),P}function U(C){if(--C.usedTimes===0){let R=d.indexOf(C);d[R]=d[d.length-1],d.pop(),C.destroy()}}function O(C){c.remove(C)}function z(){c.dispose()}return{getParameters:M,getProgramCacheKey:v,getUniforms:T,acquireProgram:w,releaseProgram:U,releaseShaderCache:O,programs:d,dispose:z}}function d8(){let n=new WeakMap;function t(o){return n.has(o)}function e(o){let u=n.get(o);return u===void 0&amp;&amp;(u={},n.set(o,u)),u}function i(o){n.delete(o)}function a(o,u,c){n.get(o)[u]=c}function s(){n=new WeakMap}return{has:t,get:e,remove:i,update:a,dispose:s}}function p8(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function WO(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function kO(){let n=[],t=0,e=[],i=[],a=[];function s(){t=0,e.length=0,i.length=0,a.length=0}function o(m,g,y,x,b,M){let v=n[t];return v===void 0?(v={id:m.id,object:m,geometry:g,material:y,groupOrder:x,renderOrder:m.renderOrder,z:b,group:M},n[t]=v):(v.id=m.id,v.object=m,v.geometry=g,v.material=y,v.groupOrder=x,v.renderOrder=m.renderOrder,v.z=b,v.group=M),t++,v}function u(m,g,y,x,b,M){let v=o(m,g,y,x,b,M);y.transmission&gt;0?i.push(v):y.transparent===!0?a.push(v):e.push(v)}function c(m,g,y,x,b,M){let v=o(m,g,y,x,b,M);y.transmission&gt;0?i.unshift(v):y.transparent===!0?a.unshift(v):e.unshift(v)}function h(m,g){e.length&gt;1&amp;&amp;e.sort(m||p8),i.length&gt;1&amp;&amp;i.sort(g||WO),a.length&gt;1&amp;&amp;a.sort(g||WO)}function d(){for(let m=t,g=n.length;m&lt;g;m++){let y=n[m];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:e,transmissive:i,transparent:a,init:s,push:u,unshift:c,finish:d,sort:h}}function m8(){let n=new WeakMap;function t(i,a){let s=n.get(i),o;return s===void 0?(o=new kO,n.set(i,[o])):a&gt;=s.length?(o=new kO,s.push(o)):o=s[a],o}function e(){n=new WeakMap}return{get:t,dispose:e}}function g8(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case&quot;DirectionalLight&quot;:e={direction:new B,color:new Bt};break;case&quot;SpotLight&quot;:e={position:new B,direction:new B,color:new Bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case&quot;PointLight&quot;:e={position:new B,color:new Bt,distance:0,decay:0};break;case&quot;HemisphereLight&quot;:e={direction:new B,skyColor:new Bt,groundColor:new Bt};break;case&quot;RectAreaLight&quot;:e={color:new Bt,position:new B,halfWidth:new B,halfHeight:new B};break}return n[t.id]=e,e}}}function v8(){let n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case&quot;DirectionalLight&quot;:e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct};break;case&quot;SpotLight&quot;:e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct};break;case&quot;PointLight&quot;:e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ct,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}var y8=0;function _8(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function x8(n){let t=new g8,e=v8(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h&lt;9;h++)i.probe.push(new B);let a=new B,s=new fe,o=new fe;function u(h){let d=0,m=0,g=0;for(let C=0;C&lt;9;C++)i.probe[C].set(0,0,0);let y=0,x=0,b=0,M=0,v=0,S=0,E=0,T=0,w=0,U=0,O=0;h.sort(_8);for(let C=0,R=h.length;C&lt;R;C++){let P=h[C],j=P.color,X=P.intensity,Z=P.distance,st=P.shadow&amp;&amp;P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)d+=j.r*X,m+=j.g*X,g+=j.b*X;else if(P.isLightProbe){for(let et=0;et&lt;9;et++)i.probe[et].addScaledVector(P.sh.coefficients[et],X);O++}else if(P.isDirectionalLight){let et=t.get(P);if(et.color.copy(P.color).multiplyScalar(P.intensity),P.castShadow){let mt=P.shadow,K=e.get(P);K.shadowIntensity=mt.intensity,K.shadowBias=mt.bias,K.shadowNormalBias=mt.normalBias,K.shadowRadius=mt.radius,K.shadowMapSize=mt.mapSize,i.directionalShadow[y]=K,i.directionalShadowMap[y]=st,i.directionalShadowMatrix[y]=P.shadow.matrix,S++}i.directional[y]=et,y++}else if(P.isSpotLight){let et=t.get(P);et.position.setFromMatrixPosition(P.matrixWorld),et.color.copy(j).multiplyScalar(X),et.distance=Z,et.coneCos=Math.cos(P.angle),et.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),et.decay=P.decay,i.spot[b]=et;let mt=P.shadow;if(P.map&amp;&amp;(i.spotLightMap[w]=P.map,w++,mt.updateMatrices(P),P.castShadow&amp;&amp;U++),i.spotLightMatrix[b]=mt.matrix,P.castShadow){let K=e.get(P);K.shadowIntensity=mt.intensity,K.shadowBias=mt.bias,K.shadowNormalBias=mt.normalBias,K.shadowRadius=mt.radius,K.shadowMapSize=mt.mapSize,i.spotShadow[b]=K,i.spotShadowMap[b]=st,T++}b++}else if(P.isRectAreaLight){let et=t.get(P);et.color.copy(j).multiplyScalar(X),et.halfWidth.set(P.width*.5,0,0),et.halfHeight.set(0,P.height*.5,0),i.rectArea[M]=et,M++}else if(P.isPointLight){let et=t.get(P);if(et.color.copy(P.color).multiplyScalar(P.intensity),et.distance=P.distance,et.decay=P.decay,P.castShadow){let mt=P.shadow,K=e.get(P);K.shadowIntensity=mt.intensity,K.shadowBias=mt.bias,K.shadowNormalBias=mt.normalBias,K.shadowRadius=mt.radius,K.shadowMapSize=mt.mapSize,K.shadowCameraNear=mt.camera.near,K.shadowCameraFar=mt.camera.far,i.pointShadow[x]=K,i.pointShadowMap[x]=st,i.pointShadowMatrix[x]=P.shadow.matrix,E++}i.point[x]=et,x++}else if(P.isHemisphereLight){let et=t.get(P);et.skyColor.copy(P.color).multiplyScalar(X),et.groundColor.copy(P.groundColor).multiplyScalar(X),i.hemi[v]=et,v++}}M&gt;0&amp;&amp;(n.has(&quot;OES_texture_float_linear&quot;)===!0?(i.rectAreaLTC1=zt.LTC_FLOAT_1,i.rectAreaLTC2=zt.LTC_FLOAT_2):(i.rectAreaLTC1=zt.LTC_HALF_1,i.rectAreaLTC2=zt.LTC_HALF_2)),i.ambient[0]=d,i.ambient[1]=m,i.ambient[2]=g;let z=i.hash;(z.directionalLength!==y||z.pointLength!==x||z.spotLength!==b||z.rectAreaLength!==M||z.hemiLength!==v||z.numDirectionalShadows!==S||z.numPointShadows!==E||z.numSpotShadows!==T||z.numSpotMaps!==w||z.numLightProbes!==O)&amp;&amp;(i.directional.length=y,i.spot.length=b,i.rectArea.length=M,i.point.length=x,i.hemi.length=v,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=T+w-U,i.spotLightMap.length=w,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=O,z.directionalLength=y,z.pointLength=x,z.spotLength=b,z.rectAreaLength=M,z.hemiLength=v,z.numDirectionalShadows=S,z.numPointShadows=E,z.numSpotShadows=T,z.numSpotMaps=w,z.numLightProbes=O,i.version=y8++)}function c(h,d){let m=0,g=0,y=0,x=0,b=0,M=d.matrixWorldInverse;for(let v=0,S=h.length;v&lt;S;v++){let E=h[v];if(E.isDirectionalLight){let T=i.directional[m];T.direction.setFromMatrixPosition(E.matrixWorld),a.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(a),T.direction.transformDirection(M),m++}else if(E.isSpotLight){let T=i.spot[y];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(M),T.direction.setFromMatrixPosition(E.matrixWorld),a.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(a),T.direction.transformDirection(M),y++}else if(E.isRectAreaLight){let T=i.rectArea[x];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(M),o.identity(),s.copy(E.matrixWorld),s.premultiply(M),o.extractRotation(s),T.halfWidth.set(E.width*.5,0,0),T.halfHeight.set(0,E.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),x++}else if(E.isPointLight){let T=i.point[g];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(M),g++}else if(E.isHemisphereLight){let T=i.hemi[b];T.direction.setFromMatrixPosition(E.matrixWorld),T.direction.transformDirection(M),b++}}}return{setup:u,setupView:c,state:i}}function ZO(n){let t=new x8(n),e=[],i=[];function a(d){h.camera=d,e.length=0,i.length=0}function s(d){e.push(d)}function o(d){i.push(d)}function u(){t.setup(e)}function c(d){t.setupView(e,d)}let h={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:a,state:h,setupLights:u,setupLightsView:c,pushLight:s,pushShadow:o}}function S8(n){let t=new WeakMap;function e(a,s=0){let o=t.get(a),u;return o===void 0?(u=new ZO(n),t.set(a,[u])):s&gt;=o.length?(u=new ZO(n),o.push(u)):u=o[s],u}function i(){t=new WeakMap}return{get:e,dispose:i}}var M8=`void main() {
<a href="#l3800" class="line" id="l3800">   3800</a> 	gl_Position = vec4( position, 1.0 );
<a href="#l3801" class="line" id="l3801">   3801</a> }`,E8=`uniform sampler2D shadow_pass;
<a href="#l3802" class="line" id="l3802">   3802</a> uniform vec2 resolution;
<a href="#l3803" class="line" id="l3803">   3803</a> uniform float radius;
<a href="#l3804" class="line" id="l3804">   3804</a> #include &lt;packing&gt;
<a href="#l3805" class="line" id="l3805">   3805</a> void main() {
<a href="#l3806" class="line" id="l3806">   3806</a> 	const float samples = float( VSM_SAMPLES );
<a href="#l3807" class="line" id="l3807">   3807</a> 	float mean = 0.0;
<a href="#l3808" class="line" id="l3808">   3808</a> 	float squared_mean = 0.0;
<a href="#l3809" class="line" id="l3809">   3809</a> 	float uvStride = samples &lt;= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
<a href="#l3810" class="line" id="l3810">   3810</a> 	float uvStart = samples &lt;= 1.0 ? 0.0 : - 1.0;
<a href="#l3811" class="line" id="l3811">   3811</a> 	for ( float i = 0.0; i &lt; samples; i ++ ) {
<a href="#l3812" class="line" id="l3812">   3812</a> 		float uvOffset = uvStart + i * uvStride;
<a href="#l3813" class="line" id="l3813">   3813</a> 		#ifdef HORIZONTAL_PASS
<a href="#l3814" class="line" id="l3814">   3814</a> 			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
<a href="#l3815" class="line" id="l3815">   3815</a> 			mean += distribution.x;
<a href="#l3816" class="line" id="l3816">   3816</a> 			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
<a href="#l3817" class="line" id="l3817">   3817</a> 		#else
<a href="#l3818" class="line" id="l3818">   3818</a> 			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
<a href="#l3819" class="line" id="l3819">   3819</a> 			mean += depth;
<a href="#l3820" class="line" id="l3820">   3820</a> 			squared_mean += depth * depth;
<a href="#l3821" class="line" id="l3821">   3821</a> 		#endif
<a href="#l3822" class="line" id="l3822">   3822</a> 	}
<a href="#l3823" class="line" id="l3823">   3823</a> 	mean = mean / samples;
<a href="#l3824" class="line" id="l3824">   3824</a> 	squared_mean = squared_mean / samples;
<a href="#l3825" class="line" id="l3825">   3825</a> 	float std_dev = sqrt( squared_mean - mean * mean );
<a href="#l3826" class="line" id="l3826">   3826</a> 	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
<a href="#l3827" class="line" id="l3827">   3827</a> }`;function b8(n,t,e){let i=new Kr,a=new ct,s=new ct,o=new Oe,u=new oh({depthPacking:ST}),c=new lh,h={},d=e.maxTextureSize,m={[tr]:Ni,[Ni]:tr,[Ds]:Ds},g=new ra({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ct},radius:{value:4}},vertexShader:M8,fragmentShader:E8}),y=g.clone();y.defines.HORIZONTAL_PASS=1;let x=new ve;x.setAttribute(&quot;position&quot;,new Xe(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let b=new En(x,g),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=mh;let v=this.type;this.render=function(U,O,z){if(M.enabled===!1||M.autoUpdate===!1&amp;&amp;M.needsUpdate===!1||U.length===0)return;let C=n.getRenderTarget(),R=n.getActiveCubeFace(),P=n.getActiveMipmapLevel(),j=n.state;j.setBlending(sr),j.buffers.depth.getReversed()?j.buffers.color.setClear(0,0,0,0):j.buffers.color.setClear(1,1,1,1),j.buffers.depth.setTest(!0),j.setScissorTest(!1);let X=v!==Pa&amp;&amp;this.type===Pa,Z=v===Pa&amp;&amp;this.type!==Pa;for(let st=0,et=U.length;st&lt;et;st++){let mt=U[st],K=mt.shadow;if(K===void 0){console.warn(&quot;THREE.WebGLShadowMap:&quot;,mt,&quot;has no shadow.&quot;);continue}if(K.autoUpdate===!1&amp;&amp;K.needsUpdate===!1)continue;a.copy(K.mapSize);let _t=K.getFrameExtents();if(a.multiply(_t),s.copy(K.mapSize),(a.x&gt;d||a.y&gt;d)&amp;&amp;(a.x&gt;d&amp;&amp;(s.x=Math.floor(d/_t.x),a.x=s.x*_t.x,K.mapSize.x=s.x),a.y&gt;d&amp;&amp;(s.y=Math.floor(d/_t.y),a.y=s.y*_t.y,K.mapSize.y=s.y)),K.map===null||X===!0||Z===!0){let xt=this.type!==Pa?{minFilter:oi,magFilter:oi}:{};K.map!==null&amp;&amp;K.map.dispose(),K.map=new za(a.x,a.y,xt),K.map.texture.name=mt.name+&quot;.shadowMap&quot;,K.camera.updateProjectionMatrix()}n.setRenderTarget(K.map),n.clear();let Ut=K.getViewportCount();for(let xt=0;xt&lt;Ut;xt++){let It=K.getViewport(xt);o.set(s.x*It.x,s.y*It.y,s.x*It.z,s.y*It.w),j.viewport(o),K.updateMatrices(mt,xt),i=K.getFrustum(),T(O,z,K.camera,mt,this.type)}K.isPointLightShadow!==!0&amp;&amp;this.type===Pa&amp;&amp;S(K,z),K.needsUpdate=!1}v=this.type,M.needsUpdate=!1,n.setRenderTarget(C,R,P)};function S(U,O){let z=t.update(b);g.defines.VSM_SAMPLES!==U.blurSamples&amp;&amp;(g.defines.VSM_SAMPLES=U.blurSamples,y.defines.VSM_SAMPLES=U.blurSamples,g.needsUpdate=!0,y.needsUpdate=!0),U.mapPass===null&amp;&amp;(U.mapPass=new za(a.x,a.y)),g.uniforms.shadow_pass.value=U.map.texture,g.uniforms.resolution.value=U.mapSize,g.uniforms.radius.value=U.radius,n.setRenderTarget(U.mapPass),n.clear(),n.renderBufferDirect(O,null,z,g,b,null),y.uniforms.shadow_pass.value=U.mapPass.texture,y.uniforms.resolution.value=U.mapSize,y.uniforms.radius.value=U.radius,n.setRenderTarget(U.map),n.clear(),n.renderBufferDirect(O,null,z,y,b,null)}function E(U,O,z,C){let R=null,P=z.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(P!==void 0)R=P;else if(R=z.isPointLight===!0?c:u,n.localClippingEnabled&amp;&amp;O.clipShadows===!0&amp;&amp;Array.isArray(O.clippingPlanes)&amp;&amp;O.clippingPlanes.length!==0||O.displacementMap&amp;&amp;O.displacementScale!==0||O.alphaMap&amp;&amp;O.alphaTest&gt;0||O.map&amp;&amp;O.alphaTest&gt;0||O.alphaToCoverage===!0){let j=R.uuid,X=O.uuid,Z=h[j];Z===void 0&amp;&amp;(Z={},h[j]=Z);let st=Z[X];st===void 0&amp;&amp;(st=R.clone(),Z[X]=st,O.addEventListener(&quot;dispose&quot;,w)),R=st}if(R.visible=O.visible,R.wireframe=O.wireframe,C===Pa?R.side=O.shadowSide!==null?O.shadowSide:O.side:R.side=O.shadowSide!==null?O.shadowSide:m[O.side],R.alphaMap=O.alphaMap,R.alphaTest=O.alphaToCoverage===!0?.5:O.alphaTest,R.map=O.map,R.clipShadows=O.clipShadows,R.clippingPlanes=O.clippingPlanes,R.clipIntersection=O.clipIntersection,R.displacementMap=O.displacementMap,R.displacementScale=O.displacementScale,R.displacementBias=O.displacementBias,R.wireframeLinewidth=O.wireframeLinewidth,R.linewidth=O.linewidth,z.isPointLight===!0&amp;&amp;R.isMeshDistanceMaterial===!0){let j=n.properties.get(R);j.light=z}return R}function T(U,O,z,C,R){if(U.visible===!1)return;if(U.layers.test(O.layers)&amp;&amp;(U.isMesh||U.isLine||U.isPoints)&amp;&amp;(U.castShadow||U.receiveShadow&amp;&amp;R===Pa)&amp;&amp;(!U.frustumCulled||i.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,U.matrixWorld);let X=t.update(U),Z=U.material;if(Array.isArray(Z)){let st=X.groups;for(let et=0,mt=st.length;et&lt;mt;et++){let K=st[et],_t=Z[K.materialIndex];if(_t&amp;&amp;_t.visible){let Ut=E(U,_t,C,R);U.onBeforeShadow(n,U,O,z,X,Ut,K),n.renderBufferDirect(z,null,X,Ut,U,K),U.onAfterShadow(n,U,O,z,X,Ut,K)}}}else if(Z.visible){let st=E(U,Z,C,R);U.onBeforeShadow(n,U,O,z,X,st,null),n.renderBufferDirect(z,null,X,st,U,null),U.onAfterShadow(n,U,O,z,X,st,null)}}let j=U.children;for(let X=0,Z=j.length;X&lt;Z;X++)T(j[X],O,z,C,R)}function w(U){U.target.removeEventListener(&quot;dispose&quot;,w);for(let z in h){let C=h[z],R=U.target.uuid;R in C&amp;&amp;(C[R].dispose(),delete C[R])}}}var T8={[jm]:Qm,[Km]:tg,[Jm]:eg,[sl]:$m,[Qm]:jm,[tg]:Km,[eg]:Jm,[$m]:sl};function A8(n,t){function e(){let G=!1,Mt=new Oe,Dt=null,Gt=new Oe(0,0,0,0);return{setMask:function(St){Dt!==St&amp;&amp;!G&amp;&amp;(n.colorMask(St,St,St,St),Dt=St)},setLocked:function(St){G=St},setClear:function(St,ut,qt,oe,He){He===!0&amp;&amp;(St*=oe,ut*=oe,qt*=oe),Mt.set(St,ut,qt,oe),Gt.equals(Mt)===!1&amp;&amp;(n.clearColor(St,ut,qt,oe),Gt.copy(Mt))},reset:function(){G=!1,Dt=null,Gt.set(-1,0,0,0)}}}function i(){let G=!1,Mt=!1,Dt=null,Gt=null,St=null;return{setReversed:function(ut){if(Mt!==ut){let qt=t.get(&quot;EXT_clip_control&quot;);ut?qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.ZERO_TO_ONE_EXT):qt.clipControlEXT(qt.LOWER_LEFT_EXT,qt.NEGATIVE_ONE_TO_ONE_EXT),Mt=ut;let oe=St;St=null,this.setClear(oe)}},getReversed:function(){return Mt},setTest:function(ut){ut?bt(n.DEPTH_TEST):Jt(n.DEPTH_TEST)},setMask:function(ut){Dt!==ut&amp;&amp;!G&amp;&amp;(n.depthMask(ut),Dt=ut)},setFunc:function(ut){if(Mt&amp;&amp;(ut=T8[ut]),Gt!==ut){switch(ut){case jm:n.depthFunc(n.NEVER);break;case Qm:n.depthFunc(n.ALWAYS);break;case Km:n.depthFunc(n.LESS);break;case sl:n.depthFunc(n.LEQUAL);break;case Jm:n.depthFunc(n.EQUAL);break;case $m:n.depthFunc(n.GEQUAL);break;case tg:n.depthFunc(n.GREATER);break;case eg:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Gt=ut}},setLocked:function(ut){G=ut},setClear:function(ut){St!==ut&amp;&amp;(Mt&amp;&amp;(ut=1-ut),n.clearDepth(ut),St=ut)},reset:function(){G=!1,Dt=null,Gt=null,St=null,Mt=!1}}}function a(){let G=!1,Mt=null,Dt=null,Gt=null,St=null,ut=null,qt=null,oe=null,He=null;return{setTest:function(Le){G||(Le?bt(n.STENCIL_TEST):Jt(n.STENCIL_TEST))},setMask:function(Le){Mt!==Le&amp;&amp;!G&amp;&amp;(n.stencilMask(Le),Mt=Le)},setFunc:function(Le,Ha,ua){(Dt!==Le||Gt!==Ha||St!==ua)&amp;&amp;(n.stencilFunc(Le,Ha,ua),Dt=Le,Gt=Ha,St=ua)},setOp:function(Le,Ha,ua){(ut!==Le||qt!==Ha||oe!==ua)&amp;&amp;(n.stencilOp(Le,Ha,ua),ut=Le,qt=Ha,oe=ua)},setLocked:function(Le){G=Le},setClear:function(Le){He!==Le&amp;&amp;(n.clearStencil(Le),He=Le)},reset:function(){G=!1,Mt=null,Dt=null,Gt=null,St=null,ut=null,qt=null,oe=null,He=null}}}let s=new e,o=new i,u=new a,c=new WeakMap,h=new WeakMap,d={},m={},g=new WeakMap,y=[],x=null,b=!1,M=null,v=null,S=null,E=null,T=null,w=null,U=null,O=new Bt(0,0,0),z=0,C=!1,R=null,P=null,j=null,X=null,Z=null,st=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS),et=!1,mt=0,K=n.getParameter(n.VERSION);K.indexOf(&quot;WebGL&quot;)!==-1?(mt=parseFloat(/^WebGL (\d)/.exec(K)[1]),et=mt&gt;=1):K.indexOf(&quot;OpenGL ES&quot;)!==-1&amp;&amp;(mt=parseFloat(/^OpenGL ES (\d)/.exec(K)[1]),et=mt&gt;=2);let _t=null,Ut={},xt=n.getParameter(n.SCISSOR_BOX),It=n.getParameter(n.VIEWPORT),se=new Oe().fromArray(xt),Qt=new Oe().fromArray(It);function it(G,Mt,Dt,Gt){let St=new Uint8Array(4),ut=n.createTexture();n.bindTexture(G,ut),n.texParameteri(G,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(G,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let qt=0;qt&lt;Dt;qt++)G===n.TEXTURE_3D||G===n.TEXTURE_2D_ARRAY?n.texImage3D(Mt,0,n.RGBA,1,1,Gt,0,n.RGBA,n.UNSIGNED_BYTE,St):n.texImage2D(Mt+qt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,St);return ut}let wt={};wt[n.TEXTURE_2D]=it(n.TEXTURE_2D,n.TEXTURE_2D,1),wt[n.TEXTURE_CUBE_MAP]=it(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),wt[n.TEXTURE_2D_ARRAY]=it(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),wt[n.TEXTURE_3D]=it(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),u.setClear(0),bt(n.DEPTH_TEST),o.setFunc(sl),pt(!1),lt(K_),bt(n.CULL_FACE),ht(sr);function bt(G){d[G]!==!0&amp;&amp;(n.enable(G),d[G]=!0)}function Jt(G){d[G]!==!1&amp;&amp;(n.disable(G),d[G]=!1)}function Zt(G,Mt){return m[G]!==Mt?(n.bindFramebuffer(G,Mt),m[G]=Mt,G===n.DRAW_FRAMEBUFFER&amp;&amp;(m[n.FRAMEBUFFER]=Mt),G===n.FRAMEBUFFER&amp;&amp;(m[n.DRAW_FRAMEBUFFER]=Mt),!0):!1}function te(G,Mt){let Dt=y,Gt=!1;if(G){Dt=g.get(Mt),Dt===void 0&amp;&amp;(Dt=[],g.set(Mt,Dt));let St=G.textures;if(Dt.length!==St.length||Dt[0]!==n.COLOR_ATTACHMENT0){for(let ut=0,qt=St.length;ut&lt;qt;ut++)Dt[ut]=n.COLOR_ATTACHMENT0+ut;Dt.length=St.length,Gt=!0}}else Dt[0]!==n.BACK&amp;&amp;(Dt[0]=n.BACK,Gt=!0);Gt&amp;&amp;n.drawBuffers(Dt)}function ke(G){return x!==G?(n.useProgram(G),x=G,!0):!1}let re={[Zr]:n.FUNC_ADD,[Yb]:n.FUNC_SUBTRACT,[Wb]:n.FUNC_REVERSE_SUBTRACT};re[kb]=n.MIN,re[Zb]=n.MAX;let H={[jb]:n.ZERO,[Qb]:n.ONE,[Kb]:n.SRC_COLOR,[zp]:n.SRC_ALPHA,[iT]:n.SRC_ALPHA_SATURATE,[eT]:n.DST_COLOR,[$b]:n.DST_ALPHA,[Jb]:n.ONE_MINUS_SRC_COLOR,[Bp]:n.ONE_MINUS_SRC_ALPHA,[nT]:n.ONE_MINUS_DST_COLOR,[tT]:n.ONE_MINUS_DST_ALPHA,[aT]:n.CONSTANT_COLOR,[sT]:n.ONE_MINUS_CONSTANT_COLOR,[rT]:n.CONSTANT_ALPHA,[oT]:n.ONE_MINUS_CONSTANT_ALPHA};function ht(G,Mt,Dt,Gt,St,ut,qt,oe,He,Le){if(G===sr){b===!0&amp;&amp;(Jt(n.BLEND),b=!1);return}if(b===!1&amp;&amp;(bt(n.BLEND),b=!0),G!==qb){if(G!==M||Le!==C){if((v!==Zr||T!==Zr)&amp;&amp;(n.blendEquation(n.FUNC_ADD),v=Zr,T=Zr),Le)switch(G){case al:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $_:n.blendFunc(n.ONE,n.ONE);break;case tx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case ex:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:console.error(&quot;THREE.WebGLState: Invalid blending: &quot;,G);break}else switch(G){case al:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case $_:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case tx:console.error(&quot;THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true&quot;);break;case ex:console.error(&quot;THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true&quot;);break;default:console.error(&quot;THREE.WebGLState: Invalid blending: &quot;,G);break}S=null,E=null,w=null,U=null,O.set(0,0,0),z=0,M=G,C=Le}return}St=St||Mt,ut=ut||Dt,qt=qt||Gt,(Mt!==v||St!==T)&amp;&amp;(n.blendEquationSeparate(re[Mt],re[St]),v=Mt,T=St),(Dt!==S||Gt!==E||ut!==w||qt!==U)&amp;&amp;(n.blendFuncSeparate(H[Dt],H[Gt],H[ut],H[qt]),S=Dt,E=Gt,w=ut,U=qt),(oe.equals(O)===!1||He!==z)&amp;&amp;(n.blendColor(oe.r,oe.g,oe.b,He),O.copy(oe),z=He),M=G,C=!1}function rt(G,Mt){G.side===Ds?Jt(n.CULL_FACE):bt(n.CULL_FACE);let Dt=G.side===Ni;Mt&amp;&amp;(Dt=!Dt),pt(Dt),G.blending===al&amp;&amp;G.transparent===!1?ht(sr):ht(G.blending,G.blendEquation,G.blendSrc,G.blendDst,G.blendEquationAlpha,G.blendSrcAlpha,G.blendDstAlpha,G.blendColor,G.blendAlpha,G.premultipliedAlpha),o.setFunc(G.depthFunc),o.setTest(G.depthTest),o.setMask(G.depthWrite),s.setMask(G.colorWrite);let Gt=G.stencilWrite;u.setTest(Gt),Gt&amp;&amp;(u.setMask(G.stencilWriteMask),u.setFunc(G.stencilFunc,G.stencilRef,G.stencilFuncMask),u.setOp(G.stencilFail,G.stencilZFail,G.stencilZPass)),dt(G.polygonOffset,G.polygonOffsetFactor,G.polygonOffsetUnits),G.alphaToCoverage===!0?bt(n.SAMPLE_ALPHA_TO_COVERAGE):Jt(n.SAMPLE_ALPHA_TO_COVERAGE)}function pt(G){R!==G&amp;&amp;(G?n.frontFace(n.CW):n.frontFace(n.CCW),R=G)}function lt(G){G!==Gb?(bt(n.CULL_FACE),G!==P&amp;&amp;(G===K_?n.cullFace(n.BACK):G===Xb?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Jt(n.CULL_FACE),P=G}function Ct(G){G!==j&amp;&amp;(et&amp;&amp;n.lineWidth(G),j=G)}function dt(G,Mt,Dt){G?(bt(n.POLYGON_OFFSET_FILL),(X!==Mt||Z!==Dt)&amp;&amp;(n.polygonOffset(Mt,Dt),X=Mt,Z=Dt)):Jt(n.POLYGON_OFFSET_FILL)}function Rt(G){G?bt(n.SCISSOR_TEST):Jt(n.SCISSOR_TEST)}function de(G){G===void 0&amp;&amp;(G=n.TEXTURE0+st-1),_t!==G&amp;&amp;(n.activeTexture(G),_t=G)}function ue(G,Mt,Dt){Dt===void 0&amp;&amp;(_t===null?Dt=n.TEXTURE0+st-1:Dt=_t);let Gt=Ut[Dt];Gt===void 0&amp;&amp;(Gt={type:void 0,texture:void 0},Ut[Dt]=Gt),(Gt.type!==G||Gt.texture!==Mt)&amp;&amp;(_t!==Dt&amp;&amp;(n.activeTexture(Dt),_t=Dt),n.bindTexture(G,Mt||wt[G]),Gt.type=G,Gt.texture=Mt)}function I(){let G=Ut[_t];G!==void 0&amp;&amp;G.type!==void 0&amp;&amp;(n.bindTexture(G.type,null),G.type=void 0,G.texture=void 0)}function D(){try{n.compressedTexImage2D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function k(){try{n.compressedTexImage3D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function nt(){try{n.texSubImage2D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function gt(){try{n.texSubImage3D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function at(){try{n.compressedTexSubImage2D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function jt(){try{n.compressedTexSubImage3D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function Tt(){try{n.texStorage2D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function Wt(){try{n.texStorage3D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function Ft(){try{n.texImage2D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function vt(){try{n.texImage3D(...arguments)}catch(G){console.error(&quot;THREE.WebGLState:&quot;,G)}}function Ot(G){se.equals(G)===!1&amp;&amp;(n.scissor(G.x,G.y,G.z,G.w),se.copy(G))}function ne(G){Qt.equals(G)===!1&amp;&amp;(n.viewport(G.x,G.y,G.z,G.w),Qt.copy(G))}function kt(G,Mt){let Dt=h.get(Mt);Dt===void 0&amp;&amp;(Dt=new WeakMap,h.set(Mt,Dt));let Gt=Dt.get(G);Gt===void 0&amp;&amp;(Gt=n.getUniformBlockIndex(Mt,G.name),Dt.set(G,Gt))}function Nt(G,Mt){let Gt=h.get(Mt).get(G);c.get(Mt)!==Gt&amp;&amp;(n.uniformBlockBinding(Mt,Gt,G.__bindingPointIndex),c.set(Mt,Gt))}function me(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},_t=null,Ut={},m={},g=new WeakMap,y=[],x=null,b=!1,M=null,v=null,S=null,E=null,T=null,w=null,U=null,O=new Bt(0,0,0),z=0,C=!1,R=null,P=null,j=null,X=null,Z=null,se.set(0,0,n.canvas.width,n.canvas.height),Qt.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),u.reset()}return{buffers:{color:s,depth:o,stencil:u},enable:bt,disable:Jt,bindFramebuffer:Zt,drawBuffers:te,useProgram:ke,setBlending:ht,setMaterial:rt,setFlipSided:pt,setCullFace:lt,setLineWidth:Ct,setPolygonOffset:dt,setScissorTest:Rt,activeTexture:de,bindTexture:ue,unbindTexture:I,compressedTexImage2D:D,compressedTexImage3D:k,texImage2D:Ft,texImage3D:vt,updateUBOMapping:kt,uniformBlockBinding:Nt,texStorage2D:Tt,texStorage3D:Wt,texSubImage2D:nt,texSubImage3D:gt,compressedTexSubImage2D:at,compressedTexSubImage3D:jt,scissor:Ot,viewport:ne,reset:me}}function R8(n,t,e,i,a,s,o){let u=t.has(&quot;WEBGL_multisampled_render_to_texture&quot;)?t.get(&quot;WEBGL_multisampled_render_to_texture&quot;):null,c=typeof navigator&gt;&quot;u&quot;?!1:/OculusBrowser/g.test(navigator.userAgent),h=new ct,d=new WeakMap,m,g=new WeakMap,y=!1;try{y=typeof OffscreenCanvas&lt;&quot;u&quot;&amp;&amp;new OffscreenCanvas(1,1).getContext(&quot;2d&quot;)!==null}catch{}function x(I,D){return y?new OffscreenCanvas(I,D):Gf(&quot;canvas&quot;)}function b(I,D,k){let nt=1,gt=ue(I);if((gt.width&gt;k||gt.height&gt;k)&amp;&amp;(nt=k/Math.max(gt.width,gt.height)),nt&lt;1)if(typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;I instanceof HTMLImageElement||typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;I instanceof HTMLCanvasElement||typeof ImageBitmap&lt;&quot;u&quot;&amp;&amp;I instanceof ImageBitmap||typeof VideoFrame&lt;&quot;u&quot;&amp;&amp;I instanceof VideoFrame){let at=Math.floor(nt*gt.width),jt=Math.floor(nt*gt.height);m===void 0&amp;&amp;(m=x(at,jt));let Tt=D?x(at,jt):m;return Tt.width=at,Tt.height=jt,Tt.getContext(&quot;2d&quot;).drawImage(I,0,0,at,jt),console.warn(&quot;THREE.WebGLRenderer: Texture has been resized from (&quot;+gt.width+&quot;x&quot;+gt.height+&quot;) to (&quot;+at+&quot;x&quot;+jt+&quot;).&quot;),Tt}else return&quot;data&quot;in I&amp;&amp;console.warn(&quot;THREE.WebGLRenderer: Image in DataTexture is too big (&quot;+gt.width+&quot;x&quot;+gt.height+&quot;).&quot;),I;return I}function M(I){return I.generateMipmaps}function v(I){n.generateMipmap(I)}function S(I){return I.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:I.isWebGL3DRenderTarget?n.TEXTURE_3D:I.isWebGLArrayRenderTarget||I.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E(I,D,k,nt,gt=!1){if(I!==null){if(n[I]!==void 0)return n[I];console.warn(&quot;THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format &#39;&quot;+I+&quot;&#39;&quot;)}let at=D;if(D===n.RED&amp;&amp;(k===n.FLOAT&amp;&amp;(at=n.R32F),k===n.HALF_FLOAT&amp;&amp;(at=n.R16F),k===n.UNSIGNED_BYTE&amp;&amp;(at=n.R8)),D===n.RED_INTEGER&amp;&amp;(k===n.UNSIGNED_BYTE&amp;&amp;(at=n.R8UI),k===n.UNSIGNED_SHORT&amp;&amp;(at=n.R16UI),k===n.UNSIGNED_INT&amp;&amp;(at=n.R32UI),k===n.BYTE&amp;&amp;(at=n.R8I),k===n.SHORT&amp;&amp;(at=n.R16I),k===n.INT&amp;&amp;(at=n.R32I)),D===n.RG&amp;&amp;(k===n.FLOAT&amp;&amp;(at=n.RG32F),k===n.HALF_FLOAT&amp;&amp;(at=n.RG16F),k===n.UNSIGNED_BYTE&amp;&amp;(at=n.RG8)),D===n.RG_INTEGER&amp;&amp;(k===n.UNSIGNED_BYTE&amp;&amp;(at=n.RG8UI),k===n.UNSIGNED_SHORT&amp;&amp;(at=n.RG16UI),k===n.UNSIGNED_INT&amp;&amp;(at=n.RG32UI),k===n.BYTE&amp;&amp;(at=n.RG8I),k===n.SHORT&amp;&amp;(at=n.RG16I),k===n.INT&amp;&amp;(at=n.RG32I)),D===n.RGB_INTEGER&amp;&amp;(k===n.UNSIGNED_BYTE&amp;&amp;(at=n.RGB8UI),k===n.UNSIGNED_SHORT&amp;&amp;(at=n.RGB16UI),k===n.UNSIGNED_INT&amp;&amp;(at=n.RGB32UI),k===n.BYTE&amp;&amp;(at=n.RGB8I),k===n.SHORT&amp;&amp;(at=n.RGB16I),k===n.INT&amp;&amp;(at=n.RGB32I)),D===n.RGBA_INTEGER&amp;&amp;(k===n.UNSIGNED_BYTE&amp;&amp;(at=n.RGBA8UI),k===n.UNSIGNED_SHORT&amp;&amp;(at=n.RGBA16UI),k===n.UNSIGNED_INT&amp;&amp;(at=n.RGBA32UI),k===n.BYTE&amp;&amp;(at=n.RGBA8I),k===n.SHORT&amp;&amp;(at=n.RGBA16I),k===n.INT&amp;&amp;(at=n.RGBA32I)),D===n.RGB&amp;&amp;k===n.UNSIGNED_INT_5_9_9_9_REV&amp;&amp;(at=n.RGB9_E5),D===n.RGBA){let jt=gt?Ff:we.getTransfer(nt);k===n.FLOAT&amp;&amp;(at=n.RGBA32F),k===n.HALF_FLOAT&amp;&amp;(at=n.RGBA16F),k===n.UNSIGNED_BYTE&amp;&amp;(at=jt===We?n.SRGB8_ALPHA8:n.RGBA8),k===n.UNSIGNED_SHORT_4_4_4_4&amp;&amp;(at=n.RGBA4),k===n.UNSIGNED_SHORT_5_5_5_1&amp;&amp;(at=n.RGB5_A1)}return(at===n.R16F||at===n.R32F||at===n.RG16F||at===n.RG32F||at===n.RGBA16F||at===n.RGBA32F)&amp;&amp;t.get(&quot;EXT_color_buffer_float&quot;),at}function T(I,D){let k;return I?D===null||D===or||D===Pu?k=n.DEPTH24_STENCIL8:D===qi?k=n.DEPTH32F_STENCIL8:D===zu&amp;&amp;(k=n.DEPTH24_STENCIL8,console.warn(&quot;DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.&quot;)):D===null||D===or||D===Pu?k=n.DEPTH_COMPONENT24:D===qi?k=n.DEPTH_COMPONENT32F:D===zu&amp;&amp;(k=n.DEPTH_COMPONENT16),k}function w(I,D){return M(I)===!0||I.isFramebufferTexture&amp;&amp;I.minFilter!==oi&amp;&amp;I.minFilter!==Gn?Math.log2(Math.max(D.width,D.height))+1:I.mipmaps!==void 0&amp;&amp;I.mipmaps.length&gt;0?I.mipmaps.length:I.isCompressedTexture&amp;&amp;Array.isArray(I.image)?D.mipmaps.length:1}function U(I){let D=I.target;D.removeEventListener(&quot;dispose&quot;,U),z(D),D.isVideoTexture&amp;&amp;d.delete(D)}function O(I){let D=I.target;D.removeEventListener(&quot;dispose&quot;,O),R(D)}function z(I){let D=i.get(I);if(D.__webglInit===void 0)return;let k=I.source,nt=g.get(k);if(nt){let gt=nt[D.__cacheKey];gt.usedTimes--,gt.usedTimes===0&amp;&amp;C(I),Object.keys(nt).length===0&amp;&amp;g.delete(k)}i.remove(I)}function C(I){let D=i.get(I);n.deleteTexture(D.__webglTexture);let k=I.source,nt=g.get(k);delete nt[D.__cacheKey],o.memory.textures--}function R(I){let D=i.get(I);if(I.depthTexture&amp;&amp;(I.depthTexture.dispose(),i.remove(I.depthTexture)),I.isWebGLCubeRenderTarget)for(let nt=0;nt&lt;6;nt++){if(Array.isArray(D.__webglFramebuffer[nt]))for(let gt=0;gt&lt;D.__webglFramebuffer[nt].length;gt++)n.deleteFramebuffer(D.__webglFramebuffer[nt][gt]);else n.deleteFramebuffer(D.__webglFramebuffer[nt]);D.__webglDepthbuffer&amp;&amp;n.deleteRenderbuffer(D.__webglDepthbuffer[nt])}else{if(Array.isArray(D.__webglFramebuffer))for(let nt=0;nt&lt;D.__webglFramebuffer.length;nt++)n.deleteFramebuffer(D.__webglFramebuffer[nt]);else n.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&amp;&amp;n.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&amp;&amp;n.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let nt=0;nt&lt;D.__webglColorRenderbuffer.length;nt++)D.__webglColorRenderbuffer[nt]&amp;&amp;n.deleteRenderbuffer(D.__webglColorRenderbuffer[nt]);D.__webglDepthRenderbuffer&amp;&amp;n.deleteRenderbuffer(D.__webglDepthRenderbuffer)}let k=I.textures;for(let nt=0,gt=k.length;nt&lt;gt;nt++){let at=i.get(k[nt]);at.__webglTexture&amp;&amp;(n.deleteTexture(at.__webglTexture),o.memory.textures--),i.remove(k[nt])}i.remove(I)}let P=0;function j(){P=0}function X(){let I=P;return I&gt;=a.maxTextures&amp;&amp;console.warn(&quot;THREE.WebGLTextures: Trying to use &quot;+I+&quot; texture units while this GPU supports only &quot;+a.maxTextures),P+=1,I}function Z(I){let D=[];return D.push(I.wrapS),D.push(I.wrapT),D.push(I.wrapR||0),D.push(I.magFilter),D.push(I.minFilter),D.push(I.anisotropy),D.push(I.internalFormat),D.push(I.format),D.push(I.type),D.push(I.generateMipmaps),D.push(I.premultiplyAlpha),D.push(I.flipY),D.push(I.unpackAlignment),D.push(I.colorSpace),D.join()}function st(I,D){let k=i.get(I);if(I.isVideoTexture&amp;&amp;Rt(I),I.isRenderTargetTexture===!1&amp;&amp;I.isExternalTexture!==!0&amp;&amp;I.version&gt;0&amp;&amp;k.__version!==I.version){let nt=I.image;if(nt===null)console.warn(&quot;THREE.WebGLRenderer: Texture marked for update but no image data found.&quot;);else if(nt.complete===!1)console.warn(&quot;THREE.WebGLRenderer: Texture marked for update but image is incomplete&quot;);else{wt(k,I,D);return}}else I.isExternalTexture&amp;&amp;(k.__webglTexture=I.sourceTexture?I.sourceTexture:null);e.bindTexture(n.TEXTURE_2D,k.__webglTexture,n.TEXTURE0+D)}function et(I,D){let k=i.get(I);if(I.isRenderTargetTexture===!1&amp;&amp;I.version&gt;0&amp;&amp;k.__version!==I.version){wt(k,I,D);return}e.bindTexture(n.TEXTURE_2D_ARRAY,k.__webglTexture,n.TEXTURE0+D)}function mt(I,D){let k=i.get(I);if(I.isRenderTargetTexture===!1&amp;&amp;I.version&gt;0&amp;&amp;k.__version!==I.version){wt(k,I,D);return}e.bindTexture(n.TEXTURE_3D,k.__webglTexture,n.TEXTURE0+D)}function K(I,D){let k=i.get(I);if(I.version&gt;0&amp;&amp;k.__version!==I.version){bt(k,I,D);return}e.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+D)}let _t={[Bf]:n.REPEAT,[Ua]:n.CLAMP_TO_EDGE,[Pf]:n.MIRRORED_REPEAT},Ut={[oi]:n.NEAREST,[nx]:n.NEAREST_MIPMAP_NEAREST,[Lu]:n.NEAREST_MIPMAP_LINEAR,[Gn]:n.LINEAR,[_h]:n.LINEAR_MIPMAP_NEAREST,[Us]:n.LINEAR_MIPMAP_LINEAR},xt={[ET]:n.NEVER,[wT]:n.ALWAYS,[bT]:n.LESS,[fx]:n.LEQUAL,[TT]:n.EQUAL,[CT]:n.GEQUAL,[AT]:n.GREATER,[RT]:n.NOTEQUAL};function It(I,D){if(D.type===qi&amp;&amp;t.has(&quot;OES_texture_float_linear&quot;)===!1&amp;&amp;(D.magFilter===Gn||D.magFilter===_h||D.magFilter===Lu||D.magFilter===Us||D.minFilter===Gn||D.minFilter===_h||D.minFilter===Lu||D.minFilter===Us)&amp;&amp;console.warn(&quot;THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device.&quot;),n.texParameteri(I,n.TEXTURE_WRAP_S,_t[D.wrapS]),n.texParameteri(I,n.TEXTURE_WRAP_T,_t[D.wrapT]),(I===n.TEXTURE_3D||I===n.TEXTURE_2D_ARRAY)&amp;&amp;n.texParameteri(I,n.TEXTURE_WRAP_R,_t[D.wrapR]),n.texParameteri(I,n.TEXTURE_MAG_FILTER,Ut[D.magFilter]),n.texParameteri(I,n.TEXTURE_MIN_FILTER,Ut[D.minFilter]),D.compareFunction&amp;&amp;(n.texParameteri(I,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(I,n.TEXTURE_COMPARE_FUNC,xt[D.compareFunction])),t.has(&quot;EXT_texture_filter_anisotropic&quot;)===!0){if(D.magFilter===oi||D.minFilter!==Lu&amp;&amp;D.minFilter!==Us||D.type===qi&amp;&amp;t.has(&quot;OES_texture_float_linear&quot;)===!1)return;if(D.anisotropy&gt;1||i.get(D).__currentAnisotropy){let k=t.get(&quot;EXT_texture_filter_anisotropic&quot;);n.texParameterf(I,k.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,a.getMaxAnisotropy())),i.get(D).__currentAnisotropy=D.anisotropy}}}function se(I,D){let k=!1;I.__webglInit===void 0&amp;&amp;(I.__webglInit=!0,D.addEventListener(&quot;dispose&quot;,U));let nt=D.source,gt=g.get(nt);gt===void 0&amp;&amp;(gt={},g.set(nt,gt));let at=Z(D);if(at!==I.__cacheKey){gt[at]===void 0&amp;&amp;(gt[at]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,k=!0),gt[at].usedTimes++;let jt=gt[I.__cacheKey];jt!==void 0&amp;&amp;(gt[I.__cacheKey].usedTimes--,jt.usedTimes===0&amp;&amp;C(D)),I.__cacheKey=at,I.__webglTexture=gt[at].texture}return k}function Qt(I,D,k){return Math.floor(Math.floor(I/k)/D)}function it(I,D,k,nt){let at=I.updateRanges;if(at.length===0)e.texSubImage2D(n.TEXTURE_2D,0,0,0,D.width,D.height,k,nt,D.data);else{at.sort((vt,Ot)=&gt;vt.start-Ot.start);let jt=0;for(let vt=1;vt&lt;at.length;vt++){let Ot=at[jt],ne=at[vt],kt=Ot.start+Ot.count,Nt=Qt(ne.start,D.width,4),me=Qt(Ot.start,D.width,4);ne.start&lt;=kt+1&amp;&amp;Nt===me&amp;&amp;Qt(ne.start+ne.count-1,D.width,4)===Nt?Ot.count=Math.max(Ot.count,ne.start+ne.count-Ot.start):(++jt,at[jt]=ne)}at.length=jt+1;let Tt=n.getParameter(n.UNPACK_ROW_LENGTH),Wt=n.getParameter(n.UNPACK_SKIP_PIXELS),Ft=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,D.width);for(let vt=0,Ot=at.length;vt&lt;Ot;vt++){let ne=at[vt],kt=Math.floor(ne.start/4),Nt=Math.ceil(ne.count/4),me=kt%D.width,G=Math.floor(kt/D.width),Mt=Nt,Dt=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,me),n.pixelStorei(n.UNPACK_SKIP_ROWS,G),e.texSubImage2D(n.TEXTURE_2D,0,me,G,Mt,Dt,k,nt,D.data)}I.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Tt),n.pixelStorei(n.UNPACK_SKIP_PIXELS,Wt),n.pixelStorei(n.UNPACK_SKIP_ROWS,Ft)}}function wt(I,D,k){let nt=n.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&amp;&amp;(nt=n.TEXTURE_2D_ARRAY),D.isData3DTexture&amp;&amp;(nt=n.TEXTURE_3D);let gt=se(I,D),at=D.source;e.bindTexture(nt,I.__webglTexture,n.TEXTURE0+k);let jt=i.get(at);if(at.version!==jt.__version||gt===!0){e.activeTexture(n.TEXTURE0+k);let Tt=we.getPrimaries(we.workingColorSpace),Wt=D.colorSpace===lr?null:we.getPrimaries(D.colorSpace),Ft=D.colorSpace===lr||Tt===Wt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);let vt=b(D.image,!1,a.maxTextureSize);vt=de(D,vt);let Ot=s.convert(D.format,D.colorSpace),ne=s.convert(D.type),kt=E(D.internalFormat,Ot,ne,D.colorSpace,D.isVideoTexture);It(nt,D);let Nt,me=D.mipmaps,G=D.isVideoTexture!==!0,Mt=jt.__version===void 0||gt===!0,Dt=at.dataReady,Gt=w(D,vt);if(D.isDepthTexture)kt=T(D.format===Iu,D.type),Mt&amp;&amp;(G?e.texStorage2D(n.TEXTURE_2D,1,kt,vt.width,vt.height):e.texImage2D(n.TEXTURE_2D,0,kt,vt.width,vt.height,0,Ot,ne,null));else if(D.isDataTexture)if(me.length&gt;0){G&amp;&amp;Mt&amp;&amp;e.texStorage2D(n.TEXTURE_2D,Gt,kt,me[0].width,me[0].height);for(let St=0,ut=me.length;St&lt;ut;St++)Nt=me[St],G?Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_2D,St,0,0,Nt.width,Nt.height,Ot,ne,Nt.data):e.texImage2D(n.TEXTURE_2D,St,kt,Nt.width,Nt.height,0,Ot,ne,Nt.data);D.generateMipmaps=!1}else G?(Mt&amp;&amp;e.texStorage2D(n.TEXTURE_2D,Gt,kt,vt.width,vt.height),Dt&amp;&amp;it(D,vt,Ot,ne)):e.texImage2D(n.TEXTURE_2D,0,kt,vt.width,vt.height,0,Ot,ne,vt.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){G&amp;&amp;Mt&amp;&amp;e.texStorage3D(n.TEXTURE_2D_ARRAY,Gt,kt,me[0].width,me[0].height,vt.depth);for(let St=0,ut=me.length;St&lt;ut;St++)if(Nt=me[St],D.format!==li)if(Ot!==null)if(G){if(Dt)if(D.layerUpdates.size&gt;0){let qt=dx(Nt.width,Nt.height,D.format,D.type);for(let oe of D.layerUpdates){let He=Nt.data.subarray(oe*qt/Nt.data.BYTES_PER_ELEMENT,(oe+1)*qt/Nt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,St,0,0,oe,Nt.width,Nt.height,1,Ot,He)}D.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,St,0,0,0,Nt.width,Nt.height,vt.depth,Ot,Nt.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,St,kt,Nt.width,Nt.height,vt.depth,0,Nt.data,0,0);else console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()&quot;);else G?Dt&amp;&amp;e.texSubImage3D(n.TEXTURE_2D_ARRAY,St,0,0,0,Nt.width,Nt.height,vt.depth,Ot,ne,Nt.data):e.texImage3D(n.TEXTURE_2D_ARRAY,St,kt,Nt.width,Nt.height,vt.depth,0,Ot,ne,Nt.data)}else{G&amp;&amp;Mt&amp;&amp;e.texStorage2D(n.TEXTURE_2D,Gt,kt,me[0].width,me[0].height);for(let St=0,ut=me.length;St&lt;ut;St++)Nt=me[St],D.format!==li?Ot!==null?G?Dt&amp;&amp;e.compressedTexSubImage2D(n.TEXTURE_2D,St,0,0,Nt.width,Nt.height,Ot,Nt.data):e.compressedTexImage2D(n.TEXTURE_2D,St,kt,Nt.width,Nt.height,0,Nt.data):console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()&quot;):G?Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_2D,St,0,0,Nt.width,Nt.height,Ot,ne,Nt.data):e.texImage2D(n.TEXTURE_2D,St,kt,Nt.width,Nt.height,0,Ot,ne,Nt.data)}else if(D.isDataArrayTexture)if(G){if(Mt&amp;&amp;e.texStorage3D(n.TEXTURE_2D_ARRAY,Gt,kt,vt.width,vt.height,vt.depth),Dt)if(D.layerUpdates.size&gt;0){let St=dx(vt.width,vt.height,D.format,D.type);for(let ut of D.layerUpdates){let qt=vt.data.subarray(ut*St/vt.data.BYTES_PER_ELEMENT,(ut+1)*St/vt.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,ut,vt.width,vt.height,1,Ot,ne,qt)}D.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,vt.width,vt.height,vt.depth,Ot,ne,vt.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,kt,vt.width,vt.height,vt.depth,0,Ot,ne,vt.data);else if(D.isData3DTexture)G?(Mt&amp;&amp;e.texStorage3D(n.TEXTURE_3D,Gt,kt,vt.width,vt.height,vt.depth),Dt&amp;&amp;e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,vt.width,vt.height,vt.depth,Ot,ne,vt.data)):e.texImage3D(n.TEXTURE_3D,0,kt,vt.width,vt.height,vt.depth,0,Ot,ne,vt.data);else if(D.isFramebufferTexture){if(Mt)if(G)e.texStorage2D(n.TEXTURE_2D,Gt,kt,vt.width,vt.height);else{let St=vt.width,ut=vt.height;for(let qt=0;qt&lt;Gt;qt++)e.texImage2D(n.TEXTURE_2D,qt,kt,St,ut,0,Ot,ne,null),St&gt;&gt;=1,ut&gt;&gt;=1}}else if(me.length&gt;0){if(G&amp;&amp;Mt){let St=ue(me[0]);e.texStorage2D(n.TEXTURE_2D,Gt,kt,St.width,St.height)}for(let St=0,ut=me.length;St&lt;ut;St++)Nt=me[St],G?Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_2D,St,0,0,Ot,ne,Nt):e.texImage2D(n.TEXTURE_2D,St,kt,Ot,ne,Nt);D.generateMipmaps=!1}else if(G){if(Mt){let St=ue(vt);e.texStorage2D(n.TEXTURE_2D,Gt,kt,St.width,St.height)}Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_2D,0,0,0,Ot,ne,vt)}else e.texImage2D(n.TEXTURE_2D,0,kt,Ot,ne,vt);M(D)&amp;&amp;v(nt),jt.__version=at.version,D.onUpdate&amp;&amp;D.onUpdate(D)}I.__version=D.version}function bt(I,D,k){if(D.image.length!==6)return;let nt=se(I,D),gt=D.source;e.bindTexture(n.TEXTURE_CUBE_MAP,I.__webglTexture,n.TEXTURE0+k);let at=i.get(gt);if(gt.version!==at.__version||nt===!0){e.activeTexture(n.TEXTURE0+k);let jt=we.getPrimaries(we.workingColorSpace),Tt=D.colorSpace===lr?null:we.getPrimaries(D.colorSpace),Wt=D.colorSpace===lr||jt===Tt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,D.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,D.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Wt);let Ft=D.isCompressedTexture||D.image[0].isCompressedTexture,vt=D.image[0]&amp;&amp;D.image[0].isDataTexture,Ot=[];for(let ut=0;ut&lt;6;ut++)!Ft&amp;&amp;!vt?Ot[ut]=b(D.image[ut],!0,a.maxCubemapSize):Ot[ut]=vt?D.image[ut].image:D.image[ut],Ot[ut]=de(D,Ot[ut]);let ne=Ot[0],kt=s.convert(D.format,D.colorSpace),Nt=s.convert(D.type),me=E(D.internalFormat,kt,Nt,D.colorSpace),G=D.isVideoTexture!==!0,Mt=at.__version===void 0||nt===!0,Dt=gt.dataReady,Gt=w(D,ne);It(n.TEXTURE_CUBE_MAP,D);let St;if(Ft){G&amp;&amp;Mt&amp;&amp;e.texStorage2D(n.TEXTURE_CUBE_MAP,Gt,me,ne.width,ne.height);for(let ut=0;ut&lt;6;ut++){St=Ot[ut].mipmaps;for(let qt=0;qt&lt;St.length;qt++){let oe=St[qt];D.format!==li?kt!==null?G?Dt&amp;&amp;e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,qt,0,0,oe.width,oe.height,kt,oe.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,qt,me,oe.width,oe.height,0,oe.data):console.warn(&quot;THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()&quot;):G?Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,qt,0,0,oe.width,oe.height,kt,Nt,oe.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,qt,me,oe.width,oe.height,0,kt,Nt,oe.data)}}}else{if(St=D.mipmaps,G&amp;&amp;Mt){St.length&gt;0&amp;&amp;Gt++;let ut=ue(Ot[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,Gt,me,ut.width,ut.height)}for(let ut=0;ut&lt;6;ut++)if(vt){G?Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,0,0,Ot[ut].width,Ot[ut].height,kt,Nt,Ot[ut].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,me,Ot[ut].width,Ot[ut].height,0,kt,Nt,Ot[ut].data);for(let qt=0;qt&lt;St.length;qt++){let He=St[qt].image[ut].image;G?Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,qt+1,0,0,He.width,He.height,kt,Nt,He.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,qt+1,me,He.width,He.height,0,kt,Nt,He.data)}}else{G?Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,0,0,kt,Nt,Ot[ut]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0,me,kt,Nt,Ot[ut]);for(let qt=0;qt&lt;St.length;qt++){let oe=St[qt];G?Dt&amp;&amp;e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,qt+1,0,0,kt,Nt,oe.image[ut]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,qt+1,me,kt,Nt,oe.image[ut])}}}M(D)&amp;&amp;v(n.TEXTURE_CUBE_MAP),at.__version=gt.version,D.onUpdate&amp;&amp;D.onUpdate(D)}I.__version=D.version}function Jt(I,D,k,nt,gt,at){let jt=s.convert(k.format,k.colorSpace),Tt=s.convert(k.type),Wt=E(k.internalFormat,jt,Tt,k.colorSpace),Ft=i.get(D),vt=i.get(k);if(vt.__renderTarget=D,!Ft.__hasExternalTextures){let Ot=Math.max(1,D.width&gt;&gt;at),ne=Math.max(1,D.height&gt;&gt;at);gt===n.TEXTURE_3D||gt===n.TEXTURE_2D_ARRAY?e.texImage3D(gt,at,Wt,Ot,ne,D.depth,0,jt,Tt,null):e.texImage2D(gt,at,Wt,Ot,ne,0,jt,Tt,null)}e.bindFramebuffer(n.FRAMEBUFFER,I),dt(D)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,nt,gt,vt.__webglTexture,0,Ct(D)):(gt===n.TEXTURE_2D||gt&gt;=n.TEXTURE_CUBE_MAP_POSITIVE_X&amp;&amp;gt&lt;=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&amp;&amp;n.framebufferTexture2D(n.FRAMEBUFFER,nt,gt,vt.__webglTexture,at),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Zt(I,D,k){if(n.bindRenderbuffer(n.RENDERBUFFER,I),D.depthBuffer){let nt=D.depthTexture,gt=nt&amp;&amp;nt.isDepthTexture?nt.type:null,at=T(D.stencilBuffer,gt),jt=D.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Tt=Ct(D);dt(D)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Tt,at,D.width,D.height):k?n.renderbufferStorageMultisample(n.RENDERBUFFER,Tt,at,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,at,D.width,D.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,jt,n.RENDERBUFFER,I)}else{let nt=D.textures;for(let gt=0;gt&lt;nt.length;gt++){let at=nt[gt],jt=s.convert(at.format,at.colorSpace),Tt=s.convert(at.type),Wt=E(at.internalFormat,jt,Tt,at.colorSpace),Ft=Ct(D);k&amp;&amp;dt(D)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ft,Wt,D.width,D.height):dt(D)?u.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ft,Wt,D.width,D.height):n.renderbufferStorage(n.RENDERBUFFER,Wt,D.width,D.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function te(I,D){if(D&amp;&amp;D.isWebGLCubeRenderTarget)throw new Error(&quot;Depth Texture with cube render targets is not supported&quot;);if(e.bindFramebuffer(n.FRAMEBUFFER,I),!(D.depthTexture&amp;&amp;D.depthTexture.isDepthTexture))throw new Error(&quot;renderTarget.depthTexture must be an instance of THREE.DepthTexture&quot;);let nt=i.get(D.depthTexture);nt.__renderTarget=D,(!nt.__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&amp;&amp;(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),st(D.depthTexture,0);let gt=nt.__webglTexture,at=Ct(D);if(D.depthTexture.format===gu)dt(D)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,gt,0,at):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,gt,0);else if(D.depthTexture.format===Iu)dt(D)?u.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,gt,0,at):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,gt,0);else throw new Error(&quot;Unknown depthTexture format&quot;)}function ke(I){let D=i.get(I),k=I.isWebGLCubeRenderTarget===!0;if(D.__boundDepthTexture!==I.depthTexture){let nt=I.depthTexture;if(D.__depthDisposeCallback&amp;&amp;D.__depthDisposeCallback(),nt){let gt=()=&gt;{delete D.__boundDepthTexture,delete D.__depthDisposeCallback,nt.removeEventListener(&quot;dispose&quot;,gt)};nt.addEventListener(&quot;dispose&quot;,gt),D.__depthDisposeCallback=gt}D.__boundDepthTexture=nt}if(I.depthTexture&amp;&amp;!D.__autoAllocateDepthBuffer){if(k)throw new Error(&quot;target.depthTexture not supported in Cube render targets&quot;);let nt=I.texture.mipmaps;nt&amp;&amp;nt.length&gt;0?te(D.__webglFramebuffer[0],I):te(D.__webglFramebuffer,I)}else if(k){D.__webglDepthbuffer=[];for(let nt=0;nt&lt;6;nt++)if(e.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[nt]),D.__webglDepthbuffer[nt]===void 0)D.__webglDepthbuffer[nt]=n.createRenderbuffer(),Zt(D.__webglDepthbuffer[nt],I,!1);else{let gt=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,at=D.__webglDepthbuffer[nt];n.bindRenderbuffer(n.RENDERBUFFER,at),n.framebufferRenderbuffer(n.FRAMEBUFFER,gt,n.RENDERBUFFER,at)}}else{let nt=I.texture.mipmaps;if(nt&amp;&amp;nt.length&gt;0?e.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer[0]):e.bindFramebuffer(n.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer===void 0)D.__webglDepthbuffer=n.createRenderbuffer(),Zt(D.__webglDepthbuffer,I,!1);else{let gt=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,at=D.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,at),n.framebufferRenderbuffer(n.FRAMEBUFFER,gt,n.RENDERBUFFER,at)}}e.bindFramebuffer(n.FRAMEBUFFER,null)}function re(I,D,k){let nt=i.get(I);D!==void 0&amp;&amp;Jt(nt.__webglFramebuffer,I,I.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),k!==void 0&amp;&amp;ke(I)}function H(I){let D=I.texture,k=i.get(I),nt=i.get(D);I.addEventListener(&quot;dispose&quot;,O);let gt=I.textures,at=I.isWebGLCubeRenderTarget===!0,jt=gt.length&gt;1;if(jt||(nt.__webglTexture===void 0&amp;&amp;(nt.__webglTexture=n.createTexture()),nt.__version=D.version,o.memory.textures++),at){k.__webglFramebuffer=[];for(let Tt=0;Tt&lt;6;Tt++)if(D.mipmaps&amp;&amp;D.mipmaps.length&gt;0){k.__webglFramebuffer[Tt]=[];for(let Wt=0;Wt&lt;D.mipmaps.length;Wt++)k.__webglFramebuffer[Tt][Wt]=n.createFramebuffer()}else k.__webglFramebuffer[Tt]=n.createFramebuffer()}else{if(D.mipmaps&amp;&amp;D.mipmaps.length&gt;0){k.__webglFramebuffer=[];for(let Tt=0;Tt&lt;D.mipmaps.length;Tt++)k.__webglFramebuffer[Tt]=n.createFramebuffer()}else k.__webglFramebuffer=n.createFramebuffer();if(jt)for(let Tt=0,Wt=gt.length;Tt&lt;Wt;Tt++){let Ft=i.get(gt[Tt]);Ft.__webglTexture===void 0&amp;&amp;(Ft.__webglTexture=n.createTexture(),o.memory.textures++)}if(I.samples&gt;0&amp;&amp;dt(I)===!1){k.__webglMultisampledFramebuffer=n.createFramebuffer(),k.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,k.__webglMultisampledFramebuffer);for(let Tt=0;Tt&lt;gt.length;Tt++){let Wt=gt[Tt];k.__webglColorRenderbuffer[Tt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,k.__webglColorRenderbuffer[Tt]);let Ft=s.convert(Wt.format,Wt.colorSpace),vt=s.convert(Wt.type),Ot=E(Wt.internalFormat,Ft,vt,Wt.colorSpace,I.isXRRenderTarget===!0),ne=Ct(I);n.renderbufferStorageMultisample(n.RENDERBUFFER,ne,Ot,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Tt,n.RENDERBUFFER,k.__webglColorRenderbuffer[Tt])}n.bindRenderbuffer(n.RENDERBUFFER,null),I.depthBuffer&amp;&amp;(k.__webglDepthRenderbuffer=n.createRenderbuffer(),Zt(k.__webglDepthRenderbuffer,I,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(at){e.bindTexture(n.TEXTURE_CUBE_MAP,nt.__webglTexture),It(n.TEXTURE_CUBE_MAP,D);for(let Tt=0;Tt&lt;6;Tt++)if(D.mipmaps&amp;&amp;D.mipmaps.length&gt;0)for(let Wt=0;Wt&lt;D.mipmaps.length;Wt++)Jt(k.__webglFramebuffer[Tt][Wt],I,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Tt,Wt);else Jt(k.__webglFramebuffer[Tt],I,D,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Tt,0);M(D)&amp;&amp;v(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(jt){for(let Tt=0,Wt=gt.length;Tt&lt;Wt;Tt++){let Ft=gt[Tt],vt=i.get(Ft),Ot=n.TEXTURE_2D;(I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&amp;&amp;(Ot=I.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Ot,vt.__webglTexture),It(Ot,Ft),Jt(k.__webglFramebuffer,I,Ft,n.COLOR_ATTACHMENT0+Tt,Ot,0),M(Ft)&amp;&amp;v(Ot)}e.unbindTexture()}else{let Tt=n.TEXTURE_2D;if((I.isWebGL3DRenderTarget||I.isWebGLArrayRenderTarget)&amp;&amp;(Tt=I.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Tt,nt.__webglTexture),It(Tt,D),D.mipmaps&amp;&amp;D.mipmaps.length&gt;0)for(let Wt=0;Wt&lt;D.mipmaps.length;Wt++)Jt(k.__webglFramebuffer[Wt],I,D,n.COLOR_ATTACHMENT0,Tt,Wt);else Jt(k.__webglFramebuffer,I,D,n.COLOR_ATTACHMENT0,Tt,0);M(D)&amp;&amp;v(Tt),e.unbindTexture()}I.depthBuffer&amp;&amp;ke(I)}function ht(I){let D=I.textures;for(let k=0,nt=D.length;k&lt;nt;k++){let gt=D[k];if(M(gt)){let at=S(I),jt=i.get(gt).__webglTexture;e.bindTexture(at,jt),v(at),e.unbindTexture()}}}let rt=[],pt=[];function lt(I){if(I.samples&gt;0){if(dt(I)===!1){let D=I.textures,k=I.width,nt=I.height,gt=n.COLOR_BUFFER_BIT,at=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,jt=i.get(I),Tt=D.length&gt;1;if(Tt)for(let Ft=0;Ft&lt;D.length;Ft++)e.bindFramebuffer(n.FRAMEBUFFER,jt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,jt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,jt.__webglMultisampledFramebuffer);let Wt=I.texture.mipmaps;Wt&amp;&amp;Wt.length&gt;0?e.bindFramebuffer(n.DRAW_FRAMEBUFFER,jt.__webglFramebuffer[0]):e.bindFramebuffer(n.DRAW_FRAMEBUFFER,jt.__webglFramebuffer);for(let Ft=0;Ft&lt;D.length;Ft++){if(I.resolveDepthBuffer&amp;&amp;(I.depthBuffer&amp;&amp;(gt|=n.DEPTH_BUFFER_BIT),I.stencilBuffer&amp;&amp;I.resolveStencilBuffer&amp;&amp;(gt|=n.STENCIL_BUFFER_BIT)),Tt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,jt.__webglColorRenderbuffer[Ft]);let vt=i.get(D[Ft]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,vt,0)}n.blitFramebuffer(0,0,k,nt,0,0,k,nt,gt,n.NEAREST),c===!0&amp;&amp;(rt.length=0,pt.length=0,rt.push(n.COLOR_ATTACHMENT0+Ft),I.depthBuffer&amp;&amp;I.resolveDepthBuffer===!1&amp;&amp;(rt.push(at),pt.push(at),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,pt)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,rt))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Tt)for(let Ft=0;Ft&lt;D.length;Ft++){e.bindFramebuffer(n.FRAMEBUFFER,jt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.RENDERBUFFER,jt.__webglColorRenderbuffer[Ft]);let vt=i.get(D[Ft]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,jt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.TEXTURE_2D,vt,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,jt.__webglMultisampledFramebuffer)}else if(I.depthBuffer&amp;&amp;I.resolveDepthBuffer===!1&amp;&amp;c){let D=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[D])}}}function Ct(I){return Math.min(a.maxSamples,I.samples)}function dt(I){let D=i.get(I);return I.samples&gt;0&amp;&amp;t.has(&quot;WEBGL_multisampled_render_to_texture&quot;)===!0&amp;&amp;D.__useRenderToTexture!==!1}function Rt(I){let D=o.render.frame;d.get(I)!==D&amp;&amp;(d.set(I,D),I.update())}function de(I,D){let k=I.colorSpace,nt=I.format,gt=I.type;return I.isCompressedTexture===!0||I.isVideoTexture===!0||k!==er&amp;&amp;k!==lr&amp;&amp;(we.getTransfer(k)===We?(nt!==li||gt!==la)&amp;&amp;console.warn(&quot;THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.&quot;):console.error(&quot;THREE.WebGLTextures: Unsupported texture color space:&quot;,k)),D}function ue(I){return typeof HTMLImageElement&lt;&quot;u&quot;&amp;&amp;I instanceof HTMLImageElement?(h.width=I.naturalWidth||I.width,h.height=I.naturalHeight||I.height):typeof VideoFrame&lt;&quot;u&quot;&amp;&amp;I instanceof VideoFrame?(h.width=I.displayWidth,h.height=I.displayHeight):(h.width=I.width,h.height=I.height),h}this.allocateTextureUnit=X,this.resetTextureUnits=j,this.setTexture2D=st,this.setTexture2DArray=et,this.setTexture3D=mt,this.setTextureCube=K,this.rebindTextures=re,this.setupRenderTarget=H,this.updateRenderTargetMipmap=ht,this.updateMultisampleRenderTarget=lt,this.setupDepthRenderbuffer=ke,this.setupFrameBufferTexture=Jt,this.useMultisampledRTT=dt}function tL(n,t){function e(i,a=lr){let s,o=we.getTransfer(a);if(i===la)return n.UNSIGNED_BYTE;if(i===sg)return n.UNSIGNED_SHORT_4_4_4_4;if(i===rg)return n.UNSIGNED_SHORT_5_5_5_1;if(i===sx)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===ix)return n.BYTE;if(i===ax)return n.SHORT;if(i===zu)return n.UNSIGNED_SHORT;if(i===ag)return n.INT;if(i===or)return n.UNSIGNED_INT;if(i===qi)return n.FLOAT;if(i===Bu)return n.HALF_FLOAT;if(i===rx)return n.ALPHA;if(i===ox)return n.RGB;if(i===li)return n.RGBA;if(i===gu)return n.DEPTH_COMPONENT;if(i===Iu)return n.DEPTH_STENCIL;if(i===og)return n.RED;if(i===xh)return n.RED_INTEGER;if(i===lx)return n.RG;if(i===lg)return n.RG_INTEGER;if(i===ug)return n.RGBA_INTEGER;if(i===Sh||i===Mh||i===Eh||i===bh)if(o===We)if(s=t.get(&quot;WEBGL_compressed_texture_s3tc_srgb&quot;),s!==null){if(i===Sh)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Mh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===Eh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===bh)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=t.get(&quot;WEBGL_compressed_texture_s3tc&quot;),s!==null){if(i===Sh)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Mh)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===Eh)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===bh)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===cg||i===fg||i===hg||i===dg)if(s=t.get(&quot;WEBGL_compressed_texture_pvrtc&quot;),s!==null){if(i===cg)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===fg)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===hg)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===dg)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===pg||i===mg||i===gg)if(s=t.get(&quot;WEBGL_compressed_texture_etc&quot;),s!==null){if(i===pg||i===mg)return o===We?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===gg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===vg||i===yg||i===_g||i===xg||i===Sg||i===Mg||i===Eg||i===bg||i===Tg||i===Ag||i===Rg||i===Cg||i===wg||i===Dg)if(s=t.get(&quot;WEBGL_compressed_texture_astc&quot;),s!==null){if(i===vg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===yg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===_g)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===xg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Sg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Mg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Eg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===bg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Tg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Ag)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Rg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Cg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===wg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Dg)return o===We?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Th||i===Ug||i===Ng)if(s=t.get(&quot;EXT_texture_compression_bptc&quot;),s!==null){if(i===Th)return o===We?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Ug)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Ng)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===ux||i===Og||i===Lg||i===zg)if(s=t.get(&quot;EXT_texture_compression_rgtc&quot;),s!==null){if(i===Th)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Og)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Lg)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===zg)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Pu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}var vx=class extends zn{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}},C8=`
<a href="#l3828" class="line" id="l3828">   3828</a> void main() {
<a href="#l3829" class="line" id="l3829">   3829</a> 
<a href="#l3830" class="line" id="l3830">   3830</a> 	gl_Position = vec4( position, 1.0 );
<a href="#l3831" class="line" id="l3831">   3831</a> 
<a href="#l3832" class="line" id="l3832">   3832</a> }`,w8=`
<a href="#l3833" class="line" id="l3833">   3833</a> uniform sampler2DArray depthColor;
<a href="#l3834" class="line" id="l3834">   3834</a> uniform float depthWidth;
<a href="#l3835" class="line" id="l3835">   3835</a> uniform float depthHeight;
<a href="#l3836" class="line" id="l3836">   3836</a> 
<a href="#l3837" class="line" id="l3837">   3837</a> void main() {
<a href="#l3838" class="line" id="l3838">   3838</a> 
<a href="#l3839" class="line" id="l3839">   3839</a> 	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );
<a href="#l3840" class="line" id="l3840">   3840</a> 
<a href="#l3841" class="line" id="l3841">   3841</a> 	if ( coord.x &gt;= 1.0 ) {
<a href="#l3842" class="line" id="l3842">   3842</a> 
<a href="#l3843" class="line" id="l3843">   3843</a> 		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;
<a href="#l3844" class="line" id="l3844">   3844</a> 
<a href="#l3845" class="line" id="l3845">   3845</a> 	} else {
<a href="#l3846" class="line" id="l3846">   3846</a> 
<a href="#l3847" class="line" id="l3847">   3847</a> 		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;
<a href="#l3848" class="line" id="l3848">   3848</a> 
<a href="#l3849" class="line" id="l3849">   3849</a> 	}
<a href="#l3850" class="line" id="l3850">   3850</a> 
<a href="#l3851" class="line" id="l3851">   3851</a> }`,JT=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(this.texture===null){let i=new vx(t.texture);(t.depthNear!==e.depthNear||t.depthFar!==e.depthFar)&amp;&amp;(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=i}}getMesh(t){if(this.texture!==null&amp;&amp;this.mesh===null){let e=t.cameras[0].viewport,i=new ra({vertexShader:C8,fragmentShader:w8,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new En(new Du(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},$T=class extends La{constructor(t,e){super();let i=this,a=null,s=1,o=null,u=&quot;local-floor&quot;,c=1,h=null,d=null,m=null,g=null,y=null,x=null,b=new JT,M={},v=e.getContextAttributes(),S=null,E=null,T=[],w=[],U=new ct,O=null,z=new Un;z.viewport=new Oe;let C=new Un;C.viewport=new Oe;let R=[z,C],P=new Ym,j=null,X=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(it){let wt=T[it];return wt===void 0&amp;&amp;(wt=new Eu,T[it]=wt),wt.getTargetRaySpace()},this.getControllerGrip=function(it){let wt=T[it];return wt===void 0&amp;&amp;(wt=new Eu,T[it]=wt),wt.getGripSpace()},this.getHand=function(it){let wt=T[it];return wt===void 0&amp;&amp;(wt=new Eu,T[it]=wt),wt.getHandSpace()};function Z(it){let wt=w.indexOf(it.inputSource);if(wt===-1)return;let bt=T[wt];bt!==void 0&amp;&amp;(bt.update(it.inputSource,it.frame,h||o),bt.dispatchEvent({type:it.type,data:it.inputSource}))}function st(){a.removeEventListener(&quot;select&quot;,Z),a.removeEventListener(&quot;selectstart&quot;,Z),a.removeEventListener(&quot;selectend&quot;,Z),a.removeEventListener(&quot;squeeze&quot;,Z),a.removeEventListener(&quot;squeezestart&quot;,Z),a.removeEventListener(&quot;squeezeend&quot;,Z),a.removeEventListener(&quot;end&quot;,st),a.removeEventListener(&quot;inputsourceschange&quot;,et);for(let it=0;it&lt;T.length;it++){let wt=w[it];wt!==null&amp;&amp;(w[it]=null,T[it].disconnect(wt))}j=null,X=null,b.reset();for(let it in M)delete M[it];t.setRenderTarget(S),y=null,g=null,m=null,a=null,E=null,Qt.stop(),i.isPresenting=!1,t.setPixelRatio(O),t.setSize(U.width,U.height,!1),i.dispatchEvent({type:&quot;sessionend&quot;})}this.setFramebufferScaleFactor=function(it){s=it,i.isPresenting===!0&amp;&amp;console.warn(&quot;THREE.WebXRManager: Cannot change framebuffer scale while presenting.&quot;)},this.setReferenceSpaceType=function(it){u=it,i.isPresenting===!0&amp;&amp;console.warn(&quot;THREE.WebXRManager: Cannot change reference space type while presenting.&quot;)},this.getReferenceSpace=function(){return h||o},this.setReferenceSpace=function(it){h=it},this.getBaseLayer=function(){return g!==null?g:y},this.getBinding=function(){return m},this.getFrame=function(){return x},this.getSession=function(){return a},this.setSession=async function(it){if(a=it,a!==null){if(S=t.getRenderTarget(),a.addEventListener(&quot;select&quot;,Z),a.addEventListener(&quot;selectstart&quot;,Z),a.addEventListener(&quot;selectend&quot;,Z),a.addEventListener(&quot;squeeze&quot;,Z),a.addEventListener(&quot;squeezestart&quot;,Z),a.addEventListener(&quot;squeezeend&quot;,Z),a.addEventListener(&quot;end&quot;,st),a.addEventListener(&quot;inputsourceschange&quot;,et),v.xrCompatible!==!0&amp;&amp;await e.makeXRCompatible(),O=t.getPixelRatio(),t.getSize(U),typeof XRWebGLBinding&lt;&quot;u&quot;&amp;&amp;(m=new XRWebGLBinding(a,e)),m!==null&amp;&amp;&quot;createProjectionLayer&quot;in XRWebGLBinding.prototype){let bt=null,Jt=null,Zt=null;v.depth&amp;&amp;(Zt=v.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,bt=v.stencil?Iu:gu,Jt=v.stencil?Pu:or);let te={colorFormat:e.RGBA8,depthFormat:Zt,scaleFactor:s};g=m.createProjectionLayer(te),a.updateRenderState({layers:[g]}),t.setPixelRatio(1),t.setSize(g.textureWidth,g.textureHeight,!1),E=new za(g.textureWidth,g.textureHeight,{format:li,type:la,depthTexture:new jf(g.textureWidth,g.textureHeight,Jt,void 0,void 0,void 0,void 0,void 0,void 0,bt),stencilBuffer:v.stencil,colorSpace:t.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}else{let bt={antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(a,e,bt),a.updateRenderState({baseLayer:y}),t.setPixelRatio(1),t.setSize(y.framebufferWidth,y.framebufferHeight,!1),E=new za(y.framebufferWidth,y.framebufferHeight,{format:li,type:la,colorSpace:t.outputColorSpace,stencilBuffer:v.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(c),h=null,o=await a.requestReferenceSpace(u),Qt.setContext(a),Qt.start(),i.isPresenting=!0,i.dispatchEvent({type:&quot;sessionstart&quot;})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function et(it){for(let wt=0;wt&lt;it.removed.length;wt++){let bt=it.removed[wt],Jt=w.indexOf(bt);Jt&gt;=0&amp;&amp;(w[Jt]=null,T[Jt].disconnect(bt))}for(let wt=0;wt&lt;it.added.length;wt++){let bt=it.added[wt],Jt=w.indexOf(bt);if(Jt===-1){for(let te=0;te&lt;T.length;te++)if(te&gt;=w.length){w.push(bt),Jt=te;break}else if(w[te]===null){w[te]=bt,Jt=te;break}if(Jt===-1)break}let Zt=T[Jt];Zt&amp;&amp;Zt.connect(bt)}}let mt=new B,K=new B;function _t(it,wt,bt){mt.setFromMatrixPosition(wt.matrixWorld),K.setFromMatrixPosition(bt.matrixWorld);let Jt=mt.distanceTo(K),Zt=wt.projectionMatrix.elements,te=bt.projectionMatrix.elements,ke=Zt[14]/(Zt[10]-1),re=Zt[14]/(Zt[10]+1),H=(Zt[9]+1)/Zt[5],ht=(Zt[9]-1)/Zt[5],rt=(Zt[8]-1)/Zt[0],pt=(te[8]+1)/te[0],lt=ke*rt,Ct=ke*pt,dt=Jt/(-rt+pt),Rt=dt*-rt;if(wt.matrixWorld.decompose(it.position,it.quaternion,it.scale),it.translateX(Rt),it.translateZ(dt),it.matrixWorld.compose(it.position,it.quaternion,it.scale),it.matrixWorldInverse.copy(it.matrixWorld).invert(),Zt[10]===-1)it.projectionMatrix.copy(wt.projectionMatrix),it.projectionMatrixInverse.copy(wt.projectionMatrixInverse);else{let de=ke+dt,ue=re+dt,I=lt-Rt,D=Ct+(Jt-Rt),k=H*re/ue*de,nt=ht*re/ue*de;it.projectionMatrix.makePerspective(I,D,k,nt,de,ue),it.projectionMatrixInverse.copy(it.projectionMatrix).invert()}}function Ut(it,wt){wt===null?it.matrixWorld.copy(it.matrix):it.matrixWorld.multiplyMatrices(wt.matrixWorld,it.matrix),it.matrixWorldInverse.copy(it.matrixWorld).invert()}this.updateCamera=function(it){if(a===null)return;let wt=it.near,bt=it.far;b.texture!==null&amp;&amp;(b.depthNear&gt;0&amp;&amp;(wt=b.depthNear),b.depthFar&gt;0&amp;&amp;(bt=b.depthFar)),P.near=C.near=z.near=wt,P.far=C.far=z.far=bt,(j!==P.near||X!==P.far)&amp;&amp;(a.updateRenderState({depthNear:P.near,depthFar:P.far}),j=P.near,X=P.far),P.layers.mask=it.layers.mask|6,z.layers.mask=P.layers.mask&amp;3,C.layers.mask=P.layers.mask&amp;5;let Jt=it.parent,Zt=P.cameras;Ut(P,Jt);for(let te=0;te&lt;Zt.length;te++)Ut(Zt[te],Jt);Zt.length===2?_t(P,z,C):P.projectionMatrix.copy(z.projectionMatrix),xt(it,P,Jt)};function xt(it,wt,bt){bt===null?it.matrix.copy(wt.matrixWorld):(it.matrix.copy(bt.matrixWorld),it.matrix.invert(),it.matrix.multiply(wt.matrixWorld)),it.matrix.decompose(it.position,it.quaternion,it.scale),it.updateMatrixWorld(!0),it.projectionMatrix.copy(wt.projectionMatrix),it.projectionMatrixInverse.copy(wt.projectionMatrixInverse),it.isPerspectiveCamera&amp;&amp;(it.fov=yu*2*Math.atan(1/it.projectionMatrix.elements[5]),it.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(g===null&amp;&amp;y===null))return c},this.setFoveation=function(it){c=it,g!==null&amp;&amp;(g.fixedFoveation=it),y!==null&amp;&amp;y.fixedFoveation!==void 0&amp;&amp;(y.fixedFoveation=it)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(P)},this.getCameraTexture=function(it){return M[it]};let It=null;function se(it,wt){if(d=wt.getViewerPose(h||o),x=wt,d!==null){let bt=d.views;y!==null&amp;&amp;(t.setRenderTargetFramebuffer(E,y.framebuffer),t.setRenderTarget(E));let Jt=!1;bt.length!==P.cameras.length&amp;&amp;(P.cameras.length=0,Jt=!0);for(let re=0;re&lt;bt.length;re++){let H=bt[re],ht=null;if(y!==null)ht=y.getViewport(H);else{let pt=m.getViewSubImage(g,H);ht=pt.viewport,re===0&amp;&amp;(t.setRenderTargetTextures(E,pt.colorTexture,pt.depthStencilTexture),t.setRenderTarget(E))}let rt=R[re];rt===void 0&amp;&amp;(rt=new Un,rt.layers.enable(re),rt.viewport=new Oe,R[re]=rt),rt.matrix.fromArray(H.transform.matrix),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale),rt.projectionMatrix.fromArray(H.projectionMatrix),rt.projectionMatrixInverse.copy(rt.projectionMatrix).invert(),rt.viewport.set(ht.x,ht.y,ht.width,ht.height),re===0&amp;&amp;(P.matrix.copy(rt.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Jt===!0&amp;&amp;P.cameras.push(rt)}let Zt=a.enabledFeatures;if(Zt&amp;&amp;Zt.includes(&quot;depth-sensing&quot;)&amp;&amp;a.depthUsage==&quot;gpu-optimized&quot;&amp;&amp;m){let re=m.getDepthInformation(bt[0]);re&amp;&amp;re.isValid&amp;&amp;re.texture&amp;&amp;b.init(re,a.renderState)}if(Zt&amp;&amp;Zt.includes(&quot;camera-access&quot;)&amp;&amp;(t.state.unbindTexture(),m))for(let re=0;re&lt;bt.length;re++){let H=bt[re].camera;if(H){let ht=M[H];ht||(ht=new vx,M[H]=ht);let rt=m.getCameraImage(H);ht.sourceTexture=rt}}}for(let bt=0;bt&lt;T.length;bt++){let Jt=w[bt],Zt=T[bt];Jt!==null&amp;&amp;Zt!==void 0&amp;&amp;Zt.update(Jt,wt,h||o)}It&amp;&amp;It(it,wt),wt.detectedPlanes&amp;&amp;i.dispatchEvent({type:&quot;planesdetected&quot;,data:wt}),x=null}let Qt=new jO;Qt.setAnimationLoop(se),this.setAnimationLoop=function(it){It=it},this.dispose=function(){}}},Vu=new sa,D8=new fe;function U8(n,t){function e(M,v){M.matrixAutoUpdate===!0&amp;&amp;M.updateMatrix(),v.value.copy(M.matrix)}function i(M,v){v.color.getRGB(M.fogColor.value,OT(n)),v.isFog?(M.fogNear.value=v.near,M.fogFar.value=v.far):v.isFogExp2&amp;&amp;(M.fogDensity.value=v.density)}function a(M,v,S,E,T){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(M,v):v.isMeshToonMaterial?(s(M,v),m(M,v)):v.isMeshPhongMaterial?(s(M,v),d(M,v)):v.isMeshStandardMaterial?(s(M,v),g(M,v),v.isMeshPhysicalMaterial&amp;&amp;y(M,v,T)):v.isMeshMatcapMaterial?(s(M,v),x(M,v)):v.isMeshDepthMaterial?s(M,v):v.isMeshDistanceMaterial?(s(M,v),b(M,v)):v.isMeshNormalMaterial?s(M,v):v.isLineBasicMaterial?(o(M,v),v.isLineDashedMaterial&amp;&amp;u(M,v)):v.isPointsMaterial?c(M,v,S,E):v.isSpriteMaterial?h(M,v):v.isShadowMaterial?(M.color.value.copy(v.color),M.opacity.value=v.opacity):v.isShaderMaterial&amp;&amp;(v.uniformsNeedUpdate=!1)}function s(M,v){M.opacity.value=v.opacity,v.color&amp;&amp;M.diffuse.value.copy(v.color),v.emissive&amp;&amp;M.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&amp;&amp;(M.map.value=v.map,e(v.map,M.mapTransform)),v.alphaMap&amp;&amp;(M.alphaMap.value=v.alphaMap,e(v.alphaMap,M.alphaMapTransform)),v.bumpMap&amp;&amp;(M.bumpMap.value=v.bumpMap,e(v.bumpMap,M.bumpMapTransform),M.bumpScale.value=v.bumpScale,v.side===Ni&amp;&amp;(M.bumpScale.value*=-1)),v.normalMap&amp;&amp;(M.normalMap.value=v.normalMap,e(v.normalMap,M.normalMapTransform),M.normalScale.value.copy(v.normalScale),v.side===Ni&amp;&amp;M.normalScale.value.negate()),v.displacementMap&amp;&amp;(M.displacementMap.value=v.displacementMap,e(v.displacementMap,M.displacementMapTransform),M.displacementScale.value=v.displacementScale,M.displacementBias.value=v.displacementBias),v.emissiveMap&amp;&amp;(M.emissiveMap.value=v.emissiveMap,e(v.emissiveMap,M.emissiveMapTransform)),v.specularMap&amp;&amp;(M.specularMap.value=v.specularMap,e(v.specularMap,M.specularMapTransform)),v.alphaTest&gt;0&amp;&amp;(M.alphaTest.value=v.alphaTest);let S=t.get(v),E=S.envMap,T=S.envMapRotation;E&amp;&amp;(M.envMap.value=E,Vu.copy(T),Vu.x*=-1,Vu.y*=-1,Vu.z*=-1,E.isCubeTexture&amp;&amp;E.isRenderTargetTexture===!1&amp;&amp;(Vu.y*=-1,Vu.z*=-1),M.envMapRotation.value.setFromMatrix4(D8.makeRotationFromEuler(Vu)),M.flipEnvMap.value=E.isCubeTexture&amp;&amp;E.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=v.reflectivity,M.ior.value=v.ior,M.refractionRatio.value=v.refractionRatio),v.lightMap&amp;&amp;(M.lightMap.value=v.lightMap,M.lightMapIntensity.value=v.lightMapIntensity,e(v.lightMap,M.lightMapTransform)),v.aoMap&amp;&amp;(M.aoMap.value=v.aoMap,M.aoMapIntensity.value=v.aoMapIntensity,e(v.aoMap,M.aoMapTransform))}function o(M,v){M.diffuse.value.copy(v.color),M.opacity.value=v.opacity,v.map&amp;&amp;(M.map.value=v.map,e(v.map,M.mapTransform))}function u(M,v){M.dashSize.value=v.dashSize,M.totalSize.value=v.dashSize+v.gapSize,M.scale.value=v.scale}function c(M,v,S,E){M.diffuse.value.copy(v.color),M.opacity.value=v.opacity,M.size.value=v.size*S,M.scale.value=E*.5,v.map&amp;&amp;(M.map.value=v.map,e(v.map,M.uvTransform)),v.alphaMap&amp;&amp;(M.alphaMap.value=v.alphaMap,e(v.alphaMap,M.alphaMapTransform)),v.alphaTest&gt;0&amp;&amp;(M.alphaTest.value=v.alphaTest)}function h(M,v){M.diffuse.value.copy(v.color),M.opacity.value=v.opacity,M.rotation.value=v.rotation,v.map&amp;&amp;(M.map.value=v.map,e(v.map,M.mapTransform)),v.alphaMap&amp;&amp;(M.alphaMap.value=v.alphaMap,e(v.alphaMap,M.alphaMapTransform)),v.alphaTest&gt;0&amp;&amp;(M.alphaTest.value=v.alphaTest)}function d(M,v){M.specular.value.copy(v.specular),M.shininess.value=Math.max(v.shininess,1e-4)}function m(M,v){v.gradientMap&amp;&amp;(M.gradientMap.value=v.gradientMap)}function g(M,v){M.metalness.value=v.metalness,v.metalnessMap&amp;&amp;(M.metalnessMap.value=v.metalnessMap,e(v.metalnessMap,M.metalnessMapTransform)),M.roughness.value=v.roughness,v.roughnessMap&amp;&amp;(M.roughnessMap.value=v.roughnessMap,e(v.roughnessMap,M.roughnessMapTransform)),v.envMap&amp;&amp;(M.envMapIntensity.value=v.envMapIntensity)}function y(M,v,S){M.ior.value=v.ior,v.sheen&gt;0&amp;&amp;(M.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),M.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&amp;&amp;(M.sheenColorMap.value=v.sheenColorMap,e(v.sheenColorMap,M.sheenColorMapTransform)),v.sheenRoughnessMap&amp;&amp;(M.sheenRoughnessMap.value=v.sheenRoughnessMap,e(v.sheenRoughnessMap,M.sheenRoughnessMapTransform))),v.clearcoat&gt;0&amp;&amp;(M.clearcoat.value=v.clearcoat,M.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&amp;&amp;(M.clearcoatMap.value=v.clearcoatMap,e(v.clearcoatMap,M.clearcoatMapTransform)),v.clearcoatRoughnessMap&amp;&amp;(M.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,e(v.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&amp;&amp;(M.clearcoatNormalMap.value=v.clearcoatNormalMap,e(v.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Ni&amp;&amp;M.clearcoatNormalScale.value.negate())),v.dispersion&gt;0&amp;&amp;(M.dispersion.value=v.dispersion),v.iridescence&gt;0&amp;&amp;(M.iridescence.value=v.iridescence,M.iridescenceIOR.value=v.iridescenceIOR,M.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&amp;&amp;(M.iridescenceMap.value=v.iridescenceMap,e(v.iridescenceMap,M.iridescenceMapTransform)),v.iridescenceThicknessMap&amp;&amp;(M.iridescenceThicknessMap.value=v.iridescenceThicknessMap,e(v.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),v.transmission&gt;0&amp;&amp;(M.transmission.value=v.transmission,M.transmissionSamplerMap.value=S.texture,M.transmissionSamplerSize.value.set(S.width,S.height),v.transmissionMap&amp;&amp;(M.transmissionMap.value=v.transmissionMap,e(v.transmissionMap,M.transmissionMapTransform)),M.thickness.value=v.thickness,v.thicknessMap&amp;&amp;(M.thicknessMap.value=v.thicknessMap,e(v.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=v.attenuationDistance,M.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy&gt;0&amp;&amp;(M.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&amp;&amp;(M.anisotropyMap.value=v.anisotropyMap,e(v.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=v.specularIntensity,M.specularColor.value.copy(v.specularColor),v.specularColorMap&amp;&amp;(M.specularColorMap.value=v.specularColorMap,e(v.specularColorMap,M.specularColorMapTransform)),v.specularIntensityMap&amp;&amp;(M.specularIntensityMap.value=v.specularIntensityMap,e(v.specularIntensityMap,M.specularIntensityMapTransform))}function x(M,v){v.matcap&amp;&amp;(M.matcap.value=v.matcap)}function b(M,v){let S=t.get(v).light;M.referencePosition.value.setFromMatrixPosition(S.matrixWorld),M.nearDistance.value=S.shadow.camera.near,M.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function N8(n,t,e,i){let a={},s={},o=[],u=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function c(S,E){let T=E.program;i.uniformBlockBinding(S,T)}function h(S,E){let T=a[S.id];T===void 0&amp;&amp;(x(S),T=d(S),a[S.id]=T,S.addEventListener(&quot;dispose&quot;,M));let w=E.program;i.updateUBOMapping(S,w);let U=t.render.frame;s[S.id]!==U&amp;&amp;(g(S),s[S.id]=U)}function d(S){let E=m();S.__bindingPointIndex=E;let T=n.createBuffer(),w=S.__size,U=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,w,U),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,T),T}function m(){for(let S=0;S&lt;u;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error(&quot;THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.&quot;),0}function g(S){let E=a[S.id],T=S.uniforms,w=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let U=0,O=T.length;U&lt;O;U++){let z=Array.isArray(T[U])?T[U]:[T[U]];for(let C=0,R=z.length;C&lt;R;C++){let P=z[C];if(y(P,U,C,w)===!0){let j=P.__offset,X=Array.isArray(P.value)?P.value:[P.value],Z=0;for(let st=0;st&lt;X.length;st++){let et=X[st],mt=b(et);typeof et==&quot;number&quot;||typeof et==&quot;boolean&quot;?(P.__data[0]=et,n.bufferSubData(n.UNIFORM_BUFFER,j+Z,P.__data)):et.isMatrix3?(P.__data[0]=et.elements[0],P.__data[1]=et.elements[1],P.__data[2]=et.elements[2],P.__data[3]=0,P.__data[4]=et.elements[3],P.__data[5]=et.elements[4],P.__data[6]=et.elements[5],P.__data[7]=0,P.__data[8]=et.elements[6],P.__data[9]=et.elements[7],P.__data[10]=et.elements[8],P.__data[11]=0):(et.toArray(P.__data,Z),Z+=mt.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,j,P.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(S,E,T,w){let U=S.value,O=E+&quot;_&quot;+T;if(w[O]===void 0)return typeof U==&quot;number&quot;||typeof U==&quot;boolean&quot;?w[O]=U:w[O]=U.clone(),!0;{let z=w[O];if(typeof U==&quot;number&quot;||typeof U==&quot;boolean&quot;){if(z!==U)return w[O]=U,!0}else if(z.equals(U)===!1)return z.copy(U),!0}return!1}function x(S){let E=S.uniforms,T=0,w=16;for(let O=0,z=E.length;O&lt;z;O++){let C=Array.isArray(E[O])?E[O]:[E[O]];for(let R=0,P=C.length;R&lt;P;R++){let j=C[R],X=Array.isArray(j.value)?j.value:[j.value];for(let Z=0,st=X.length;Z&lt;st;Z++){let et=X[Z],mt=b(et),K=T%w,_t=K%mt.boundary,Ut=K+_t;T+=_t,Ut!==0&amp;&amp;w-Ut&lt;mt.storage&amp;&amp;(T+=w-Ut),j.__data=new Float32Array(mt.storage/Float32Array.BYTES_PER_ELEMENT),j.__offset=T,T+=mt.storage}}}let U=T%w;return U&gt;0&amp;&amp;(T+=w-U),S.__size=T,S.__cache={},this}function b(S){let E={boundary:0,storage:0};return typeof S==&quot;number&quot;||typeof S==&quot;boolean&quot;?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn(&quot;THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.&quot;):console.warn(&quot;THREE.WebGLRenderer: Unsupported uniform value type.&quot;,S),E}function M(S){let E=S.target;E.removeEventListener(&quot;dispose&quot;,M);let T=o.indexOf(E.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(a[E.id]),delete a[E.id],delete s[E.id]}function v(){for(let S in a)n.deleteBuffer(a[S]);o=[],a={},s={}}return{bind:c,update:h,dispose:v}}var Hg=class{constructor(t={}){let{canvas:e=NT(),context:i=null,depth:a=!0,stencil:s=!1,alpha:o=!1,antialias:u=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:h=!1,powerPreference:d=&quot;default&quot;,failIfMajorPerformanceCaveat:m=!1,reversedDepthBuffer:g=!1}=t;this.isWebGLRenderer=!0;let y;if(i!==null){if(typeof WebGLRenderingContext&lt;&quot;u&quot;&amp;&amp;i instanceof WebGLRenderingContext)throw new Error(&quot;THREE.WebGLRenderer: WebGL 1 is not supported since r163.&quot;);y=i.getContextAttributes().alpha}else y=o;let x=new Uint32Array(4),b=new Int32Array(4),M=null,v=null,S=[],E=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=us,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let T=this,w=!1;this._outputColorSpace=ri;let U=0,O=0,z=null,C=-1,R=null,P=new Oe,j=new Oe,X=null,Z=new Bt(0),st=0,et=e.width,mt=e.height,K=1,_t=null,Ut=null,xt=new Oe(0,0,et,mt),It=new Oe(0,0,et,mt),se=!1,Qt=new Kr,it=!1,wt=!1,bt=new fe,Jt=new B,Zt=new Oe,te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},ke=!1;function re(){return z===null?K:1}let H=i;function ht(N,V){return e.getContext(N,V)}try{let N={alpha:!0,depth:a,stencil:s,antialias:u,premultipliedAlpha:c,preserveDrawingBuffer:h,powerPreference:d,failIfMajorPerformanceCaveat:m};if(&quot;setAttribute&quot;in e&amp;&amp;e.setAttribute(&quot;data-engine&quot;,`three.js r${&quot;179&quot;}`),e.addEventListener(&quot;webglcontextlost&quot;,Dt,!1),e.addEventListener(&quot;webglcontextrestored&quot;,Gt,!1),e.addEventListener(&quot;webglcontextcreationerror&quot;,St,!1),H===null){let V=&quot;webgl2&quot;;if(H=ht(V,N),H===null)throw ht(V)?new Error(&quot;Error creating WebGL context with your selected attributes.&quot;):new Error(&quot;Error creating WebGL context.&quot;)}}catch(N){throw console.error(&quot;THREE.WebGLRenderer: &quot;+N.message),N}let rt,pt,lt,Ct,dt,Rt,de,ue,I,D,k,nt,gt,at,jt,Tt,Wt,Ft,vt,Ot,ne,kt,Nt,me;function G(){rt=new K6(H),rt.init(),kt=new tL(H,rt),pt=new q6(H,rt,t,kt),lt=new A8(H,rt),pt.reversedDepthBuffer&amp;&amp;g&amp;&amp;lt.buffers.depth.setReversed(!0),Ct=new tG(H),dt=new d8,Rt=new R8(H,rt,lt,dt,pt,kt,Ct),de=new W6(T),ue=new Q6(T),I=new rF(H),Nt=new G6(H,I),D=new J6(H,I,Ct,Nt),k=new nG(H,D,I,Ct),vt=new eG(H,pt,Rt),Tt=new Y6(dt),nt=new h8(T,de,ue,rt,pt,Nt,Tt),gt=new U8(T,dt),at=new m8,jt=new S8(rt),Ft=new V6(T,de,ue,lt,k,y,c),Wt=new b8(T,k,pt),me=new N8(H,Ct,pt,lt),Ot=new X6(H,rt,Ct),ne=new $6(H,rt,Ct),Ct.programs=nt.programs,T.capabilities=pt,T.extensions=rt,T.properties=dt,T.renderLists=at,T.shadowMap=Wt,T.state=lt,T.info=Ct}G();let Mt=new $T(T,H);this.xr=Mt,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){let N=rt.get(&quot;WEBGL_lose_context&quot;);N&amp;&amp;N.loseContext()},this.forceContextRestore=function(){let N=rt.get(&quot;WEBGL_lose_context&quot;);N&amp;&amp;N.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(N){N!==void 0&amp;&amp;(K=N,this.setSize(et,mt,!1))},this.getSize=function(N){return N.set(et,mt)},this.setSize=function(N,V,J=!0){if(Mt.isPresenting){console.warn(&quot;THREE.WebGLRenderer: Can&#39;t change size while VR device is presenting.&quot;);return}et=N,mt=V,e.width=Math.floor(N*K),e.height=Math.floor(V*K),J===!0&amp;&amp;(e.style.width=N+&quot;px&quot;,e.style.height=V+&quot;px&quot;),this.setViewport(0,0,N,V)},this.getDrawingBufferSize=function(N){return N.set(et*K,mt*K).floor()},this.setDrawingBufferSize=function(N,V,J){et=N,mt=V,K=J,e.width=Math.floor(N*J),e.height=Math.floor(V*J),this.setViewport(0,0,N,V)},this.getCurrentViewport=function(N){return N.copy(P)},this.getViewport=function(N){return N.copy(xt)},this.setViewport=function(N,V,J,$){N.isVector4?xt.set(N.x,N.y,N.z,N.w):xt.set(N,V,J,$),lt.viewport(P.copy(xt).multiplyScalar(K).round())},this.getScissor=function(N){return N.copy(It)},this.setScissor=function(N,V,J,$){N.isVector4?It.set(N.x,N.y,N.z,N.w):It.set(N,V,J,$),lt.scissor(j.copy(It).multiplyScalar(K).round())},this.getScissorTest=function(){return se},this.setScissorTest=function(N){lt.setScissorTest(se=N)},this.setOpaqueSort=function(N){_t=N},this.setTransparentSort=function(N){Ut=N},this.getClearColor=function(N){return N.copy(Ft.getClearColor())},this.setClearColor=function(){Ft.setClearColor(...arguments)},this.getClearAlpha=function(){return Ft.getClearAlpha()},this.setClearAlpha=function(){Ft.setClearAlpha(...arguments)},this.clear=function(N=!0,V=!0,J=!0){let $=0;if(N){let q=!1;if(z!==null){let yt=z.texture.format;q=yt===ug||yt===lg||yt===xh}if(q){let yt=z.texture.type,Lt=yt===la||yt===or||yt===zu||yt===Pu||yt===sg||yt===rg,Yt=Ft.getClearColor(),Vt=Ft.getClearAlpha(),ie=Yt.r,ae=Yt.g,Kt=Yt.b;Lt?(x[0]=ie,x[1]=ae,x[2]=Kt,x[3]=Vt,H.clearBufferuiv(H.COLOR,0,x)):(b[0]=ie,b[1]=ae,b[2]=Kt,b[3]=Vt,H.clearBufferiv(H.COLOR,0,b))}else $|=H.COLOR_BUFFER_BIT}V&amp;&amp;($|=H.DEPTH_BUFFER_BIT),J&amp;&amp;($|=H.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),H.clear($)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener(&quot;webglcontextlost&quot;,Dt,!1),e.removeEventListener(&quot;webglcontextrestored&quot;,Gt,!1),e.removeEventListener(&quot;webglcontextcreationerror&quot;,St,!1),Ft.dispose(),at.dispose(),jt.dispose(),dt.dispose(),de.dispose(),ue.dispose(),k.dispose(),Nt.dispose(),me.dispose(),nt.dispose(),Mt.dispose(),Mt.removeEventListener(&quot;sessionstart&quot;,ua),Mt.removeEventListener(&quot;sessionend&quot;,ku),fs.stop()};function Dt(N){N.preventDefault(),console.log(&quot;THREE.WebGLRenderer: Context Lost.&quot;),w=!0}function Gt(){console.log(&quot;THREE.WebGLRenderer: Context Restored.&quot;),w=!1;let N=Ct.autoReset,V=Wt.enabled,J=Wt.autoUpdate,$=Wt.needsUpdate,q=Wt.type;G(),Ct.autoReset=N,Wt.enabled=V,Wt.autoUpdate=J,Wt.needsUpdate=$,Wt.type=q}function St(N){console.error(&quot;THREE.WebGLRenderer: A WebGL context could not be created. Reason: &quot;,N.statusMessage)}function ut(N){let V=N.target;V.removeEventListener(&quot;dispose&quot;,ut),qt(V)}function qt(N){oe(N),dt.remove(N)}function oe(N){let V=dt.get(N).programs;V!==void 0&amp;&amp;(V.forEach(function(J){nt.releaseProgram(J)}),N.isShaderMaterial&amp;&amp;nt.releaseShaderCache(N))}this.renderBufferDirect=function(N,V,J,$,q,yt){V===null&amp;&amp;(V=te);let Lt=q.isMesh&amp;&amp;q.matrixWorld.determinant()&lt;0,Yt=Wg(N,V,J,$,q);lt.setMaterial($,Lt);let Vt=J.index,ie=1;if($.wireframe===!0){if(Vt=D.getWireframeAttribute(J),Vt===void 0)return;ie=2}let ae=J.drawRange,Kt=J.attributes.position,Me=ae.start*ie,Fe=(ae.start+ae.count)*ie;yt!==null&amp;&amp;(Me=Math.max(Me,yt.start*ie),Fe=Math.min(Fe,(yt.start+yt.count)*ie)),Vt!==null?(Me=Math.max(Me,0),Fe=Math.min(Fe,Vt.count)):Kt!=null&amp;&amp;(Me=Math.max(Me,0),Fe=Math.min(Fe,Kt.count));let hn=Fe-Me;if(hn&lt;0||hn===1/0)return;Nt.setup(q,$,Yt,J,Vt);let Ze,qe=Ot;if(Vt!==null&amp;&amp;(Ze=I.get(Vt),qe=ne,qe.setIndex(Ze)),q.isMesh)$.wireframe===!0?(lt.setLineWidth($.wireframeLinewidth*re()),qe.setMode(H.LINES)):qe.setMode(H.TRIANGLES);else if(q.isLine){let ee=$.linewidth;ee===void 0&amp;&amp;(ee=1),lt.setLineWidth(ee*re()),q.isLineSegments?qe.setMode(H.LINES):q.isLineLoop?qe.setMode(H.LINE_LOOP):qe.setMode(H.LINE_STRIP)}else q.isPoints?qe.setMode(H.POINTS):q.isSprite&amp;&amp;qe.setMode(H.TRIANGLES);if(q.isBatchedMesh)if(q._multiDrawInstances!==null)_u(&quot;THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.&quot;),qe.renderMultiDrawInstances(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount,q._multiDrawInstances);else if(rt.get(&quot;WEBGL_multi_draw&quot;))qe.renderMultiDraw(q._multiDrawStarts,q._multiDrawCounts,q._multiDrawCount);else{let ee=q._multiDrawStarts,on=q._multiDrawCounts,De=q._multiDrawCount,_i=Vt?I.get(Vt).bytesPerElement:1,zs=dt.get($).currentProgram.getUniforms();for(let xi=0;xi&lt;De;xi++)zs.setValue(H,&quot;_gl_DrawID&quot;,xi),qe.render(ee[xi]/_i,on[xi])}else if(q.isInstancedMesh)qe.renderInstances(Me,hn,q.count);else if(J.isInstancedBufferGeometry){let ee=J._maxInstanceCount!==void 0?J._maxInstanceCount:1/0,on=Math.min(J.instanceCount,ee);qe.renderInstances(Me,hn,on)}else qe.render(Me,hn)};function He(N,V,J){N.transparent===!0&amp;&amp;N.side===Ds&amp;&amp;N.forceSinglePass===!1?(N.side=Ni,N.needsUpdate=!0,rn(N,V,J),N.side=tr,N.needsUpdate=!0,rn(N,V,J),N.side=Ds):rn(N,V,J)}this.compile=function(N,V,J=null){J===null&amp;&amp;(J=N),v=jt.get(J),v.init(V),E.push(v),J.traverseVisible(function(q){q.isLight&amp;&amp;q.layers.test(V.layers)&amp;&amp;(v.pushLight(q),q.castShadow&amp;&amp;v.pushShadow(q))}),N!==J&amp;&amp;N.traverseVisible(function(q){q.isLight&amp;&amp;q.layers.test(V.layers)&amp;&amp;(v.pushLight(q),q.castShadow&amp;&amp;v.pushShadow(q))}),v.setupLights();let $=new Set;return N.traverse(function(q){if(!(q.isMesh||q.isPoints||q.isLine||q.isSprite))return;let yt=q.material;if(yt)if(Array.isArray(yt))for(let Lt=0;Lt&lt;yt.length;Lt++){let Yt=yt[Lt];He(Yt,J,q),$.add(Yt)}else He(yt,J,q),$.add(yt)}),v=E.pop(),$},this.compileAsync=function(N,V,J=null){let $=this.compile(N,V,J);return new Promise(q=&gt;{function yt(){if($.forEach(function(Lt){dt.get(Lt).currentProgram.isReady()&amp;&amp;$.delete(Lt)}),$.size===0){q(N);return}setTimeout(yt,10)}rt.get(&quot;KHR_parallel_shader_compile&quot;)!==null?yt():setTimeout(yt,10)})};let Le=null;function Ha(N){Le&amp;&amp;Le(N)}function ua(){fs.stop()}function ku(){fs.start()}let fs=new jO;fs.setAnimationLoop(Ha),typeof self&lt;&quot;u&quot;&amp;&amp;fs.setContext(self),this.setAnimationLoop=function(N){Le=N,Mt.setAnimationLoop(N),N===null?fs.stop():fs.start()},Mt.addEventListener(&quot;sessionstart&quot;,ua),Mt.addEventListener(&quot;sessionend&quot;,ku),this.render=function(N,V){if(V!==void 0&amp;&amp;V.isCamera!==!0){console.error(&quot;THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.&quot;);return}if(w===!0)return;if(N.matrixWorldAutoUpdate===!0&amp;&amp;N.updateMatrixWorld(),V.parent===null&amp;&amp;V.matrixWorldAutoUpdate===!0&amp;&amp;V.updateMatrixWorld(),Mt.enabled===!0&amp;&amp;Mt.isPresenting===!0&amp;&amp;(Mt.cameraAutoUpdate===!0&amp;&amp;Mt.updateCamera(V),V=Mt.getCamera()),N.isScene===!0&amp;&amp;N.onBeforeRender(T,N,V,z),v=jt.get(N,E.length),v.init(V),E.push(v),bt.multiplyMatrices(V.projectionMatrix,V.matrixWorldInverse),Qt.setFromProjectionMatrix(bt,aa,V.reversedDepth),wt=this.localClippingEnabled,it=Tt.init(this.clippingPlanes,wt),M=at.get(N,S.length),M.init(),S.push(M),Mt.enabled===!0&amp;&amp;Mt.isPresenting===!0){let yt=T.xr.getDepthSensingMesh();yt!==null&amp;&amp;Fa(yt,V,-1/0,T.sortObjects)}Fa(N,V,0,T.sortObjects),M.finish(),T.sortObjects===!0&amp;&amp;M.sort(_t,Ut),ke=Mt.enabled===!1||Mt.isPresenting===!1||Mt.hasDepthSensing()===!1,ke&amp;&amp;Ft.addToRenderList(M,N),this.info.render.frame++,it===!0&amp;&amp;Tt.beginShadows();let J=v.state.shadowsArray;Wt.render(J,N,V),it===!0&amp;&amp;Tt.endShadows(),this.info.autoReset===!0&amp;&amp;this.info.reset();let $=M.opaque,q=M.transmissive;if(v.setupLights(),V.isArrayCamera){let yt=V.cameras;if(q.length&gt;0)for(let Lt=0,Yt=yt.length;Lt&lt;Yt;Lt++){let Vt=yt[Lt];hs($,q,N,Vt)}ke&amp;&amp;Ft.render(N);for(let Lt=0,Yt=yt.length;Lt&lt;Yt;Lt++){let Vt=yt[Lt];Ih(M,N,Vt,Vt.viewport)}}else q.length&gt;0&amp;&amp;hs($,q,N,V),ke&amp;&amp;Ft.render(N),Ih(M,N,V);z!==null&amp;&amp;O===0&amp;&amp;(Rt.updateMultisampleRenderTarget(z),Rt.updateRenderTargetMipmap(z)),N.isScene===!0&amp;&amp;N.onAfterRender(T,N,V),Nt.resetDefaultState(),C=-1,R=null,E.pop(),E.length&gt;0?(v=E[E.length-1],it===!0&amp;&amp;Tt.setGlobalState(T.clippingPlanes,v.state.camera)):v=null,S.pop(),S.length&gt;0?M=S[S.length-1]:M=null};function Fa(N,V,J,$){if(N.visible===!1)return;if(N.layers.test(V.layers)){if(N.isGroup)J=N.renderOrder;else if(N.isLOD)N.autoUpdate===!0&amp;&amp;N.update(V);else if(N.isLight)v.pushLight(N),N.castShadow&amp;&amp;v.pushShadow(N);else if(N.isSprite){if(!N.frustumCulled||Qt.intersectsSprite(N)){$&amp;&amp;Zt.setFromMatrixPosition(N.matrixWorld).applyMatrix4(bt);let Lt=k.update(N),Yt=N.material;Yt.visible&amp;&amp;M.push(N,Lt,Yt,J,Zt.z,null)}}else if((N.isMesh||N.isLine||N.isPoints)&amp;&amp;(!N.frustumCulled||Qt.intersectsObject(N))){let Lt=k.update(N),Yt=N.material;if($&amp;&amp;(N.boundingSphere!==void 0?(N.boundingSphere===null&amp;&amp;N.computeBoundingSphere(),Zt.copy(N.boundingSphere.center)):(Lt.boundingSphere===null&amp;&amp;Lt.computeBoundingSphere(),Zt.copy(Lt.boundingSphere.center)),Zt.applyMatrix4(N.matrixWorld).applyMatrix4(bt)),Array.isArray(Yt)){let Vt=Lt.groups;for(let ie=0,ae=Vt.length;ie&lt;ae;ie++){let Kt=Vt[ie],Me=Yt[Kt.materialIndex];Me&amp;&amp;Me.visible&amp;&amp;M.push(N,Lt,Me,J,Zt.z,Kt)}}else Yt.visible&amp;&amp;M.push(N,Lt,Yt,J,Zt.z,null)}}let yt=N.children;for(let Lt=0,Yt=yt.length;Lt&lt;Yt;Lt++)Fa(yt[Lt],V,J,$)}function Ih(N,V,J,$){let q=N.opaque,yt=N.transmissive,Lt=N.transparent;v.setupLightsView(J),it===!0&amp;&amp;Tt.setGlobalState(T.clippingPlanes,J),$&amp;&amp;lt.viewport(P.copy($)),q.length&gt;0&amp;&amp;Zi(q,V,J),yt.length&gt;0&amp;&amp;Zi(yt,V,J),Lt.length&gt;0&amp;&amp;Zi(Lt,V,J),lt.buffers.depth.setTest(!0),lt.buffers.depth.setMask(!0),lt.buffers.color.setMask(!0),lt.setPolygonOffset(!1)}function hs(N,V,J,$){if((J.isScene===!0?J.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[$.id]===void 0&amp;&amp;(v.state.transmissionRenderTarget[$.id]=new za(1,1,{generateMipmaps:!0,type:rt.has(&quot;EXT_color_buffer_half_float&quot;)||rt.has(&quot;EXT_color_buffer_float&quot;)?Bu:la,minFilter:Us,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:we.workingColorSpace}));let yt=v.state.transmissionRenderTarget[$.id],Lt=$.viewport||P;yt.setSize(Lt.z*T.transmissionResolutionScale,Lt.w*T.transmissionResolutionScale);let Yt=T.getRenderTarget(),Vt=T.getActiveCubeFace(),ie=T.getActiveMipmapLevel();T.setRenderTarget(yt),T.getClearColor(Z),st=T.getClearAlpha(),st&lt;1&amp;&amp;T.setClearColor(16777215,.5),T.clear(),ke&amp;&amp;Ft.render(J);let ae=T.toneMapping;T.toneMapping=us;let Kt=$.viewport;if($.viewport!==void 0&amp;&amp;($.viewport=void 0),v.setupLightsView($),it===!0&amp;&amp;Tt.setGlobalState(T.clippingPlanes,$),Zi(N,J,$),Rt.updateMultisampleRenderTarget(yt),Rt.updateRenderTargetMipmap(yt),rt.has(&quot;WEBGL_multisampled_render_to_texture&quot;)===!1){let Me=!1;for(let Fe=0,hn=V.length;Fe&lt;hn;Fe++){let Ze=V[Fe],qe=Ze.object,ee=Ze.geometry,on=Ze.material,De=Ze.group;if(on.side===Ds&amp;&amp;qe.layers.test($.layers)){let _i=on.side;on.side=Ni,on.needsUpdate=!0,yl(qe,J,$,ee,on,De),on.side=_i,on.needsUpdate=!0,Me=!0}}Me===!0&amp;&amp;(Rt.updateMultisampleRenderTarget(yt),Rt.updateRenderTargetMipmap(yt))}T.setRenderTarget(Yt,Vt,ie),T.setClearColor(Z,st),Kt!==void 0&amp;&amp;($.viewport=Kt),T.toneMapping=ae}function Zi(N,V,J){let $=V.isScene===!0?V.overrideMaterial:null;for(let q=0,yt=N.length;q&lt;yt;q++){let Lt=N[q],Yt=Lt.object,Vt=Lt.geometry,ie=Lt.group,ae=Lt.material;ae.allowOverride===!0&amp;&amp;$!==null&amp;&amp;(ae=$),Yt.layers.test(J.layers)&amp;&amp;yl(Yt,V,J,Vt,ae,ie)}}function yl(N,V,J,$,q,yt){N.onBeforeRender(T,V,J,$,q,yt),N.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,N.matrixWorld),N.normalMatrix.getNormalMatrix(N.modelViewMatrix),q.onBeforeRender(T,V,J,$,N,yt),q.transparent===!0&amp;&amp;q.side===Ds&amp;&amp;q.forceSinglePass===!1?(q.side=Ni,q.needsUpdate=!0,T.renderBufferDirect(J,V,$,q,N,yt),q.side=tr,q.needsUpdate=!0,T.renderBufferDirect(J,V,$,q,N,yt),q.side=Ds):T.renderBufferDirect(J,V,$,q,N,yt),N.onAfterRender(T,V,J,$,q,yt)}function rn(N,V,J){V.isScene!==!0&amp;&amp;(V=te);let $=dt.get(N),q=v.state.lights,yt=v.state.shadowsArray,Lt=q.state.version,Yt=nt.getParameters(N,q.state,yt,V,J),Vt=nt.getProgramCacheKey(Yt),ie=$.programs;$.environment=N.isMeshStandardMaterial?V.environment:null,$.fog=V.fog,$.envMap=(N.isMeshStandardMaterial?ue:de).get(N.envMap||$.environment),$.envMapRotation=$.environment!==null&amp;&amp;N.envMap===null?V.environmentRotation:N.envMapRotation,ie===void 0&amp;&amp;(N.addEventListener(&quot;dispose&quot;,ut),ie=new Map,$.programs=ie);let ae=ie.get(Vt);if(ae!==void 0){if($.currentProgram===ae&amp;&amp;$.lightsStateVersion===Lt)return ju(N,Yt),ae}else Yt.uniforms=nt.getUniforms(N),N.onBeforeCompile(Yt,T),ae=nt.acquireProgram(Yt,Vt),ie.set(Vt,ae),$.uniforms=Yt.uniforms;let Kt=$.uniforms;return(!N.isShaderMaterial&amp;&amp;!N.isRawShaderMaterial||N.clipping===!0)&amp;&amp;(Kt.clippingPlanes=Tt.uniform),ju(N,Yt),$.needsLights=Vx(N),$.lightsStateVersion=Lt,$.needsLights&amp;&amp;(Kt.ambientLightColor.value=q.state.ambient,Kt.lightProbe.value=q.state.probe,Kt.directionalLights.value=q.state.directional,Kt.directionalLightShadows.value=q.state.directionalShadow,Kt.spotLights.value=q.state.spot,Kt.spotLightShadows.value=q.state.spotShadow,Kt.rectAreaLights.value=q.state.rectArea,Kt.ltc_1.value=q.state.rectAreaLTC1,Kt.ltc_2.value=q.state.rectAreaLTC2,Kt.pointLights.value=q.state.point,Kt.pointLightShadows.value=q.state.pointShadow,Kt.hemisphereLights.value=q.state.hemi,Kt.directionalShadowMap.value=q.state.directionalShadowMap,Kt.directionalShadowMatrix.value=q.state.directionalShadowMatrix,Kt.spotShadowMap.value=q.state.spotShadowMap,Kt.spotLightMatrix.value=q.state.spotLightMatrix,Kt.spotLightMap.value=q.state.spotLightMap,Kt.pointShadowMap.value=q.state.pointShadowMap,Kt.pointShadowMatrix.value=q.state.pointShadowMatrix),$.currentProgram=ae,$.uniformsList=null,ae}function Zu(N){if(N.uniformsList===null){let V=N.currentProgram.getUniforms();N.uniformsList=Ch.seqWithValue(V.seq,N.uniforms)}return N.uniformsList}function ju(N,V){let J=dt.get(N);J.outputColorSpace=V.outputColorSpace,J.batching=V.batching,J.batchingColor=V.batchingColor,J.instancing=V.instancing,J.instancingColor=V.instancingColor,J.instancingMorph=V.instancingMorph,J.skinning=V.skinning,J.morphTargets=V.morphTargets,J.morphNormals=V.morphNormals,J.morphColors=V.morphColors,J.morphTargetsCount=V.morphTargetsCount,J.numClippingPlanes=V.numClippingPlanes,J.numIntersection=V.numClipIntersection,J.vertexAlphas=V.vertexAlphas,J.vertexTangents=V.vertexTangents,J.toneMapping=V.toneMapping}function Wg(N,V,J,$,q){V.isScene!==!0&amp;&amp;(V=te),Rt.resetTextureUnits();let yt=V.fog,Lt=$.isMeshStandardMaterial?V.environment:null,Yt=z===null?T.outputColorSpace:z.isXRRenderTarget===!0?z.texture.colorSpace:er,Vt=($.isMeshStandardMaterial?ue:de).get($.envMap||Lt),ie=$.vertexColors===!0&amp;&amp;!!J.attributes.color&amp;&amp;J.attributes.color.itemSize===4,ae=!!J.attributes.tangent&amp;&amp;(!!$.normalMap||$.anisotropy&gt;0),Kt=!!J.morphAttributes.position,Me=!!J.morphAttributes.normal,Fe=!!J.morphAttributes.color,hn=us;$.toneMapped&amp;&amp;(z===null||z.isXRRenderTarget===!0)&amp;&amp;(hn=T.toneMapping);let Ze=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,qe=Ze!==void 0?Ze.length:0,ee=dt.get($),on=v.state.lights;if(it===!0&amp;&amp;(wt===!0||N!==R)){let ci=N===R&amp;&amp;$.id===C;Tt.setState($,N,ci)}let De=!1;$.version===ee.__version?(ee.needsLights&amp;&amp;ee.lightsStateVersion!==on.state.version||ee.outputColorSpace!==Yt||q.isBatchedMesh&amp;&amp;ee.batching===!1||!q.isBatchedMesh&amp;&amp;ee.batching===!0||q.isBatchedMesh&amp;&amp;ee.batchingColor===!0&amp;&amp;q.colorTexture===null||q.isBatchedMesh&amp;&amp;ee.batchingColor===!1&amp;&amp;q.colorTexture!==null||q.isInstancedMesh&amp;&amp;ee.instancing===!1||!q.isInstancedMesh&amp;&amp;ee.instancing===!0||q.isSkinnedMesh&amp;&amp;ee.skinning===!1||!q.isSkinnedMesh&amp;&amp;ee.skinning===!0||q.isInstancedMesh&amp;&amp;ee.instancingColor===!0&amp;&amp;q.instanceColor===null||q.isInstancedMesh&amp;&amp;ee.instancingColor===!1&amp;&amp;q.instanceColor!==null||q.isInstancedMesh&amp;&amp;ee.instancingMorph===!0&amp;&amp;q.morphTexture===null||q.isInstancedMesh&amp;&amp;ee.instancingMorph===!1&amp;&amp;q.morphTexture!==null||ee.envMap!==Vt||$.fog===!0&amp;&amp;ee.fog!==yt||ee.numClippingPlanes!==void 0&amp;&amp;(ee.numClippingPlanes!==Tt.numPlanes||ee.numIntersection!==Tt.numIntersection)||ee.vertexAlphas!==ie||ee.vertexTangents!==ae||ee.morphTargets!==Kt||ee.morphNormals!==Me||ee.morphColors!==Fe||ee.toneMapping!==hn||ee.morphTargetsCount!==qe)&amp;&amp;(De=!0):(De=!0,ee.__version=$.version);let _i=ee.currentProgram;De===!0&amp;&amp;(_i=rn($,V,q));let zs=!1,xi=!1,io=!1,ln=_i.getUniforms(),zi=ee.uniforms;if(lt.useProgram(_i.program)&amp;&amp;(zs=!0,xi=!0,io=!0),$.id!==C&amp;&amp;(C=$.id,xi=!0),zs||R!==N){lt.buffers.depth.getReversed()&amp;&amp;N.reversedDepth!==!0&amp;&amp;(N._reversedDepth=!0,N.updateProjectionMatrix()),ln.setValue(H,&quot;projectionMatrix&quot;,N.projectionMatrix),ln.setValue(H,&quot;viewMatrix&quot;,N.matrixWorldInverse);let fi=ln.map.cameraPosition;fi!==void 0&amp;&amp;fi.setValue(H,Jt.setFromMatrixPosition(N.matrixWorld)),pt.logarithmicDepthBuffer&amp;&amp;ln.setValue(H,&quot;logDepthBufFC&quot;,2/(Math.log(N.far+1)/Math.LN2)),($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial)&amp;&amp;ln.setValue(H,&quot;isOrthographic&quot;,N.isOrthographicCamera===!0),R!==N&amp;&amp;(R=N,xi=!0,io=!0)}if(q.isSkinnedMesh){ln.setOptional(H,q,&quot;bindMatrix&quot;),ln.setOptional(H,q,&quot;bindMatrixInverse&quot;);let ci=q.skeleton;ci&amp;&amp;(ci.boneTexture===null&amp;&amp;ci.computeBoneTexture(),ln.setValue(H,&quot;boneTexture&quot;,ci.boneTexture,Rt))}q.isBatchedMesh&amp;&amp;(ln.setOptional(H,q,&quot;batchingTexture&quot;),ln.setValue(H,&quot;batchingTexture&quot;,q._matricesTexture,Rt),ln.setOptional(H,q,&quot;batchingIdTexture&quot;),ln.setValue(H,&quot;batchingIdTexture&quot;,q._indirectTexture,Rt),ln.setOptional(H,q,&quot;batchingColorTexture&quot;),q._colorsTexture!==null&amp;&amp;ln.setValue(H,&quot;batchingColorTexture&quot;,q._colorsTexture,Rt));let Bi=J.morphAttributes;if((Bi.position!==void 0||Bi.normal!==void 0||Bi.color!==void 0)&amp;&amp;vt.update(q,J,_i),(xi||ee.receiveShadow!==q.receiveShadow)&amp;&amp;(ee.receiveShadow=q.receiveShadow,ln.setValue(H,&quot;receiveShadow&quot;,q.receiveShadow)),$.isMeshGouraudMaterial&amp;&amp;$.envMap!==null&amp;&amp;(zi.envMap.value=Vt,zi.flipEnvMap.value=Vt.isCubeTexture&amp;&amp;Vt.isRenderTargetTexture===!1?-1:1),$.isMeshStandardMaterial&amp;&amp;$.envMap===null&amp;&amp;V.environment!==null&amp;&amp;(zi.envMapIntensity.value=V.environmentIntensity),xi&amp;&amp;(ln.setValue(H,&quot;toneMappingExposure&quot;,T.toneMappingExposure),ee.needsLights&amp;&amp;kg(zi,io),yt&amp;&amp;$.fog===!0&amp;&amp;gt.refreshFogUniforms(zi,yt),gt.refreshMaterialUniforms(zi,$,K,mt,v.state.transmissionRenderTarget[N.id]),Ch.upload(H,Zu(ee),zi,Rt)),$.isShaderMaterial&amp;&amp;$.uniformsNeedUpdate===!0&amp;&amp;(Ch.upload(H,Zu(ee),zi,Rt),$.uniformsNeedUpdate=!1),$.isSpriteMaterial&amp;&amp;ln.setValue(H,&quot;center&quot;,q.center),ln.setValue(H,&quot;modelViewMatrix&quot;,q.modelViewMatrix),ln.setValue(H,&quot;normalMatrix&quot;,q.normalMatrix),ln.setValue(H,&quot;modelMatrix&quot;,q.matrixWorld),$.isShaderMaterial||$.isRawShaderMaterial){let ci=$.uniformsGroups;for(let fi=0,Bs=ci.length;fi&lt;Bs;fi++){let Ps=ci[fi];me.update(Ps,_i),me.bind(Ps,_i)}}return _i}function kg(N,V){N.ambientLightColor.needsUpdate=V,N.lightProbe.needsUpdate=V,N.directionalLights.needsUpdate=V,N.directionalLightShadows.needsUpdate=V,N.pointLights.needsUpdate=V,N.pointLightShadows.needsUpdate=V,N.spotLights.needsUpdate=V,N.spotLightShadows.needsUpdate=V,N.rectAreaLights.needsUpdate=V,N.hemisphereLights.needsUpdate=V}function Vx(N){return N.isMeshLambertMaterial||N.isMeshToonMaterial||N.isMeshPhongMaterial||N.isMeshStandardMaterial||N.isShadowMaterial||N.isShaderMaterial&amp;&amp;N.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(N,V,J){let $=dt.get(N);$.__autoAllocateDepthBuffer=N.resolveDepthBuffer===!1,$.__autoAllocateDepthBuffer===!1&amp;&amp;($.__useRenderToTexture=!1),dt.get(N.texture).__webglTexture=V,dt.get(N.depthTexture).__webglTexture=$.__autoAllocateDepthBuffer?void 0:J,$.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(N,V){let J=dt.get(N);J.__webglFramebuffer=V,J.__useDefaultFramebuffer=V===void 0};let Hh=H.createFramebuffer();this.setRenderTarget=function(N,V=0,J=0){z=N,U=V,O=J;let $=!0,q=null,yt=!1,Lt=!1;if(N){let Vt=dt.get(N);if(Vt.__useDefaultFramebuffer!==void 0)lt.bindFramebuffer(H.FRAMEBUFFER,null),$=!1;else if(Vt.__webglFramebuffer===void 0)Rt.setupRenderTarget(N);else if(Vt.__hasExternalTextures)Rt.rebindTextures(N,dt.get(N.texture).__webglTexture,dt.get(N.depthTexture).__webglTexture);else if(N.depthBuffer){let Kt=N.depthTexture;if(Vt.__boundDepthTexture!==Kt){if(Kt!==null&amp;&amp;dt.has(Kt)&amp;&amp;(N.width!==Kt.image.width||N.height!==Kt.image.height))throw new Error(&quot;WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.&quot;);Rt.setupDepthRenderbuffer(N)}}let ie=N.texture;(ie.isData3DTexture||ie.isDataArrayTexture||ie.isCompressedArrayTexture)&amp;&amp;(Lt=!0);let ae=dt.get(N).__webglFramebuffer;N.isWebGLCubeRenderTarget?(Array.isArray(ae[V])?q=ae[V][J]:q=ae[V],yt=!0):N.samples&gt;0&amp;&amp;Rt.useMultisampledRTT(N)===!1?q=dt.get(N).__webglMultisampledFramebuffer:Array.isArray(ae)?q=ae[J]:q=ae,P.copy(N.viewport),j.copy(N.scissor),X=N.scissorTest}else P.copy(xt).multiplyScalar(K).floor(),j.copy(It).multiplyScalar(K).floor(),X=se;if(J!==0&amp;&amp;(q=Hh),lt.bindFramebuffer(H.FRAMEBUFFER,q)&amp;&amp;$&amp;&amp;lt.drawBuffers(N,q),lt.viewport(P),lt.scissor(j),lt.setScissorTest(X),yt){let Vt=dt.get(N.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+V,Vt.__webglTexture,J)}else if(Lt){let Vt=V;for(let ie=0;ie&lt;N.textures.length;ie++){let ae=dt.get(N.textures[ie]);H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0+ie,ae.__webglTexture,J,Vt)}}else if(N!==null&amp;&amp;J!==0){let Vt=dt.get(N.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Vt.__webglTexture,J)}C=-1},this.readRenderTargetPixels=function(N,V,J,$,q,yt,Lt,Yt=0){if(!(N&amp;&amp;N.isWebGLRenderTarget)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.&quot;);return}let Vt=dt.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&amp;&amp;Lt!==void 0&amp;&amp;(Vt=Vt[Lt]),Vt){lt.bindFramebuffer(H.FRAMEBUFFER,Vt);try{let ie=N.textures[Yt],ae=ie.format,Kt=ie.type;if(!pt.textureFormatReadable(ae)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.&quot;);return}if(!pt.textureTypeReadable(Kt)){console.error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.&quot;);return}V&gt;=0&amp;&amp;V&lt;=N.width-$&amp;&amp;J&gt;=0&amp;&amp;J&lt;=N.height-q&amp;&amp;(N.textures.length&gt;1&amp;&amp;H.readBuffer(H.COLOR_ATTACHMENT0+Yt),H.readPixels(V,J,$,q,kt.convert(ae),kt.convert(Kt),yt))}finally{let ie=z!==null?dt.get(z).__webglFramebuffer:null;lt.bindFramebuffer(H.FRAMEBUFFER,ie)}}},this.readRenderTargetPixelsAsync=async function(N,V,J,$,q,yt,Lt,Yt=0){if(!(N&amp;&amp;N.isWebGLRenderTarget))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.&quot;);let Vt=dt.get(N).__webglFramebuffer;if(N.isWebGLCubeRenderTarget&amp;&amp;Lt!==void 0&amp;&amp;(Vt=Vt[Lt]),Vt)if(V&gt;=0&amp;&amp;V&lt;=N.width-$&amp;&amp;J&gt;=0&amp;&amp;J&lt;=N.height-q){lt.bindFramebuffer(H.FRAMEBUFFER,Vt);let ie=N.textures[Yt],ae=ie.format,Kt=ie.type;if(!pt.textureFormatReadable(ae))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.&quot;);if(!pt.textureTypeReadable(Kt))throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.&quot;);let Me=H.createBuffer();H.bindBuffer(H.PIXEL_PACK_BUFFER,Me),H.bufferData(H.PIXEL_PACK_BUFFER,yt.byteLength,H.STREAM_READ),N.textures.length&gt;1&amp;&amp;H.readBuffer(H.COLOR_ATTACHMENT0+Yt),H.readPixels(V,J,$,q,kt.convert(ae),kt.convert(Kt),0);let Fe=z!==null?dt.get(z).__webglFramebuffer:null;lt.bindFramebuffer(H.FRAMEBUFFER,Fe);let hn=H.fenceSync(H.SYNC_GPU_COMMANDS_COMPLETE,0);return H.flush(),await gO(H,hn,4),H.bindBuffer(H.PIXEL_PACK_BUFFER,Me),H.getBufferSubData(H.PIXEL_PACK_BUFFER,0,yt),H.deleteBuffer(Me),H.deleteSync(hn),yt}else throw new Error(&quot;THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.&quot;)},this.copyFramebufferToTexture=function(N,V=null,J=0){let $=Math.pow(2,-J),q=Math.floor(N.image.width*$),yt=Math.floor(N.image.height*$),Lt=V!==null?V.x:0,Yt=V!==null?V.y:0;Rt.setTexture2D(N,0),H.copyTexSubImage2D(H.TEXTURE_2D,J,0,0,Lt,Yt,q,yt),lt.unbindTexture()};let Fh=H.createFramebuffer(),Vh=H.createFramebuffer();this.copyTextureToTexture=function(N,V,J=null,$=null,q=0,yt=null){yt===null&amp;&amp;(q!==0?(_u(&quot;WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels.&quot;),yt=q,q=0):yt=0);let Lt,Yt,Vt,ie,ae,Kt,Me,Fe,hn,Ze=N.isCompressedTexture?N.mipmaps[yt]:N.image;if(J!==null)Lt=J.max.x-J.min.x,Yt=J.max.y-J.min.y,Vt=J.isBox3?J.max.z-J.min.z:1,ie=J.min.x,ae=J.min.y,Kt=J.isBox3?J.min.z:0;else{let Bi=Math.pow(2,-q);Lt=Math.floor(Ze.width*Bi),Yt=Math.floor(Ze.height*Bi),N.isDataArrayTexture?Vt=Ze.depth:N.isData3DTexture?Vt=Math.floor(Ze.depth*Bi):Vt=1,ie=0,ae=0,Kt=0}$!==null?(Me=$.x,Fe=$.y,hn=$.z):(Me=0,Fe=0,hn=0);let qe=kt.convert(V.format),ee=kt.convert(V.type),on;V.isData3DTexture?(Rt.setTexture3D(V,0),on=H.TEXTURE_3D):V.isDataArrayTexture||V.isCompressedArrayTexture?(Rt.setTexture2DArray(V,0),on=H.TEXTURE_2D_ARRAY):(Rt.setTexture2D(V,0),on=H.TEXTURE_2D),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,V.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,V.unpackAlignment);let De=H.getParameter(H.UNPACK_ROW_LENGTH),_i=H.getParameter(H.UNPACK_IMAGE_HEIGHT),zs=H.getParameter(H.UNPACK_SKIP_PIXELS),xi=H.getParameter(H.UNPACK_SKIP_ROWS),io=H.getParameter(H.UNPACK_SKIP_IMAGES);H.pixelStorei(H.UNPACK_ROW_LENGTH,Ze.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Ze.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,ie),H.pixelStorei(H.UNPACK_SKIP_ROWS,ae),H.pixelStorei(H.UNPACK_SKIP_IMAGES,Kt);let ln=N.isDataArrayTexture||N.isData3DTexture,zi=V.isDataArrayTexture||V.isData3DTexture;if(N.isDepthTexture){let Bi=dt.get(N),ci=dt.get(V),fi=dt.get(Bi.__renderTarget),Bs=dt.get(ci.__renderTarget);lt.bindFramebuffer(H.READ_FRAMEBUFFER,fi.__webglFramebuffer),lt.bindFramebuffer(H.DRAW_FRAMEBUFFER,Bs.__webglFramebuffer);for(let Ps=0;Ps&lt;Vt;Ps++)ln&amp;&amp;(H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,dt.get(N).__webglTexture,q,Kt+Ps),H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,dt.get(V).__webglTexture,yt,hn+Ps)),H.blitFramebuffer(ie,ae,Lt,Yt,Me,Fe,Lt,Yt,H.DEPTH_BUFFER_BIT,H.NEAREST);lt.bindFramebuffer(H.READ_FRAMEBUFFER,null),lt.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else if(q!==0||N.isRenderTargetTexture||dt.has(N)){let Bi=dt.get(N),ci=dt.get(V);lt.bindFramebuffer(H.READ_FRAMEBUFFER,Fh),lt.bindFramebuffer(H.DRAW_FRAMEBUFFER,Vh);for(let fi=0;fi&lt;Vt;fi++)ln?H.framebufferTextureLayer(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,Bi.__webglTexture,q,Kt+fi):H.framebufferTexture2D(H.READ_FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Bi.__webglTexture,q),zi?H.framebufferTextureLayer(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,ci.__webglTexture,yt,hn+fi):H.framebufferTexture2D(H.DRAW_FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,ci.__webglTexture,yt),q!==0?H.blitFramebuffer(ie,ae,Lt,Yt,Me,Fe,Lt,Yt,H.COLOR_BUFFER_BIT,H.NEAREST):zi?H.copyTexSubImage3D(on,yt,Me,Fe,hn+fi,ie,ae,Lt,Yt):H.copyTexSubImage2D(on,yt,Me,Fe,ie,ae,Lt,Yt);lt.bindFramebuffer(H.READ_FRAMEBUFFER,null),lt.bindFramebuffer(H.DRAW_FRAMEBUFFER,null)}else zi?N.isDataTexture||N.isData3DTexture?H.texSubImage3D(on,yt,Me,Fe,hn,Lt,Yt,Vt,qe,ee,Ze.data):V.isCompressedArrayTexture?H.compressedTexSubImage3D(on,yt,Me,Fe,hn,Lt,Yt,Vt,qe,Ze.data):H.texSubImage3D(on,yt,Me,Fe,hn,Lt,Yt,Vt,qe,ee,Ze):N.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,yt,Me,Fe,Lt,Yt,qe,ee,Ze.data):N.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,yt,Me,Fe,Ze.width,Ze.height,qe,Ze.data):H.texSubImage2D(H.TEXTURE_2D,yt,Me,Fe,Lt,Yt,qe,ee,Ze);H.pixelStorei(H.UNPACK_ROW_LENGTH,De),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,_i),H.pixelStorei(H.UNPACK_SKIP_PIXELS,zs),H.pixelStorei(H.UNPACK_SKIP_ROWS,xi),H.pixelStorei(H.UNPACK_SKIP_IMAGES,io),yt===0&amp;&amp;V.generateMipmaps&amp;&amp;H.generateMipmap(on),lt.unbindTexture()},this.copyTextureToTexture3D=function(N,V,J=null,$=null,q=0){return _u(&#39;WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use &quot;copyTextureToTexture&quot; instead.&#39;),this.copyTextureToTexture(N,V,J,$,q)},this.initRenderTarget=function(N){dt.get(N).__webglFramebuffer===void 0&amp;&amp;Rt.setupRenderTarget(N)},this.initTexture=function(N){N.isCubeTexture?Rt.setTextureCube(N,0):N.isData3DTexture?Rt.setTexture3D(N,0):N.isDataArrayTexture||N.isCompressedArrayTexture?Rt.setTexture2DArray(N,0):Rt.setTexture2D(N,0),lt.unbindTexture()},this.resetState=function(){U=0,O=0,z=null,lt.reset(),Nt.reset()},typeof __THREE_DEVTOOLS__&lt;&quot;u&quot;&amp;&amp;__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent(&quot;observe&quot;,{detail:this}))}get coordinateSystem(){return aa}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorSpace=we._getDrawingBufferColorSpace(t),e.unpackColorSpace=we._getUnpackColorSpace()}};var hL=Ti(ja(),1),dL=Ti(lL(),1);var uL=n=&gt;{let t,e=new Set,i=(h,d)=&gt;{let m=typeof h==&quot;function&quot;?h(t):h;if(!Object.is(m,t)){let g=t;t=d??(typeof m!=&quot;object&quot;||m===null)?m:Object.assign({},t,m),e.forEach(y=&gt;y(t,g))}},a=()=&gt;t,u={setState:i,getState:a,getInitialState:()=&gt;c,subscribe:h=&gt;(e.add(h),()=&gt;e.delete(h))},c=t=n(i,a,u);return u},cL=n=&gt;n?uL(n):uL;var{useSyncExternalStoreWithSelector:Q8}=dL.default,K8=n=&gt;n;function J8(n,t=K8,e){let i=Q8(n.subscribe,n.getState,n.getInitialState,t,e);return hL.default.useDebugValue(i),i}var fL=(n,t)=&gt;{let e=cL(n),i=(a,s=t)=&gt;J8(e,a,s);return Object.assign(i,e),i},pL=(n,t)=&gt;n?fL(n,t):fL;var $8=n=&gt;typeof n==&quot;object&quot;&amp;&amp;typeof n.then==&quot;function&quot;,qu=[];function mL(n,t,e=(i,a)=&gt;i===a){if(n===t)return!0;if(!n||!t)return!1;let i=n.length;if(t.length!==i)return!1;for(let a=0;a&lt;i;a++)if(!e(n[a],t[a]))return!1;return!0}function gL(n,t=null,e=!1,i={}){t===null&amp;&amp;(t=[n]);for(let s of qu)if(mL(t,s.keys,s.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(s,&quot;error&quot;))throw s.error;if(Object.prototype.hasOwnProperty.call(s,&quot;response&quot;))return i.lifespan&amp;&amp;i.lifespan&gt;0&amp;&amp;(s.timeout&amp;&amp;clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!e)throw s.promise}let a={keys:t,equal:i.equal,remove:()=&gt;{let s=qu.indexOf(a);s!==-1&amp;&amp;qu.splice(s,1)},promise:($8(n)?n:n(...t)).then(s=&gt;{a.response=s,i.lifespan&amp;&amp;i.lifespan&gt;0&amp;&amp;(a.timeout=setTimeout(a.remove,i.lifespan))}).catch(s=&gt;a.error=s)};if(qu.push(a),!e)throw a.promise}var vL=(n,t,e)=&gt;gL(n,t,!1,e),yL=(n,t,e)=&gt;void gL(n,t,!0,e);var _L=n=&gt;{if(n===void 0||n.length===0)qu.splice(0,qu.length);else{let t=qu.find(e=&gt;mL(n,e.keys,e.equal));t&amp;&amp;t.remove()}};var YL=Ti(uA()),Ix=Ti(Ax()),Lh=Ti(cA());var bn=Ti(ja(),1);function Cx(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=t?n.return:n.child;for(;i;){let a=Cx(i,t,e);if(a)return a;i=t?null:i.sibling}}function BL(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}var fA=BL(bn.createContext(null)),qg=class extends bn.Component{render(){return bn.createElement(fA.Provider,{value:this._reactInternals},this.props.children)}};function hA(){let n=bn.useContext(fA);if(n===null)throw new Error(&quot;its-fine: useFiber must be called within a &lt;FiberProvider /&gt;!&quot;);let t=bn.useId();return bn.useMemo(()=&gt;{for(let e of[n,n?.alternate]){if(!e)continue;let i=Cx(e,!1,a=&gt;{let s=a.memoizedState;for(;s;){if(s.memoizedState===t)return!0;s=s.next}});if(i)return i}},[n,t])}var i7=Symbol.for(&quot;react.context&quot;),a7=n=&gt;n!==null&amp;&amp;typeof n==&quot;object&quot;&amp;&amp;&quot;$$typeof&quot;in n&amp;&amp;n.$$typeof===i7;function s7(){let n=hA(),[t]=bn.useState(()=&gt;new Map);t.clear();let e=n;for(;e;){let i=e.type;a7(i)&amp;&amp;i!==fA&amp;&amp;!t.has(i)&amp;&amp;t.set(i,bn.use(BL(i))),e=e.return}return t}function PL(){let n=s7();return bn.useMemo(()=&gt;Array.from(n.keys()).reduce((t,e)=&gt;i=&gt;bn.createElement(t,null,bn.createElement(e.Provider,{...i,value:n.get(e)})),t=&gt;bn.createElement(qg,{...t})),[n])}function WL(n){let t=n.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}var kL=n=&gt;n&amp;&amp;n.isOrthographicCamera,ZL=n=&gt;n&amp;&amp;n.hasOwnProperty(&quot;current&quot;),r7=n=&gt;n!=null&amp;&amp;(typeof n==&quot;string&quot;||typeof n==&quot;number&quot;||n.isColor),Bh=((n,t)=&gt;typeof window&lt;&quot;u&quot;&amp;&amp;(((n=window.document)==null?void 0:n.createElement)||((t=window.navigator)==null?void 0:t.product)===&quot;ReactNative&quot;))()?sn.useLayoutEffect:sn.useEffect;function TA(n){let t=sn.useRef(n);return Bh(()=&gt;void(t.current=n),[n]),t}function jL(){let n=hA(),t=PL();return sn.useMemo(()=&gt;({children:e})=&gt;{let a=!!Cx(n,!0,s=&gt;s.type===sn.StrictMode)?sn.StrictMode:sn.Fragment;return(0,Lh.jsx)(a,{children:(0,Lh.jsx)(t,{children:e})})},[n,t])}function QL({set:n}){return Bh(()=&gt;(n(new Promise(()=&gt;null)),()=&gt;n(!1)),[n]),null}var KL=(n=&gt;(n=class extends sn.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=&gt;({error:!0}),n))();function JL(n){var t;let e=typeof window&lt;&quot;u&quot;?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}function Wu(n){var t;return(t=n.__r3f)==null?void 0:t.root.getState()}var _n={obj:n=&gt;n===Object(n)&amp;&amp;!_n.arr(n)&amp;&amp;typeof n!=&quot;function&quot;,fun:n=&gt;typeof n==&quot;function&quot;,str:n=&gt;typeof n==&quot;string&quot;,num:n=&gt;typeof n==&quot;number&quot;,boo:n=&gt;typeof n==&quot;boolean&quot;,und:n=&gt;n===void 0,nul:n=&gt;n===null,arr:n=&gt;Array.isArray(n),equ(n,t,{arrays:e=&quot;shallow&quot;,objects:i=&quot;reference&quot;,strict:a=!0}={}){if(typeof n!=typeof t||!!n!=!!t)return!1;if(_n.str(n)||_n.num(n)||_n.boo(n))return n===t;let s=_n.obj(n);if(s&amp;&amp;i===&quot;reference&quot;)return n===t;let o=_n.arr(n);if(o&amp;&amp;e===&quot;reference&quot;)return n===t;if((o||s)&amp;&amp;n===t)return!0;let u;for(u in n)if(!(u in t))return!1;if(s&amp;&amp;e===&quot;shallow&quot;&amp;&amp;i===&quot;shallow&quot;){for(u in a?t:n)if(!_n.equ(n[u],t[u],{strict:a,objects:&quot;reference&quot;}))return!1}else for(u in a?t:n)if(n[u]!==t[u])return!1;if(_n.und(u)){if(o&amp;&amp;n.length===0&amp;&amp;t.length===0||s&amp;&amp;Object.keys(n).length===0&amp;&amp;Object.keys(t).length===0)return!0;if(n!==t)return!1}return!0}};function $L(n){let t={nodes:{},materials:{},meshes:{}};return n&amp;&amp;n.traverse(e=&gt;{e.name&amp;&amp;(t.nodes[e.name]=e),e.material&amp;&amp;!t.materials[e.material.name]&amp;&amp;(t.materials[e.material.name]=e.material),e.isMesh&amp;&amp;!t.meshes[e.name]&amp;&amp;(t.meshes[e.name]=e)}),t}function tz(n){n.type!==&quot;Scene&quot;&amp;&amp;(n.dispose==null||n.dispose());for(let t in n){let e=n[t];e?.type!==&quot;Scene&quot;&amp;&amp;(e==null||e.dispose==null||e.dispose())}}var ez=[&quot;children&quot;,&quot;key&quot;,&quot;ref&quot;];function o7(n){let t={};for(let e in n)ez.includes(e)||(t[e]=n[e]);return t}function Nx(n,t,e,i){let a=n,s=a?.__r3f;return s||(s={root:t,type:e,parent:null,children:[],props:o7(i),object:a,eventCount:0,handlers:{},isHidden:!1},a&amp;&amp;(a.__r3f=s)),s}function Yg(n,t){let e=n[t];if(!t.includes(&quot;-&quot;))return{root:n,key:t,target:e};e=n;for(let a of t.split(&quot;-&quot;)){var i;t=a,n=e,e=(i=e)==null?void 0:i[t]}return{root:n,key:t,target:e}}var IL=/-\d+$/;function Ox(n,t){if(_n.str(t.props.attach)){if(IL.test(t.props.attach)){let a=t.props.attach.replace(IL,&quot;&quot;),{root:s,key:o}=Yg(n.object,a);Array.isArray(s[o])||(s[o]=[])}let{root:e,key:i}=Yg(n.object,t.props.attach);t.previousAttach=e[i],e[i]=t.object}else _n.fun(t.props.attach)&amp;&amp;(t.previousAttach=t.props.attach(n.object,t.object))}function Lx(n,t){if(_n.str(t.props.attach)){let{root:e,key:i}=Yg(n.object,t.props.attach),a=t.previousAttach;a===void 0?delete e[i]:e[i]=a}else t.previousAttach==null||t.previousAttach(n.object,t.object);delete t.previousAttach}var xA=[...ez,&quot;args&quot;,&quot;dispose&quot;,&quot;attach&quot;,&quot;object&quot;,&quot;onUpdate&quot;,&quot;dispose&quot;],HL=new Map;function l7(n){let t=HL.get(n.constructor);try{t||(t=new n.constructor,HL.set(n.constructor,t))}catch{}return t}function u7(n,t){let e={};for(let i in t)if(!xA.includes(i)&amp;&amp;!_n.equ(t[i],n.props[i])){e[i]=t[i];for(let a in t)a.startsWith(`${i}-`)&amp;&amp;(e[a]=t[a])}for(let i in n.props){if(xA.includes(i)||t.hasOwnProperty(i))continue;let{root:a,key:s}=Yg(n.object,i);if(a.constructor&amp;&amp;a.constructor.length===0){let o=l7(a);_n.und(o)||(e[s]=o[s])}else e[s]=0}return e}var c7=[&quot;map&quot;,&quot;emissiveMap&quot;,&quot;sheenColorMap&quot;,&quot;specularColorMap&quot;,&quot;envMap&quot;],f7=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function no(n,t){var e;let i=n.__r3f,a=i&amp;&amp;WL(i).getState(),s=i?.eventCount;for(let u in t){let c=t[u];if(xA.includes(u))continue;if(i&amp;&amp;f7.test(u)){typeof c==&quot;function&quot;?i.handlers[u]=c:delete i.handlers[u],i.eventCount=Object.keys(i.handlers).length;continue}if(c===void 0)continue;let{root:h,key:d,target:m}=Yg(n,u);if(m instanceof nr&amp;&amp;c instanceof nr)m.mask=c.mask;else if(m instanceof Bt&amp;&amp;r7(c))m.set(c);else if(m!==null&amp;&amp;typeof m==&quot;object&quot;&amp;&amp;typeof m.set==&quot;function&quot;&amp;&amp;typeof m.copy==&quot;function&quot;&amp;&amp;c!=null&amp;&amp;c.constructor&amp;&amp;m.constructor===c.constructor)m.copy(c);else if(m!==null&amp;&amp;typeof m==&quot;object&quot;&amp;&amp;typeof m.set==&quot;function&quot;&amp;&amp;Array.isArray(c))typeof m.fromArray==&quot;function&quot;?m.fromArray(c):m.set(...c);else if(m!==null&amp;&amp;typeof m==&quot;object&quot;&amp;&amp;typeof m.set==&quot;function&quot;&amp;&amp;typeof c==&quot;number&quot;)typeof m.setScalar==&quot;function&quot;?m.setScalar(c):m.set(c);else{var o;h[d]=c,a&amp;&amp;!a.linear&amp;&amp;c7.includes(d)&amp;&amp;(o=h[d])!=null&amp;&amp;o.isTexture&amp;&amp;h[d].format===li&amp;&amp;h[d].type===la&amp;&amp;(h[d].colorSpace=ri)}}if(i!=null&amp;&amp;i.parent&amp;&amp;a!=null&amp;&amp;a.internal&amp;&amp;(e=i.object)!=null&amp;&amp;e.isObject3D&amp;&amp;s!==i.eventCount){let u=i.object,c=a.internal.interaction.indexOf(u);c&gt;-1&amp;&amp;a.internal.interaction.splice(c,1),i.eventCount&amp;&amp;u.raycast!==null&amp;&amp;a.internal.interaction.push(u)}return i&amp;&amp;i.props.attach===void 0&amp;&amp;(i.object.isBufferGeometry?i.props.attach=&quot;geometry&quot;:i.object.isMaterial&amp;&amp;(i.props.attach=&quot;material&quot;)),i&amp;&amp;Ph(i),n}function Ph(n){var t;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);let e=(t=n.root)==null||t.getState==null?void 0:t.getState();e&amp;&amp;e.internal.frames===0&amp;&amp;e.invalidate()}function h7(n,t){n.manual||(kL(n)?(n.left=t.width/-2,n.right=t.width/2,n.top=t.height/2,n.bottom=t.height/-2):n.aspect=t.width/t.height,n.updateProjectionMatrix())}var Wi=n=&gt;n?.isObject3D;function wx(n){return(n.eventObject||n.object).uuid+&quot;/&quot;+n.index+n.instanceId}function nz(n,t,e,i){let a=e.get(t);a&amp;&amp;(e.delete(t),e.size===0&amp;&amp;(n.delete(i),a.target.releasePointerCapture(i)))}function d7(n,t){let{internal:e}=n.getState();e.interaction=e.interaction.filter(i=&gt;i!==t),e.initialHits=e.initialHits.filter(i=&gt;i!==t),e.hovered.forEach((i,a)=&gt;{(i.eventObject===t||i.object===t)&amp;&amp;e.hovered.delete(a)}),e.capturedMap.forEach((i,a)=&gt;{nz(e.capturedMap,t,i,a)})}function iz(n){function t(c){let{internal:h}=n.getState(),d=c.offsetX-h.initialClick[0],m=c.offsetY-h.initialClick[1];return Math.round(Math.sqrt(d*d+m*m))}function e(c){return c.filter(h=&gt;[&quot;Move&quot;,&quot;Over&quot;,&quot;Enter&quot;,&quot;Out&quot;,&quot;Leave&quot;].some(d=&gt;{var m;return(m=h.__r3f)==null?void 0:m.handlers[&quot;onPointer&quot;+d]}))}function i(c,h){let d=n.getState(),m=new Set,g=[],y=h?h(d.internal.interaction):d.internal.interaction;for(let v=0;v&lt;y.length;v++){let S=Wu(y[v]);S&amp;&amp;(S.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function x(v){let S=Wu(v);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var E;S.events.compute==null||S.events.compute(c,S,(E=S.previousRoot)==null?void 0:E.getState()),S.raycaster.camera===void 0&amp;&amp;(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(v,!0):[]}let b=y.flatMap(x).sort((v,S)=&gt;{let E=Wu(v.object),T=Wu(S.object);return!E||!T?v.distance-S.distance:T.events.priority-E.events.priority||v.distance-S.distance}).filter(v=&gt;{let S=wx(v);return m.has(S)?!1:(m.add(S),!0)});d.events.filter&amp;&amp;(b=d.events.filter(b,d));for(let v of b){let S=v.object;for(;S;){var M;(M=S.__r3f)!=null&amp;&amp;M.eventCount&amp;&amp;g.push({...v,eventObject:S}),S=S.parent}}if(&quot;pointerId&quot;in c&amp;&amp;d.internal.capturedMap.has(c.pointerId))for(let v of d.internal.capturedMap.get(c.pointerId).values())m.has(wx(v.intersection))||g.push(v.intersection);return g}function a(c,h,d,m){if(c.length){let g={stopped:!1};for(let y of c){let x=Wu(y.object);if(x||y.object.traverseAncestors(b=&gt;{let M=Wu(b);if(M)return x=M,!1}),x){let{raycaster:b,pointer:M,camera:v,internal:S}=x,E=new B(M.x,M.y,0).unproject(v),T=C=&gt;{var R,P;return(R=(P=S.capturedMap.get(C))==null?void 0:P.has(y.eventObject))!=null?R:!1},w=C=&gt;{let R={intersection:y,target:h.target};S.capturedMap.has(C)?S.capturedMap.get(C).set(y.eventObject,R):S.capturedMap.set(C,new Map([[y.eventObject,R]])),h.target.setPointerCapture(C)},U=C=&gt;{let R=S.capturedMap.get(C);R&amp;&amp;nz(S.capturedMap,y.eventObject,R,C)},O={};for(let C in h){let R=h[C];typeof R!=&quot;function&quot;&amp;&amp;(O[C]=R)}let z={...y,...O,pointer:M,intersections:c,stopped:g.stopped,delta:d,unprojectedPoint:E,ray:b.ray,camera:v,stopPropagation(){let C=&quot;pointerId&quot;in h&amp;&amp;S.capturedMap.get(h.pointerId);if((!C||C.has(y.eventObject))&amp;&amp;(z.stopped=g.stopped=!0,S.hovered.size&amp;&amp;Array.from(S.hovered.values()).find(R=&gt;R.eventObject===y.eventObject))){let R=c.slice(0,c.indexOf(y));s([...R,y])}},target:{hasPointerCapture:T,setPointerCapture:w,releasePointerCapture:U},currentTarget:{hasPointerCapture:T,setPointerCapture:w,releasePointerCapture:U},nativeEvent:h};if(m(z),g.stopped===!0)break}}}return c}function s(c){let{internal:h}=n.getState();for(let d of h.hovered.values())if(!c.length||!c.find(m=&gt;m.object===d.object&amp;&amp;m.index===d.index&amp;&amp;m.instanceId===d.instanceId)){let g=d.eventObject.__r3f;if(h.hovered.delete(wx(d)),g!=null&amp;&amp;g.eventCount){let y=g.handlers,x={...d,intersections:c};y.onPointerOut==null||y.onPointerOut(x),y.onPointerLeave==null||y.onPointerLeave(x)}}}function o(c,h){for(let d=0;d&lt;h.length;d++){let m=h[d].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(c)}}function u(c){switch(c){case&quot;onPointerLeave&quot;:case&quot;onPointerCancel&quot;:return()=&gt;s([]);case&quot;onLostPointerCapture&quot;:return h=&gt;{let{internal:d}=n.getState();&quot;pointerId&quot;in h&amp;&amp;d.capturedMap.has(h.pointerId)&amp;&amp;requestAnimationFrame(()=&gt;{d.capturedMap.has(h.pointerId)&amp;&amp;(d.capturedMap.delete(h.pointerId),s([]))})}}return function(d){let{onPointerMissed:m,internal:g}=n.getState();g.lastEvent.current=d;let y=c===&quot;onPointerMove&quot;,x=c===&quot;onClick&quot;||c===&quot;onContextMenu&quot;||c===&quot;onDoubleClick&quot;,M=i(d,y?e:void 0),v=x?t(d):0;c===&quot;onPointerDown&quot;&amp;&amp;(g.initialClick=[d.offsetX,d.offsetY],g.initialHits=M.map(E=&gt;E.eventObject)),x&amp;&amp;!M.length&amp;&amp;v&lt;=2&amp;&amp;(o(d,g.interaction),m&amp;&amp;m(d)),y&amp;&amp;s(M);function S(E){let T=E.eventObject,w=T.__r3f;if(!(w!=null&amp;&amp;w.eventCount))return;let U=w.handlers;if(y){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){let O=wx(E),z=g.hovered.get(O);z?z.stopped&amp;&amp;E.stopPropagation():(g.hovered.set(O,E),U.onPointerOver==null||U.onPointerOver(E),U.onPointerEnter==null||U.onPointerEnter(E))}U.onPointerMove==null||U.onPointerMove(E)}else{let O=U[c];O?(!x||g.initialHits.includes(T))&amp;&amp;(o(d,g.interaction.filter(z=&gt;!g.initialHits.includes(z))),O(E)):x&amp;&amp;g.initialHits.includes(T)&amp;&amp;o(d,g.interaction.filter(z=&gt;!g.initialHits.includes(z)))}}a(M,d,v,S)}}return{handlePointer:u}}var FL=n=&gt;!!(n!=null&amp;&amp;n.render),AA=sn.createContext(null),p7=(n,t)=&gt;{let e=pL((u,c)=&gt;{let h=new B,d=new B,m=new B;function g(v=c().camera,S=d,E=c().size){let{width:T,height:w,top:U,left:O}=E,z=T/w;S.isVector3?m.copy(S):m.set(...S);let C=v.getWorldPosition(h).distanceTo(m);if(kL(v))return{width:T/v.zoom,height:w/v.zoom,top:U,left:O,factor:1,distance:C,aspect:z};{let R=v.fov*Math.PI/180,P=2*Math.tan(R/2)*C,j=P*(T/w);return{width:j,height:P,top:U,left:O,factor:T/j,distance:C,aspect:z}}}let y,x=v=&gt;u(S=&gt;({performance:{...S.performance,current:v}})),b=new ct;return{set:u,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(v=1)=&gt;n(c(),v),advance:(v,S)=&gt;t(v,S,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Uu,pointer:b,mouse:b,frameloop:&quot;always&quot;,onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=&gt;{let v=c();y&amp;&amp;clearTimeout(y),v.performance.current!==v.performance.min&amp;&amp;x(v.performance.min),y=setTimeout(()=&gt;x(c().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:v=&gt;u(S=&gt;({...S,events:{...S.events,...v}})),setSize:(v,S,E=0,T=0)=&gt;{let w=c().camera,U={width:v,height:S,top:E,left:T};u(O=&gt;({size:U,viewport:{...O.viewport,...g(w,d,U)}}))},setDpr:v=&gt;u(S=&gt;{let E=JL(v);return{viewport:{...S.viewport,dpr:E,initialDpr:S.viewport.initialDpr||E}}}),setFrameloop:(v=&quot;always&quot;)=&gt;{let S=c().clock;S.stop(),S.elapsedTime=0,v!==&quot;never&quot;&amp;&amp;(S.start(),S.elapsedTime=0),u(()=&gt;({frameloop:v}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:sn.createRef(),active:!1,frames:0,priority:0,subscribe:(v,S,E)=&gt;{let T=c().internal;return T.priority=T.priority+(S&gt;0?1:0),T.subscribers.push({ref:v,priority:S,store:E}),T.subscribers=T.subscribers.sort((w,U)=&gt;w.priority-U.priority),()=&gt;{let w=c().internal;w!=null&amp;&amp;w.subscribers&amp;&amp;(w.priority=w.priority-(S&gt;0?1:0),w.subscribers=w.subscribers.filter(U=&gt;U.ref!==v))}}}}}),i=e.getState(),a=i.size,s=i.viewport.dpr,o=i.camera;return e.subscribe(()=&gt;{let{camera:u,size:c,viewport:h,gl:d,set:m}=e.getState();if(c.width!==a.width||c.height!==a.height||h.dpr!==s){a=c,s=h.dpr,h7(u,c),h.dpr&gt;0&amp;&amp;d.setPixelRatio(h.dpr);let g=typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,g)}u!==o&amp;&amp;(o=u,m(g=&gt;({viewport:{...g.viewport,...g.viewport.getCurrentViewport(u)}})))}),e.subscribe(u=&gt;n(u)),e};function az(){let n=sn.useContext(AA);if(!n)throw new Error(&quot;R3F: Hooks can only be used within the Canvas component!&quot;);return n}function RA(n,t=0){let e=az(),i=e.getState().internal.subscribe,a=TA(n);return Bh(()=&gt;i(a,t,e),[t,i,e]),null}var VL=new WeakMap,m7=n=&gt;{var t;return typeof n==&quot;function&quot;&amp;&amp;(n==null||(t=n.prototype)==null?void 0:t.constructor)===n};function sz(n,t){return function(e,...i){let a;return m7(e)?(a=VL.get(e),a||(a=new e,VL.set(e,a))):a=e,n&amp;&amp;n(a),Promise.all(i.map(s=&gt;new Promise((o,u)=&gt;a.load(s,c=&gt;{Wi(c?.scene)&amp;&amp;Object.assign(c,$L(c.scene)),o(c)},t,c=&gt;u(new Error(`Could not load ${s}: ${c?.message}`))))))}}function CA(n,t,e,i){let a=Array.isArray(t)?t:[t],s=vL(sz(e,i),[n,...a],{equal:_n.equ});return Array.isArray(t)?s:s[0]}CA.preload=function(n,t,e){let i=Array.isArray(t)?t:[t];return yL(sz(e),[n,...i])};CA.clear=function(n,t){let e=Array.isArray(t)?t:[t];return _L([n,...e])};function g7(n){let t=(0,YL.default)(n);return t.injectIntoDevTools({bundleType:(typeof process&lt;&quot;u&quot;,0),rendererPackageName:&quot;@react-three/fiber&quot;,version:sn.version}),t}var rz=0,zh={},v7=/^three(?=[A-Z])/,Hx=n=&gt;`${n[0].toUpperCase()}${n.slice(1)}`,y7=0,_7=n=&gt;typeof n==&quot;function&quot;;function wA(n){if(_7(n)){let t=`${y7++}`;return zh[t]=n,t}else Object.assign(zh,n)}function oz(n,t){let e=Hx(n),i=zh[e];if(n!==&quot;primitive&quot;&amp;&amp;!i)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n===&quot;primitive&quot;&amp;&amp;!t.object)throw new Error(&quot;R3F: Primitives without &#39;object&#39; are invalid!&quot;);if(t.args!==void 0&amp;&amp;!Array.isArray(t.args))throw new Error(&quot;R3F: The args prop must be an array!&quot;)}function x7(n,t,e){var i;return n=Hx(n)in zh?n:n.replace(v7,&quot;&quot;),oz(n,t),n===&quot;primitive&quot;&amp;&amp;(i=t.object)!=null&amp;&amp;i.__r3f&amp;&amp;delete t.object.__r3f,Nx(t.object,e,n,t)}function S7(n){if(!n.isHidden){var t;n.props.attach&amp;&amp;(t=n.parent)!=null&amp;&amp;t.object?Lx(n.parent,n):Wi(n.object)&amp;&amp;(n.object.visible=!1),n.isHidden=!0,Ph(n)}}function lz(n){if(n.isHidden){var t;n.props.attach&amp;&amp;(t=n.parent)!=null&amp;&amp;t.object?Ox(n.parent,n):Wi(n.object)&amp;&amp;n.props.visible!==!1&amp;&amp;(n.object.visible=!0),n.isHidden=!1,Ph(n)}}function DA(n,t,e){let i=t.root.getState();if(!(!n.parent&amp;&amp;n.object!==i.scene)){if(!t.object){var a,s;let o=zh[Hx(t.type)];t.object=(a=t.props.object)!=null?a:new o(...(s=t.props.args)!=null?s:[]),t.object.__r3f=t}if(no(t.object,t.props),t.props.attach)Ox(n,t);else if(Wi(t.object)&amp;&amp;Wi(n.object)){let o=n.object.children.indexOf(e?.object);if(e&amp;&amp;o!==-1){let u=n.object.children.indexOf(t.object);if(u!==-1){n.object.children.splice(u,1);let c=u&lt;o?o-1:o;n.object.children.splice(c,0,t.object)}else t.object.parent=n.object,n.object.children.splice(o,0,t.object),t.object.dispatchEvent({type:&quot;added&quot;}),n.object.dispatchEvent({type:&quot;childadded&quot;,child:t.object})}else n.object.add(t.object)}for(let o of t.children)DA(t,o);Ph(t)}}function dA(n,t){t&amp;&amp;(t.parent=n,n.children.push(t),DA(n,t))}function GL(n,t,e){if(!t||!e)return;t.parent=n;let i=n.children.indexOf(e);i!==-1?n.children.splice(i,0,t):n.children.push(t),DA(n,t,e)}function uz(n){if(typeof n.dispose==&quot;function&quot;){let t=()=&gt;{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT&lt;&quot;u&quot;?t():(0,Ix.unstable_scheduleCallback)(Ix.unstable_IdlePriority,t)}}function SA(n,t,e){if(!t)return;t.parent=null;let i=n.children.indexOf(t);i!==-1&amp;&amp;n.children.splice(i,1),t.props.attach?Lx(n,t):Wi(t.object)&amp;&amp;Wi(n.object)&amp;&amp;(n.object.remove(t.object),d7(WL(t),t.object));let a=t.props.dispose!==null&amp;&amp;e!==!1;for(let s=t.children.length-1;s&gt;=0;s--){let o=t.children[s];SA(t,o,a)}t.children.length=0,delete t.object.__r3f,a&amp;&amp;t.type!==&quot;primitive&quot;&amp;&amp;t.object.type!==&quot;Scene&quot;&amp;&amp;uz(t.object),e===void 0&amp;&amp;Ph(t)}function M7(n,t){for(let e of[n,n.alternate])if(e!==null)if(typeof e.ref==&quot;function&quot;){e.refCleanup==null||e.refCleanup();let i=e.ref(t);typeof i==&quot;function&quot;&amp;&amp;(e.refCleanup=i)}else e.ref&amp;&amp;(e.ref.current=t)}var Ux=[];function E7(){for(let[e]of Ux){let i=e.parent;if(i){e.props.attach?Lx(i,e):Wi(e.object)&amp;&amp;Wi(i.object)&amp;&amp;i.object.remove(e.object);for(let a of e.children)a.props.attach?Lx(e,a):Wi(a.object)&amp;&amp;Wi(e.object)&amp;&amp;e.object.remove(a.object)}e.isHidden&amp;&amp;lz(e),e.object.__r3f&amp;&amp;delete e.object.__r3f,e.type!==&quot;primitive&quot;&amp;&amp;uz(e.object)}for(let[e,i,a]of Ux){e.props=i;let s=e.parent;if(s){var n,t;let o=zh[Hx(e.type)];e.object=(n=e.props.object)!=null?n:new o(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,M7(a,e.object),no(e.object,e.props),e.props.attach?Ox(s,e):Wi(e.object)&amp;&amp;Wi(s.object)&amp;&amp;s.object.add(e.object);for(let u of e.children)u.props.attach?Ox(e,u):Wi(u.object)&amp;&amp;Wi(e.object)&amp;&amp;e.object.add(u.object);Ph(e)}}Ux.length=0}var pA=()=&gt;{},XL={},Dx=rz,b7=0,T7=4,zx=g7({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:x7,removeChild:SA,appendChild:dA,appendInitialChild:dA,insertBefore:GL,appendChildToContainer(n,t){let e=n.getState().scene.__r3f;!t||!e||dA(e,t)},removeChildFromContainer(n,t){let e=n.getState().scene.__r3f;!t||!e||SA(e,t)},insertInContainerBefore(n,t,e){let i=n.getState().scene.__r3f;!t||!e||!i||GL(i,t,e)},getRootHostContext:()=&gt;XL,getChildHostContext:()=&gt;XL,commitUpdate(n,t,e,i,a){var s,o,u;oz(t,i);let c=!1;if((n.type===&quot;primitive&quot;&amp;&amp;e.object!==i.object||((s=i.args)==null?void 0:s.length)!==((o=e.args)==null?void 0:o.length)||(u=i.args)!=null&amp;&amp;u.some((d,m)=&gt;{var g;return d!==((g=e.args)==null?void 0:g[m])}))&amp;&amp;(c=!0),c)Ux.push([n,{...i},a]);else{let d=u7(n,i);Object.keys(d).length&amp;&amp;(Object.assign(n.props,d),no(n.object,d))}(a.sibling===null||(a.flags&amp;T7)===b7)&amp;&amp;E7()},finalizeInitialChildren:()=&gt;!1,commitMount(){},getPublicInstance:n=&gt;n?.object,prepareForCommit:()=&gt;null,preparePortalMount:n=&gt;Nx(n.getState().scene,n,&quot;&quot;,{}),resetAfterCommit:()=&gt;{},shouldSetTextContent:()=&gt;!1,clearContainer:()=&gt;!1,hideInstance:S7,unhideInstance:lz,createTextInstance:pA,hideTextInstance:pA,unhideTextInstance:pA,scheduleTimeout:typeof setTimeout==&quot;function&quot;?setTimeout:void 0,cancelTimeout:typeof clearTimeout==&quot;function&quot;?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=&gt;null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=&gt;null,shouldAttemptEagerTransition:()=&gt;!1,trackSchedulerEvent:()=&gt;{},resolveEventType:()=&gt;null,resolveEventTimeStamp:()=&gt;-1.1,requestPostPaintCallback(){},maySuspendCommit:()=&gt;!1,preloadInstance:()=&gt;!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=&gt;null,NotPendingTransition:null,HostTransitionContext:sn.createContext(null),setCurrentUpdatePriority(n){Dx=n},getCurrentUpdatePriority(){return Dx},resolveUpdatePriority(){var n;if(Dx!==rz)return Dx;switch(typeof window&lt;&quot;u&quot;&amp;&amp;((n=window.event)==null?void 0:n.type)){case&quot;click&quot;:case&quot;contextmenu&quot;:case&quot;dblclick&quot;:case&quot;pointercancel&quot;:case&quot;pointerdown&quot;:case&quot;pointerup&quot;:return vl.DiscreteEventPriority;case&quot;pointermove&quot;:case&quot;pointerout&quot;:case&quot;pointerover&quot;:case&quot;pointerenter&quot;:case&quot;pointerleave&quot;:case&quot;wheel&quot;:return vl.ContinuousEventPriority;default:return vl.DefaultEventPriority}},resetFormInstance(){}}),gl=new Map,Uh={objects:&quot;shallow&quot;,strict:!1};function A7(n,t){if(!t&amp;&amp;typeof HTMLCanvasElement&lt;&quot;u&quot;&amp;&amp;n instanceof HTMLCanvasElement&amp;&amp;n.parentElement){let{width:e,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:e,height:i,top:a,left:s}}else if(!t&amp;&amp;typeof OffscreenCanvas&lt;&quot;u&quot;&amp;&amp;n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function UA(n){let t=gl.get(n),e=t?.fiber,i=t?.store;t&amp;&amp;console.warn(&quot;R3F.createRoot should only be called once!&quot;);let a=typeof reportError==&quot;function&quot;?reportError:console.error,s=i||p7(Px,bA),o=e||zx.createContainer(s,vl.ConcurrentRoot,null,!1,null,&quot;&quot;,a,a,a,null);t||gl.set(n,{fiber:o,store:s});let u,c,h=!1,d=null;return{async configure(m={}){let g;d=new Promise(xt=&gt;g=xt);let{gl:y,size:x,scene:b,events:M,onCreated:v,shadows:S=!1,linear:E=!1,flat:T=!1,legacy:w=!1,orthographic:U=!1,frameloop:O=&quot;always&quot;,dpr:z=[1,2],performance:C,raycaster:R,camera:P,onPointerMissed:j}=m,X=s.getState(),Z=X.gl;if(!X.gl){let xt={canvas:n,powerPreference:&quot;high-performance&quot;,antialias:!0,alpha:!0},It=typeof y==&quot;function&quot;?await y(xt):y;FL(It)?Z=It:Z=new Hg({...xt,...y}),X.set({gl:Z})}let st=X.raycaster;st||X.set({raycaster:st=new ph});let{params:et,...mt}=R||{};if(_n.equ(mt,st,Uh)||no(st,{...mt}),_n.equ(et,st.params,Uh)||no(st,{params:{...st.params,...et}}),!X.camera||X.camera===c&amp;&amp;!_n.equ(c,P,Uh)){c=P;let xt=P?.isCamera,It=xt?P:U?new $r(0,0,0,0,.1,1e3):new Un(75,0,.1,1e3);xt||(It.position.z=5,P&amp;&amp;(no(It,P),It.manual||(&quot;aspect&quot;in P||&quot;left&quot;in P||&quot;right&quot;in P||&quot;bottom&quot;in P||&quot;top&quot;in P)&amp;&amp;(It.manual=!0,It.updateProjectionMatrix())),!X.camera&amp;&amp;!(P!=null&amp;&amp;P.rotation)&amp;&amp;It.lookAt(0,0,0)),X.set({camera:It}),st.camera=It}if(!X.scene){let xt;b!=null&amp;&amp;b.isScene?(xt=b,Nx(xt,s,&quot;&quot;,{})):(xt=new bu,Nx(xt,s,&quot;&quot;,{}),b&amp;&amp;no(xt,b)),X.set({scene:xt})}M&amp;&amp;!X.events.handlers&amp;&amp;X.set({events:M(s)});let K=A7(n,x);if(_n.equ(K,X.size,Uh)||X.setSize(K.width,K.height,K.top,K.left),z&amp;&amp;X.viewport.dpr!==JL(z)&amp;&amp;X.setDpr(z),X.frameloop!==O&amp;&amp;X.setFrameloop(O),X.onPointerMissed||X.set({onPointerMissed:j}),C&amp;&amp;!_n.equ(C,X.performance,Uh)&amp;&amp;X.set(xt=&gt;({performance:{...xt.performance,...C}})),!X.xr){var _t;let xt=(Qt,it)=&gt;{let wt=s.getState();wt.frameloop!==&quot;never&quot;&amp;&amp;bA(Qt,!0,wt,it)},It=()=&gt;{let Qt=s.getState();Qt.gl.xr.enabled=Qt.gl.xr.isPresenting,Qt.gl.xr.setAnimationLoop(Qt.gl.xr.isPresenting?xt:null),Qt.gl.xr.isPresenting||Px(Qt)},se={connect(){let Qt=s.getState().gl;Qt.xr.addEventListener(&quot;sessionstart&quot;,It),Qt.xr.addEventListener(&quot;sessionend&quot;,It)},disconnect(){let Qt=s.getState().gl;Qt.xr.removeEventListener(&quot;sessionstart&quot;,It),Qt.xr.removeEventListener(&quot;sessionend&quot;,It)}};typeof((_t=Z.xr)==null?void 0:_t.addEventListener)==&quot;function&quot;&amp;&amp;se.connect(),X.set({xr:se})}if(Z.shadowMap){let xt=Z.shadowMap.enabled,It=Z.shadowMap.type;if(Z.shadowMap.enabled=!!S,_n.boo(S))Z.shadowMap.type=Nu;else if(_n.str(S)){var Ut;let se={basic:J_,percentage:mh,soft:Nu,variance:Pa};Z.shadowMap.type=(Ut=se[S])!=null?Ut:Nu}else _n.obj(S)&amp;&amp;Object.assign(Z.shadowMap,S);(xt!==Z.shadowMap.enabled||It!==Z.shadowMap.type)&amp;&amp;(Z.shadowMap.needsUpdate=!0)}return we.enabled=!w,h||(Z.outputColorSpace=E?er:ri,Z.toneMapping=T?us:ng),X.legacy!==w&amp;&amp;X.set(()=&gt;({legacy:w})),X.linear!==E&amp;&amp;X.set(()=&gt;({linear:E})),X.flat!==T&amp;&amp;X.set(()=&gt;({flat:T})),y&amp;&amp;!_n.fun(y)&amp;&amp;!FL(y)&amp;&amp;!_n.equ(y,Z,Uh)&amp;&amp;no(Z,y),u=v,h=!0,g(),this},render(m){return!h&amp;&amp;!d&amp;&amp;this.configure(),d.then(()=&gt;{zx.updateContainer((0,Lh.jsx)(R7,{store:s,children:m,onCreated:u,rootElement:n}),o,null,()=&gt;{})}),s},unmount(){Fx(n)}}}function R7({store:n,children:t,onCreated:e,rootElement:i}){return Bh(()=&gt;{let a=n.getState();a.set(s=&gt;({internal:{...s.internal,active:!0}})),e&amp;&amp;e(a),n.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),(0,Lh.jsx)(AA.Provider,{value:n,children:t})}function Fx(n,t){let e=gl.get(n),i=e?.fiber;if(i){let a=e?.store.getState();a&amp;&amp;(a.internal.active=!1),zx.updateContainer(null,i,null,()=&gt;{a&amp;&amp;setTimeout(()=&gt;{try{var s,o,u,c;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(u=a.gl)==null||u.forceContextLoss==null||u.forceContextLoss(),(c=a.gl)!=null&amp;&amp;c.xr&amp;&amp;a.xr.disconnect(),tz(a.scene),gl.delete(n),t&amp;&amp;t(n)}catch{}},500)})}}var C7=new Set,w7=new Set,D7=new Set;function mA(n,t){if(n.size)for(let{callback:e}of n.values())e(t)}function Oh(n,t){switch(n){case&quot;before&quot;:return mA(C7,t);case&quot;after&quot;:return mA(w7,t);case&quot;tail&quot;:return mA(D7,t)}}var gA,vA;function MA(n,t,e){let i=t.clock.getDelta();t.frameloop===&quot;never&quot;&amp;&amp;typeof n==&quot;number&quot;&amp;&amp;(i=n-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=n),gA=t.internal.subscribers;for(let a=0;a&lt;gA.length;a++)vA=gA[a],vA.ref.current(vA.store.getState(),i,e);return!t.internal.priority&amp;&amp;t.gl.render&amp;&amp;t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop===&quot;always&quot;?1:t.internal.frames}var Bx=!1,EA=!1,yA,qL,Nh;function cz(n){qL=requestAnimationFrame(cz),Bx=!0,yA=0,Oh(&quot;before&quot;,n),EA=!0;for(let e of gl.values()){var t;Nh=e.store.getState(),Nh.internal.active&amp;&amp;(Nh.frameloop===&quot;always&quot;||Nh.internal.frames&gt;0)&amp;&amp;!((t=Nh.gl.xr)!=null&amp;&amp;t.isPresenting)&amp;&amp;(yA+=MA(n,Nh))}if(EA=!1,Oh(&quot;after&quot;,n),yA===0)return Oh(&quot;tail&quot;,n),Bx=!1,cancelAnimationFrame(qL)}function Px(n,t=1){var e;if(!n)return gl.forEach(i=&gt;Px(i.store.getState(),t));(e=n.gl.xr)!=null&amp;&amp;e.isPresenting||!n.internal.active||n.frameloop===&quot;never&quot;||(t&gt;1?n.internal.frames=Math.min(60,n.internal.frames+t):EA?n.internal.frames=2:n.internal.frames=1,Bx||(Bx=!0,requestAnimationFrame(cz)))}function bA(n,t=!0,e,i){if(t&amp;&amp;Oh(&quot;before&quot;,n),e)MA(n,e,i);else for(let a of gl.values())MA(n,a.store.getState());t&amp;&amp;Oh(&quot;after&quot;,n)}var _A={onClick:[&quot;click&quot;,!1],onContextMenu:[&quot;contextmenu&quot;,!1],onDoubleClick:[&quot;dblclick&quot;,!1],onWheel:[&quot;wheel&quot;,!0],onPointerDown:[&quot;pointerdown&quot;,!0],onPointerUp:[&quot;pointerup&quot;,!0],onPointerLeave:[&quot;pointerleave&quot;,!0],onPointerMove:[&quot;pointermove&quot;,!0],onPointerCancel:[&quot;pointercancel&quot;,!0],onLostPointerCapture:[&quot;lostpointercapture&quot;,!0]};function NA(n){let{handlePointer:t}=iz(n);return{priority:1,enabled:!0,compute(e,i,a){i.pointer.set(e.offsetX/i.size.width*2-1,-(e.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(_A).reduce((e,i)=&gt;({...e,[i]:t(i)}),{}),update:()=&gt;{var e;let{events:i,internal:a}=n.getState();(e=a.lastEvent)!=null&amp;&amp;e.current&amp;&amp;i.handlers&amp;&amp;i.handlers.onPointerMove(a.lastEvent.current)},connect:e=&gt;{let{set:i,events:a}=n.getState();if(a.disconnect==null||a.disconnect(),i(s=&gt;({events:{...s.events,connected:e}})),a.handlers)for(let s in a.handlers){let o=a.handlers[s],[u,c]=_A[s];e.addEventListener(u,o,{passive:c})}},disconnect:()=&gt;{let{set:e,events:i}=n.getState();if(i.connected){if(i.handlers)for(let a in i.handlers){let s=i.handlers[a],[o]=_A[a];i.connected.removeEventListener(o,s)}e(a=&gt;({events:{...a.events,connected:void 0}}))}}}}var ki=Ti(ja());var Ia=Ti(ja(),1);function fz(n,t){let e;return(...i)=&gt;{window.clearTimeout(e),e=window.setTimeout(()=&gt;n(...i),t)}}function hz({debounce:n,scroll:t,polyfill:e,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){let a=e||(typeof window&gt;&quot;u&quot;?class{}:window.ResizeObserver);if(!a)throw new Error(&quot;This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills&quot;);let[s,o]=(0,Ia.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),u=(0,Ia.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=n?typeof n==&quot;number&quot;?n:n.scroll:null,h=n?typeof n==&quot;number&quot;?n:n.resize:null,d=(0,Ia.useRef)(!1);(0,Ia.useEffect)(()=&gt;(d.current=!0,()=&gt;void(d.current=!1)));let[m,g,y]=(0,Ia.useMemo)(()=&gt;{let v=()=&gt;{if(!u.current.element)return;let{left:S,top:E,width:T,height:w,bottom:U,right:O,x:z,y:C}=u.current.element.getBoundingClientRect(),R={left:S,top:E,width:T,height:w,bottom:U,right:O,x:z,y:C};u.current.element instanceof HTMLElement&amp;&amp;i&amp;&amp;(R.height=u.current.element.offsetHeight,R.width=u.current.element.offsetWidth),Object.freeze(R),d.current&amp;&amp;!L7(u.current.lastBounds,R)&amp;&amp;o(u.current.lastBounds=R)};return[v,h?fz(v,h):v,c?fz(v,c):v]},[o,i,c,h]);function x(){u.current.scrollContainers&amp;&amp;(u.current.scrollContainers.forEach(v=&gt;v.removeEventListener(&quot;scroll&quot;,y,!0)),u.current.scrollContainers=null),u.current.resizeObserver&amp;&amp;(u.current.resizeObserver.disconnect(),u.current.resizeObserver=null),u.current.orientationHandler&amp;&amp;(&quot;orientation&quot;in screen&amp;&amp;&quot;removeEventListener&quot;in screen.orientation?screen.orientation.removeEventListener(&quot;change&quot;,u.current.orientationHandler):&quot;onorientationchange&quot;in window&amp;&amp;window.removeEventListener(&quot;orientationchange&quot;,u.current.orientationHandler))}function b(){u.current.element&amp;&amp;(u.current.resizeObserver=new a(y),u.current.resizeObserver.observe(u.current.element),t&amp;&amp;u.current.scrollContainers&amp;&amp;u.current.scrollContainers.forEach(v=&gt;v.addEventListener(&quot;scroll&quot;,y,{capture:!0,passive:!0})),u.current.orientationHandler=()=&gt;{y()},&quot;orientation&quot;in screen&amp;&amp;&quot;addEventListener&quot;in screen.orientation?screen.orientation.addEventListener(&quot;change&quot;,u.current.orientationHandler):&quot;onorientationchange&quot;in window&amp;&amp;window.addEventListener(&quot;orientationchange&quot;,u.current.orientationHandler))}let M=v=&gt;{!v||v===u.current.element||(x(),u.current.element=v,u.current.scrollContainers=dz(v),b())};return N7(y,!!t),U7(g),(0,Ia.useEffect)(()=&gt;{x(),b()},[t,y,g]),(0,Ia.useEffect)(()=&gt;x,[]),[M,s,m]}function U7(n){(0,Ia.useEffect)(()=&gt;{let t=n;return window.addEventListener(&quot;resize&quot;,t),()=&gt;void window.removeEventListener(&quot;resize&quot;,t)},[n])}function N7(n,t){(0,Ia.useEffect)(()=&gt;{if(t){let e=n;return window.addEventListener(&quot;scroll&quot;,e,{capture:!0,passive:!0}),()=&gt;void window.removeEventListener(&quot;scroll&quot;,e,!0)}},[n,t])}function dz(n){let t=[];if(!n||n===document.body)return t;let{overflow:e,overflowX:i,overflowY:a}=window.getComputedStyle(n);return[e,i,a].some(s=&gt;s===&quot;auto&quot;||s===&quot;scroll&quot;)&amp;&amp;t.push(n),[...t,...dz(n.parentElement)]}var O7=[&quot;x&quot;,&quot;y&quot;,&quot;top&quot;,&quot;bottom&quot;,&quot;left&quot;,&quot;right&quot;,&quot;width&quot;,&quot;height&quot;],L7=(n,t)=&gt;O7.every(e=&gt;n[e]===t[e]);var cr=Ti(cA()),O9=Ti(qE());var L9=Ti(uA()),z9=Ti(Ax());function z7({ref:n,children:t,fallback:e,resize:i,style:a,gl:s,events:o=NA,eventSource:u,eventPrefix:c,shadows:h,linear:d,flat:m,legacy:g,orthographic:y,frameloop:x,dpr:b,performance:M,raycaster:v,camera:S,scene:E,onPointerMissed:T,onCreated:w,...U}){ki.useMemo(()=&gt;wA(_x),[]);let O=jL(),[z,C]=hz({scroll:!0,debounce:{scroll:50,resize:0},...i}),R=ki.useRef(null),P=ki.useRef(null);ki.useImperativeHandle(n,()=&gt;R.current);let j=TA(T),[X,Z]=ki.useState(!1),[st,et]=ki.useState(!1);if(X)throw X;if(st)throw st;let mt=ki.useRef(null);return Bh(()=&gt;{let _t=R.current;if(C.width&gt;0&amp;&amp;C.height&gt;0&amp;&amp;_t){mt.current||(mt.current=UA(_t));async function Ut(){await mt.current.configure({gl:s,scene:E,events:o,shadows:h,linear:d,flat:m,legacy:g,orthographic:y,frameloop:x,dpr:b,performance:M,raycaster:v,camera:S,size:C,onPointerMissed:(...xt)=&gt;j.current==null?void 0:j.current(...xt),onCreated:xt=&gt;{xt.events.connect==null||xt.events.connect(u?ZL(u)?u.current:u:P.current),c&amp;&amp;xt.setEvents({compute:(It,se)=&gt;{let Qt=It[c+&quot;X&quot;],it=It[c+&quot;Y&quot;];se.pointer.set(Qt/se.size.width*2-1,-(it/se.size.height)*2+1),se.raycaster.setFromCamera(se.pointer,se.camera)}}),w?.(xt)}}),mt.current.render((0,cr.jsx)(O,{children:(0,cr.jsx)(KL,{set:et,children:(0,cr.jsx)(ki.Suspense,{fallback:(0,cr.jsx)(QL,{set:Z}),children:t??null})})}))}Ut()}}),ki.useEffect(()=&gt;{let _t=R.current;if(_t)return()=&gt;Fx(_t)},[]),(0,cr.jsx)(&quot;div&quot;,{ref:P,style:{position:&quot;relative&quot;,width:&quot;100%&quot;,height:&quot;100%&quot;,overflow:&quot;hidden&quot;,pointerEvents:u?&quot;none&quot;:&quot;auto&quot;,...a},...U,children:(0,cr.jsx)(&quot;div&quot;,{ref:z,style:{width:&quot;100%&quot;,height:&quot;100%&quot;},children:(0,cr.jsx)(&quot;canvas&quot;,{ref:R,style:{display:&quot;block&quot;},children:e})})})}function pz(n){return(0,cr.jsx)(qg,{children:(0,cr.jsx)(z7,{...n})})}function B7(){let n=(0,Ls.useRef)();return RA(()=&gt;{n.current&amp;&amp;(n.current.rotation.y+=.01)}),Ls.default.createElement(&quot;mesh&quot;,{ref:n,position:[0,0,0]},Ls.default.createElement(&quot;boxGeometry&quot;,{args:[1,1,1]}),Ls.default.createElement(&quot;meshStandardMaterial&quot;,{color:&quot;tomato&quot;}))}function P7(){return Ls.default.createElement(pz,{camera:{position:[3,2,5],fov:50},style:{width:&quot;100%&quot;,height:&quot;100%&quot;}},Ls.default.createElement(&quot;ambientLight&quot;,{intensity:.4}),Ls.default.createElement(&quot;directionalLight&quot;,{position:[5,5,5],intensity:.8}),Ls.default.createElement(B7,null))}var mz=document.getElementById(&quot;react-root&quot;);mz&amp;&amp;(0,gz.createRoot)(mz).render(Ls.default.createElement(P7,null));})();
<a href="#l3852" class="line" id="l3852">   3852</a> /*! Bundled license information:
<a href="#l3853" class="line" id="l3853">   3853</a> 
<a href="#l3854" class="line" id="l3854">   3854</a> react/cjs/react.production.js:
<a href="#l3855" class="line" id="l3855">   3855</a>   (**
<a href="#l3856" class="line" id="l3856">   3856</a>    * @license React
<a href="#l3857" class="line" id="l3857">   3857</a>    * react.production.js
<a href="#l3858" class="line" id="l3858">   3858</a>    *
<a href="#l3859" class="line" id="l3859">   3859</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3860" class="line" id="l3860">   3860</a>    *
<a href="#l3861" class="line" id="l3861">   3861</a>    * This source code is licensed under the MIT license found in the
<a href="#l3862" class="line" id="l3862">   3862</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3863" class="line" id="l3863">   3863</a>    *)
<a href="#l3864" class="line" id="l3864">   3864</a> 
<a href="#l3865" class="line" id="l3865">   3865</a> scheduler/cjs/scheduler.production.js:
<a href="#l3866" class="line" id="l3866">   3866</a> scheduler/cjs/scheduler.production.js:
<a href="#l3867" class="line" id="l3867">   3867</a>   (**
<a href="#l3868" class="line" id="l3868">   3868</a>    * @license React
<a href="#l3869" class="line" id="l3869">   3869</a>    * scheduler.production.js
<a href="#l3870" class="line" id="l3870">   3870</a>    *
<a href="#l3871" class="line" id="l3871">   3871</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3872" class="line" id="l3872">   3872</a>    *
<a href="#l3873" class="line" id="l3873">   3873</a>    * This source code is licensed under the MIT license found in the
<a href="#l3874" class="line" id="l3874">   3874</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3875" class="line" id="l3875">   3875</a>    *)
<a href="#l3876" class="line" id="l3876">   3876</a> 
<a href="#l3877" class="line" id="l3877">   3877</a> react-dom/cjs/react-dom.production.js:
<a href="#l3878" class="line" id="l3878">   3878</a>   (**
<a href="#l3879" class="line" id="l3879">   3879</a>    * @license React
<a href="#l3880" class="line" id="l3880">   3880</a>    * react-dom.production.js
<a href="#l3881" class="line" id="l3881">   3881</a>    *
<a href="#l3882" class="line" id="l3882">   3882</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3883" class="line" id="l3883">   3883</a>    *
<a href="#l3884" class="line" id="l3884">   3884</a>    * This source code is licensed under the MIT license found in the
<a href="#l3885" class="line" id="l3885">   3885</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3886" class="line" id="l3886">   3886</a>    *)
<a href="#l3887" class="line" id="l3887">   3887</a> 
<a href="#l3888" class="line" id="l3888">   3888</a> react-dom/cjs/react-dom-client.production.js:
<a href="#l3889" class="line" id="l3889">   3889</a>   (**
<a href="#l3890" class="line" id="l3890">   3890</a>    * @license React
<a href="#l3891" class="line" id="l3891">   3891</a>    * react-dom-client.production.js
<a href="#l3892" class="line" id="l3892">   3892</a>    *
<a href="#l3893" class="line" id="l3893">   3893</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3894" class="line" id="l3894">   3894</a>    *
<a href="#l3895" class="line" id="l3895">   3895</a>    * This source code is licensed under the MIT license found in the
<a href="#l3896" class="line" id="l3896">   3896</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3897" class="line" id="l3897">   3897</a>    *)
<a href="#l3898" class="line" id="l3898">   3898</a> 
<a href="#l3899" class="line" id="l3899">   3899</a> react-reconciler/cjs/react-reconciler-constants.production.js:
<a href="#l3900" class="line" id="l3900">   3900</a>   (**
<a href="#l3901" class="line" id="l3901">   3901</a>    * @license React
<a href="#l3902" class="line" id="l3902">   3902</a>    * react-reconciler-constants.production.js
<a href="#l3903" class="line" id="l3903">   3903</a>    *
<a href="#l3904" class="line" id="l3904">   3904</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3905" class="line" id="l3905">   3905</a>    *
<a href="#l3906" class="line" id="l3906">   3906</a>    * This source code is licensed under the MIT license found in the
<a href="#l3907" class="line" id="l3907">   3907</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3908" class="line" id="l3908">   3908</a>    *)
<a href="#l3909" class="line" id="l3909">   3909</a> 
<a href="#l3910" class="line" id="l3910">   3910</a> use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
<a href="#l3911" class="line" id="l3911">   3911</a>   (**
<a href="#l3912" class="line" id="l3912">   3912</a>    * @license React
<a href="#l3913" class="line" id="l3913">   3913</a>    * use-sync-external-store-shim.production.js
<a href="#l3914" class="line" id="l3914">   3914</a>    *
<a href="#l3915" class="line" id="l3915">   3915</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3916" class="line" id="l3916">   3916</a>    *
<a href="#l3917" class="line" id="l3917">   3917</a>    * This source code is licensed under the MIT license found in the
<a href="#l3918" class="line" id="l3918">   3918</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3919" class="line" id="l3919">   3919</a>    *)
<a href="#l3920" class="line" id="l3920">   3920</a> 
<a href="#l3921" class="line" id="l3921">   3921</a> use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js:
<a href="#l3922" class="line" id="l3922">   3922</a>   (**
<a href="#l3923" class="line" id="l3923">   3923</a>    * @license React
<a href="#l3924" class="line" id="l3924">   3924</a>    * use-sync-external-store-shim/with-selector.production.js
<a href="#l3925" class="line" id="l3925">   3925</a>    *
<a href="#l3926" class="line" id="l3926">   3926</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3927" class="line" id="l3927">   3927</a>    *
<a href="#l3928" class="line" id="l3928">   3928</a>    * This source code is licensed under the MIT license found in the
<a href="#l3929" class="line" id="l3929">   3929</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3930" class="line" id="l3930">   3930</a>    *)
<a href="#l3931" class="line" id="l3931">   3931</a> 
<a href="#l3932" class="line" id="l3932">   3932</a> react-reconciler/cjs/react-reconciler.production.js:
<a href="#l3933" class="line" id="l3933">   3933</a>   (**
<a href="#l3934" class="line" id="l3934">   3934</a>    * @license React
<a href="#l3935" class="line" id="l3935">   3935</a>    * react-reconciler.production.js
<a href="#l3936" class="line" id="l3936">   3936</a>    *
<a href="#l3937" class="line" id="l3937">   3937</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3938" class="line" id="l3938">   3938</a>    *
<a href="#l3939" class="line" id="l3939">   3939</a>    * This source code is licensed under the MIT license found in the
<a href="#l3940" class="line" id="l3940">   3940</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3941" class="line" id="l3941">   3941</a>    *)
<a href="#l3942" class="line" id="l3942">   3942</a> 
<a href="#l3943" class="line" id="l3943">   3943</a> react/cjs/react-jsx-runtime.production.js:
<a href="#l3944" class="line" id="l3944">   3944</a>   (**
<a href="#l3945" class="line" id="l3945">   3945</a>    * @license React
<a href="#l3946" class="line" id="l3946">   3946</a>    * react-jsx-runtime.production.js
<a href="#l3947" class="line" id="l3947">   3947</a>    *
<a href="#l3948" class="line" id="l3948">   3948</a>    * Copyright (c) Meta Platforms, Inc. and affiliates.
<a href="#l3949" class="line" id="l3949">   3949</a>    *
<a href="#l3950" class="line" id="l3950">   3950</a>    * This source code is licensed under the MIT license found in the
<a href="#l3951" class="line" id="l3951">   3951</a>    * LICENSE file in the root directory of this source tree.
<a href="#l3952" class="line" id="l3952">   3952</a>    *)
<a href="#l3953" class="line" id="l3953">   3953</a> 
<a href="#l3954" class="line" id="l3954">   3954</a> three/build/three.core.js:
<a href="#l3955" class="line" id="l3955">   3955</a> three/build/three.module.js:
<a href="#l3956" class="line" id="l3956">   3956</a>   (**
<a href="#l3957" class="line" id="l3957">   3957</a>    * @license
<a href="#l3958" class="line" id="l3958">   3958</a>    * Copyright 2010-2025 Three.js Authors
<a href="#l3959" class="line" id="l3959">   3959</a>    * SPDX-License-Identifier: MIT
<a href="#l3960" class="line" id="l3960">   3960</a>    *)
<a href="#l3961" class="line" id="l3961">   3961</a> */
</pre>
</div>
</body>
</html>
